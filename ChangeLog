2012-05-10  Jason Stephenson <jstephenson@mvlc.org>

	* Open-ILS/src/sql/Pg/2.0.10-2.0.11-upgrade-db.sql: Add the
	2.0.10-2.0.11 upgrade script.  Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>

2012-03-26  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/web/js/ui/default/serial/subscription/issuance.js: Small
	fix to Holding Code wizard widget The issuance editor has a wizard widget for the holding code field
	which expected a 'grid' as an argument, but then referenced a global
	'iss_grid' variable.  This hurt reusability of this widget.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Lebbeous
	Fogle-Weekley <lebbeous@esilibrary.com>

2012-03-26  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/xul/staff_client/server/serial/manage_subs.js: Serial
	Control: Refresh node map on edit While it would be nice to redraw any affected tree nodes when
	editing, we should at least replace the map data in case it is used
	in other functions.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Lebbeous
	Fogle-Weekley <lebbeous@esilibrary.com>

2012-02-14  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/src/perlmods/OpenILS/Application/Acq/Search.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/200.schema.acq.sql,
	Open-ILS/src/sql/Pg/upgrade/0691.schema.acq_fk_indices.sql: Acq:
	General Search refactor This is a combination of the following three commits from master: 3149433d354889fb 56121886c72b2d41 35fe5b9cbe10b132 The first two were meant for backport to rel_2_0 and rel_2_1 at the
	time, but the backport wasn't done.  They were buggy anyway, and now
	it makes the most sense (I hope) to backport them together with the
	corrective commit all at once.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Jason Stephenson <jason@sigio.com>

2012-04-28  Jason Stephenson <jason@sigio.com>

	* Open-ILS/web/opac/skin/default/js/search_bar.js: Revert "Use
	getItemType() instead of getForm() in searchBarInit()." This reverts commit 47309fd18aad422b06fad51e5588400fd38cf71b.  The reverted commit caused a problem with basic search, and fixing
	the problem with basic search was deemed more important than fixing
	this issue with Advanced seach.  See Launchpad bugs: https://bugs.launchpad.net/evergreen/+bug/979158
	https://bugs.launchpad.net/evergreen/+bug/788629 Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>

2012-01-23  Jason Stephenson <jstephenson@mvlc.org>

	* Open-ILS/src/extras/Makefile.install: Install RPC::XML::Function
	on Ubuntu Lucid.  Change the LUCID_CPAN target to install RPC::XML::Function instead
	of XML::RPC.  Base on public bug report by Ben Shum (LP 920535).  Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>

2011-08-12  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/upgrade/0599.data.fix_author_other_index.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.fix_author_other_index.sql: Stamped
	upgrade script for "lp 823496: do not fail to index personal names
	that have relators" Signed-off-by: Mike Rylander <mrylander@gmail.com> Conflicts: 	Open-ILS/src/sql/Pg/002.schema.config.sql Signed-off-by: Jason Stephenson <jason@sigio.com>

2011-08-09  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.fix_author_other_index.sql: lp
	823496: don't fail to index personal names that have relators The default definition for the author|other index inadvertantly
	excluded names from 600, 700, 720, and 800 fields that have relator
	values ($e) or codes ($4).  Signed-off-by: Galen Charlton <gmc@esilibrary.com> Signed-off-by:
	Jason Stephenson <jason@sigio.com>

2012-05-04  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Money.pm: This
	addresses the issue where issuing refunds results in a negative
	ballance and it is then impossible to close the transaction by
	creating new billings.  https://bugs.launchpad.net/evergreen/+bug/758982 Signed-off-by: Bill Erickson <berick@esilibrary.com> Signed-off-by:
	Jason Stephenson <jstephenson@mvlc.org>

2012-04-25  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/xul/staff_client/server/serial/manage_dists.js,
	Open-ILS/xul/staff_client/server/serial/manage_items.js,
	Open-ILS/xul/staff_client/server/serial/manage_subs.js,
	Open-ILS/xul/staff_client/server/serial/ssub_editor.js: Allow
	subscriptions at org units without volumes Subscriptions are sometimes owned at the consortium or system level,
	so forcing can_have_vols() to be true was incorrect.  This commit removes those checks.  In addition, we also remove some
	dead code and make the subscription org unit selector consistent
	with the distribution org unit selector.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Lebbeous
	Fogle-Weekley <lebbeous@esilibrary.com>

2012-04-17  Jeff Godin <jgodin@tadl.org>

	* Open-ILS/src/perlmods/OpenILS/WWW/AddedContent/Syndetic.pm: Fix LP
	984039: correct Syndetic Kirkus Reviews Use correct "filename" component of URL for retrieving Kirkus
	Reviews content from Syndetic Solutions.  Correct filename confirmed by Bowker technical support, and by
	empirical tests.  Signed-off-by: Jeff Godin <jgodin@tadl.org> Signed-off-by: Michael
	Peters <mrpeters@library.in.gov>

2012-04-03  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/web/opac/skin/default/js/holds.js,
	Open-ILS/web/opac/skin/default/js/myopac.js: Fix some "null" instead
	of blank values in JSPac Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Michael Peters <mrpeters@library.in.gov> Signed-off-by: Lebbeous
	Fogle-Weekley <lebbeous@esilibrary.com>

2012-04-13  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm: Better
	Prediction for Incomplete Chronologies While relatively rare, some journals record only the year on the
	cover, even if they come out monthly or weekly.  This commit expands
	our previous support for serials with no chronology at all to cover
	serials with partial chronology.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Lebbeous
	Fogle-Weekley <lebbeous@esilibrary.com>

2012-03-21  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/c-apps/oils_sql.c: Shooting 2 obvious thinkos d-e-d
	dead. Pardon the rogueness.  Signed-off-by: Mike Rylander <mrylander@gmail.com>

2012-02-02  Jason Stephenson <jstephenson@mvlc.org>

	* Open-ILS/web/opac/skin/default/js/search_bar.js: Use getItemType()
	instead of getForm() in searchBarInit().  This seems to actually fix the problem with the item type limiter
	being lost when going from advanced search to the results page.  Looks like the wrong method was being used to set the form_selector
	value in search_bar.js. It was being set to the web form itself and
	not to the value of the it (item type) parameter.  Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-11-01  Liam Whalen <lwhalen@evergreen-dev.catalogue.nrcan.gc.ca>

	* Open-ILS/web/opac/skin/default/js/search_bar.js: When sorting a
	search results set the isFilterSort variable is passed to
	searchBarSubmit.  In side searchBarSumbit there is a call to the
	opac_utils.js function clearSearchParams function.  This removes all
	search paramaters when sorting a result set, which is not the
	desired effect.  I have wraped clearSearchParams in a check to make
	sure isFilterSort is not set before calling the clearSearchParams
	function, and this check ensures that the current search's
	paramaters are passed to sort operations.  Signed-off-by: Liam Whalen
	<lwhalen@evergreen-dev.catalogue.nrcan.gc.ca> Signed-off-by: Jason
	Stephenson <jason@sigio.com> Signed-off-by: Mike Rylander
	<mrylander@gmail.com>

2012-02-24  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/web/opac/skin/default/js/holds.js: Avoid JSPAC hold
	placement interface problems when no holdable copies This addresses a bug brought to my attention by John Jones.  When you're trying to place certain holds (at least title level
	holds) on records for which there are no holdable formats (no
	descriptors as returned by
	open-ils.search.metabib.record_to_descriptors), then
	holdArgs.recordDescriptors in holds.js can be an empty array.  There
	is a line of code that assumes this will never happen.  The end user-visible result of the javascript failing here is an
	alert() dialog about phone number format, but this is a red herring.
	That only happens because the problem code is in one big function
	that has too many responsibilites.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2012-02-01  Bill Erickson <berick@esilibrary.com>

	*
	Open-ILS/web/js/ui/default/conify/global/action_trigger/event_defin
	ition.js: Paging repairs for Event definition admin UI If there are multiple event definitions with the same name that lie
	along the page boundaries, it's possible to page through event
	definitions seeing some def's multiple times and others never.  This
	is a result of sorting solely on event def. name when fetching event
	def's for display.  This patch adds secondary (and tertiary, and
	quaternary, and quinary) sort columns as tie breakers to guarantee a
	unique set of defs across pages.  Signed-off-by: Bill Erickson <berick@esilibrary.com> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2012-02-24  Mike Rylander <mrylander@gmail.com>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Driver/Pg/QueryPa
	rser.pm: Correctly quote regexp-y characters in phrase quoting
	helper There was one extra character that caused the use of quotemeta() to
	not actually happen.  This broke two things:   1) phrase searching when the phrase had certain special characters
	        in it -- test case: "c++"   2) use of relevance bumps in the same situation Signed-off-by: Mike Rylander <mrylander@gmail.com>

2012-01-30  Thomas Berezansky <tsbere@mvlc.org>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm: Stop targeter crash on empty metarecord with holds By checking for 1 or more records before looking them up.  Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Ben Shum <bshum@biblio.org> Signed-off-by: Mike Rylander
	<mrylander@gmail.com>

2012-02-14  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/OpenILS/Utils/MFHD/Caption.pm,
	Open-ILS/src/perlmods/OpenILS/Utils/MFHD/test/mfhddata.txt: Correct
	special winter handling in predictions The current serials prediction code has an exception for handling
	cases where 'Winter 2010' is followed by 'Spring 2010' rather than
	'Spring 2011'.  This exception assumed the more common case of a
	combined subfield $y, e.g.: $yps21,22,23,24 In doing so, it incorrectly handled less common cases where the $y
	is listed separately: $yps21$yps22$yps23$yps24 This change (with test data) ensures we only check the first $y for
	our 'early winter' exception.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Mike
	Rylander <mrylander@gmail.com>

2012-02-01  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Booking.pm: Booking:
	make pick up interface show resources captured for reservation ...  ... even beyond the first day of the reservation.  I can think of no
	reason why this limitation existed in the first place.  Also, just replace naive_start_of_day() with "today" Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2012-01-19  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Search/Biblio.pm: Handle
	search timeouts more gracefully Another tweak courtesy of berick Returns 0 results if open-ils.storage timeouts instead of a nasty
	uncaught undefined ARRAY exception resulting in an OPAC "spinning
	wheel of death" (formerly the "green knight rider bar of death".  Note that in the event of storage timeouts, you should tune and/or
	beef-up your database.  Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2012-01-22  Dan Scott <dscott@laurentian.ca>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/metabib
	.pm: Fix "prefered_language" typo that blocked preferred language "preferred_language" is used everywhere else, but in the crucial
	core of metabib.pm the "prefered_language" variant is used to check
	on the value - hence, nothing other than the default "eng" is being used. Fix
	that.  Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by: Mike
	Rylander <mrylander@gmail.com>

2011-12-07  James Fournie <jfournie@sitka.bclibraries.ca>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Invoice.pm: Acq fix
	for LP#901378 Proratable invoice charges do not have a fund_debit, we need to
	check for this before attempting to delete the charge.  If there's
	no fund_debit we can generally assume that there's no corresponding
	debit to this charge and skip trying to delete it.  Signed-off-by: James Fournie <jfournie@sitka.bclibraries.ca>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2012-01-17  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/web/opac/skin/default/js/myopac.js: Don't show estimated
	wait for negative estimates JSPac code was just checking for the truth of the estimated_wait
	return, but the estimated_wait return can be -1 under some
	circumstances.  Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Bill Erickson <berick@esilibrary.com>

2012-01-10  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/patron/hold_details.js: Remove
	'boo' alert in hold details interface Willing to let any surprises here be natural. :-)  We can re-bug if
	there are issues.  Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Bill Erickson <berick@esilibrary.com>

2012-01-10  Dan Scott <dscott@laurentian.ca>

	* Open-ILS/xul/staff_client/server/skin/print.css,
	Open-ILS/xul/staff_client/server/skin/serial.css: Add customization
	to staff client serial and print CSS files The *_custom.css variants of these are created automatically at
	install time, so give the parents the ability to actually use them.  Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by: Jason
	Etheridge <jason@esilibrary.com>

2012-01-09  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0665.schema.renewal_checkout_counting.s
	ql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.schema.renewal_checkout_counting.s
	ql: Stamping upgrade script for the backport of the renewal counting
	fix Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-12-16  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/sql/Pg/100.circ_matrix.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.schema.renewal_checkout_counting.s
	ql: LP822918 fix adapted for rel_2_0 Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-09-26  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/WWW/AddedContent.pm: LP#845763
	remote added content breaks remote added content breaks when using locally served content Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Dan Scott <dan@coffeecode.net>

2011-12-08  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/web/opac/locale/en-US/opac.dtd,
	Open-ILS/web/opac/skin/default/js/myopac.js,
	Open-ILS/web/opac/skin/default/xml/myopac/myopac_holds.xml,
	Open-ILS/xul/staff_client/server/circ/util.js,
	Open-ILS/xul/staff_client/server/locale/en-US/circ.properties: Show
	Suspended holds as Suspended In the staff client and JSPac show the status of a suspended hold as
	Suspended rather than something like "Waiting for copy".  Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Bill Erickson <berick@esilibrary.com>

2011-12-16  Dan Scott <dscott@laurentian.ca>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0658.schema.acn_dewey_sort_fix.sql,
	Open-ILS/src/sql/Pg/upgrade/xxxx.dewey-sort-fix.sql: LP# 902667 -
	Wrap upgrade script for Dewey sorting Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-12-10  James Fournie <jfournie@sitka.bclibraries.ca>

	* Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/xxxx.dewey-sort-fix.sql: Fix Dewey call
	number sorting Ported over Koha commit aef8358c - fix for Koha Bug 4265.  Further
	documented in Evergreen LP # 902667 Here's the description from the
	commit message by Magnus Enger: C4::ClassSortRoutine::Dewey turns "306 Les" into "306_Les" for
	items.cn_sort and MARC-field 952$6, which results in "306.46 Les"
	being sorted before "306 Les" in the OPAC.  With this patch, "306
	Les" is turned into "306_000000000000000_Les".  Signed-off-by: James Fournie <jfournie@sitka.bclibraries.ca>
	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-12-14  bott <bott@grpl.org>

	* Open-ILS/web/opac/skin/default/js/rdetail.js: Allow for the page
	offset when listing the "Result x of y" values.  The record details page did not show the page offset correctly, so
	result 13 would show up as "Result 3 of ###", and result 23 would
	also show up as "Result 3 of ###".  Signed-off-by: bott <bott@grpl.org> Signed-off-by: Dan Scott
	<dscott@laurentian.ca>

2011-12-13  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: Clear
	hold shelf/shelf_expire time for pickup lib change If a hold is on the holds shelf and the pickup library changes,
	clear the shelf_time and shelf_expire_time, since the hold is now in
	transit.  This is particularly important for avoiding action_trigger events
	for the "hold_request.shelf_expires_soon" hook for what is now an
	in-transit item.  Signed-off-by: Bill Erickson <berick@esilibrary.com> Signed-off-by:
	Thomas Berezansky <tsbere@mvlc.org>

2011-12-05  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: Code
	comments and tweaks for lost processing This commit is intended to do the following: * Fix case where MISSING status is not retained for items   being sent 'home' (as it was in previous versions) * Be more explicit about when we unset the LOST status and when   we do not in checkin_handle_lost() * Prevent update of the copy in checkin_handle_lost() unless we   actually change the status * Restore log messages for special handling of LOST/MISSING   checkins away from 'home' * Provide additional code comments to clarify intended behavior Note: Given the current restructure, MISSING item behavior is no
	longer affected by 'lost_immediately_available' setting.  That
	seemed more bug than feature, and can be implemented later (perhaps
	as a separate setting) if required.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Jason
	Stephenson <jstephenson@mvlc.org>

2011-11-29  Jason Stephenson <jstephenson@mvlc.org>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: Check
	OILS_SETTING_LOST_IMMEDIATELY_AVAILABLE in checkin_handle_lost.  Check the value of OILS_SETTING_LOST_IMMEDIATELY_AVAILABLE before
	changing the copy status in checkin_handle_lost. This makes the
	setting actually do something.  Add a couple of blank lines to aid in readability.  Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>
	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-11-17  Jason Stephenson <jstephenson@mvlc.org>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: Fix
	LP851000.  Remove about 14 lines from OpenILS/Application/Circ/Circulate.pm in
	the checkin_handle_circ subroutine that check whether or not the
	checkin happens at the copy's circ_lib and the value of the
	circ.lost_immediately_available org unit setting.  This change causes the handle_lost subroutine to run regardless of
	where the checkin takes place for a more consistent experience.  Whether or not billings are voided, overdues restored, etc. is still
	determined by the copy's circ_lib.  Given how the hold targeter and transit code works, it does not
	appear the the circ.lost_immediately_available setting could ever do
	what it was intended to do. Given these changes to the code it is
	now unnecessary.  Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>
	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-11-28  Dan Scott <dscott@laurentian.ca>

	* Open-ILS/src/extras/Makefile.install: Revert Lucid prereq for
	PostgreSQL 9.0 client rel_2_0 only requires PostgreSQL 8.4; commit
	f87437cb1e209eba04c4719adbdf2ddc21b36f04 pushed the prereq to 9.0
	but as that requires adding backport repos many sites will break
	when trying to just upgrade from 2.0.9 -> 2.0.10. So, revert that.  Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-11-23  Ben Shum <bshum@biblio.org>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm: Fix for LP894125 - reshelving interval Update to reshelving code to utilize actor.org_unit_ancestor_setting
	function and properly retrieve org settings for
	"circ.reshelving_complete.interval" for org unit or ancestors.  Signed-off-by: Ben Shum <bshum@biblio.org> Signed-off-by: Jason
	Stephenson <jstephenson@mvlc.org>

2011-11-22  Dan Scott <dscott@laurentian.ca>

	* Open-ILS/xul/staff_client/server/cat/bib_brief.xul: Enable record
	summary to be scrollable at larger font sizes The record summary at the top of the cataloguing interfaces appears
	to determine its size based on the "normal" font size at load; then,
	when a larger font size is applied to the page, the text gets hidden
	by the fixed size of the groupbox.  Ideally the groupbox would
	adjust to accomodate the larger font size, but after trying many
	different approaches the best short-term approach seems to be to
	enable overflow so that scrollbars can appear when necessary.  Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by: Jason
	Etheridge <jason@esilibrary.com>

2011-11-15  James Fournie <jfournie@sitka.bclibraries.ca>

	* Open-ILS/xul/staff_client/server/cat/copy_browser.js: 
	Quasi-backport fixes a bug whereby the copy browser does not
	automatically refresh after adding volumes.  This bug is fixed in
	future versions by git commit bcd6f20b but the bugfix itself is not
	noted in that commit message.  Signed-off-by: James Fournie <jfournie@sitka.bclibraries.ca>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-11-17  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/web/opac/skin/default/js/rdetail.js,
	Open-ILS/web/opac/skin/default/js/result_common.js: Switch to new
	Google Books API; make SSL friendly As implied in the title, this commit does two things.  First, it
	switches to the new Google Books API (which is both imminent and
	also necessary to make SSL calls work).  From what I have read and
	experienced, we do not need an API key to do searches and previews.
	I have also not hit any kind of unauthenticated limit in several
	days of heavy testing, so I would figure we are safe (at this point)
	for normal end-user OPAC browsing.  Second, all Google Book requests are now done over https.  This
	eliminates the majority of mixed content warnings when browsing
	securely, though you still get a warning when you actual do preview
	a book.  In addition to possibly implementing protocol detection (rather than
	doing https all the time as a "lowest" common denominator), there
	are a few minor points where we might consider future changes.
	Those points are commented within the code.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Dan Scott
	<dscott@laurentian.ca>

2011-11-15  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0649.schema.fix_full_circ_count_view.sq
	l,
	Open-ILS/src/sql/Pg/upgrade/XXXX.schema.fix_full_circ_count_view.sq
	l: Stamped upgrade for full circ count view fix Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-09-29  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/extend-reporter.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.schema.fix_full_circ_count_view.sq
	l: Use DISTINCT in counts to avoid dupes Otherwise you get: Legacy count + 2(normal count)(aged count) Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-09-29  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/sql/Pg/extend-reporter.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.schema.fix_full_circ_count_view.sq
	l: Full Circ Count View Amplifies Legacy Circs The current extend_reported.full_circ_count sums the legacy circ
	count column, but this results in amplifying the count by the number
	of current circs in the system.  This commit adds the legacy count
	to the GROUP BY instead of summing it.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Mike
	Rylander <mrylander@gmail.com>

2011-11-01  Liam Whalen <lwhalen@evergreen-dev.catalogue.nrcan.gc.ca>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: Aligned the MARC
	editor subfields to 'start' fixes long subfield display When viewing a record in the MARC editor that has extremely long
	entries in a subfield, the output would align in the center of the
	subfield making the output hard to read.  This patch adds an align:
	'start' option to both the subfield, and the subfield code elements
	 in the marcSubfield function to make the subfields align in a more
	readable manner.  Signed-off-by: Liam Whalen
	<lwhalen@evergreen-dev.catalogue.nrcan.gc.ca> Signed-off-by: Mike
	Rylander <mrylander@gmail.com>

2011-11-15  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/web/js/ui/default/actor/user/register.js: Patch from Jeff
	Davis (SITKA) fixing cardless patron updates Quoth the bug report
	(https://bugs.launchpad.net/evergreen/+bug/851110):   On our Evergreen 2.0.8 system, it sometimes arises that a patron's
	  card gets deleted. If it was the patron's only card, it becomes
	  impossible to add a new card to the account via the staff client.    How to reproduce:   1. Retrieve a patron record for a patron who has no associated
	  card.  2. Click the Edit button.    3. Click Replace Barcode and enter a new barcode.    4. Click Save. This does not work - the process hangs, and if you
	  hit Reload, you will find that your changes were not saved.    I believe this happens because some code in register.js assumes
	  the patron has at least one card. I have a potential fix that this
	  comment box is too small to contain ... uh, that is to say, I will
	  post it momentarily.  Which he did, and I applied.  Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-10-19  Steven Callender <stevecallender@esilibrary.com>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm: Reshelving update.  Update to the reshelving code to make it faster and utilize the new
	status change time field on asset.copy.  Signed-off-by: Steven Callender <stevecallender@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-10-23  Dan Scott <dscott@laurentian.ca>

	* Open-ILS/src/c-apps/Makefile.am, Open-ILS/src/c-apps/idlval.c: 
	Make idlval build, rather than be dead code The tool "idlval" contained in Open-ILS/src/c-apps can be used to
	check the correctness of fieldmapper definitions in files like
	Open-ILS/examples/fm_IDL.xml - but currently does not have a build
	target, nor does it compile cleanly due to the use of unspecified
	OpenSRF header files. This commit adds a build target, fixes the
	compile problems, and installs the tool in the bin directory.  Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by: Mike
	Rylander <mrylander@gmail.com>

2011-11-08  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/chrome/content/cat/opac.js,
	Open-ILS/xul/staff_client/server/cat/util.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js: 
	LP887822 mint_condition/Quality not set correctly during item creation.  Specifically, the Javascript object for a new item (acp) does not
	explicitly set the mint_condition field, leaving it null. The item
	attribute editor treats the null as false (which it displays as
	"Mediocre" for that field). The database has a not null constraint
	the corresponding column in asset.copy, and defaults to true. So a
	new item in the attribute editor will show "Mediocre", but when
	actually created, will become "Good".  This branch just sets mint_condition to true when an item is
	created.  Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-10-11  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger/Reactor.pm,
	Open-ILS/src/support-scripts/edi_pusher.pl: More filtering of
	characters that could end up in PO JEDI template output Backslashes cause problems too.  Let's JSON encode this thing and
	get it right once and for all.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Ben Shum <bshum@biblio.org> Signed-off-by: Bill
	Erickson <berick@esilibrary.com>

2011-11-10  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/web/js/dojo/openils/widget/HoldingCode.js,
	Open-ILS/web/js/ui/default/serial/subscription/issuance.js: Serials:
	allow freer input in holding code mini-wizard In the Subscription Details interface of the Alternate Serials
	Control View, under the Issuance tab, if you create a new issuance
	you can now enter things like "01/02" in (say) the month field to
	denote a combined January/February issue.  All those fields are now
	free-form, whereas some of them used to be numeric only.  Also, avoid an occasional issue where an error message about
	dijit.form.DateTextBox not being a constructor would appear in the
	JavaScript console.  The problem was in a race condition among some
	co-dependent JavaScript files that were all being loaded at the same
	time.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-11-10  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/examples/apache/eg_vhost.conf,
	Open-ILS/web/opac/common/js/RemoteRequest.js,
	Open-ILS/xul/staff_client/chrome/content/util/network.js: LP88653
	force SSL for requests from local XUL Modifies RemoteRequest.js to convert any http:// request URL to
	https:// if the requesting location has a chrome:// protocol.  Modifies util/network.js such that any use of util.network.request
	(as opposed to util.network.simple_request) will assume "secure" for
	the resulting request.  Adds an example to the bottom of eg_vhost.conf for forcing SSL for
	an entire site (OPAC and everything), courtesy of Dan Wells.  Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Dan Wells <dbw2@calvin.edu>

2011-11-09  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: 
	XML.ignoreWhitespace causes syntax errors So remove it.  Disabling pretty printing appears to be enough to fix the marc
	editor.  Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Jason Etheridge <jason@esilibrary.com>

2011-11-07  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: Fix vanishing
	whitespace in marc editor XML.ignoreWhitespace and XML.prettyPrinting cause whitespace to
	vanish.  So disable them at the top of marcedit.js.  Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Jason Etheridge <jason@esilibrary.com>

2011-10-31  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/SIP/Patron.pm: lp849447: trival
	stylistic tweaks - rename variable avoid double-negative - avoid 'Variable declared in conditional statement' perlcritic
	gripe Signed-off-by: Galen Charlton <gmc@esilibrary.com> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-09-14  Sarah E. Chodrow <sarah.chodrow@bibliotheca-itg.com>

	* Open-ILS/src/perlmods/OpenILS/SIP/Patron.pm: Initial patch from
	Sarah Chodrow on LP bug 849447.  Also check for standing penalties and expired cards when checking if
	it is ok for the patron to checkout, charge_ok.  Developer's Certificate of Origin 1.1 By making a contribution to this project, I certify that: (a) The contribution was created in whole or in part by me and I     have the right to submit it under the open source license     indicated in the file; or (b) The contribution is based upon previous work that, to the best     of my knowledge, is covered under an appropriate open source     license and I have the right under that license to submit that     work with modifications, whether created in whole or in part     by me, under the same open source license (unless I am     permitted to submit under a different license), as indicated     in the file; or (c) The contribution was provided directly to me by some other     person who certified (a), (b) or (c) and I have not modified     it.  (d) I understand and agree that this project and the contribution     are public and that a record of the contribution (including all     personal information I submit with it, including my sign-off) is     maintained indefinitely and may be redistributed consistent with     this project or the open source license(s) involved.  Signed-off-by: Sarah E. Chodrow (sarah.chodrow@bibliotheca-itg.com) Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-11-08  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/xul/staff_client/chrome/content/main/constants.js: Protect
	against slony replication lag, LP#621448 Make open-ils.circ.captured_holds.id_list.* API calls authoritative
	within the staff client to avoid replication-lag related stale
	displays.  Inspired by James Fournie at SITKA.  Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-09-27  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/web/opac/skin/default/js/holds.js: LP#860845 hold
	placement UI can break hold placement UI can break and give misleading error on Submit Adds some defensive coding, but since I don't quite grok everything
	going on here, may not be the best fix.  Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-11-01  James Fournie <jfournie@sitka.bclibraries.ca>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Search.pm: This
	prevents the acq unified_search method from returning anything other
	than the objects of the expected type.  This is to address LP 884991 in which Acq users get a perm error for
	each result of a search that they don't have access to retrieve.
	They shouldn't even know about the existence of anything they don't
	have access to retrieve.  Signed-off-by: James Fournie <jfournie@sitka.bclibraries.ca>
	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-09-20  James Fournie <jfournie@sitka.bclibraries.ca>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/0646.schema.lp854972_copy_counts_unshad
	ow.sql: Previously invisible copies showed as beige in the staff
	client, they stopped doing this in 2.0 This is because in 2.0 the copy counts logic was moved from
	open-ils.storage.biblio.record_entry.copy_count.staff to an
	in-database function wrapped in
	open-ils.search.biblio.record.copy_count.staff.  Both methods
	returned various counts including an 'unshadow' count, however the
	'unshadow' in the new database function was not completed and it has
	only been returning a simple copy count rather than a count of opac
	visible copies as it should be to replicate the old behaviour.  Signed-off-by: James Fournie <jfournie@sitka.bclibraries.ca>
	Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-10-06  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/web/js/dojo/openils/acq/nls/acq.js,
	Open-ILS/web/js/ui/default/acq/common/li_table.js: Acq: better error
	message if trying to create PO without provider or agency Before now, if you leave either the provider or ordering agency
	fields blank in the "Create Purchase Order" dialog, you get a
	nonsensical warning about prepayment.  This fixes that.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-11-03  Liam Whalen <lwhalen@nrcan-rncan.gc.ca>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Modified
	authority.indexing_ingest_or_delete to update MARC data The authority.indexing_ingest_or_delete trigger in the update script
	was missing a call to authority.propagate_changes which is
	responsible for updating the MARC data of records affected by an
	auhtority merge.  This patch adds the call to
	authority.propagate_changes as it appears in the
	authority.indexing_ingest_or_delete trigger from the file
	999.functions.global.sql.  Signed-off-by: Liam Whalen <lwhalen@nrcan-rncan.gc.ca>
	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-11-02  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Storage/QueryParser.pm: 
	2.0-ification of the phrase-search fix for LP#834042 Signed-off-by: Mike Rylander <mrylander@gmail.com> Signed-off-by:
	Bill Erickson <berick@esilibrary.com>

2011-10-06  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/web/js/ui/default/acq/common/li_table.js,
	Open-ILS/web/js/ui/default/acq/search/unified.js: Acq: fix a bug
	that sometimes prevents the general search page from loading Within Acquisitions General Search, javascript included from one
	file in the <head> relies on the variable "localeStrings" being
	initialized by javascript included from a file in <body>.  Sometimes
	the wrong javascript wins the race, you get an error about
	localeStrings being undefined in the Javascript console, and the
	page stops loading.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-11-01  Dan Scott <dscott@laurentian.ca>

	* Open-ILS/src/perlmods/OpenILS/WWW/AddedContent/Amazon.pm: Force
	Amazon AC requests to use 10-digit ISBNs Inspired by a patch submitted by Ian Bays <ian.bays@ptfs-europe.com>
	via https://bugs.launchpad.net/evergreen/+bug/870171, this patch
	takes the incoming key and, if it is longer than 10 characters (a
	10-digit ISBN or Amazon ID), attempts to normalize it and return a
	10-digit ISBN.  We don't normalize all incoming keys because some sites are horribly
	abusing the 020 MARC field to include an Amazon ID instead of an
	ISBN - but that works in practice and we'd rather not break working
	installations if we can avoid it.  Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-10-19  Jason Stephenson <jstephenson@mvlc.org>

	* Open-ILS/src/perlmods/OpenILS/Application/Actor.pm: Use ne on line
	631 of Actor.pm.  This is so that we stop getting errors like Argument "1319057146.8881216485.4819607085" isn't numeric in numeric
	ne (!=) at /usr/local/share/perl/5.10.1/OpenILS/Application/Actor.pm
	line 630.  in /openils/var/log/open-ils.actor_stderr.log Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>
	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-10-27  Michael Peters <mrpeters@library.in.gov>

	* Open-ILS/examples/apache/eg.conf: A tweak to eg.conf to prevent
	against the BEAST exploit in TLS/SSL Based on recommedation from

	https://community.qualys.com/blogs/securitylabs/2011/10/17/mitigating-the-beast-attack-on-tlsSigned-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-10-05  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Search/Biblio.pm: Z39.50
	local catalog fetch-more repairs Fixes the following problem: When paging through local catalog results in the Z39.50 interface,
	paging off then end of the local results would result in an unknown
	server error caused by trying to retrieve an empty list of records.  $list->{count} in this context is the overall hit count, not the
	counts in the current page of results.  Note also if {count} is
	zero, the list of IDs will be undef, so we use both.  Signed-off-by: Bill Erickson <berick@esilibrary.com> Signed-off-by:
	Jason Etheridge <jason@esilibrary.com>

2011-10-06  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Order.pm: Avoid a
	possible bug in selection list deletion This particularly matters for the "ephemeral," unnamed selection
	list that Acquisitions General Search uses to hold bib records
	represented as lineitems, as that list is deleted for the next run
	of that kind of search.  It's possible to get lineitems onto that list that are in a state
	other than "new".  Code that deletes this list first deletes the
	lineitems that belong to it, but that code formerly assumed that
	there are two types of lineitems. "new" ones (that should be
	deleted) and ones that belong to purchase orders (that should be
	deatched).  That doesn't necessarily cover all possible lineitems on
	the picklist, so deletion ultimately fails.  This fixes that.  [update: now this bugfix incorporates a bugfix, the need for which
	was detected by Ben Shum. See LP #869581] Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-10-16  Dan Scott <dscott@laurentian.ca>

	* Open-ILS/src/perlmods/OpenILS/Application/Fielder.pm: Cache
	open-ils.fielder results by locale The problem was particularly visible in search facets, but existed
	before: the cache key used for fielder results did not take locale
	into account, so on a multi-locale system the first locale won and
	populated the cache for all other locales.  Use a session locale if provided, otherwise default to the locale
	set in opensrf.xml Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by:
	Thomas Berezansky <tsbere@mvlc.org>

2011-10-04  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/web/opac/skin/default/js/adv_global.js: Add "submit on
	enter" to all advanced search boxes Instead of just the one with an ID specified.  Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Dan Scott <dscott@laurentian.ca>

2011-10-13  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0639.schema.asset_merge_record_assets.s
	ql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.schema.asset_merge_record_assets.s
	ql: Stamping upgrade for asset.merge_record_assets fix from dbs Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-10-13  Dan Scott <dscott@laurentian.ca>

	* Open-ILS/src/sql/Pg/999.functions.global.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.schema.asset_merge_record_assets.s
	ql: Fix located URI merging in action.merge_record_assets() Perhaps due to the unexpected results of the XPath expression, which
	returns a count of nodes for subfields, etc, rather than just a
	count of the number of 856 datafields, NULL was being concatenated
	onto a string - which of course made the string NULL.  Use COALESCE() to prevent the NULLness from spreading and enable
	action.merge_record_assets() to do the right thing.  Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by: Mike
	Rylander <mrylander@gmail.com>

2011-09-16  Jason Stephenson <jstephenson@mvlc.org>

	* Open-ILS/src/perlmods/OpenILS/Application/Search/Biblio.pm: Fix
	z39.50 import isbn and issn searches on local catalog.  Make cat_search_z_style_wrapper do identifier searches for isbn and
	issn.  Modify the_quest_for_knowledge to accept identifier searches for
	isbn and issn.  Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>
	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-10-11  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/c-apps/oils_auth.c: Authentication block logging * Login too-many-auth-failures message at Info level instead of
	Internal * Log the username getting blocked Signed-off-by: Bill Erickson <berick@esilibrary.com> Signed-off-by:
	Galen Charlton <gmc@esilibrary.com>

2011-10-10  Dan Scott <dscott@laurentian.ca>

	* Open-ILS/src/extras/Makefile.install: Fix broken
	Net::Z3950::SimpleServer 1.14 install Pin the install of Net::Z3950::SimpleServer to the
	known-to-work-with yaz 3.0.x version, 1.12. 1.14 introduced
	dependencies on yaz 4.1.x that can't be easily worked around.  Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by: Galen
	Charlton <gmc@esilibrary.com>

2011-10-06  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/c-apps/oils_auth.c: fix authentication failure Ensure that the auth_limit values are read when open-ils.auth
	initializes, not during oilsAuthInit().  This solves a problem
	observed on brick-based setups where authentication could
	incorrectly fail because the drone that processes
	open-ils.auth.authenticate.complete didn't have the the block count
	value initialized yet.  Also fixed type nit when compare the fail count to the block limit.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> Signed-off-by:
	Bill Erickson <berick@esilibrary.com>

2011-10-04  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/web/js/ui/default/acq/common/li_table.js,
	Open-ILS/web/js/ui/default/acq/common/li_table_pager.js,
	Open-ILS/web/js/ui/default/acq/search/unified.js: Really add
	*entire* selection list to a purchase order, when desired, and generally do what a user would expect when, in Acq, the user
	executes an operation on "all items".  This addresses LaunchPad bug #810030.  The fundamental issue is that an AcqLiTable, which is used in
	several different ways in different interfaces, may be representing
	items on a selection list (for example), but it doesn't necessarily
	know all of the items that belong to that selection list.  It only
	knows what it has drawn.  This addresses that deficiency by teaching the getSelected() method
	some new tricks so that it can consult the server in the various
	ways appropriate to getting a list of /all/ the items on a selection
	list, a purchase order, a virtual PO, a set of search results, etc.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-10-04  Jason Etheridge <jason@esilibrary.com>

	* : commit 1c85f6e9c3b97f1e71d73c41baf4b21226ffe580 Author: Thomas
	Berezansky <tsbere@mvlc.org> Date:   Fri Aug 12 09:17:46 2011 -0400

2011-10-04  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/2.0.9-2.0.10-upgrade-db.sql: Upgrade script
	for 2.0.10 Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-09-24  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/perlmods/OpenILS/Application/Actor.pm,
	Open-ILS/web/opac/skin/default/js/myopac.js,
	Open-ILS/web/opac/skin/default/xml/myopac/myopac_summary.xml: 
	Require password to change email/username Alter backend to check password period, not just for password
	changes.  Add form elements for asking for current password to
	JSPac.  Add handling for said form elements where needed.  Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Bill Erickson <berick@esilibrary.com>

2011-09-12  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/xul/staff_client/chrome/content/auth/session.js: When
	workstation is invalid request a new seed The original one may no longer be valid Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Bill Erickson <berick@esilibrary.com>

2011-09-01  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/examples/opensrf.xml.example,
	Open-ILS/src/c-apps/oils_auth.c: Make more auth values configurable Amount of time seed is valid Amount of time to keep failure count in
	memcache since last auth event Number of failures before locking out
	auth attempts Also, remove seed from memcache once it has been used once.  Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Bill Erickson <berick@esilibrary.com>

2011-08-30  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/c-apps/oils_auth.c: Brute Force protection for
	authentication Count auth failures in memcache.  If 10+ have occurred cause
	failure.  After 90 seconds of no activity counter resets.  Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Bill Erickson <berick@esilibrary.com>

2011-09-30  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/examples/fm_IDL.xml: link asset.copy_template.status to
	config.copy_status in the IDL If nothing else, this provides a dropdown for status in the copy
	template editor (the one for Serials, under the admin menus, not the
	one on the copy editing interface).  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-10-03  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/web/opac/common/js/org_utils.js,
	Open-ILS/web/opac/skin/default/js/rdetail.js: JSPAC: Fix a bug (I
	think) in orgIsMine(), and show more MFHD holdings ...  ... when search scope would have it so.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-09-10  Dan Scott <dscott@laurentian.ca>

	* Open-ILS/src/extras/Makefile.install: Refresh dynamic link cache
	after libjs install The build of SpiderMonkey can fail if it can't find the freshly
	installed libjs library, so run ldconfig after building libjs to
	avoid that bit o' fun.  Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-09-29  Dan Scott <dscott@laurentian.ca>

	* Open-ILS/web/opac/skin/default/js/rdetail.js: LP740320: Make
	<enter> submit the new bookbag dialog For the keyboard jockeys out there - if the enter key doesn't
	submit, the UI reviewer will not commit.  Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-08-26  James Fournie <jfournie@sitka.bclibraries.ca>

	* Open-ILS/web/opac/skin/default/xml/page_rdetail.xml: Initial
	dialog isn't quite wide enough, here's a hackish way to fix it Signed-off-by: James Fournie <jfournie@sitka.bclibraries.ca>
	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-08-26  James Fournie <jfournie@sitka.bclibraries.ca>

	* Open-ILS/web/opac/skin/default/xml/page_rdetail.xml: Should
	probably use a more common button rather than the one for the
	advanced search Signed-off-by: James Fournie <jfournie@sitka.bclibraries.ca>
	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-08-26  James Fournie <jfournie@sitka.bclibraries.ca>

	* Open-ILS/web/opac/skin/default/js/rdetail.js: This makes more
	sense as an alert; the Dojo dialog has no button which is not
	user-friendly.  Signed-off-by: James Fournie <jfournie@sitka.bclibraries.ca>
	Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-08-02  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/web/opac/skin/default/js/rdetail.js,
	Open-ILS/web/opac/skin/default/xml/page_rdetail.xml: Markup-based
	dijit.Dialog implementation, inspired by and based on a patch from
	Joseph Lewis in https://bugs.launchpad.net/evergreen/+bug/787162 Signed-off-by: Mike Rylander <mrylander@gmail.com> Signed-off-by:
	Dan Scott <dscott@laurentian.ca>

2011-09-16  Liam Whalen <lwhalen@evergreen-dev.catalogue.nrcan.gc.ca>

	* Open-ILS/xul/staff_client/server/cat/spine_labels.js: Modified
	spine_labels.js to retain UTF-8 encoding Dan Wells posted a fix to the DEV list for receipt printing that
	allowed the receipt printer to print UTF-8 characters.  I used the
	ideas in that fix to modify spine_labels.js.  In spine_labels.js,
	the url passed to the preview in preview_xul_192 was encoding the
	url with the javascript encode() function.  This function does not
	preserve UTF-8 encodings.  I changed the function to
	encodeURIComponent, and UTF-8 characters are now displayed properly
	by the spine label printer code.  Signed-off-by: Liam Whalen
	<lwhalen@evergreen-dev.catalogue.nrcan.gc.ca> Signed-off-by: Dan
	Scott <dscott@laurentian.ca>

2011-09-28  Michael Peters <mrpeters@library.in.gov>

	* Open-ILS/web/templates/default/conify/global/acq/edi_account.tt2: 
	A slight modification to prevent clipping in the EDI Accounts
	interface Just a few tweaks via CSS to make sure the footer notes don't clip
	off part of the main grid.  Signed-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-09-28  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/reporter/clark-kent.pl: Provide proper hrefs for
	links back from report debugging pages Reimplementation of a fix provided by Michael Peters.  The
	originally submitted patch included several fixes provided by an
	unrelated patch, and a regression in build-time embedded tokens.  Original branch at:

	http://git.evergreen-ils.org/?p=working/Evergreen.git;a=shortlog;h=refs/heads/user/mrpeters-isl/clark_kent_back_linksSigned-off-by: Mike Rylander <mrylander@gmail.com>

2011-09-22  Dan Scott <dscott@laurentian.ca>

	* Open-ILS/src/reporter/clark-kent.pl: LP856567: Mark HTML report
	output as Unicode-encoded Non-ASCII characters in report ouput that has been generated in HTML
	format appears to be corrupted when viewed in a browser. This can be
	manually corrected by switching the "Encoding" browser option, but
	it would be better to include <meta charset='utf-8'> in the output
	HTML to tell the browser directly.  Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by: Mike
	Rylander <mrylander@gmail.com>

2011-09-27  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/OpenILS/Utils/MFHD.pm,
	Open-ILS/src/perlmods/OpenILS/Utils/MFHD/Caption.pm: MFHD
	compression fails with pattern-less captions The current code assumes that if you try to compress a range of MFHD
	holdings, you actually have the necessary pattern information.  This
	commit introduces a very basic check to avoid the most common
	failure case.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Mike
	Rylander <mrylander@gmail.com>

2011-09-26  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/upgrade/0629.data.jedi-template.sql: 2.1-ish
	upgrade script preamble Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-09-26  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0629.data.jedi-template.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.data.jedi-template.sql: Stamping
	upgrade script for EDI cleanup Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-09-19  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger/Reactor.pm,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.data.jedi-template.sql,
	Open-ILS/src/support-scripts/edi_pusher.pl: Some EDI translation
	fixes for troublesome input characters This attempts to address enough of the issues in
	https://bugs.launchpad.net/evergreen/+bug/812593 to move forward.  When the ? character appears in lineitem attributes for a PO that we
	send off for EDI translation, the translator fails if that ? is the
	last character of the string.  This commit avoids that situation.  This commit also removes any Unicode characters from the JEDI (the
	input to the translator process), as they're not going to make it to
	the EDIFACT output anyhow, and will just confound the translator.  This commit also pre-escapes quotation marks in lineitem attributes
	so that we don't produce invalid JSON for our JEDI.  This commit also destroys the death star.  Seriously, the right way to fix some of the issues people have had
	is for somebody to learn Ruby and to address them either in
	edi_webrick.rb, in edi4r, or in openils-mapper (wherever the issues
	may be).  Working on that.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-09-25  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/support-scripts/marc_stream_importer.pl: lp859190:
	make marc_stream_import always import non-matches Fixes regression of (implicit, undocumented) functionality
	introduced in commit da3a45344205.  Current use case for the
	streaming MARC importer for OCLC Connexion exports assumes that
	non-matching records should always be added.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> Signed-off-by:
	Bill Erickson <berick@esilibrary.com>

2011-09-21  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/chrome/content/main/bindings.xml: 
	properties in chrome:// return XHR status 0 Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-09-20  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/chrome/content/main/bindings.xml: 
	LP#854760 messagecat fails with certain 404 pages We were failing to check the HTTP status on the underlying XHR
	requests.  Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-09-16  Dan Scott <dscott@laurentian.ca>

	* Open-ILS/src/templates/password-reset/request-form.tt2: Can't have
	two identical IDs on the same page Nobody who cares about the pure Web experience ever noticed that
	this page has two identical IDs. Chromium and other browsers
	complain, though, so make them happy.  Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by: Mike
	Rylander <mrylander@gmail.com>

2011-08-25  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: Clear
	hold shelf [expire] time at checkout to alternate patron When an item on the holds shelf is checked out to an alternate
	patron (i.e. not the hold user), clear the shelf_time and
	shelf_expire_time along with capture_time, current_copy, etc. on the
	hold.  tsbere++ for isolating the problem.  Signed-off-by: Bill Erickson <berick@esilibrary.com> Signed-off-by:
	Jason Etheridge <jason@esilibrary.com>

2011-09-14  Jason Etheridge <jason@esilibrary.com>

	* : commit 572607f08126548c30075439e2983b9029fd205b Author: Jason
	Etheridge <jason@esilibrary.com> Date:   Wed Aug 3 00:44:41 2011
	-0400

2011-09-13  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js,
	Open-ILS/xul/staff_client/server/cat/marcedit.xul: Provide a default
	value for, and explicitly change, the record type so the type
	dropdown works as intended Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-09-09  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/xul/staff_client/chrome/content/util/print.js: Fix
	dos_print when NSPrint interface is used By adding params.dos_print = true where needed.  Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Jason Etheridge <jason@esilibrary.com>

2011-09-07  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Trigger/Reactor/AstCall.p
	m: A/T reactor 'AstCall' can't have global CStoreEditor It's not good for any Evergreen service to try to have a global
	cstoreeditor instance.  Scope it to the handler() sub that needs it,
	and comment out the thus-far unused/unfinished retrieve() sub.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-30  Jason Stephenson <jstephenson@mvlc.org>

	* Open-ILS/examples/oils_sip.xml.example, Open-ILS/src/Makefile.am: 
	Fix for LP bug #702422.  Add @libdir@/javascript/ path in legacy script section of
	oils_sip.xml.example so that legacy scripts work with SIP2.  Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-31  James Fournie <jfournie@sitka.bclibraries.ca>

	* Open-ILS/web/js/ui/default/conify/global/acq/provider.js,
	Open-ILS/web/templates/default/conify/global/acq/provider.tt2: 
	Adding org unit context selector to providers screen This helps
	alleviate the bug reported in LP 731510 and generally improves
	usability.  Signed-off-by: James Fournie <jfournie@sitka.bclibraries.ca>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-09-06  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/extras/org_tree_js.pl: Clear org_unit cache fix for
	autogen.sh autogen.sh is not properly clearing the org_tree cache.  It is
	unclear how this hasn't caused a problem before, but this fix works
	for me and should be at least harmless in other enviroments.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Lebbeous
	Fogle-Weekley <lebbeous@esilibrary.com>

2011-07-20  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/circ/util.js,
	Open-ILS/xul/staff_client/server/patron/util.js: adjust legacy xul
	column definitions for dates/timestamps to ensure correct  sorting Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-07-18  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/admin/transit_list.js,
	Open-ILS/xul/staff_client/server/admin/work_log.js,
	Open-ILS/xul/staff_client/server/cat/copy_browser.js,
	Open-ILS/xul/staff_client/server/cat/copy_buckets.js,
	Open-ILS/xul/staff_client/server/cat/copy_summary.xul,
	Open-ILS/xul/staff_client/server/cat/record_buckets.js,
	Open-ILS/xul/staff_client/server/cat/z3950.js,
	Open-ILS/xul/staff_client/server/circ/alternate_copy_summary.js,
	Open-ILS/xul/staff_client/server/circ/checkin.js,
	Open-ILS/xul/staff_client/server/circ/checkout.js,
	Open-ILS/xul/staff_client/server/circ/copy_details.xul,
	Open-ILS/xul/staff_client/server/circ/copy_status.js,
	Open-ILS/xul/staff_client/server/circ/in_house_use.js,
	Open-ILS/xul/staff_client/server/circ/renew.js,
	Open-ILS/xul/staff_client/server/circ/util.js,
	Open-ILS/xul/staff_client/server/patron/hold_details.js,
	Open-ILS/xul/staff_client/server/patron/holds.js,
	Open-ILS/xul/staff_client/server/patron/items.js,
	Open-ILS/xul/staff_client/server/serial/manage_dists.js,
	Open-ILS/xul/staff_client/server/serial/manage_items.js,
	Open-ILS/xul/staff_client/server/serial/manage_subs.js: remove
	circ.util.std_map_row_to_columns; default to the one provided by
	list.js Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-07-18  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/chrome/content/util/list.js,
	Open-ILS/xul/staff_client/server/circ/util.js: Better sort support
	for xul lists (see launchpad bug
	://bugs.launchpad.net/evergreen/+bug/751745) Example of supplying a sort_value function for item Create Date, and
	automatic sort_value for fm_columns-generated timestamp and money
	column definitions.  Need to provide more such functions, and
	eventually move everything over to fm_columns Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-09-01  Dan Wells <dbw2@calvin.edu>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm: Hourly fine periods do not charge enough Hourly fine periods are not charging for the first period of
	overdue-ness. If an item is due at 2:00pm and has a fine of $.50 per
	hour, the first fine should be eligible for generation at 2:01pm. As
	it stands, the first fine does not generate until an entire fine
	period has elapsed, so in this case, 3:00pm.  The previous version of the code had a special case for day-
	granular fine periods, so a majority of fines were not affected.
	This commit expands the same idea (charging for the fine period you
	are currently "in") to all fine periods.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Mike
	Rylander <mrylander@gmail.com>

2011-05-18  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: avoid
	error when generating fines on checkin Prevents "No active transaction to commit" error when checking in
	overdue loans.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> Signed-off-by:
	Dan Wells <dbw2@calvin.edu>

2011-08-10  Michael Peters <mrpeters@library.in.gov>

	* Open-ILS/xul/staff_client/server/patron/info_notes.xul: LP#824257
	Fix nasty overlapping when patron has more than 6 notes Signed-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-08-24  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/extras/Makefile.install: Correct make target for
	lucid Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-24  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/2.0.8-2.0.9-upgrade-db.sql: Put the actual
	release number into the upgrade script Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-24  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/2.0.8-2.0.9-upgrade-db.sql: 2.0.9 upgrade
	script Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-24  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/2.0.7-2.0.8-upgrade-db.sql: Adding tag upgrade
	script to parent branch Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-23  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0607.schema.oua_force_order.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.oua_force_order.sql: 2.[01]-stamped
	upgrade script for LP#816131 Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-22  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/020.schema.functions.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.oua_force_order.sql: Reverse
	direction of org_unit_ancestors Apparently callers expect it to start at the top of the org tree.  Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-08-11  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/upgrade/XXXX.oua_force_order.sql: Unwrapped
	upgrade script for oua_force_order Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-08-11  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/020.schema.functions.sql: New version of
	actor.org_unit_ancestors Preserves order through joins Basically actor.org_unit_ancestors_distance with a join to get the
	entire org units, rather than just IDs and a distance.  Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-08-11  Liam Whalen <lwhalen@evergreen-dev.catalogue.nrcan.gc.ca>

	* Open-ILS/src/perlmods/OpenILS/Application/Storage/QueryParser.pm: 
	Fixed seaching for a colon (:) surrounded by white space When searching for a colon surrounded by white space the search
	would freeze.  An example of such a search would be: Climate change
	economics and policy : an RFF anthology This was happening because
	the decompose function within QueryParser.pm Would build a regular
	expression that would search the query for both classes and class
	aliases e.g (keyword and kw).  However, when buliding the regex for
	aliases QueryParser would add extraneous or symbols (|) to the end
	of the regex without adding the accompanying alias.  This was
	happening because there was a check to see if the corresponding
	class to each alias had already been added to the regex.  But, the
	check to see if the alias had already been appened to the regex
	happened too late.  I have moved the check to encopase the appending
	of the or symbols and the class.  Signed-off-by: Liam Whalen
	<lwhalen@evergreen-dev.catalogue.nrcan.gc.ca> Signed-off-by: Mike
	Rylander <mrylander@gmail.com>

2011-08-09  Jason Stephenson <jstephenson@mvlc.org>

	* Open-ILS/src/extras/Makefile.install: Branchify patch from LP bug
	#802523 and backport to rel_2_0.  Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-23  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/extras/Makefile.install: Add pgsql 9.0 target for
	Debian / Ubuntu, and a Fedora 15 target People are starting to adopt PostgreSQL 9.0 in Evergreen 2.0 as a
	stepping stone towards Evergreen 2.1; make it easier for them by
	providing a target in the 2.0 Makefile.install.  Also, while we're in here, remove the Fedora 13 reference and
	replace it with Fedora 15, as Fedora 13 is no longer supported and
	Fedora 15 comes with the power of PostgreSQL 9.0. OH YEAH! Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-08-23  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/000.english.pg90.fts-config.sql: Support
	Evergreen 2.0 on Pg 9.0 Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-19  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Money.pm: Fix
	penalty generation during billing creation by passing the editor object referencing the database transaction to
	xact_org Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-08-22  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/web/opac/skin/default/js/holds.js: Display only available
	formats for metarecord holds in IE The OPAC's usual hideMe()/unHideMe() tricks don't work for <option>
	elements in Internet Explorer 8.  Use the disabled attribute.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-19  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/web/js/ui/default/vandelay/vandelay.js: Vandelay: repair
	item attr context org selector 1. Prevents resetting the context selector to the workstation org
	unit each time it's changed.  2. Prevent the unintentional pileup of dojo.connect() events, which
	can lead to exponential growth in the number of server calls to
	fetch import-item-attribute-definitions with each change of the
	context org selector.  Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-08-02  Ben Shum <bshum@biblio.org>

	* Open-ILS/src/perlmods/OpenILS/Utils/RemoteAccount.pm: #LP801961,
	error when running edi_fetcher.pl This patch addresses an error encountered when running
	edi_fetcher.pl.  The method "is_dir" should be just plain "dir" in
	RemoteAccount.pm file.  Signed-off-by: Ben Shum <bshum@biblio.org> Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-09  Jason Stephenson <jstephenson@mvlc.org>

	* Open-ILS/web/js/ui/default/actor/user/register.js: Branchify
	second patch from James Fournie on LP bug #791941.  Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-09  Jason Stephenson <jstephenson@mvlc.org>

	* Open-ILS/web/js/dojo/openils/widget/AutoFieldWidget.js: Branchify
	first patch from James Fournie on LP bug #791941.  Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-09  Robert Soulliere <robert.soulliere@mohawkcollege.ca>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: 
	Branchify the patch from LP bug #809478.  Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-16  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/web/opac/locale/en-US/vandelay.dtd: Improve Vandelay
	Import/Merge Checkbox Labels Since these labels are used both for the initial import and also for
	imports from the queue, the use of the word "Auto" can be confusing
	and misleading.  This commit reflects changes already made in trunk
	for these labels.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Mike
	Rylander <mrylander@gmail.com>

2011-08-16  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/web/js/ui/default/vandelay/vandelay.js: Fix importing of
	'No Match' records from a queue This small change honors the 'No Match' checkbox when importing from
	a queue.  This bug has existed for a while, but was only recently exposed by
	06e4d3370068002a303c9a5a03448ee0e1249fc0.  Before that commit,
	no-match records always imported, even when you didn't want them.
	After that commit, they import when wanted on the initial load, but
	could not be imported from the queue.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Mike
	Rylander <mrylander@gmail.com>

2011-08-16  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/005.schema.actors.sql,
	Open-ILS/src/sql/Pg/upgrade/0605.schema.lp826844_org_unit_parent_pr
	otect_fix.sql: Stricter order for actor.org_unit_parent_protect() actor.org_unit_parent_protect() may not work due to the fact that
	'IF' conditions in PL/pgSQL are not necessarily processed in the
	order written. This line: "IF TG_OP = 'INSERT' OR NEW.parent_ou IS DISTINCT FROM OLD.parent_ou
	THEN" may fail because the 'IS DISTINCT FROM' happens before the 'INSERT'
	check, and and that fails because there is no 'OLD' variable for
	INSERTs.  This commit may not be the optimal style for this circumstance in
	this language, but it works.  It also appears to change more than it
	really does due to a loss of one level of indentation in the
	structure.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Dan Scott
	<dscott@laurentian.ca>

2011-08-16  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/sql/Pg/005.schema.actors.sql: Whitespace Only Changes Files uses primarily tabs, function used both spaces and tabs.  It
	now uses all tabs.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Dan Scott
	<dscott@laurentian.ca>

2011-08-16  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0602.schema.lp790329_opac_copy_count.sq
	l, Open-ILS/src/sql/Pg/upgrade/XXXX.lp790329_opac_copy_count.sql: 
	Stamped upgrades for LP#790329 Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-15  Dan Scott <dan@coffeecode.net>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/metabib
	.pm, Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.lp790329_opac_copy_count.sql: 
	LP#790329 org_lasso search is broken Fix the JavaScript error when we attempt to create a feed for the
	shortname of the org_unit_lasso (lassos have no shortname) - which
	lets the request hit the backend Perl module, which in turn chokes
	on a test for OU that only allows two conditions: either all digits
	is treated as a numeric ID for an org unit, or it is a shortname. Of
	course, lassos are negative integers, so we have to modify the test
	slightly to make it happier.  There was no depth for org lasso copy counts, and this was handled
	correctly in the main case by the
	asset.opac_lasso_record_copy_count() function and its staff variant,
	but when a copy was not found at a given org_unit in the lasso a
	request was made for the non-existent depth and the function would
	error out.  Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by: Mike
	Rylander <mrylander@gmail.com>

2011-08-16  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/src/edi_translator/edi_webrick.bash: Keep the logging
	output of the EDI translator by default There is valuable troubleshooting information there that is
	otherwise hard to find.  This particularly matters when the output
	of an EDI Action/Trigger template (JEDI) doesn't successfully get
	translated to EDIFACT for nonobvious reasons.  In production environments, you might instead pipe to logger so that
	you can collect output with syslog, rather than in a flat file.  As
	long as output goes *somewhere.* Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-08-16  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0600.schema.fix_cat_default_class_looku
	p.sql, Open-ILS/src/sql/Pg/upgrade/0601.schema.fix_aous_lookup.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.fix_aous_lookup.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.fix_cat_default_class_lookup.sql: 
	Stamped upgrades for LP#825303 Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-12  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/020.schema.functions.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.fix_aous_lookup.sql: return only
	the one applicable OU setting value Correct actor.org_unit_ancestor_setting so that it returns at most
	 one setting value, rather than the entire set of values defined for
	the OU and its ancestors.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-08-12  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.fix_cat_default_class_lookup.sql: 
	lp#825303: fix cat.default_classification_scheme lookup Fixes a bug where the wrong default classification scheme could be
	chosen when adding a new volume whose classification scheme was not
	explicitly set.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-08-10  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/web/opac/locale/en-US/lang.dtd: lp#780679, fix misleading
	label for hold transfer for rel_2_0.  later versions of EG also have a selective hold
	transfer feature Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-08-08  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Search/Biblio.pm: In a
	middle-layer method for returning holdable formats on a metarecord, Do a better test of copy holdability than we were doing previously.
	We can't do a perfect test: we don't really know what patron we're
	doing this for, and even if we did, from here it's nontrivial to
	figure out whether we're doing indb holds or script-based, much less
	run the tests.  Still, we can test whether a copy's in a holdable status, a holdable
	location, and is itself not explicitly marked unholdable.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-04  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0592.data.ACQ_INVOICE_REOPEN-perm.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.lp818311.sql: Stamped upgrade
	script for ACQ_INVOICE_REOPEN permission addition Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-04  Jason Stephenson <jstephenson@mvlc.org>

	* Open-ILS/src/sql/Pg/upgrade/XXXX.lp818311.sql: Upgrade script for
	LP818311 branch.  Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-04  Michael Peters <mrpeters@library.in.gov>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: LP#818311:
	ACQ_INVOICE_REOPEN is missing This patch adds the missing ACQ_INVOICE_REOPEN to the Acquisitions
	Administrator user.  Signed-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>

2011-08-04  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/patron/items.js: mrpeters caught
	this; wrong variable fed to error dialog Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-08-04  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Cat/AssetCommon.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Vandelay.pm: Repaired copy
	private/public note vandelay bug Previously, all copy notes imported through vandelay were coming in
	as public copy notes.  Signed-off-by: Bill Erickson <berick@esilibrary.com> Signed-off-by:
	Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-07-28  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: Only update MARC
	on full entry of fixed fields AKA: Lang is 3 characters long. Entering 1 character would cause
	focus to leave.  MARC would also update incorrectly.  This only triggers the update when the full 3 characters are
	entered.  This not only prevents issues with catalogers editing
	multi-character fixed fields but also makes it less likely they
	accidentally corrupt the records.  Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-07-21  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/util.js,
	Open-ILS/xul/staff_client/server/locale/en-US/cat.properties: 
	lp#792595: Don't allow pre-cats into record buckets via Item Status
	-> Actions for Catalogers Alerts with the number of pre-cat records skipped prior to invoking
	the title bucket dialog.  Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-07-28  James Fournie <jfournie@sitka.bclibraries.ca>

	* Open-ILS/web/conify/global/actor/org_unit.html,
	Open-ILS/web/conify/global/actor/org_unit.js,
	Open-ILS/web/opac/locale/en-US/conify.dtd: This adds a SAN box to
	the org unit editor's address editor pane.  Signed-off-by: James Fournie <jfournie@sitka.bclibraries.ca>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-29  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/OpenILS/Application/Vandelay.pm,
	Open-ILS/web/js/ui/default/vandelay/vandelay.js,
	Open-ILS/web/templates/default/vandelay/inc/queue.tt2,
	Open-ILS/web/templates/default/vandelay/inc/upload.tt2: Vandelay fix
	for merging without loading new This fix is derivative of da3a453442050482a419deff91d3dc92fdbf132a
	in master, but with new feature code removed for backport to 2.1 and
	2.0.  It does the following: - renames 'vlUploadQueueAutoImport' to 'vlUploadQueueImportNoMatch'
	  to match identical change in master and to increase code clarity - honors this flag when doing a merge.  Previously, if you checked one of the two auto-merge boxes, any
	records which did not merge loaded as new records even if the
	'Auto-Import Non-Colliding Records' box was not checked.  You can
	now do one, the other, or both together (auto-importing and merging)
	as needed.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Mike
	Rylander <mrylander@gmail.com>

2011-07-20  Liam Whalen <lwhalen@evergreen-dev.catalogue.nrcan.gc.ca>

	* Open-ILS/src/perlmods/OpenILS/Application/Search/Biblio.pm: 
	Deleted a line the removed single quotes (') from search strings The multiclass_query function replaces single quotes with spaces (')
	( ).  This causes a problem when toggling between Advanced and Basic
	search.  If a search is conducted with a ' in it, that quote appears
	in the basic search box displayed above the results.  However, if
	the user then clicks the 'Advanced' button to toggle to the advanced
	search the single quote is missing from the search term.  By
	removing the line $query =~ /s/'/ /go; from Biblio.pm this problem
	is resolved.  Signed-off-by: Liam Whalen
	<lwhalen@evergreen-dev.catalogue.nrcan.gc.ca> Signed-off-by: Mike
	Rylander <mrylander@gmail.com>

2011-08-03  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0589.money.materialized_summary_payment
	-triggers.sql: Upgrade script for a patch from Steven Callender
	addressing payment types in money.materialized_summary_payment Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-28  Steven Callender <stevecallender@esilibrary.com>

	* Open-ILS/src/sql/Pg/080.schema.money.sql,
	Open-ILS/src/sql/Pg/1.4.0.5-1.6.0.0-upgrade-db.sql: A fix so that
	the last payment types will be cash_payment and check_payment rather
	than bnm_payment for cash and check payments.  Signed-off-by: Steven Callender <stevecallender@esilibrary.com>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-08-02  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0588.schema.replace_field-default-value
	.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.schema.replace_field-default-value
	.sql: Stamped upgrade script for user/miker/replace_field_fix Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-08-02  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/012.schema.vandelay.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.schema.replace_field-default-value
	.sql: Have replace_field return input XML when no replace rule is
	provided Signed-off-by: Mike Rylander <mrylander@gmail.com> Signed-off-by:
	Bill Erickson <berick@esilibrary.com>

2011-07-14  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ.pm: calculate
	penalties when letting Mark Item Damaged add bills Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Galen Charlton <gmc@esilibrary.com>

2011-08-02  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: Fix
	oils_i18n_gettext id numbers config.metabib_field ids 29/30 had 28 for translation id.  Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>

2011-07-31  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/cat/spine_labels.js: use isNaN
	here, since NaN == NaN => false Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-07-21  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/patron/standing_penalties.js: 
	Correctly populate certain columns in the patron Messages interface When applying penalties, the csp's referenced by the ausp's are
	fleshed.  Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Bill Erickson <berick@esilibrary.com>

2011-07-28  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/perlmods/OpenILS/Utils/MFHD/test/mfhd.t: Fix broken
	builds due to test that can't find its data LP 817699 reports a problem that began with commit
	e9cd992fa4dbf1013346336193cb7469ecee10a8, reintroducing a problem
	that had previously been resolved with commit
	f017d1261c369b9b5cc3c9cfc4f50d3cdf12a445. In short, tests can and
	are run from different directories, but a new test opened a file
	without making any allowance that the test might be run from
	anything other than the /test/ directory.  This fix uses the dirname(__FILE__) approach to provide the
	appropriate relative directory for the test data, and enables the
	tests to be processed without dying.  Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by:
	Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-07-28  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/web/js/dojo/openils/acq/nls/acq.js,
	Open-ILS/web/js/ui/default/acq/common/li_table.js: Make users
	confirm they really want to delete lineitems from POs...  ... when they've already been ordered. There's really no reason to
	ever make such a deletion this that I can think of, but I use a
	confirm() instead of stricter measures in case I'm missing
	something.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-07-28  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0587.maintain_control_numbers_with_OCLC
	_awareness.sql,
	Open-ILS/src/sql/Pg/upgrade/xxxx.maintain_control_numbers_with_OCLC
	_awareness.sql: Stamped upgrade for user/dbs/oclcnumbers Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-07-21  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/upgrade/xxxx.maintain_control_numbers_with_OCLC
	_awareness.sql: Prevent control numbers from duplicating In maintain_control_numbers(), if you have more than one 001 or 003,
	and at least one is the correct one, you will end up duplicating the
	correct number every time the record is saved.  For example, if the incoming record was record ID # 12345, and the
	record contained: 001: 12345 001: ocm10202 ... then after maintain_control_numbers() ran, the record would
	contain: 001: 12345 001: 12345 Also, clean up some leftovers from the refactor I suggested in the
	previous commit.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Dan Scott
	<dscott@laurentian.ca>

2011-07-21  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/xxxx.maintain_control_numbers_with_OCLC
	_awareness.sql: Add an unwrapped upgrade script for OCLC-aware
	control numbers The upgrade script creates the SCN and LCCN search indexes and
	populates them using metabib.full_rec as a source; cheating, but the
	normalized values will work for non-exact search purposes. Sites can
	reingest all of their bibs if they want exact search to work.  Also, refactor maintain_control_numbers() using a suggestion by Dan
	Wells to eliminate some duplicate code.  Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by: Bill
	Erickson <berick@esilibrary.com>

2011-07-21  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql: Treat OCLC numbers
	specially in maintain_control_numbers For some reason, many records that come with OCLC numbers in the 001
	field are not populated with a 003 field. This resulted in the OCLC
	number being thrown away entirely, rather than being moved into the
	035, as there was no corresponding control number identifier field.  However, given that we know that control numbers starting with "ocm"
	or "ocn" are special OCLC numbers, we can generate the 035
	accordingly even in the absence of a 003. This update to
	maintain_control_numbers() teaches it to do the right thing for OCLC
	numbers.  In addition, add an identifier search index so we can easily find
	records by their system control numbers (035 $a subfields).  Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by: Bill
	Erickson <berick@esilibrary.com>

2011-07-25  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/extras/Makefile.install: Ubuntu Lucid needs
	MARC::Record from CPAN As Ubuntu Lucid ships with MARC::Record 2.0.0, and Serials requires
	2.0.1 or greater, we must install MARC::Record from CPAN or face
	failing open-ils.search requests.  Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-07-21  Michael Peters <mrpeters@library.in.gov>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/CopyLocations.pm: 
	LP#813151 Copy Location sort order in Advanced Search This patch addresses the unintuitive copy location sort order in
	Advanced Search when searching at a specific branch. Thanks to Dan
	Wells for the code suggestion which changes the order in the listbox
	to alphabetical sort by asset.copy_location.name.  Tested, and
	confirmed working in 2.0.4 test and production environments.  Signed-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>

2011-06-10  James Fournie <jfournie@sitka.bclibraries.ca>

	* Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_extras.xml,
	Open-ILS/web/opac/skin/default/xml/result/result_table.xml: 
	NOVELIST/CHILIFRESH include statements missing a hash which was
	causing (none) errors.  Signed-off-by: James Fournie <jfournie@sitka.bclibraries.ca>
	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>

2011-07-20  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/circ/util.js: sort hold Queue
	Position column correctly in xul lists Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-07-20  Michael Peters <mrpeters@library.in.gov>

	* Open-ILS/xul/staff_client/server/circ/checkout.js: LP#647121 Event
	handling on override abort Discussed on IRC, phasefx discovered that several events were not
	being properly handled when they were empty strings.  Tested and
	working on Evergreen 2.0.4.  Signed-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Thomas Berezansky <tsbere@mvlc.org>

2011-07-19  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/OpenILS/Utils/MFHD.pm,
	Open-ILS/src/perlmods/OpenILS/Utils/MFHD/Holding.pm,
	Open-ILS/src/perlmods/OpenILS/Utils/MFHD/test/mfhd.t,
	Open-ILS/src/perlmods/OpenILS/Utils/MFHD/test/mfhddata2.txt: MFHD
	compressed holding fixes 1. Add new utility method to MFHD.pm:     holdings_by_caption(): return all holdings attached to a     given caption 2. Add 'passthru_open_ended' option to get_decompressed_holdings()     Previously, attempts to decompress an open-ended holding     would error out.  Now, in the absence of this option,     open-ended holdings are discarded and you get a warning     (since they cannot logically be decompressed), while if     this option is 'true' they are passed back unaffected 3. compressed_to_last() on an open-ended holding now more    correctly returns 'undef' rather than the unaltered holding 4. get_compressed_holdings() will now honor an open-ended holding    by treating it as "infinite", and thus absorbing any holdings    which would follow 5. Overloaded comparison operator now correctly detects "swap"    cases (where only the second operand is a holding) 6. Overloaded comparison operator now consistently treats    open-ended holdings as "greater-than" a single or closed    holding which has the same starting point 7. Fix 2 thinkos in comparison operator for overlapping    compressed holdings 8. Add new compressed_end() method to Holding.pm which can add    or set a new ending to a holding, making compressed if needed 9. Correctly recognize partially compressed holdings     If a holding is defined as:         863 40 $81.1 $a1 $b2-10     this actually means:         863 40 $81.1 $a1-1 $b2-10     so let's make sure to treat it that way.  9. Expand the MFHD test suite to better cover the improvements    in this commit There is also the beginnings of a _get_truncated_holdings() method
	for handling odd cases where an open-ended holding is followed by a
	single/closed holding, but it is currently commented out, pending
	further design consideration.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Lebbeous
	Fogle-Weekley <lebbeous@esilibrary.com>

2011-07-19  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/upgrade/0582.schema.aging_circ_view.sql: 
	Thinko in my backport of 0582 to 2.0, spotted in the wild by Lee
	Dickens Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-18  Steven Callender <stevecallender@esilibrary.com>

	* Open-ILS/xul/staff_client/server/patron/display.js: lp#812550:
	Removed nulls from showing for patron penalties when no note
	attached to penalty.  Signed-off-by: Steven Callender <stevecallender@esilibrary.com>
	Signed-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-07-18  Dan Scott <dan@coffeecode.net>

	* Open-ILS/xul/staff_client/server/cat/spine_labels.js: Address
	minor code formatting consistency The rest of the code has spaces around the conditional clause in an
	if() statement, so do likewise here.  Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-06  James Fournie <jfournie@sitka.bclibraries.ca>

	* Open-ILS/xul/staff_client/server/cat/spine_labels.js: Spine label
	editor assumes LC as reported in LP #780665.  This patch encapsulates the LC-assuming code in an IF block which
	considers the asset.call_number.volume.label_class.  If that is
	equal to 3, it will use the LC formatting.  Signed-off-by: James Fournie <jfournie@sitka.bclibraries.ca>
	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-07-14  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/patron/bill2.js: fix bill ui
	display update bug where total owed and total checked were not
	updated if the total owed as paid off in full Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-07-16  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0582.schema.aging_circ_view.sql,
	Open-ILS/src/sql/Pg/upgrade/XXX.schema.aging_circ_view.sql: Stamping
	upgrade script for "Bad join condition all_circulation view" Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-16  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/090.schema.action.sql,
	Open-ILS/src/sql/Pg/upgrade/XXX.schema.aging_circ_view.sql: Bad join
	condition in secondary (physical) address lookup, causing terrible
	performance of circ aging Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-13  mrpeters-isl <mrpeters@library.in.gov>

	* Open-ILS/xul/staff_client/server/cat/copy_browser.js: LP795032 Fix
	cursor rendering and dropdown position in holdings maintenance OU
	dropdown Signed-off-by: mrpeters-isl <mrpeters@library.in.gov> Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-16  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0581.data.opac_renewal_reuse_circ_lib.s
	ql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.opac_renewal_reuse_circ_lib.sql: 
	Stamping upgrade script for "Opac Renewal at original circ library" Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-16  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.opac_renewal_reuse_circ_lib.sql: 
	Default to existing behaviour for the new circ-behaviour global flag Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-07-05  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: Cache
	global flag at first use This way only the first opac renewal per backend has to ask the
	database for the global flag.  Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-07-05  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/upgrade/XXXX.opac_renewal_reuse_circ_lib.sql: 
	Unwrapped upgrade script Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-07-02  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql: Opac Renewal at
	original circ library Fixes multiple potential issues: 1 - Bad home ou on patron breaks
	    circ rules Ex. Patron edited while editor would let you pick bad
	home ou 2 - Item not allowed to circ at patron home ou     Ex. Patron went to where they were allowed to pick it up 3 -
	    Fines change to patron home ou fine rules Ex. Patron's home ou
	    doesn't charge fines but circ lib does Ex. Circ lib doesn't charge
	fines but Patron's home ou does Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-07-16  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0580.schema.aou_parent_protect.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.aou_parent_protect.sql: Stamping
	upgrade script for "Prevent OU loops at DB level" Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-15  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/upgrade/XXXX.aou_parent_protect.sql: Unwrapped
	upgrade script for ou loop protect May need to be split into "create function" and "add trigger"
	pieces.  Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-06-15  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/sql/Pg/005.schema.actors.sql: Prevent OU loops at DB
	level Database trigger to prevent actor.org_unit from being parent of self Actually detects any loops, even those above the current point Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Mike Rylander <mrylander@gmail.com>

2011-07-14  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/web/opac/skin/default/js/holds.js: Corrected the logic of
	format string building for metarecord holds and...  made hold possiblity checking for metarecord holds respect the
	format string (so you can't place holds on formats for which there
	will never be anything targetable) Made possible by much concerted effort from Mike Rylander Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-07-14  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/2.0.5-2.0.6-upgrade-db.sql: strip \r in
	upgrade script For whatever reason, presence of this character causes the script to
	fail if run from within sloink_execute_script.  Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-07-13  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/upgrade/0576.fix_maintain_901_quoting.sql: for
	realz, this time Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-07-13  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/upgrade/0576.fix_maintain_901_quoting.sql: fix
	backporting thinko Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-07-12  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0576.fix_maintain_901_quoting.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.fix_maintain_901_quoting.sql: pin
	an upgrade version for fix_maintain_901_quoting Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-07-12  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/upgrade/XXXX.fix_maintain_901_quoting.sql: 
	upgrade script for bugfix for lp#809540 Signed-off-by: Galen Charlton <gmc@esilibrary.com> Signed-off-by:
	Jason Etheridge <jason@esilibrary.com>

2011-07-12  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/002.functions.config.sql: lp#809540: quote
	replacement values properly in maintain_901() Prevents a failure if, for example, the tcn_value of a bib to be
	added or updated contains the string '\1'.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> Signed-off-by:
	Jason Etheridge <jason@esilibrary.com>

2011-07-12  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/web/opac/locale/en-US/opac.dtd,
	Open-ILS/web/opac/skin/default/js/advanced.js,
	Open-ILS/web/opac/skin/default/xml/common/sidebar.xml: alert the
	user when the OPAC's Quick Search->Item Barcode function returns a
	pre-cataloged item Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Galen Charlton <gmc@esilibrary.com>

2011-07-11  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/web/js/ui/default/acq/common/li_table.js: append line
	items to table in specified order Prior to this patch, the order that line items were displayed in
	(e.g.) a purchase order view was effetively randomized based on the
	amount of time it would take for async calls to fetch additional
	line item details to return.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> Signed-off-by:
	Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-07-07  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/300.schema.staged_search.sql,
	Open-ILS/src/sql/Pg/upgrade/0573.schema.staff_search_find_no_copies
	.sql: Backport of staff_search_find_no_copies branch from Thomas
	Berezansky Hand-backport of:  4d0dae6ee876830cb87ee393a41fcdc478ecc6b0  9a356a2371930c76554fd3dc5a7d10dc21cf914a  a45184da2ac9f490886ebde47fcc8af4227afcf0 Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-16  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/src/perlmods/OpenILS/Application/Actor.pm: Delete
	protection - Ensure you can touch group Same protection editing a user seems to get: If you don't have the
	right group_application.user perm, reject Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Dan Wells <dbw2@calvin.edu>

2011-07-05  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/templates/password-reset/request-form.tt2,
	Open-ILS/src/templates/password-reset/reset-form.tt2: LP805971:
	Specify UTF8 encoding in password reset templates As reported by Liam Whalen in Launchpad bug 805971: "The file
	/openils/var/template/password-reset/reset-form.tt2 does not display
	utf-8 characters.  I modified it to include '<meta
	http-equiv="Content-Type" content="text/html; charset=UTF-8" />'
	inside the <head> tag, and the fr-CA version of the page now
	displays correctly." I duplicated the problem in Firefox 5 and confirmed that the
	addition of the META tag corrects the problem.  Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-06-28  Mike Rylander <mrylander@gmail.com>

	* : commit fe0888063e329eb9afe241f7d0c0127397c9b136 Author: Mike
	Rylander <mrylander@gmail.com> Date:   Tue Jun 28 14:06:49 2011
	-0400

2011-06-28  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/web/templates/default/acq/common/li_table.tt2: Michael
	Peters provided a patch to add some missing labels...  ... to a key acquisitions interface.  It works.  Also fixed some
	unclosed tags while I was at it.  Wasn't sure whether to copy and paste Michael's sign-off or what,
	but here's the link to his original patch for purists:

	https://launchpadlibrarian.net/74191964/0001-LP802578-Acquisitions-Batch-copy-update-missing-head.patchSigned-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-06-24  Dan Scott <dan@coffeecode.net>

	* Open-ILS/web/opac/skin/default/js/result_common.js: Fix broken
	images for items without ISBNs in search results The search results code happily sets the src attribute of the cover
	image to an empty string (as returned by cleanISBN()) if currentISBN
	has not been defined (which is generally the case if an item doesn't
	have an ISBN, such as a DVD or a thesis or an old book).  Protect against the empty string and set the src attribute to
	'/opac/images/blank.png' to avoid broken image indicators in search
	results.  Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by: Dan
	Scott <dan@coffeecode.net> Signed-off-by: Mike Rylander
	<mrylander@gmail.com>

2011-06-22  Jason Stephenson <jstephenson@mvlc.org>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger/Validator.pm: 
	Check if hold is really available in Trigger::Validator.  Add checks for shelf time and no fulfillment time in HoldIsAvailable
	in OpenILS::Application::Trigger::Validator.  We've had some issues with poorly migrated data and people messing
	with holds that causes the original logic to trigger for unfilled
	holds. Plus, the extra precaution of checking more precise
	conditions of an actually filled hold can't hurt, can it? Signed-off-by: Jason Stephenson <jstephenson@mvlc.org>
	Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-22  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Actor/Container.pm,
	Open-ILS/web/opac/common/js/config.js: Make bucket content retrieval
	authoritative LP#492036, we neeed all bucket methods to be authoritative.  Some
	already were, this finishes the job.  Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-22  Michael Peters <mrpeters@library.in.gov>

	* Open-ILS/xul/staff_client/server/locale/en-US/patron.properties,
	Open-ILS/xul/staff_client/server/patron/search_result.js: LP#790639:
	Provide actual text, rather than id values in patron search results
	for various columns Cleaned up some tabs versus spaces and a needless trailing comma
	from original patch.  Not porting to master, hoping to use
	collab/phasefx/fm_columns instead.  Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Michael Peters <mrpeters@library.in.gov>

2011-06-21  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/OpenILS/Application/Search/Serial.pm,
	Open-ILS/web/opac/skin/default/js/rdetail.js,
	Open-ILS/xul/staff_client/chrome/content/cat/opac.js,
	Open-ILS/xul/staff_client/server/locale/en-US/serial.properties,
	Open-ILS/xul/staff_client/server/serial/sdist_editor.js,
	Open-ILS/xul/staff_client/server/serial/ssub_editor.js: Further
	clean-up of Serials interfaces When trying to come up with good tests, found a few bugs (imagine!).
	Some have been nagging for a while now.  1) For 'MFHDDrawn' event, make sure it runs if deleting the last
	serials data of any kind for that record (to unpopulate the menus
	properly) 2) Make sure global mfhd member (g.mfhd) is cleared in the same case
	(i.e. deleting the last serials data for that record) 3) Add a string to better indicate when no MFHD records are
	available for 'Legacy Record Entry' drop-down 4) Convert submitted empty drop-down values to 'null' as needed in
	distribution editor 5) Mark subscription 'start date' as a required field 6) Make serial virtual records better handle deleted 'legacy record
	entries' attached to distributions, and also expose non-deleted
	record entries even if in 'use_sdist_only' summary mode Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Jason
	Etheridge <jason@esilibrary.com>

2011-06-17  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/xul/staff_client/chrome/content/cat/opac.js,
	Open-ILS/xul/staff_client/server/serial/sdist_editor.js: Better
	coordination of MFHD/SRE adding/deleting Adding or deleting MFHD records from the XUL menus requires
	coordinating the OPAC display, the XUL menus, and the Serial Control
	distribution editors.  The previous code frequently required some
	non-obvious manual refreshing to make it work.  This commit keeps them in sync using custom events instead.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Jason
	Etheridge <jason@esilibrary.com>

2011-06-21  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/OpenILS/Utils/MFHD.pm: MFHD compressed
	holdings short-circuit logic If you attempt to get compressed (or uncompressed) holdings from a
	MFHD record with only a caption, the code should short-circuit and
	return an empty list.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Dan Scott
	<dan@coffeecode.net>

2011-06-21  Michael Peters <mrpeters@library.in.gov>

	* Open-ILS/xul/staff_client/server/skin/patron_display.css: 
	LP#783590 fix patron alert message highlighting Signed-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-06-21  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0561.schema.tnf_index.sql: Add "tnf"
	index for faster title sorting (pre-SVF) Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-17  Dan Scott <dan@coffeecode.net>

	* Open-ILS/examples/opensrf.xml.example: Set AC timeout value to 3
	seconds and describe tradeoffs As discussed on the Evergreen Development mailing list, the higher
	the AC timeout value, the greater the risk of a denial of service.
	30 is therefore too high to be comfortable as a default setting, so
	we're dropping it down to 3 as a compromise between the original
	value of 1 (which resulted in a number of request timing out where
	added content was actually available) and the much-less-safe 30.  In addition, we document inline the risk/reward of different values
	and provide some justification for the default value that we chose,
	so that Evergreen system administrators will have guidance when
	tweaking this setting.  Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by: Mike
	Rylander <mrylander@gmail.com>

2011-06-20  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/sql/Pg/2.0.6-2.0.7-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0559.schema.biblio.extract_located_uris
	.sql: DROP biblio.reingest_uris() after use We will hopefully only need to reingest URIs in bulk once, and can
	therefore DROP the biblio.reingest_uris() function after it has been
	successfully invoked.  Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by: Galen
	Charlton <gmc@esilibrary.com>

2011-06-20  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/sql/Pg/2.0.6-2.0.7-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0559.schema.biblio.extract_located_uris
	.sql: Protect URI reingest from failure due to malformed XML In an ideal world, there would be no malformed XML. But our world is
	the real world of libraries, and while the well_formed_xml()
	protects against malformed XML in Evergreen 2.0 systems, in some
	cases bad XML has been able to find its way into Evergreen systems
	in the past.  A single biblio.record_entry row containing malformed XML in the
	marc column will prevent the call to reingest URIs from succeeding.
	By limiting the set of records to those with well-formed XML, we can
	increase the chance of the URI reingest succeeding at the cost of
	more processing time.  Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by: Galen
	Charlton <gmc@esilibrary.com>

2011-06-20  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/2.0.6-2.0.7-upgrade-db.sql: Incorporate
	explode_array -> unnest change and fix for located URIs into upgrade
	script Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-20  Mike Rylander <mrylander@gmail.com>

	* : commit 9ebe72e82e3eb27cc8eba9ff51f8069cb0c55996 Author: Bill
	Erickson <berick@esilibrary.com> Date:   Thu Jun 16 11:50:16 2011
	-0400

2011-06-16  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0559.schema.biblio.extract_located_uris
	.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.biblio.extract_located_uris.sql: 
	Move the user/dbs/lp797304_lp797307 upgrade script into place with a
	number Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-16  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/XXXX.biblio.extract_located_uris.sql: 
	Merging branch user/dbs/lp797304_lp797307 Signed-off-by: Mike Rylander <mrylander@gmail.com> Cherry picking the following: commit 7be2a32620587af27de4316e42a308e913e9314c Author: Dan Scott
	<dan@coffeecode.net> Date:   Tue Jun 14 22:35:26 2011 -0400     Add a stored procedure to reingest problematic URIs     Assuming that href = label in asset.uri is a red enough flag for
	    the problem in LP 797307 where the perfectly good label was
	    being thrown away, reingest the unique set of records connected with
	    such asset.uri rows.      Signed-off-by: Dan Scott <dscott@laurentian.ca> commit 39fe0c4a8a3074ff4c1e427ad9f00a0760bac260 Author: Dan Scott
	<dan@coffeecode.net> Date:   Tue Jun 14 21:54:51 2011 -0400     Add unwrapped upgrade script for biblio.extract_located_uris     See XXXX.biblio.extract_located_uris.sql for the upgrade script,
	    waiting to be signed off and committed.      Signed-off-by: Dan Scott <dscott@laurentian.ca>  create mode 100644
	 Open-ILS/src/sql/Pg/upgrade/XXXX.biblio.extract_located_uris.sql commit 7e6d2bfd7e9a5cbe57e4aacdf0b4b015a566883d Author: Dan Scott
	<dan@coffeecode.net> Date:   Tue Jun 14 21:34:15 2011 -0400     Avoid duplicate row issues in biblio.extract_located_uris     As there is currently no unique constraint on the non-ID columns
	    of asset.uri, ensure that we only select a single ID from the
	    tables until we dedupe the tables. Use an ORDER BY to grab the
	    matching row with the lowest ID so we can clear out the rows with
	higher IDs.      Signed-off-by: Dan Scott <dscott@laurentian.ca> commit e79a805299ec734a29ee5bfa77dc74bc1fd208cd Author: Dan Scott
	<dan@coffeecode.net> Date:   Tue Jun 14 14:02:49 2011 -0400     Fix LP 797304 and 797307 - asset.uri parsing bugs     Per 797304: one would expect asset.uri.label to be populated
	    with the value of 856 $y, however, it was getting populated with
	    856 $u - perhaps as a result of the ordering of array entries in
	    XPATH() not matching the XPath expression. Instead of including 856
	    $u in the XPath expression for uri_label, just assign its value to
	    uri_label if uri_label is otherwise NULL.      Per 797307: biblio.extract_located_uris() tries to reuse an
	    existing active asset.uri entry rather than create a new row;
	    however, it does not handle the case where there is no public note
	    aka "use restriction" and will end up creating a duplicate row every
	    time the record is reingested. Teach it to handle NULL values
	properly.      Signed-off-by: Dan Scott <dscott@laurentian.ca> (cherry picked
	from commit da70b778268afff19c3dd4f2e9e4c9e85cfeb7e3) Signed-off-by: Mike Rylander <mrylander@gmail.com> (cherry picked
	from commit 6019d97c2a0604675cd0c00ec747f248f3f79849) Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-06-15  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/server/patron/bill2.js: lp797321:
	Disable the Apply Payment button during payment processing to
	mitigate chance of duplicate payments.  I can't actually reproduce the creation of duplicate payments
	locally with trunk/2.x, but there are reports of it, and this
	doesn't seem to hurt.  Not a complete solution, but better than
	before Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Galen Charlton <gmc@esilibrary.com>

2011-06-13  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/xul/staff_client/server/serial/batch_receive.js: Fix a
	serial batch receive problem reported by Sally Fortin That prevents receiving items when not using units in some cases.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-06-13  Dan Scott <dan@coffeecode.net>

	* Open-ILS/examples/opensrf.xml.example: Set a more generous AC
	timeout value A timeout value of 1 second is a bit too tight for many added
	content providers; set the default to 30 seconds to avoid too many
	artificial timeouts.  Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-06-07  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/xul/staff_client/server/locale/en-US/serial.properties,
	Open-ILS/xul/staff_client/server/serial/editor_base.js,
	Open-ILS/xul/staff_client/server/serial/scap_editor.js,
	Open-ILS/xul/staff_client/server/serial/sdist_editor.js: Support for
	required fields in Serial Control editors Adds a basic check for any fields marked as 'required', and alerts
	and prevents submitting if they are blank.  Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-31  Dan Scott <dan@coffeecode.net>

	* Open-ILS/web/opac/common/js/Cookies.js,
	Open-ILS/web/reports/oils_rpt_common.xhtml,
	Open-ILS/xul/staff_client/server/admin/cash_reports.xhtml,
	Open-ILS/xul/staff_client/server/admin/copy_locations.xhtml,
	Open-ILS/xul/staff_client/server/admin/hold_pull_list.xhtml,
	Open-ILS/xul/staff_client/server/admin/hold_pull_list_classic.xhtml
	, Open-ILS/xul/staff_client/server/admin/non_cat_types.xhtml,
	Open-ILS/xul/staff_client/server/admin/stat_cat_editor.xhtml,
	Open-ILS/xul/staff_client/server/patron/user_edit.xhtml: Remove all
	references to Cookie(s).js and Cookies.js Dojo toolkit is the new Cookie manager, so any lingering references
	to Cookie.js (a typo in any case) are no longer valid, and we no
	longer need to ship Cookies.js with Evergreen.  Cookie.js typo was reported by Steven Chan in LP 790429 Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by: Dan
	Scott <dan@coffeecode.net>

2011-06-07  Dan Scott <dan@coffeecode.net>

	* Open-ILS/web/opac/skin/default/xml/result/result_table.xml: Use
	the new status.opac_visible attribute in search summary Until we exposed the OPAC visibility of the status element as set in
	config.copy_status, We previously had to hardcode the logic for
	whether a given copy should be displayed based on its status. Now we
	can simply use the status.opac_visible attribute to determine
	visibility.  Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-06-07  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm: Add
	opac_visible attribute to copy and serial unit statuses config.copy_status defines an opac_visible column, but that
	attribute was not being exposed in the holdings XML, so code that
	displayed copies and serial units based on the holdings XML had to
	hardcode the display based on the status ID or name instead of using
	the configured setting.  To simplify display logic, teach holdings XML about the opac_visible
	column and expose its value in the status element as a new
	opac_visible attribute.  Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-06-06  Dan Scott <dan@coffeecode.net>

	* Open-ILS/web/opac/skin/default/xml/result/result_table.xml: Make
	copy status visibility match default config.copy_status settings Previous version of this patch had hardcoded copy status settings to
	0, 7, 12 to match the "Available" settings, rather than the OPAC
	visibility settings available from config.copy_status for each
	status.  Until config.copy_status.opac_visible translates into an
	opac_visible attribute on the status element in the holdings XML,
	this is probably the best we can do.  Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-05-30  Dan Scott <dan@coffeecode.net>

	* Open-ILS/web/opac/skin/default/xml/result/result_table.xml: Plug
	the many OPAC visibility holes in search result item display Check volume and circ_lib and copy status OPAC visibility (and
	deleted status in the case of volumes) in addition to the existing
	copy and copy-location checks.  Worst hack is hard-coded copy status IDs of 0, 7, 12 - but this is
	currently used throughout the code, so one more can't hurt that much (OWWW).  Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-12  Dan Scott <dan@coffeecode.net>

	*
	Open-ILS/src/sql/Pg/upgrade/0554.unnest_search_query_parser_fts.sql: 
	Remove 2.1 bits that infiltrated 2.0 database upgrades Core schema was fine, but the cherry-picked upgrade script didn't
	show any conflicts (naturally) so some pieces of the 2.1 schema that
	don't exist in 2.0 made their way into the 0554 upgrade script.  Thanks to Ben Shum for catching this.  Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-11  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0549.unnest_oils_xpath_table.sql,
	Open-ILS/src/sql/Pg/upgrade/0550.unnest_biblio_extract_metabib_fiel
	d_entry.sql,
	Open-ILS/src/sql/Pg/upgrade/0551.unnest_metabib_remap_metarecord_fo
	r_bib.sql,
	Open-ILS/src/sql/Pg/upgrade/0552.unnest_biblio_map_authority_linkin
	g.sql,
	Open-ILS/src/sql/Pg/upgrade/0553.unnest_action_hold_request_permit_
	test.sql,
	Open-ILS/src/sql/Pg/upgrade/0554.unnest_search_query_parser_fts.sql
	, Open-ILS/src/sql/Pg/upgrade/0555.unnest_oils_xpath_table.sql,
	Open-ILS/src/sql/Pg/upgrade/0556.unnest_biblio_extract_metabib_fiel
	d_entry.sql: Update upgrade files that had conflicting numbers 0549 and 0550 were taken by other commits over time.  Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-11  Dan Scott <dan@coffeecode.net>

	* : commit f0ed4253afb59bbcfeffde752f4942eeaad3f9da Author: Galen
	Charlton <gmc@esilibrary.com> Date:   Fri Jun 10 17:34:51 2011 -0400

2011-06-10  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/300.schema.staged_search.sql: lp#795737:
	improve staff bib search copy visibility check An errant join in query used to see if a bib is visible in the
	search OU scope for a bib search initiated from the staff client
	signficantly degrade the speed of such searches.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> Signed-off-by:
	Bill Erickson <berick@esilibrary.com>

2011-06-10  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/chrome/locale/en-US/offline.properties: 
	missing string for MFHD deletion Signed-off-by: Jason Etheridge <jason@esilibrary.com> Signed-off-by:
	Dan Wells <dbw2@calvin.edu>

2011-06-10  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/web/js/ui/default/actor/user/register.js: Mark invalid
	home ous as such in patron editor Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Bill Erickson <berick@esilibrary.com>

2011-06-07  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/sql/Pg/002.functions.aggregate.sql,
	Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/110.hold_matrix.sql,
	Open-ILS/src/sql/Pg/300.schema.staged_search.sql,
	Open-ILS/src/sql/Pg/pgmemcache-ou_tree_traversal_cache.sql,
	Open-ILS/src/sql/Pg/upgrade/0549.unnest_oils_xpath_table.sql,
	Open-ILS/src/sql/Pg/upgrade/0550.unnest_biblio_extract_metabib_fiel
	d_entry.sql,
	Open-ILS/src/sql/Pg/upgrade/0551.unnest_metabib_remap_metarecord_fo
	r_bib.sql,
	Open-ILS/src/sql/Pg/upgrade/0552.unnest_biblio_map_authority_linkin
	g.sql,
	Open-ILS/src/sql/Pg/upgrade/0553.unnest_action_hold_request_permit_
	test.sql,
	Open-ILS/src/sql/Pg/upgrade/0554.unnest_search_query_parser_fts.sql: 
	Use native unnest() db function instead of explode_array() Per LP 789747, the custom explode_array() database function was
	found to generate significantly slower results for searches than
	using the native (and equivalent) unnest() array function. Given
	that unnest() has been part of PostgreSQL since 8.4 and Evergreen
	2.0 requires a minimum of PostgreSQL 8.4, this patch removes the
	definition of the explode_array() functions and replaces its usage
	with unnest().  Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-06-03  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/web/js/ui/default/actor/user/register.js: Prevent future
	dates of birth in patron editor The patron editor form allowed staff to enter a date of birth that
	takes place in the future. While it is theoretically conceivable
	(hah) that a library might register patrons that have yet to be
	born, it is unlikely enough that we will not even assign this
	behavior to an org-unit setting, but we will take the bold move of
	using a regular expression to prevent a future dates of birth at
	all.  Note that if a library system travels into the past, this will cause
	all sorts of problems in the patron editor interface (not to mention
	overdues). Please do not mix Evergreen and time travel.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>
	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-02  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/web/opac/skin/default/js/rdetail.js: Fix false MFHD
	editing cues (LP #791974) The in-DB serial holdings use the same general display code as the
	MFHD records, but were falsely triggering MFHD administration
	widgets when in fact no MFHD record exists.  These holdings were
	already being marked, so this fix honors that mark.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Dan Scott
	<dan@coffeecode.net>

2011-06-02  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/web/opac/skin/default/js/rdetail.js: Tweak MFHD scoping Three changes: 1) Add a closure for 'entryNum' value (currently used for some
	display placement and menu-entry correlation) 2) Remove depth-climb to simplify code and better approximate copy
	scoping 3) Move 'here' assignment out of the foreach Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Dan Scott
	<dan@coffeecode.net>

2011-05-27  Dan Scott <dan@coffeecode.net>

	* Open-ILS/web/opac/skin/default/js/rdetail.js: Fix rendering of
	MFHD records when ownership is out of scope Dojo would die with a null reference error when an MFHD record was
	retrieved that was outside of the current OU search scope.  For
	example, if a given bib record had one linked MFHD record for BR1,
	and one linked MFHD record for BR4, the details page would choke
	trying to draw the MFHD holdings in a scope that only included BR1
	and end up drawing nothing. Ungood.  Moving the ownership check and invoking _holdingsDrawMFHD() only
	after ensuring that the record is within our scope resolves the
	problem.  Signed-off-by: Dan Scott <dscott@laurentian.ca>

2011-06-06  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/perlmods/OpenILS/Application/Search/Biblio.pm,
	Open-ILS/web/opac/common/js/config.js: LP 791546: advanced search
	ISBN/ISSN in .staff mode In 1.6, advanced search ISBN/ISSN searches always operated in .staff
	mode, returning results whether the results should have been visible
	to the user or not. This confused patrons who saw records to which
	they had no access.  In 2.0, this behaviour changed so that advanced search ISBN/ISSN
	searches never operated in .staff mode. This confused staff who were
	used to retrieving records via the ISBN/ISSN search when they wanted
	to add holdings for their own library to the records.  The pattern for addressing this problem and satisfying both use
	cases is the same - use the multiclass.query.staff method if we
	invoke the ISBN or ISSN searches with the .staff method name.  One could easily refactor many of the search method bodies in this
	module to use the exact same logic, keying off the method name to
	identify the identifier field and the .staff portion of the method
	name to determine whether to invoke .staff mode or not. For now we
	just address the ISBN and ISSN entry points.  Signed-off-by: Dan Scott <dscott@laurentian.ca> Signed-off-by: Dan
	Wells <dbw2@calvin.edu>

2011-06-03  Bill Erickson <berick@esilibrary.com>

	* Open-ILS/web/js/ui/default/acq/po/view_po.js: PO activation date
	display improvement Use the smarter Util.js date parsing code to prevent small time
	offsets in PO activation date display.  Signed-off-by: Bill Erickson <berick@esilibrary.com>

2011-06-01  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/perlmods/OpenILS/Application/Reporter.pm: Whitespace
	cleanup in aisle 3 (O:A:Reporter) Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-01  Michael Peters <mrpeters@library.in.gov>

	* Open-ILS/src/perlmods/OpenILS/Application/Reporter.pm: LP#740466
	Sort report folders by name Add order_by to Reporter.pm to sort report folders by name Signed-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-06-01  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/OpenILS/Application/Search/Serial.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Serial.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0543.data.reformat_generated_coverage.s
	ql: Serial holdings display consistency fix When holdings are sourced from both MFHD and the DB, display may be
	inconsistent due to a hard-coded ', ' in Serial.pm.  This patch
	works around the problem by storing generated_coverage as a JSON
	array instead of a string, leaving display formatting to the OPAC.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Dan Scott
	<dan@coffeecode.net>

2011-05-31  Michael Peters <mrpeters@library.in.gov>

	* Open-ILS/web/opac/locale/en-US/opac.dtd: LP#739444 Incrementing
	opac.dtd copyright date Signed-off-by: Michael Peters <mrpeters@library.in.gov>
	Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-27  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/web/opac/locale/en-US/lang.dtd: indicate what date format
	to use for offline patron registration Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-27  Thomas Berezansky <tsbere@mvlc.org>

	* Open-ILS/xul/staff_client/server/circ/checkin.xul: Fix Hold
	Capture checkin mode oils_persist was trumping hardcoded values.  Also, change how
	checked is set/unset for reliability.  Signed-off-by: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by:
	Jason Etheridge <jason@esilibrary.com>

2011-05-26  Mike Rylander <mrylander@gmail.com>

	* Open-ILS/web/opac/skin/default/xml/home/index_body.xml: Patch
	suggested by Jason Boyer for LP#788601 The <script> tag for the chrome frame message has a misplaced
	semicolon, which causes an odd looking display issue in Internet
	Explorer. I realize that ideally very few people will be using IE,
	but even if they're not interested in a quality browsing experience
	we should probably put our best face forward.  Signed-off-by: Mike Rylander <mrylander@gmail.com> (cherry picked
	from commit bbc874ddb42ac05130ccfad92fc55ccebd6af882) Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-05-26  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/xul/staff_client/server/serial/manage_dists.js,
	Open-ILS/xul/staff_client/server/serial/manage_dists.xul,
	Open-ILS/xul/staff_client/server/serial/manage_subs.js,
	Open-ILS/xul/staff_client/server/serial/manage_subs.xul: Distinguish
	between 'Show Groups' checkboxes in Serial Control Two different checkboxes ended up with the same ID, which, as one
	might expect, kinda worked and kinda didn't.  Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-26  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/xul/staff_client/server/serial/manage_dists.js,
	Open-ILS/xul/staff_client/server/serial/manage_subs.js: Checking for
	'twisty' leads to false negatives in Serial Control Since a tree can be opened with a double-click, we can't rely on
	'twisty' being set to load the child data.  Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-25  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/xul/staff_client/chrome/content/util/network.js: missed
	this way back when.  fix multiple event override handling (for
	ilsevent lacking events), re: lp#757634.  Also add some missing
	typeof's Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-25  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/support-scripts/authority_control_fields.pl: Fix
	authority linking script typo Problem reported by Ditty Mulder <dmu@iisg.nl> Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-25  Dan Wells <dbw2@calvin.edu>

	*
	Open-ILS/src/sql/Pg/upgrade/0538.data.at-event-def-acq-invoice-prin
	t.sql,
	Open-ILS/src/sql/Pg/upgrade/0540.schema.missing_serial_unit_trigger
	s.sql: upgrade_deps_block_check() is not in the branches at this
	point Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-24  Dan Scott <dan@coffeecode.net>

	*
	Open-ILS/src/sql/Pg/upgrade/0541.schema.call_number_honor_default_c
	lass.sql: Use the right upgrade log format for 2.0 upgrade Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-24  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/0541.schema.call_number_honor_default_c
	lass.sql: Trivial line-wrapping patch for call number class defaults Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-24  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/0541.schema.call_number_honor_default_c
	lass.sql: Make label_class on any new call numbers default to
	org_unit setting Evergreen 2.0 added a label_class column to the call number table
	with one major purpose being the generation of correct sort keys.
	You can also specify a default label class as an org unit setting.
	However: 1) There are no interface elements for setting the label class of an
	individual call number.  2) The default setting from the actor.org_unit_setting
	'cat.default_classification_scheme' value, if set, is not consulted
	(that is, not set in the call number table) when new call numbers
	are created.  These two facts together greatly reduce the utility of this very
	valuable feature, as all new call numbers end up in the 'Generic'
	class.  While #1 has been addressed in 2.1+, there is still work to be done
	in setting this class on import. Also, which interface parts (if
	any) make it back to 2.0 is subject to debate.  This commit addresses #2.  See lp #787150.  Signed-off-by: Dan Wells <dbw2@calvin.edu> Signed-off-by: Dan Scott
	<dan@coffeecode.net>

2011-05-24  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/210.schema.serials.sql,
	Open-ILS/src/sql/Pg/901.audit-tables.sql,
	Open-ILS/src/sql/Pg/upgrade/0540.schema.missing_serial_unit_trigger
	s.sql: Bring serial.unit in line with asset.copy Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-24  Jason Etheridge <jason@esilibrary.com>

	* Open-ILS/web/js/ui/default/actor/user/register.js: remove
	restriction on resetting pw to random number when Use Phone Password
	setting is active.  uEditMakeRandomPw will still get called for new
	users, but should get overwritten once a phone number is entered Signed-off-by: Jason Etheridge <jason@esilibrary.com>

2011-05-17  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/110.hold_matrix.sql,
	Open-ILS/src/sql/Pg/upgrade/0534.schema.fix_hold_permit_test.sql: 
	stop hold permit check from crashing if age protection in effect Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-05-23  Mike Rylander <mrylander@gmail.com>

	* : commit 3094fedd8aab0223868667d6a9d6ceaa824d2735 Author: Mike
	Rylander <mrylander@gmail.com> Date:   Mon May 23 11:07:20 2011
	-0400

2011-05-23  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/extras/Makefile.install: Update Lenny prereqs for
	MARC::Record 2.0.1+ 2.0 requires MARC::Record 2.0.1+, and the packaged version of
	MARC::Record is just 2.0.0. This causes mysterious failures of
	various open-ils.search.biblio.* methods - so teach the prereq
	installer to get a new enough version of MARC::Record on Lenny.  Aside: The juggling of prereqs in a single Makefile for multiple
	distros is starting to get extremely complex, perhaps it's time to
	split them out to a single Makefile per distro? Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-23  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/examples/apache/eg.conf: Apply Apache file expiration to
	the current official Javascript content type At least on Ubuntu 10.04, Javascript files are generally delivered
	with a Content-Type header of 'application/javascript', not
	'application/x-javascript'.  This change applies the much shorter 18
	hour expiration to the affected files, rather than allowing them to
	default to 1 month.  Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-20  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0538.data.at-event-def-acq-invoice-prin
	t.sql: Fix bad seed data in an A/T template The action_trigger event def template for printing acq invoices was
	syntatically broken.  The collapse filter isn't important per se,
	but it balances the extra [% END %] at the bottom of the template,
	and it was there originally, and I see no reason not to put it back.  Incidentally, maybe the database upgrade script in the commit will
	be the first in master to successfully use the new
	evergreen.upgrade_deps_block_check() function ? Reported by Sally Fortin.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-05-20  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: Fix a
	problem with open-ils.circ.holds.retrieve_all_from_title Anoop Atre spotted this bug that's triggered by selecting "View
	Holds" from "Actions for Selected Record" in the catalog seen
	through the staff client.  Said method would error out like this: [2011-05-20 10:04:03] open-ils.circ [ERR
	:31866:CStoreEditor.pm:109:13058333633194115] editor[0|1] request
	error open-ils.cstore.direct.serial.issuance.id_list.atomic :
	{"subscription":[]} : Exception:
	OpenSRF::DomainObject::oilsMethodException 2011-05-20T10:04:03
	OpenILS::Utils::CStoreEditor
	/openils/lib/perl5/OpenILS/Utils/CStoreEditor.pm:412 <500>  Severe
	query error -- see error log for more details because when trying to gather issuance-type holds, it didn't
	properly test whether there actually were any subscriptions and
	issuances related to the bib record in question.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-05-19  Galen Charlton <gmc@esilibrary.com>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: add missing upgrade
	step to create staging schema Signed-off-by: Galen Charlton <gmc@esilibrary.com>

2011-05-18  Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

	* Open-ILS/src/perlmods/OpenILS/Application/Cat.pm: Add permission
	checking for updating and deleting volumes.  This addresses LP #784062 reported by Ben Shum, and I think others? Creating volumes was already covered.  The ability to delete volumes
	without permission would be less often an issue in practice since
	you would need permission to delete the volume's copies before you
	could delete the volume itself.  Anyway, this should square things.  Signed-off-by: Lebbeous Fogle-Weekley <lebbeous@esilibrary.com>

2011-05-17  Dan Scott <dan@coffeecode.net>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/011.schema.authority.sql,
	Open-ILS/src/sql/Pg/upgrade/0535.schema.authority_indexes.sql: 
	LP#783486: Improve authority lookup performance Testing showed that the two indexes added herein improve authority
	lookup performance radically; on a 16 GB RAM database server with
	1.1M records, lookup times decreased from 5500 ms to 0.223 ms.
	Recommended, would EXPLAIN ANALYZE again.  Signed-off-by: Dan Scott <dan@coffeecode.net>

2011-05-16  Mike Rylander <mrylander@gmail.com>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/authori
	ty.pm: Ignore "deleted" authority records when using the
	tag-validation method Signed-off-by: Mike Rylander <mrylander@gmail.com>

2011-05-16  Dan Wells <dbw2@calvin.edu>

	* Open-ILS/src/perlmods/OpenILS/Utils/MFHD/Date.pm: Borrow
	on_or_after() from MFHD/Caption.pm in MFHD/Date.pm Signed-off-by: Dan Wells <dbw2@calvin.edu>

2011-05-13  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Utils/MFHD/Caption.pm,
	Open-ILS/src/perlmods/OpenILS/Utils/MFHD/Date.pm,
	Open-ILS/src/perlmods/OpenILS/Utils/MFHD/Holding.pm,
	Open-ILS/src/perlmods/OpenILS/Utils/MFHD/test/mfhd.t,
	Open-ILS/src/perlmods/OpenILS/Utils/MFHD/test/mfhddata.txt: A bevy
	of MFHD bug fixes (and test cases) 1) Remove hard-coded 'gap' text from format_part() 2) Honor $ypm## for chron_to_date() for annuals 3) Removed overly simple check on $w as digit 4) Allow for combined chronologies other than 2nd level 5) Make calendar changes trump $u counts 6) Honor issue restarts at calendar changes 7) Rudimentary support of $u counts for non-restarting issue
	numbering 8) Special interpretation of $yps for early winters (i.e. winter is
	the first season of the calendar year) 9) Teach chron_to_date() about early winters The last two points deserve some special attention.  A large number
	of journals consider 'Winter' to be the first season of the year, so
	Winter 2011 means (roughly) January 2011, not December 2011.
	However, there is no explicit way to indicate this in the standard,
	and also the code relies in many ways on the fact that 24
	(chronology code for winter) is greater than 21 (code for spring).
	To work around this, we are interpreting a certain ambiguous pattern
	in a particular way.  Specifically, if you set $w to a digit, then
	set $y to 'ps24,21,22,23' (or some variation with '24' as the first
	value), you will get this winter-first behavior.  Also, the season
	is treated internally as '20' then converted to '24' when processing
	is completed.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20472
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: Patch
	from James Fournie addressing LP#781803: Multiple renewal fails on
	MAX_FINES circs git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20463
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/actor.p
	m: Wrap proximity refreshing in a transaction to avoid timespans
	where there is no such information git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20457
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Vandelay.pm: Address
	LP#779975; Status of Available (0) not honored because 0==false --
	use ternary op with defined() instead git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20454
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-12  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm: Add missing
	permission checks to Serial.pm git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20451
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-05  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/nls/Searcher.js: Use valid
	JSON in Dojo i18n for Searcher.js Dojo i18n processing scripts require valid JSON (quoted keys in
	hashes), even though Dojo itself is more relaxed and accepts
	unquoted keys. So, do the i18n dance here.  Signed-off-by: Dan Scott <dscott@laurentian.ca> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20439
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-05  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/2.0.5-2.0.6-upgrade-db.sql: adding upgrade
	script git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20433
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/checkout.js: Patch from
	James Fournie improving due-date-editor usability by auto-checking
	the check box; LP#70956965 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20422
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/reporter/clark-kent.pl: Patch from Jason Boyer
	swapping the order of report and template name in emailed notices;
	LP#777273 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20419
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-04  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/sbsum_editor.js,
	Open-ILS/xul/staff_client/server/serial/scap_editor.js,
	Open-ILS/xul/staff_client/server/serial/siss_editor.js,
	Open-ILS/xul/staff_client/server/serial/sisum_editor.js,
	Open-ILS/xul/staff_client/server/serial/sssum_editor.js: Fix some
	Serial Control text boxes which were too small to use effectively.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20416
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0529.data.merge_user-ou_settings.sql: 
	Collaboration patch from Joseph Lewis and Michael Peters addressing
	LP#758007, missing patron merge OU settings.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20409
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Addressing LP#732681
	at upgrade time -- make authority records useful for controlling
	bibs git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20403
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/pre_cat_fields.xul: Initial
	fix from Michael Peters addressing small-screen UI issues: LP#767507 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20402
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-04  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/apachemods/mod_idlchunk.c: Change an ERROR to a DEBUG
	log message in mod_idlchunk Reported by James Fournie at Sitka, this message was logged as an
	error when it is simply a debug message; we drop the level
	accordingly so that it will not appear in the Apache logs during the
	normal course of operations.  Signed-off-by: Dan Scott <dan@coffeecode.net> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20399
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: Patch
	from Michael Peters to protect cut-in-line holds from staff without
	the appropriate permission git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20396
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-03  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/011.schema.authority.sql,
	Open-ILS/src/sql/Pg/020.schema.functions.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0528.schema.functions_assume_unicode.sq
	l, Open-ILS/src/support-scripts/authority_control_fields.pl: Avoid
	data loss by setting MARC::Charset->assume_unicode(1) When using MARC::File::XML, MARC::Charset is used to perform
	character conversions; however, MARC::File::XML does not tell
	MARC::Charset that it is handling Unicode data. If we do not tell
	MARC::Charset that it is handling Unicode data, it can return an
	error which results in the loss of data (typically a subfield
	containing one or more characters which MARC::Charset does not have
	an equivalent mapping outside of Unicode).  This problem could be reproduced in authority_control_fields.pl with
	a subfield like "von Hans-Christian Mller" - when this subfield
	was encountered without assume_unicode(1), a null string was
	returned for that subfield, and if the record was written back to
	the database due to an authority match being found in a different
	field, the only recourse was to restore the record from
	auditor.biblio_record_entry_history. The same sort of problems could
	occur for any other script or function that modifies the data being
	handed to it using MARC::File::XML and BinaryEncoding => UTF8.  Signed-off-by: Dan Scott <dscott@laurentian.ca> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20387
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-03  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/actor/user/register.js: Followup patch
	to the first listed in
	https://bugs.launchpad.net/evergreen/+bug/745123 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20384
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-02  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/admin/stat_cat_editor.js: Fix bug
	and typo in stat cat editor Specifically, disabling the ability to select a stat cat type on no
	permissions on current type.  If you don't have permissions on ASSET you could never get to ACTOR.  If you picked ACTOR without rights you couldn't get back to ASSET.  Also, re-enable the library selector and new buttons when you do
	change to one you can add for.  Author: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by: Thomas
	Berezansky <tsbere@mvlc.org> Signed-off-by: Jason Etheridge
	<jason@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20373
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-02  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/util.js: fix "undefined is
	in transit" https://bugs.launchpad.net/evergreen/+bug/773528 --- Fix bug squashing of params in checkin_via_barcode2 in circ/util.js.  Author: Jason Stephenson <jstephenson@mvlc.org> Signed-off-by: Jason
	Stephenson <jstephenson@mvlc.org> Signed-off-by: Jason Etheridge
	<jason@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20370
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-01  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/adv_global.js: After
	investigation by Dan Scott, Michael Peters and Mike Rylander (a
	little), apos removal in advanced search normalization is considered
	harmful.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20366
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-01  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/copy_summary.xul,
	Open-ILS/xul/staff_client/server/patron/bill_details.js: Patch from
	Michael Peters, Jason Boyer and Jason Etheridge addressing
	LP#744244: bill_details.xul "Checkout or Renew Library" column is
	blank git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20363
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-05-01  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/authority_control_fields.pl: Slight
	optimization for authority_control_fields.pl Instead of creating two CStoreEditors per bib record, reuse the
	global CStoreEditor for read operations; this way we only have to
	create a new CStoreEditor if a record has fields to authorize.  Signed-off-by: Dan Scott <dan@coffeecode.net> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20358
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-27  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/WWW/SuperCat.pm: One more strictly
	integer check for fleshing feeds in SuperCat Missed this one in r20336. Argh.  Signed-off-by: Dan Scott <dscott@laurentian.ca> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20338
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-27  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/WWW/SuperCat.pm: Consolidate on
	checking for integers for -full / -uris The check for an integer when $flesh eq 'uris' was throwing errors
	and breaking authority browsing; rather than complicating matters
	further, use an explicit integer for the return value when the
	format ends with "-uris" so that we can simply test for an integer
	value greater than 0.  Signed-off-by: Dan Scott <dscott@laurentian.ca> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20337
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-27  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/authority_control_fields.pl: Prevent
	a MARC::File::XML error from killing authority_control_fields.pl
	batch Continuing to make this script bullet-proof, MARC::File::XML cares
	deeply about things like whether datafields have indicators and
	throws exceptions that, if not caught, kill a processing script -
	like this one.  Borrowing the approach from marc_export, wrap the new_from_xml()
	call in a try / otherwise block and roll on.  Signed-off-by: Dan Scott <dscott@laurentian.ca> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20334
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-26  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/circ/checkin_overlay.xul,
	Open-ILS/xul/staff_client/server/circ/util.js: Hold, Transit, and
	Hold/Transit Slips used to suppress the printer dialog, but we lost
	that when we moved to templated slips.  This adds a sticky Printer
	Prompt checkbox to Check In for controlling that behavior.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20331
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-26  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/util/print.js: Setting
	print.always_print_silent to false is a bad thing, since it trumps
	gPrintSettings.printSilent, and will cause a print dialog regardless
	of Printer Prompt or Auto-Print checkboxes.  Let's clear it instead
	when toggling it off, and if we find it lingering as false from past
	code, let's clear it then too.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20330
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-26  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/authority_control_fields.pl: Protect
	against errors returned by open-ils.search If open-ils.search returns an error rather than a result, prevent
	authority_control_fields.pl from bombing out completely; instead,
	flag the problem in STDERR and move on to the next record.  Signed-off-by: Dan Scott <dscott@laurentian.ca> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20325
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-26  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/myopac.js: set the cancel cause
	field when patrons cancel holds.  There's a holdsCancel function
	that also does this, but it never gets called by anything git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20322
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-26  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/checkin.js: fix disappearing
	cursor/caret for Check In git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20316
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-26  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/authority_control_fields.pl: Make
	authority_control_fields.pl resistant to database timeouts LP 771237 describes how on an underpowered system, the work that
	authority_control_fields.pl tries to do on a per-record basis may
	hit the CStore default timeout of 6 seconds for a transaction and
	automatically end the transaction, resulting in no work being
	committed once the script tries to update the bibliographic record.
	Searching each controlled field for a matching authority record can
	be costly in a database with millions of authority records.  To enable the script to accomplish its work on underpowered test
	systems, use a regular read-only CStoreEditor session to accomplish
	the lookups and create a separate CStoreEditor session to issue the
	update in a transaction if required.  Signed-off-by: Dan Scott <dscott@laurentian.ca> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20313
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-25  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/WWW/AddedContent/OpenLibrary.pm: Add
	a space between TOC part and TOC title in OpenLibrary added content In trunk/rel_2_1 we switched to layout.css for table of contents
	styling. We'll keep it simpler for stable 2.0 and handle this bugfix
	completely inline.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20305
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-22  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Driver/Pg/QueryPa
	rser.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Storage/QueryParser.pm: 
	address the empty-query case git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20297
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-22  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/holds.js: Disable Save
	Columns in xul holds interface when Hold Details is being viewed.
	https://bugs.launchpad.net/evergreen/+bug/691599   Not the best fix,
	but the quickest fix git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20294
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-22  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Storage/QueryParser.pm: 
	Address LP#730743, errant parens cause pain Specifically, we prune subplans that contain no nodes (empty
	parens), and avoid dropping out of the top level query context when
	we encounter a close-paren.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20291
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-22  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/main/menu.js: Turn off
	non-working print button for holds pull https://bugs.launchpad.net/evergreen/+bug/727983 Author: Thomas Berezansky <tsbere@mvlc.org> Signed-off-by: Thomas
	Berezansky <tsbere@mvlc.org> Signed-off-by: Jason Etheridge
	<jason@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20282
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-22  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/actor/user/register.js: Patch from
	James Fournie to sort statcats in their comboboxes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20277
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-21  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/SIP/Patron.pm: check user 'active'
	field in SIP charge_ok (and dependent) calls git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20270
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-20  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/cat/opac.js,
	Open-ILS/xul/staff_client/server/cat/util.js: Revert r20035 -
	restore default copy status for Fast Add to "Available" As noted in https://bugs.launchpad.net/evergreen/+bug/756838, the
	default status for "Fast Add" copies has been "Available" since
	release 1.6.1.0.  Changing the default in the middle of the 2.0
	release series would likely cause more confusion for those sites who
	appreciate the current Fast Add behaviour, so this reverts the
	changes in r20035 and maintains the same defaults as 1.6.1.0.  Note that in r20264, 2.1.0 will gain two new org unit settings that
	will enable sites to control their preferred default copy status for
	the Fast Add and Add Volume interfaces.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20265
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-20  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/import/direct_ingest.pl,
	Open-ILS/src/extras/import/direct_loader.pl,
	Open-ILS/src/extras/import/marcFilterDump.pl,
	Open-ILS/src/extras/import/marc_add_ids,
	Open-ILS/src/extras/marc2html,
	Open-ILS/src/perlmods/OpenILS/Application/Acq/Order.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Acq/Picklist.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Search/Z3950.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/asset.p
	m, Open-ILS/src/perlmods/OpenILS/Application/Vandelay.pm,
	Open-ILS/src/perlmods/OpenILS/WWW/Exporter.pm,
	Open-ILS/src/perlmods/OpenILS/WWW/SuperCat.pm,
	Open-ILS/src/perlmods/OpenILS/WWW/Vandelay.pm,
	Open-ILS/src/support-scripts/marc_stream_importer.pl: Backport of
	trunk r20250: Always use BinaryEncodeing => "UTF-8" with
	MARC::File::XML git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20252
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-20  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/offline-blocked-list.pl: Patch from
	Jeff Davis addressing parameter usage issues git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20246
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-19  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/opac/nls/opac.js: Typo:
	Propeties/Properties git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20226
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-19  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: Use top
	level join instead of subquery in hold queue position query This is more readily optimized by the Postgres planer.  Note also, for very large data sets (lots of holds, on the order of
	100k+ active), the following is also advised:  ALTER TABLE action.hold_copy_map alter column target_copy SET
	 statistics 500, alter column hold set statistics 500; ANALYZE
	action.hold_copy_map; This gives the planner better data about the hold-copy-map
	n-distinct.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20219
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-19  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/util/list.js: Fix
	dump-style printing by ensuring 'params' is defined before accessing
	it git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20218
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-19  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/holds.js: one more fix,
	for Show in Catalog on issuance holds git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20198
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-19  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/util.js,
	Open-ILS/xul/staff_client/server/locale/en-US/common.properties: 
	display issuance label, not subscription label git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20197
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-19  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/xul/staff_client/server/circ/util.js,
	Open-ILS/xul/staff_client/server/locale/en-US/common.properties,
	Open-ILS/xul/staff_client/server/patron/holds.js: Add xul support
	for displaying issuance holds (needs testing) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20196
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-19  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: Mark cmc.label for
	translation, not cmc.name, in seed data git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20194
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-19  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml: Mark cmf and cmc labels as
	translatable We went to the effort of extracting the translatable text from
	950.data.seed-values.sql, but had not marked the fields as
	translatable in the IDL. Now at least the out-of-the-box fields and
	classes will easily be able to have translations.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20191
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-19  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/Makefile: Add openils.widget.Searcher Dojo NLS to the
	i18n build Necessary for the "advanced" searchbar on the Evergreen AjaxPAC.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20187
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-19  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/authority_control_fields.pl: Correct
	encoding issue with authority_control_fields.pl Is there ever a time when MARC::File::XML would be invoked with
	anything other than BinaryEncoding => 'utf-8'? Not here, at least.
	Addresses LP# 764582.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20184
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-18  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql: improve comments on a
	couple config tables Based on suggestions from Mike Rylander and Thomas Berezansky.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20167
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-18  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/005.schema.actors.sql,
	Open-ILS/src/sql/Pg/008.schema.query.sql,
	Open-ILS/src/sql/Pg/020.schema.functions.sql,
	Open-ILS/src/sql/Pg/090.schema.action.sql,
	Open-ILS/src/sql/Pg/200.schema.acq.sql,
	Open-ILS/src/sql/Pg/999.functions.global.sql: minor improvements to
	database object comments * remove copyright, license verbiage, and C-style comment marking   from the comments; these can live in the SQL scripts * updated several copyright headers * minor improvements to documentation of a couple tables Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20166
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-18  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.xul: in the MARC
	Editor, put the callnumber and barcode textboxes for Fast Item Add
	on a separate row git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20153
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-18  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/tests/check_entities.py,
	build/i18n/tests/check_properties.py: Enable relative paths in i18n
	testing scripts We were 98% of the way there; now we no longer need to cd into the
	same directory as the i18n testing scripts to run them with
	meaningful output. Should be useful for adding these to the CI
	server.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20150
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-18  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/tests/check_entities.py: Don't check .js files for
	entities Must have asked this script to check JS files for valid entities for
	a reason at some point in the dark past, but it couldn't have been a
	very good reason; we're getting a false positive that needs to be
	hushed now. Better to just stop looking for XML entities in
	JavaScript.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20147
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-16  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0521.schema.u-no-uri-use.sql: Allow NULL
	"use restriction" fields for located URIs The asset.uri.use_restriction field, which is really a sort of
	public notes field for 856 fields, was grabbing the $u subfield
	(URL) as a sort of last-gasp effort to give it some data. However,
	the effect was rather odd and led to workarounds like Conifer's skin
	to avoid displaying the use restriction field if its value was
	identical to the URL, etc.  Instead, stop grabbing $u and handle the case where use_restriction
	column is NULL gracefully, just like the schema intended.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20125
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-16  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_summary.xml: Do
	not clear auri links in default skin The dojo orphan() call which attempted to wipe any non-located 856s
	was actually wiping the located 856s in the record detail display.  Removing the extra call makes this work in Firefox and Chromium, at
	least.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20122
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-16  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0520.schema.clear-old-asset-uris.sql: 
	Delete ##URI## call numbers and uri_call_number_map entries on bib
	reingest This approach will lead to some acn/auricnm ID inflation, but it
	works.  Addresses LP# 761130 (immortal ##URI## entries in asset.call_number)
	reported by Ben Shum and LP# 761085 (cannot delete bib with ##URI##
	volumes) reported by Jason Etheridge.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20119
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-15  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/WWW/SuperCat.pm: Protect dumb
	JavaScript engines from having to deal with actual Unicode The holdings_xml format did not include an XML declaration, but
	adding that as we do here still does not make the Firefox and
	Chromium JS engines capable of consuming XML that contains Unicode
	content outside of the base ASCII range.  So, we invoke entityize() to convert anything outside of the realm
	of ASCII to XML entities. An alternative would be to invoke
	entityize() in OpenILS::Application::SuperCat::unAPI::acn but it's
	not clear if that would interfere with any other uses.  With this change, library names / copy location names with Unicode
	content can be displayed correctly on the search results page.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20114
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-15  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0517.schema.multiple-9s-in-856.sql: 
	Re-add (from ingest in 1.6) support mulitiple subfield-9 values in a
	single 856 tag git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20103
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-15  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/c-apps/oils_sql.c: Protect pcrud-ish retrieve from an
	empty result set git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20096
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-14  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/WWW/SuperCat.pm,
	Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_summary.xml: 
	Restore URIs in marcxml-uris unAPI format At some point (r16750) we started doing a numeric comparison of
	$flesh instead of just checking to see if $flesh was defined; this
	returned false when $flesh == 'uris', preventing URIs from being
	included in the marcxml-uris unAPI format.  This restores URIs to marcxml-uris and so we can revert the extra
	BibTemplate call in rdetail_summary.xml.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20093
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-14  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_summary.xml: 
	Specify the holdings_xml unAPI format for URI calls The unAPI marcxml-uris format is not returning URIs at the moment.
	While we're getting that fixed, use the holdings_xml format to get
	the URI job done; requires an extra JS call, but that's better than
	not working at all.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20090
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-14  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/actor.p
	m: Escape rather than filter SIMILAR TO metacharacters in patron
	crazy search The filtering I introduced in r19983 was overly aggressive, and
	included characters that weren't actually SIMILAR TO metacharacters.
	Instead, escape each character, carefully going through the list of
	metacharacters listed at

	http://www.postgresql.org/docs/8.4/interactive/functions-matching.htmlWorks for email addresses like "foo.bar+baz@example.com".  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20087
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-14  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/extras/circ/alt_holds_print.js,
	Open-ILS/xul/staff_client/server/patron/holds.js: Backport r20082
	from trunk Address LP #754880, where printing happens before the progress
	dialog can be cleared in the alternate holds pull list print
	interface Additionally, provide the usual "print page" button so that the list
	can be reprinted at will git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20084
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-14  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0516.schema.acq-marc-extract.sql: 
	upgrade script for consistency w/ schema change in r20073 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20081
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-14  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/200.schema.acq.sql: rely on search_path to
	locate the extract_marc_field() function which is now installed in
	the 'evergreen' schema by default git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20078
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-14  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/import/quick_metarecord_map.sql: tweaks to
	quick_metarecord_map.sql * used version from wiki, which provides same results as the   previous version but performs better on large databases * now works without editing (a vacuum cannot run inside of a
	transaction) * don't do vacuum full, just a regular vacuum analyze [1]

	http://evergreen-ils.org/dokuwiki/doku.php?id=scratchpad:random_magic_spells#how_to_generate_metarecords_for_a_newly_loaded_bib_batchSigned-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20077
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-13  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/metabib
	.pm: Protect search against all-deleted bibs by pinning the
	estimation ratios in that case git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20067
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-12  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/upgrade/0510.schema.search_path.sql: repaired
	SQL upgrade syntax error git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20062
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/000.functions.general.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/090.schema.action.sql,
	Open-ILS/src/sql/Pg/upgrade/0511.schema.fake_fkey_tgr-for-inherited
	-tables.sql: Add a trigger function to simulate FKEY constraints on
	inherited tables git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20055
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/000.functions.general.sql,
	Open-ILS/src/sql/Pg/010.schema.biblio.sql,
	Open-ILS/src/sql/Pg/011.schema.authority.sql,
	Open-ILS/src/sql/Pg/210.schema.serials.sql: Final cleanup for the
	base schema, re search_path ... I hope git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20050
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0510.schema.search_path.sql: Fix
	functions stranded in the evergreen schema without a search path
	reference (ugly but mechanical) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20049
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-12  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/upgrade/0509.schema.better_maintain_901.sql: 
	add missing upgrade script Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20046
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-11  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/util.js: Let's not be picky
	about permissions here; an item needs to go where it needs to go :) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20042
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-10  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/bill_wizard.js,
	Open-ILS/xul/staff_client/server/patron/bill_wizard.xul: patch from
	jamesrf for lp#756880 for Grocery Billing Location in Bill Patron
	wizard git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20038
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-10  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/cat/opac.js,
	Open-ILS/xul/staff_client/server/cat/util.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js: for lp
	bug#756838, consistent copy status for new items.  jamesrf++ git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20035
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-08  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/common/li_table.js: repaired bug in
	prepayment_required check.  property -> method git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20032
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-08  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/OpenILS/data.js: For
	transit_slip template, %item_title%, %item_barcode%, etc. need to be
	in the Header, not the Line Item git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20029
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-07  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/myopac.js: test for pre-cat
	slightly off in OPAC My Account, spotted by Steve Callender git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20019
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-07  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/000.functions.general.sql,
	Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql: further fixes to
	maintain_901 Now correctly handles &, <, or > appearing in the tcn_value or
	tcn_source.  Also introduces a trivial utility stored function,
	evergreen.xml_escape(): evergreen.xml_escape(TEXT) returns TEXT: converts '&', '<', and '>'
	to XML entities Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20016
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-06  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0508.schema.maintain_901_amp_fix.sql: 
	fix crash when importing/saving bib with '&' in TCN value Also fix similar glitch if ampersand is present in the TCN source.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20005
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-06  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/SIP/Patron.pm: Patch from Thomas
	Berezansky to support patron priv expiration information in SIP2 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@20000
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-06  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/holds.js: backport r18757 for
	org hiding tweak git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19997
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-05  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/actor.p
	m: Prevent patron search from returning horrible errors on regexian
	input Add a utility method, _clean_regex_chars(), to filter common regex
	characters out of input values.  When these characters are passed to
	database SIMILAR searches, strange things (generally ugly errors)
	can happen - so filter them out.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19985
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-04  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/editor_base.js,
	Open-ILS/xul/staff_client/server/serial/serctrl_main.xul,
	Open-ILS/xul/staff_client/server/skin/serial.css: More robust fix
	for edit highlighting in Serial Control View git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19982
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-04  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/editor_base.js: Fix edit
	highlighting in Serial Control View git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19977
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-04  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/po/view_po.js: order line items in
	PO display by line item ID Order was effectively random otherwise.  Use case from at least one
	library indicates this change, but doesn't preclude later work to
	make the sort order more flexible.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19972
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-04  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/xul/staff_client/server/patron/search_form_horiz_overlay.x
	ul: reorder tabindex for horizontal patron search.  non-flex the
	search button.  thanks to sylvar and others for poking git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19970
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/2.0.4-2.0.5-upgrade-db.sql: 2.0.5 upgrade
	script git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19966
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-04  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/XUL.js: Booking: in support of
	r19944, backport newer openils.XUL.newTabEasy() from trunk as well git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19947
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-04  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/booking/capture.js,
	Open-ILS/web/js/ui/default/booking/pull_list.js,
	Open-ILS/web/js/ui/default/booking/reservation.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/server/patron/display.js: Backport r19942
	from trunk Booking: This should a) make booking interfaces behave better when a
	staff login session times out and is replaced by use of a re-auth
	dialog, and b) wrap booking interfaces in a <browser> element with
	the attendant back/forward/reload buttons that most similar
	interfaces already had.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19944
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-04  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/extras/circ/alt_holds_print.html: Backport
	r19937 from trunk Ben Ostrowsky pointed out that the alt holds (pull list) printing
	interface was trying to include AutoIDL.js from an incorrect path.  I don't believe that file should be included at all, so now I've
	removed the broken line.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19939
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-02  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/sql/Pg/upgrade/0506.schema.tree-ish_function_row_estim
	ates.sql: Adjust upgrade for 2.0 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19933
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-02  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/006.schema.permissions.sql,
	Open-ILS/src/sql/Pg/020.schema.functions.sql,
	Open-ILS/src/sql/Pg/upgrade/0506.schema.tree-ish_function_row_estim
	ates.sql: Add realistic row estimates to tree-ish functions (default
	is 1000) so that callers can make better plans in complex queries;
	includes four functions backported from 2.1 for simplicity when it
	comes to upgrading git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19932
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-01  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm: Patch from Thomas Berezansky to address unneccessary fine
	generation and avoid unchecked division by zero; details and DCO at
	https://bugs.launchpad.net/evergreen/+bug/747533 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19929
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-01  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Driver/Pg/QueryPa
	rser.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Storage/QueryParser.pm: 
	Better search normalization de-duping when 'params' are used This patch addresses search normalization deduping at two levels.
	We now verify that both the function and the params are the same
	before excluding a normalization, both when the normalization is
	first added to the set and when the SQL is being built (since
	currently multiple sets may be involved).  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19926
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-04-01  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/copy_browser.xul: reposition
	these labels to mitigate horizontal scrolling in Holdings
	Maintenance git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19923
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-31  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Search/Biblio.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/metabib
	.pm: Use identifer indexes for older ISxN API methods (LP Bug
	#728671) There are three logic layers involved in the older ISxN 'quick
	searches': the OPAC, the search API, and the storage API.  The
	approach of this patch is to update the search API (which in turn
	fixes the OPAC), and ignore/deprecate the storage API for these
	identifiers.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19922
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-31  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/util/timestamp.js,
	Open-ILS/xul/staff_client/server/circ/checkout.js,
	Open-ILS/xul/staff_client/server/circ/renew.js: Logic error trying
	to merge the date component of one date object with the time
	component of another.  We were trying to use the time object and
	update it piecemeal, which resulted in non-sensical dates that were
	forced to wrap.  For example, if the date object was to set to March
	31, 2011, and we tried .setMonth(3) on it to change it to April,
	that would result in an April 31st, which doesn't exist, and the
	date thus moves forward a certain number of days into May.  This affects Check Out, dedicated Renew interface, and the various
	date picking functions in Items Out and Holds interfaces.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19919
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-30  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/holds.js: add item columns
	to xul-based holds lists Could argue this fixes a regression, since the original pull list
	from 1.6 showed the circ modifier, and the xul alternative does not.
	So begging forgiveness :) Signed-off-by: Jason Etheridge <jason@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19914
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-30  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/default/actor/user/register_table.tt2: 
	Change label to "Reset Password" and get button out of tab ordering In a keyboard-intensive patron input workflow, pressing tab should
	not place focus on the "Reset Password" button; the password is
	automatically generated at dialog creation time. Setting tabIndex to
	-1 disables tab focus for the button.  Also, the button has been relabeled to "Reset Password" to be
	consistent with the previous button.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19911
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-30  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/actor/user/register.js,
	Open-ILS/web/templates/default/actor/user/register_table.tt2: 
	Restore the Reset Password button on patron editor Per LP 488243, the Reset Password button that existed on the old XUL
	patron editor was lost in the transition to the new Dojo patron
	editor. Jason Stephenson stepped up and offered a patch to restore
	the functionality.  Developer's Certificate of Origin 1.1 By making a contribution to this project, I certify that: (a) The contribution was created in whole or in part by me and I     have the right to submit it under the open source license     indicated in the file; or (b) The contribution is based upon previous work that, to the best     of my knowledge, is covered under an appropriate open source     license and I have the right under that license to submit that     work with modifications, whether created in whole or in part     by me, under the same open source license (unless I am     permitted to submit under a different license), as indicated     in the file; or (c) The contribution was provided directly to me by some other     person who certified (a), (b) or (c) and I have not modified     it.  (d) I understand and agree that this project and the contribution     are public and that a record of the contribution (including all     personal information I submit with it, including my sign-off) is     maintained indefinitely and may be redistributed consistent with     this project or the open source license(s) involved.  Signed-off-by: Jason Stephenson <jstephenson@mvlc.org> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19910
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-30  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0505.schema.force_facets_to_NFC.sql: fix
	typo in facet_force_nfc definition Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19905
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-29  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0505.schema.force_facets_to_NFC.sql: 
	Force facet values to Unicode NFC to reduce spurious non-matches git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19902
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-29  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/SIP/Patron.pm: Inspired by a 1.6
	patch from Brandon Uhlman to collect the set of holds not ready for
	pickup, 2.0+ style git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19901
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-29  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/offline/offline.pl: in the case of multiple xact
	event error responses, capture the first for staff client reporting git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19893
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-29  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/metabib
	.pm: bug 744687: fix multi-field MARC expert search Fixes bug where a bib that has multiple subfields meeting one
	condition of a 2+ field MARC expert search could end up in the
	results list even if it didn't meet the other conditions (currently
	multi-field MARC expert searches use implicit 'AND').  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19882
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-28  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm: Fix
	call-number sorting for non-generic sort keys (LP Bug #737819) Selecting on 'label' but sorting on 'label_sortkey' did not work
	properly.  Instead, we will now find the single best call number we
	can based on the label given, then both select and sort based on
	that call number's sort key.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19879
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-28  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xsl/oilsMARC21slim2HTML.xsl: MARC View print problem
	workaround (LP Bug #742033) Certain printers were failing to print from the MARC View in the
	staff client.  Adding a simple title to the view ended up being a
	successful workaround, and is unlikely to have negative consequences
	in any case.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19876
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-28  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/po/offline.properties/en-CA.po: Address LP 744393:
	Arabic text in en-CA offline.properties A translator appears to have mistakenly added Arabic text to the
	en-CA offline.properties file in Launchpad. This commit corrects
	those translations and completes the translation of the file for
	2.0.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19871
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-28  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/bill2.js,
	Open-ILS/xul/staff_client/server/patron/bill2.xul: fix up receipt
	options persistence in billing interface; implement # of receipts
	option (not perfect if using print dialogs; non-blocking and not
	necessarily queued up) Signed-off-by: Jason Etheridge <jason@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19870
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-25  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/admin/adminlib.js: fixes things
	like the stat cat editor, since that extra param now changes the
	return signature of the method Signed-off-by: Jason Etheridge <jason@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19864
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-25  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/OpenILS/data.js: 
	data.lookup was broken for cases where data.list[key] didn't exist
	for a given key Signed-off-by: Jason Etheridge <jason@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19862
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-25  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/apache/eg.conf: Avoid Apache warnings resulting
	from duplicate NameVirtualHost directives Benjamin Shum reported that the Apache warnings that have been a
	part of Evergreen's default configuration on Apache start for ages
	could be avoided by commenting out the "NameVirtualHost: *80" line
	in eg.conf. Testing confirmed that the directive was not necessary
	on Ubuntu, Debian, or Fedora. As this warning has been the cause for
	unnecessary concern on the part of many new adopters of Evergreen,
	getting rid of it appears to be a nice usability win.  Thanks Ben! git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19859
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-22  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/common/js/opac_utils.js: have checkILSEvent
	handle events that aren't in ils_events.xml Signed-off-by: Jason Etheridge <jason@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19854
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-22  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Driver/Pg/QueryPa
	rser.pm: Honor the 'active' flag in QueryParser.pm for
	search.relevance_adjustment entries.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19851
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-22  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install: Build libjs from source for
	now until the Perl threading problem can be reliably tested The previous commit changed JavaScript::SpiderMonkey to be built
	without thread safety, but on Fedora we had been installing the
	js-devel package (which was threaded). As you can't build a
	non-threaded JavaScript::SpiderMonkey on top of a threaded libjs,
	for now we'll make Fedora build a non-threaded libjs from source
	just like the other distros.  Note that the problem with threaded JavaScript::SpiderMonkey
	surfaced on Debian Lenny when targeting holds. Lenny has
	libthreads-perl 1.71, but a number of fixes have been committed to
	subsequent versions
	(http://cpansearch.perl.org/src/JDHEDDEN/threads-1.82/Changes) - so
	threading support might be reliable on more current distros. Once we
	have a reliable test, we might be able to go back to the packaged
	version of libjs.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19848
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-22  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/tools/update_db.sh: Another layer of escaping for the
	escapes in the DB update script Apologies for the previous patch that led to breakage; I "tested" in
	a script in which I had already hardcoded the answer I wanted after
	running into problems with the previous version of the script. Not
	good testing practice.  Thanks to Bill Erickson for suggesting the extra escapes. Tested in
	a clean environment this time, and it works.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19845
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-21  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install: Remove thready building --
	we do not use threads anyway, and it breaks JS::SM git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19842
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-21  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/tools/update_db.sh: Enable update_db.sh to handle upgrading
	databases with release version When '0475' is mixed with '1.6.0.4', the latter wins as far as a
	plain MAX() operator goes. Ensuring that the version is all digits
	should help avoid the release version numbers in the
	config.upgrade_log table.  Thanks to Thomas Berezansky for suggesting a SIMILAR TO operator
	variation that led to this approach.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19839
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-21  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/crontab.example: correcting bad timespecs in the
	example crontab git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19835
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-21  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/holds.js: no, this was
	correct.  doh :)  the list version uses paging, but we're counting
	the entire set git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19830
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-21  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/holds.js: this "count"
	method gets the same parameters as the list version git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19829
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-21  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* README: trivial grammar fix Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19826
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-18  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_summary.xml: 
	Make sure "ol" propagates through BibTemplate subject search links
	for OPAC range hiding git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19814
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-18  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/c-apps/oils_sql.c: Allow the "result_field" to be
	used as the default alias in the output column of a row or set
	returning transform git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19801
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-17  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/0502.data.defacto_OCLC_local_cn_fields.
	sql: Treat call number fields 090 and 092 as local LC and Dewey
	(respectively) based on de facto standards.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19792
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/holds.js: Addresses LP bug
	#736167, correctly populate hold format list for Advanced Options git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19776
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/2.0.3-2.0.4-upgrade-db.sql: Update the upgrade
	script whith version and additional upgrade bits git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19775
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0500.schema.search_path_mangling.sql: 
	upgrade script matching r19759-r19761 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19774
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-16  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/renew.js: dedicated renewal
	interface should use receipt printer git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19771
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/2.0.3-2.0.4-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0499.schema.generic_CN_normalizer.sql: 
	Patch from Steve Callendar addressing CN sort order on page 0 (and
	before) of CN browse git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19766
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm: Patch from Steve Callendar addressing holdability tests for
	copies git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19765
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-16  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.aggregate.sql: Backport r19756
	and r19758 for proper namespaces in aggregate functions Schema creation and recreation tested with PostgreSQL 8.4 and 9.0
	and seems good. Fingers crossed.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19762
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-16  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/000.functions.general.sql,
	Open-ILS/src/sql/Pg/002.functions.general.sql,
	Open-ILS/src/sql/Pg/build-db.sh: Set default db schema search path
	to public,pg_catalog With the addition of the 'evergreen' schema, we discovered that all
	of the unqualified database objects were being created in the
	'evergreen' schema if the database user name was 'evergreen' (as the
	default search path is "$user",public we started matching "$user").  Thomas Berezansky proposed a variation of the function provided here
	for changing database settings. By creating the function in the
	first schema file, the subsequent connections pick up the new
	default search path and all works blissfully as it once did.  Long term, we should probably move towards explicitly qualified
	database objects.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19761
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-15  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_overlay.xu
	l: Re-enable close button for staff client tabs There is a different fix for this in trunk/2.1, but I thought a
	simple fix for this was worth adding for those sticking with 2.0 for
	a while.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19757
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-15  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/reingest-1.6-2.0.pl: teach the 1.6-2.0
	reingest generator about "tnf"-tag rows for title sorting git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19755
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-15  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/reports/oils_rpt_folders.js: Prevent creation of
	report folders with empty folder names Addresses LP # 720755. Clicking the "Create Folder" button when no
	folder name has been supplied is now a no-op.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19743
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-14  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: exit
	gen_fines_stop early if there is nothing to do; prevents (unneeded)
	secondary call to ->wait_complete on potentially undef reference git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19740
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-12  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/000.english.pg84.fts-config.sql,
	Open-ILS/src/sql/Pg/002.functions.aggregate.sql,
	Open-ILS/src/sql/Pg/002.functions.general.sql,
	Open-ILS/src/sql/Pg/build-db.sh: Clean up build errors when
	creating/recreating database schema Dropping the evergreen schema cascaded and wiped out some previously
	defined functions, so move it ahead of the other functions. (And
	maybe we can start moving those public functions into the evergreen
	schema?) DROP AGGREGATE IF EXISTS exists on any version of PostgreSQL that we
	care about for Evergreen 2.0, so we can use it to avoid false errors
	during schema creation.  FTS config was complaining about public.english_nostop in the ALTER
	statement, so remove the schema qualification. This seems to have
	been there for a long time? git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19721
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-12  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/005.schema.actors.sql,
	Open-ILS/src/sql/Pg/upgrade/0498.lowercase_via_perl.sql: Use valid
	DDL for forgotten index on actor.card git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19720
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-12  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/actor.p
	m, Open-ILS/src/perlmods/OpenILS/Application/Vandelay.pm,
	Open-ILS/src/perlmods/OpenILS/Reporter/SQLBuilder.pm,
	Open-ILS/src/perlmods/OpenILS/WWW/Reporter/transforms.pm,
	Open-ILS/src/sql/Pg/002.functions.general.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/005.schema.actors.sql,
	Open-ILS/src/sql/Pg/012.schema.vandelay.sql,
	Open-ILS/src/sql/Pg/build-db.sh,
	Open-ILS/src/sql/Pg/upgrade/0498.lowercase_via_perl.sql: Resolve
	inconsistent results when invoking LOWER() in C vs. UTF8 locale
	databases As reported by the Fundamental Science Library of Armenia, patron
	searches were not retrieving patrons who were known to be part of
	the patron database.  While the initial approach to solve this problem used an
	encode_utf8() call to encode the data before passing it on to the
	database, this turned out to break the patron search function in
	other environments.  Testing by Dan Wells confirmed that the LOWER() function returned
	different results when invoked against text in a database created
	with LC_CTYPE=C vs a database created with LC_CTYPE=*.UTF-8. As the
	patron search function used a Perl lc() function call to convert the
	incoming data to lowercase, the success of the call depended on the
	LC_CTYPE value of the database.  To avoid this problem in the future, we define our own
	evergreen.lowercase() function that can reliably produce lowercase
	text for characters outside the Latin1 range, and we convert our
	indexes and function calls to use that function consistently.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19717
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-11  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/CreditCard.pm: only
	append street2 to CC payment address if no address is provided by
	the caller git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19713
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-11  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/financial/claim_eligible.js: 
	Backport r19709 from trunk Acq: The "Claim-Ready Items" interface did not render correctly for
	> 1 item The problem was racy async rendering logic. Now we look at our whole
	result set and build our table accordingly at the end.  This interface should probably learn about paging one day in order
	to handle large result sets.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19710
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-11  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* README: Update the README to include explict LC_CTYPE/LC_COLLATE
	db settings git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19708
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-11  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install: LANG=C results in SQL_ASCII
	encoding by default for PostgreSQL, which isn't cool We want LC_CTYPE=C and LC_COLLATE=C, and SERVER_ENCODING=UTF8.  The
	docs have been adjusted as 8.4 and up now offer database-level
	--lc-ctype / --lc-collate options for createdb command.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19705
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-11  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Actor.pm: use the
	existing util method for mvr-izing, since it handles some additional
	important steps (e.g. capturing doc_id) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19702
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-11  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/actor.p
	m: Ensure incoming query values to patron search are UTF8-encoded Addresses the problem reported with searching for patrons with
	Armenian names, where Unicode query params were getting corrupted on
	its way to the database.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19699
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-10  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Make the password
	reset upgrade safe for fresh DBs, upgraded DBs, and mangled DBs git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19689
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-10  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm,
	Open-ILS/web/js/dojo/openils/booking/nls/pickup_and_return.js,
	Open-ILS/web/js/ui/default/booking/populator.js: Backport r19682
	from trunk Booking: don't bail out completely on COPY_ALERT_MESSAGE when
	returning items Provide overridability.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19686
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-10  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: Skip
	fine generation when the fine interval is day-granular, meaning
	fines are handled by the nightly cron script git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19679
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-10  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: do some fancy
	dancing to make moving an event def around possible git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19672
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-09  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/Makefile: 'newpo' in install_all_locales was wiping out
	all fr-CA translations Long story short, we would rather have install_all_locales fail
	loudly than silently wipe out fr-CA.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19670
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-09  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: We should not be
	dropping and recreating the booking schema -- it was installed in
	1.6.1 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19667
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-09  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/myopac.js: Draw pre-cataloged
	items (author and title) in My Account checkedout screen Two problems: FETCH_MODS_FROM_COPY returns an object, so we weren't
	getting to the point of fetching the raw copy itself, and there was
	some confusion about pre-cataloged vs. non-cataloged items that is
	hopefully straightened out now.  Addresses LP # 723895 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19655
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-09  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/2.0.2-2.0.3-upgrade-db.sql: 2.0.3 upgrade
	script git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19652
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-09  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/bill2.js: Fix LP bug
	#727432, "overpaying with patron credit can generate a double
	credit" git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19651
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-08  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0496.data.search_indexes.sql: Add
	missing ampersand to ind1 attribute in identifier index xpaths This addresses LP # 731564. Thanks to Dan Wells for identifying
	(hah) the identifier xpath problem! git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19644
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-08  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Money.pm: Address
	LP bug #724583, "Paying Bills with Patron Credit does not always
	decrease patron Credit" git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19641
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-07  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* README: We now require PG 9.0+, say as much in the README; also,
	other assorted updates to version numbers git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19630
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-07  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/AutoGrid.js: Fix cloning of
	AutoField widgets: LP #728055 Cloning Action/Trigger event definitions was not working properly,
	as all values were being copied from the original object using their
	display strings rather than the underlying values.  Bill Erickson suggested a fix in IRC that works, so full credit to
	him for this change! git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19592
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-05  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0494.data.search_indexes.sql: Correct
	search index definitions for subject|complete and identifier|bibcn Dan Wells reported in LP# 729385 that the index definitions for
	subject|complete and identifier|bibcn were not working, and traced
	the problem to a change in how indexes are generated in 2.0+.
	Dropping the trailing '//text()' on these two indexes addresses the
	problem.  Sites upgrading from a previous version of Evergreen 2.0 will want
	to refresh the indexes after applying this schema change to enable
	searches against subject|complete and identifier|bibcn to work.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19589
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-04  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/WWW/SuperCat.pm: Respect a setting
	of depth=0. In particular, this fixes holdings requests for
	branch-level searches with an 'Everything' scope.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19585
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-04  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm,
	Open-ILS/src/perlmods/OpenILS/WWW/SuperCat.pm: Backport SRU fixes
	from trunk (r19572, r19573) Add complete set of Evergreen search aliases and attributes to SRU
	explain Original "pull from database" code had limited the search aliases to
	those that were qualified; now we pull all of them, and if they are
	not qualified, we qualify them as "eg".  In addition, for some of the non-index attributes (sort, direction,
	site, available), restore the descriptive title that was previously
	available.  Slightly longer term we will add a "description" column
	to config.metabib_search_alias to store this information.  By returning explicit index and title elements from the method, we
	can backport cleanly to 2.0 and set the stage for pulling the title
	element directly from the database in 2.1 and beyond.  In addition, the enriched object enables us to get rid of the
	hardcoded nested qualifier map for bibs.  Finally, we also fix the mappings of SRU qualifiers to Evergreen
	search aliases (in many cases we had been quietly falling back to
	plain kw searches, which was not cool).  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19576
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-03  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/c-apps/oils_auth.c: when using the force-reload
	option to reset timeout, propagate the ws_ou and wsid values from
	the cached user object into the reloaded user object git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19571
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-03  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/2.0.0-2.0.1-upgrade-db.sql: Patch (mildly
	revised) from Anoop Atre to address new Postgres 9.0 strictness
	requirements involving plan invalidation git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19569
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-03  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm,
	Open-ILS/src/perlmods/OpenILS/WWW/SuperCat.pm: Draw SRU search
	indexes from config.metabib_search_alias We had hardcoded search indexes for SRU, but thanks to the work of
	Mike Rylander, it is fairly easy to remove that brittle code and
	replace it with code that polls the contents of
	config.metabib_search_alias and dumps it into the explain document.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19567
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-02  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm: Call number
	sorting "before" the context needs to be segregated based on
	directly on the label, "here-and-after" on the bytea version.
	Testing bears this out, but more eyes would be appreciated.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19562
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-03-01  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger/Reactor.pm: Add
	a TT helper to encode email headers in UTF-8 This can and should be used to encode any headers (To, From,
	Subject, etc) in an email that might include text outside of the
	ASCII 7-bit range. Names of people or libraries, for example, that
	might otherwise come out garbled.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19548
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-25  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/admin/org_unit_settings.js: 
	Updated org selector code in org setting UI Removed some ad-hoc org-unit tree widget code and replaced with the
	a standard solution from the openils dojo user lib.  Pass the auth on org value retrieval to pick up perm-protected
	settings.  Use STAFF_LOGIN for context selector perm, since each setting has
	its own perm that is checked before fetching.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19545
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-25  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0492.data.update_cn_label_sortkey.sql: 
	make sure asset.call_number.label_sortkey is up to date git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19542
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-24  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/default/acq/picklist/brief_record.tt2: typo
	fix "Pat, I'd like to buy a vowel" Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19539
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-24  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0491.function.maintain_901_fix_regex.sq
	l: Fix regex in maintain 901c The previous regex would delete any 901 fields *and* any fields
	which followed.  Since the 901 is typically the last field, this
	problem didn't surface during testing.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19536
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-24  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Storage/CDBI/action.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Storage/CDBI/actor.pm: 
	added missing columns to CDBI table definitions Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19533
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-24  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Per Robert
	Soulliere, it can be necessary in some cases to clean out bad data
	from action.reservation_transit_copy before applying the missing
	fkeys to said table.  https://bugs.launchpad.net/evergreen/+bug/721450 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19529
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-23  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: clear out
	the hold_copy_map entries for holds cancelled via the clear-shelf
	processes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19527
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-23  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/0490.schema.staff-client-copy-counts.sq
	l: include copy/call_number deletedness in staff-version copy counts git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19524
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-23  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/authority_control_fields.pl: Add 830
	as a controllable bibliographic field in authority linking script Per http://www.loc.gov/marc/bibliographic/bd830.html, bibliographic
	830 should be controlled by authority 130. The "common cataloging
	practice" in 830 of omitting non-filing characters may cause some
	entries to not be linked that otherwise would be.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19520
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-23  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/Makefile: Correct the install location for Dojo i18n
	bundles We had been converting xx-YY into xx/yy for a directory structure,
	but current evidence shows that it should be xx-yy. Hard to believe
	we've overlooked this for so long. Also, with the exception of the
	en-ca/en-gb/en-us locales, we should probably trim the locale to
	just xx - but that's a different problem, and let's just focus on
	getting this working to begin with.  Addresses Launchpad # 723489 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19509
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-22  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/base.tt2: dojo.js has to be loaded from the
	same domain as the page, unless it's a cross-domain build git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19505
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-21  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/2.0.1-2.0.2-upgrade-db.sql: 2.0.2 upgrade
	script git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19500
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-21  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm: Make sure we continue looping in situations where there is only
	one copy git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19497
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-21  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Addressing LP bug:
	https://bugs.launchpad.net/evergreen/+bug/721450 If a series-class index definition has been removed, the data
	remains in the field entry table.  This is because there was no fkey
	previously.  We need to clean that data out so that the fkey can be
	validated during upgrade.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19492
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-18  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/result/result_table.xml: 
	Whitespace - convert mix of tabs/spaces to pure spaces git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19490
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-18  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/result/result_table.xml: Switch
	to BT.textContent() for Opera compatibility The BT.textContent() method abstracts away some of the browser
	differences for us. Most importantly, it makes Opera happy.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19489
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-17  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm: Backport r19470 from trunk Booking: fix the targeter in the
	I'm-reserving-this-exact-resource-with-this- exact-barcode case.  It should have always worked like this. This should better mirror
	the behavior in the holds targeter when placing a copy-level hold.
	Basically don't fail to target a resource for a reservation later
	just because it's not in an available status right at this moment.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19472
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-17  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* README: Note --admin-user / --admin-pass options for
	eg_db_config.pl Missed backporting this doc from trunk - thanks to Chris Sharp for
	pointing this out.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19469
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-17  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/body.xml,
	Open-ILS/web/opac/skin/default/xml/home/index_body.xml: Avoid
	mixed-content warnings due to HTTP link for Google Chrome Frame We're hardcoding this to HTTPS for now to avoid the mixed-content
	warnings that occur when content location is https:// and the linked
	script is at http:// but a config-aware patch probably wouldn't be a
	bad idea.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19468
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-17  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0488.function.maintain_901_tcn.sql: 
	Teach maintain_901 trigger to respect the "Use record ID for TCN"
	global flag Rather than relying on the Perl layer to set the correct TCN on the
	way in, do it as part of the in-database indexing to ensure that we
	have consistent results no matter how the record gets into the
	database.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19460
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/BibTemplate.js: Patch based on work
	by Dan Wells to improve Opera BibTemplate support git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19457
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-13  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/authority_control_fields.pl: Teach
	authority_control_fields.pl about record ranges Passing --record 10,000 times at the command line sucks, and --all
	is not particularly realistic for large databases. Adding --start_id
	and --end_id makes this script more usable.  Also provide reasonably full POD documentation, and rely on
	Pod::Usage to provide help based on it when help is requested or
	passed in options don't make sense.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19441
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-11  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Search/Biblio.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/reporter-schema.sql,
	Open-ILS/src/sql/Pg/upgrade/0485.schema.reporter_strip_isbns.sql: 
	Normalize ISBNs by stripping hyphens in search methods and in
	reporter.materialized_simple_record We weren't normalizing ISBNs in search or in
	reporter.materialized_simple_record which required users to exactly
	match the form of the ISBN as entered in the MARC record to get a
	successful search result - pretty hit or miss.  The longer term fix in 2.0 and above is to make the ISBN search
	search against the identifier|isbn index, which also gets
	ISBN10/ISBN13 equivalence goodness.  But this patch will be
	relatively easy to backport through to 1.6.1 and plugs some of the
	holes in our exposed APIs and search points in the short term.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19434
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-11  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/0484.sql.pg-90-compat.sql: Postgres 9.0
	is more strict about variable names in functions. We will probably
	hit more of these, but these in particular break the OPAC.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19429
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-10  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/WWW/BadDebt.pm: Correct syntax error
	in BadDebt.pm git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19424
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-09  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/serial/editor_base.js,
	Open-ILS/xul/staff_client/server/serial/manage_items.xul,
	Open-ILS/xul/staff_client/server/serial/sbsum_editor.js,
	Open-ILS/xul/staff_client/server/serial/scap_editor.js,
	Open-ILS/xul/staff_client/server/serial/sdist_editor.js,
	Open-ILS/xul/staff_client/server/serial/siss_editor.js,
	Open-ILS/xul/staff_client/server/serial/siss_editor.xul,
	Open-ILS/xul/staff_client/server/serial/sisum_editor.js,
	Open-ILS/xul/staff_client/server/serial/sitem_editor.js,
	Open-ILS/xul/staff_client/server/serial/sssum_editor.js,
	Open-ILS/xul/staff_client/server/serial/sstr_editor.js,
	Open-ILS/xul/staff_client/server/serial/ssub_editor.js: Reduce
	hard-coded strings in Serial Control interfaces git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19421
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-09  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ.pm: allow item
	status update if either status-specific perm is allowed or
	UPDATE_COPY is allowed.  fire off related A/T events after the
	initial transaction has been committed git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19416
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-09  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/skin/global.css: tweak selector
	used for font_helper() CSS classes Makes the flat-text MARC editor respect the global font settings,
	resolving bug https://bugs.launchpad.net/evergreen/+bug/678078 Signed-off-by: Galen Charlton <gmc@esilibrary.com> Signed-off-by:
	Jason Etheridge <jason@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19413
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-08  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/authori
	ty.pm: Remove syntax error from O:A:Storage:Publisher:authority and
	add strict pragma Came across a line of dead code while debugging a related problem,
	and noticed that strict/warnings wasn't in place, so I culled the
	dead code and added use strict/use warnings accordingly (now that we
	no longer have the syntax error caused by the dead code).  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19407
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-08  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: Create
	authorities that only contain controlled subfields (LP 712496) Selecting "Create authority" on a field containing uncontrolled
	subfields would generate an authority record that contained those
	uncontrolled subfields. This would, in turn, prevent the "Validate"
	button from operating correctly - if you added a 700 with $a and $c
	subfields, clicked "Create authority", and then immediately clicked
	"Validate", the field would show up as red.  Now we filter out the uncontrolled subfields before they get sent to
	the "Create authority" function, avoiding this validation problem.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19405
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-08  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: Ensure new
	authority ID subfield is inserted in the correct XUL DOM location Addresses LP 712499. After creating an authority via the context
	menu in the MARC editor, the new ID subfield ($0) would be created
	right after the subfield on which the context menu was invoked. It
	turns out that it was being placed in the wrong location, and one
	symptom was that the Validate button would not validate the
	controlled field against the newly created authority.  Now we hunt through the parent DOM nodes until we find the 'sf_box'
	element and then we append the ID subfield to that node. We also
	eliminate some duplicate code by defining a common function so that
	the problem can be fixed in one stroke...  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19403
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-08  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: Prevent
	authority context menu on whitespace content Continuing the refinement of LP 712538, if the subfield contains
	only whitespace, treat it as though it were empty for the purposes
	of the context menu.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19401
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-08  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: Prevent
	authority context menu from being displayed on empty content (LP
	712538) It's confusing to have the authority context menu - particularly the
	"Create authority" options - appear for empty content. Check to
	ensure that the subfield being clicked on actually has some content
	before displaying the authority context menu.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19400
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/2.0.0-2.0.1-upgrade-db.sql: upgrade script git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19388
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-04  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Utils/ModsParser.pm: Fix
	ModsParser.pm bug involving invalid ISBNs.  See bug #697398.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19384
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-04  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Actor.pm,
	Open-ILS/xul/staff_client/chrome/content/main/constants.js: ported
	open-ils.actor.user.transaction.[fleshed.]retrieve to CStoreEditor
	both for cleanup and to take advantage of .authoritative.  Use
	authoritative version in staff client git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19380
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-03  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: clear
	shelf expire time and some other fields when un-cancelling a hold git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19376
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-03  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm,
	Open-ILS/xul/staff_client/server/serial/manage_items.js: Two binding
	fixes for manage items The first fix is more or less cosmetic. When selecting a target
	unit, both areas need to refresh in order to not show the selected
	unit's items in the main list.  The second fix involves handling cases where moving items from one
	unit to another does not empty the 'donor' unit. In those cases, we
	need to update the contents of both the new and the old unit.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19374
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-03  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: Authorities:
	control 610/611, do not control 4xx by default The 4xx fields in bibliographic records have not been controlled
	fields for some time (1988 for CAN/MARC, 1999 for USMARC per)
	http://www.loc.gov/marc/bibliographic/bd4xx.html; and
	http://www.oclc.org/bibformats/en/4xx/default.shtm also lists these
	as obsolete. So, remove them from the default controlled fields in
	Evergreen.  Also, add 610/611 to the controlled fields list (per LP #712467).  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19372
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-02  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/copy_browser.js: let due date
	show up correctly in the copy browser for circulating items git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19370
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-02  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/actor/user/register.js: backport r19364
	from trunk for stat cat field value removal in patron editor git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19365
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-02  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: exit
	finish_fines_and_voiding() if there is no open circ git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19362
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-02  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/210.schema.serials.sql,
	Open-ILS/src/sql/Pg/upgrade/0481.schema.serial_unit_generate_barcod
	e_trigger.sql: Apply autogenerate barcode trigger to serial.unit to
	enable serial checkin Serial checkin tried to use the '@@AUTO' macro to autogenerate
	barcodes, but unfortunately the required trigger had only been
	defined on the parent table asset.copy and not on the child table
	serial.unit. Here we define the trigger on serial.unit to resolve
	that problem.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19360
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-01  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: make
	sure that inline overdue fines generation completes before we
	attempt to void overdues fines in checkin, otherwise it's possible
	to create multiple services (storage and cstore) competing for the
	same DB row mid-transaction, resulting in cstore timeouts and
	rollback of checkin.  This could happen with backdated or amnesty
	checkins git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19358
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-01  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/AutoGrid.js: Backport r19355
	from trunk Acq: Improving on r19351, don't let showCreatePane() be issued
	repeatedly to fill the window with redundant dialogs, since a) it
	looks silly, and b) the dialogs don't work when there are more than
	one of them. Thanks again Dan.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19356
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-01  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install: Backport r19353 from trunk This should get this correct version of postgresql installed for
	clean installations on debian-lenny, *if* your system has the
	backports repo enabled.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19354
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-02-01  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/default/conify/global/acq/provider.tt2: 
	Backport r19351 from trunk Acq: make the "new provider" button under Admin -> Server Admin ->
	Acquisitions -> Providers not produce a dialog with a ton of
	mysterious whitespace. Spotted by Dan Scott.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19352
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-31  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/999.functions.global.sql,
	Open-ILS/src/sql/Pg/upgrade/0480.schema.actor_usr_purge_data.sql: 
	backport 19344, 19345 for patron purge fix for handling former staff
	users git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19346
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-30  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: Don't attempt to
	control 4xx fields in records Per LP bug # 708029, it doesn't make sense to apply an authority
	control on a 4xx field; so remove those entries from the authority
	tag map.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19337
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-30  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/cat/authority/list.js: Use the browse
	method instead of startwith for Manage Authorities, too Now that the browse method is working properly, adopt it for the
	Manage Authorities interface as well so that context around the
	search term can be provided.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19336
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-30  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Storage/FTS.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/authori
	ty.pm, Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm,
	Open-ILS/src/perlmods/OpenILS/Utils/Normalize.pm,
	Open-ILS/tests/naco_normalize.t: Correct authority browsing for
	reals First, restore the >= enable before and after ranges in
	authority_tag_sf_browse(), after I mistakenly removed it in r19131;
	the second storage request for $after does not stomp on the prior
	$before results, it simply gets pushed onto the carefully
	constructed list of $before results, ensuring that our target is in
	the middle of page 0.  Second, we're treating all of the "tag" members in the method
	registration as list references now (for the purpose of searching
	against 4xx/5xx in the .refs. variants), but that was blowing up
	when we registered just a single tag as a string and tried to treat
	the scalar as a list reference.  I could have checked to see if what
	we had incoming was a reference and dance accordingly, but opted to
	just define all single-tag entries as single-element arrays instead.
	Applied the same to startwith.  Finally, in r19331 I had used chop() to ensure that an exact match
	for startwith would be returned as element 1 on page 0, instead of
	appearing as the last element of page -1.  I had said that the right
	way to do this would be to naco_normalize() the value to match the
	normalized afr.value, and so this is what I have done. Rather than
	torturously using O:A:Storage:FTS to get at the naco_normalize()
	definition, I moved the function into its own Utils package and
	adjusted its usage accordingly through the affected code. One step
	closer to single-sourcing the function in the database, as well? git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19335
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-29  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/default/acq/financial/list_funds.tt2: 
	Address typos in Rollover and Propagation dialogue git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19330
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-28  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/batch_receive_overlay.xul: 
	Backport r19327 from trunk Stay in sync with entity name changes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19328
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-28  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml: Backport r19325 from trunk Serials: Add some missing permacrud permissions to IDL 7 classes (sdistn, siss, sunit, sin, sbsum, sssum, sisum) were
	missing IDL perms.  Appropriate permissions were added to all but
	sin (serial_item_note).  For the sin class, since it's several leaps away from anything that
	points at an org unit, and since no existing code deals with it via
	PermaCrud, its PermaCrud section was simply removed.  Some classes retain open <retrieve /> permissions, and others do
	not.  No new permissions were created for this. All permissions are reused
	from "higher" serials objects.  Credit to Mike Rylander for spotting the omissions.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19326
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-27  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/web/templates/default/conify/global/config/hard_due_date.t
	t2: enable the checkbox column so we can delete hard due dates git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19313
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-26  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/locale/en-US/serial.properties: 
	Open-ILS/xul/staff_client/server/locale/en-US/serial.properties git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19304
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-26  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/manage_dists.js: Clear out
	some unused code, which in some cases was causing "command bleed" git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19302
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-25  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: 
	Backport r19288 : twice tested, thrice approved This change was confirmed to work at two test sites, and also passed
	a berick eyeball test.  Would always be nice to have more...  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19300
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-25  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/locale/en-US/serial.properties,
	Open-ILS/xul/staff_client/server/serial/manage_dists.js,
	Open-ILS/xul/staff_client/server/serial/manage_dists.xul: Fix broken
	stream functions, re-enable commented-out menu with correct options git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19299
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-25  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/manage_dists.xul: This
	menu was for a different tab (subscriptions), comment out for now git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19297
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-25  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* : fix the svn:mimetype properties for these git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19295
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-25  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/manage_dists.js: 
	Translation string in manage_dists.js : right problem, wrong fix git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19291
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-25  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* : backport 19287 for button bar image tweaks, courtesy of Michael
	Peters git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19289
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-25  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/locale/en-US/serial.properties,
	Open-ILS/xul/staff_client/server/serial/manage_dists.js,
	build/i18n/po/serial.properties/serial.properties.pot: Small serial
	interface string fixes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19286
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-25  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/locale/en-US/serial.properties,
	Open-ILS/xul/staff_client/server/serial/editor_base.js,
	build/i18n/Makefile,
	build/i18n/po/serial.properties/serial.properties.pot: Teach the
	i18n Makefile how to handle serial.properties Also check in the POT for serial.properties and some other
	foobar.label matches for foobar.accesskey (does not have an effect
	on properties files but hopefully if we're consistent then the
	pattern will be evident for entities).  Noting in passing that there are a number of "foobar(s)" comined
	singular/plural labels that should be split to support translation.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19281
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-25  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/locale/en-US/serial.properties,
	Open-ILS/xul/staff_client/server/serial/editor_base.js,
	Open-ILS/xul/staff_client/server/serial/manage_dists.js,
	Open-ILS/xul/staff_client/server/serial/manage_subs.js: Replace a
	few hardcoded strings in the serials JavaScript There is, unfortunately, an awful lot of this left to fix.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19280
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-25  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/serial/batch_receive_overlay.xul,
	Open-ILS/xul/staff_client/server/serial/sbsum_editor.xul,
	Open-ILS/xul/staff_client/server/serial/scap_editor.xul,
	Open-ILS/xul/staff_client/server/serial/sdist2_editor.xul,
	Open-ILS/xul/staff_client/server/serial/sdist_editor.xul,
	Open-ILS/xul/staff_client/server/serial/sisum_editor.xul,
	Open-ILS/xul/staff_client/server/serial/sitem_editor.xul,
	Open-ILS/xul/staff_client/server/serial/sssum_editor.xul,
	Open-ILS/xul/staff_client/server/serial/sstr_editor.xul,
	Open-ILS/xul/staff_client/server/serial/ssub_editor.xul,
	build/i18n/po/lang.dtd/lang.dtd.pot: Fix existing serial entities
	that didn't provide .label partners for .accesskey The translate-toolkit project generates a POT file from an input DTD
	that requires entities ending in .accesskey to have a corresponding
	.label entity; this is a Mozilla convention for localization. Fix up
	the serial interface strings that are localized to match this
	expectation.  Also remove two duplicate entities in lang.dtd that were flagged by
	the build/i18n/tests/check_entities.py script (and which cause
	Launchpad translation imports to break).  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19278
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-24  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm,
	Open-ILS/xul/staff_client/server/serial/manage_items.js,
	Open-ILS/xul/staff_client/server/serial/manage_items.xul,
	Open-ILS/xul/staff_client/server/serial/serctrl_main.xul: Expose (in
	a very basic way) existing serial item reset functionality, fix
	small bug in reset code (resetting an item with no unit) Apologies in advance if this shouldn't be backported at this point,
	but from my perspective, it is both high-value and low-risk.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19276
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-24  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/sdist_editor.js: Correct
	for over-zealous sdist editor field display code git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19274
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-24  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/po/acq.js/acq.js.pot,
	build/i18n/po/admin.properties/admin.properties.pot,
	build/i18n/po/cat.properties/cat.properties.pot,
	build/i18n/po/circ.properties/circ.properties.pot,
	build/i18n/po/common.properties/common.properties.pot,
	build/i18n/po/fm_IDL.dtd/fm_IDL.dtd.pot,
	build/i18n/po/ils_events.xml/ils_events.xml.pot,
	build/i18n/po/lang.dtd/lang.dtd.pot,
	build/i18n/po/offline.properties/offline.properties.pot,
	build/i18n/po/opac.dtd/opac.dtd.pot,
	build/i18n/po/opac.js/opac.js.pot,
	build/i18n/po/patron.properties/patron.properties.pot,
	build/i18n/po/register.js/register.js.pot: Updated POT from a recent
	checkout and "make newpot" of 2.0 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19271
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-24  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/opac/nls/opac.js,
	Open-ILS/web/opac/skin/default/js/myopac.js,
	Open-ILS/web/opac/skin/default/js/result_common.js,
	Open-ILS/web/opac/skin/default/xml/result/result_table.xml: i18n
	support for a few OPAC strings Enable translation of the "More copies listed in full record
	details" message for the search results library / call number / item
	/status lines Also provide translation support for the hold queue status message,
	including singular / plural variants (most languages do not provide
	the equivalent of the "item(s)" idiom in English).  Instead of burying the display of hold queue status with a hard
	coded "if (false)" test, turn it into a top-level variable for a bit
	more exposure.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19270
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-24  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/import/parallel_pg_loader.pl,
	Open-ILS/src/extras/import/pg_loader.pl: Fix for spurious warning
	(LP bug #707114) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19267
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-23  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xsl/MARC21slim2HTMLCard-holdings.xsl: correct XPath
	attribute test syntax git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19261
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-22  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Lineitem.pm,
	Open-ILS/web/js/ui/default/acq/common/li_table.js: handle deleting
	line item from selection list more carefully Once a line item is attached to a purchase order, removing it from a
	selection list should mean detaching it from the list, not deleting
	it outright.  The open-ils.acq.lineitem.delete method can be removed once the old
	jubgrid code is finally purged.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19259
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-21  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/result/result_table.xml: 
	Protect against volumes with many copies attached Bill Erickson has good data for testing these cases.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19256
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-21  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/result/result_table.xml: Use
	holdings_xml-full for the copy display Less to munge and transfer over the wire = win win win! git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19254
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-21  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm,
	Open-ILS/xsl/MARC21slim2HTMLCard-holdings.xsl: slimpac issue where
	deleted copies are visisble, spotted by Steve Callendar and Jason
	Etheridge git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19251
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-21  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/result/result_table.xml: Avoid
	hard-coded location IDs for displaying library / call number / copy
	location /copy status Also use marcxml-full to get the copy location opac visibility
	attribute, and remove the "hide_me" attribute to make the results
	visible by default.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19249
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-21  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/result/result_table.xml: Move
	to the prettier and more useful Laurentian local call number display
	code as the example git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19248
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-21  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: Part 3 of a more
	secure default set up With this commit, the hardcoded default barcode is replaced by an
	MD5 hash of a random string of numbers, preventing the barcode from
	being used as a known login name in the OPAC interface (which would
	remove one of the factors required in a brute forcing of the account
	credentials).  You probably don't want to change the barcode for the admin user,
	but if you feel the need you can use the usual patron editor in the
	staff client.  Thanks to Thomas Berezansky for suggesting this additional change.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19246
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-21  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: Part 2 of creating a
	more secure default setup With this commit, the user name and password for the administrative
	user will be MD5 hashes of a random string of numbers. You can set
	the user name and password to your liking using the --admin-user and
	--admin-pass switches for eg_db_config.pl (this will be the
	documented method in the install docs) or via straight SQL as: UPDATE actor.usr SET usrname = 'FOO', passwd = 'BAR' WHERE id = 1; git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19245
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-21  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/eg_db_config.pl: Towards a more
	secure default setup Shipping with a default account user name and password is considered
	an authentication anti-pattern; see

	http://code.google.com/p/owasp-development-guide/wiki/WebAppSecDesignGuide_D2By making the user select an admin user name and password at the
	time they create the database, we avoid the chance that they will
	forget to change the default password and leave their system open to
	access.  Next step is to change the seed data to insert random values for the
	admin username and password, then update the documentation
	accordingly.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19244
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-20  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/XULTermLoader.js: Backport
	r19241 from trunk Acq: the "Load Catalog Record IDs" interface failed on files
	produced in Windows due to not stripping out carriage returns.
	Fixed.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19242
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-20  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/common/li_table.js: Backport r19239
	from trunk Acq: use the acqlimad table instead of its ancestor acqliad table to
	populate a dropdown for the Export Single Attribute List function of
	lists of lineitems The acqliad table may appear to have duplicate entries since it's a
	parent, and the point of the function that's trying to use it is
	just to export lists of ISBNs or UPCs, so acqlimad is a better fit.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19240
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-20  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/holds.js: don't offer to
	cancel related transits that have already completed when canceling
	holds git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19235
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-20  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/opensrf.xml.example: Backport r19229 from trunk Booking: these lines don't belong; they were erroneously copied and
	pasted from a neighboring section of the file git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19230
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-19  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/actor/user/register.js: if this user
	does not have permission to edit an existing user, disable the save
	and clone buttons git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19224
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-19  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/FilteringTreeSelect.js,
	Open-ILS/web/js/ui/default/actor/user/register.js: remove disallowed
	permission groups from the perm group selector in user registration;
	see bug 699914 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19223
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-19  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: let
	amnesty checkin mode trump the restore overdues on lost checkin
	setting git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19220
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-19  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/AppUtils.pm: Backport
	r19214 from trunk Booking: Robert Soulliere spotted and fixed a bug in processing
	reservation- related overdue fines.  See
	https://bugs.launchpad.net/evergreen/+bug/705061 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19215
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-19  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/admin/org_unit_settings.js: Build
	and flatten a tree, correcting a sorting issue in some OU dropdowns.  The previous code assumed that work org units would be delivered in
	hierarchical order, but alas, they are not. Thus, we build the
	hierarchy and then flatten it, sorting at each level. This will be
	non-fast with many work OUs, but the common case is a small set,
	which is not painful.  Further improvement is warranted when the above proves false.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19209
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-19  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Storage/FTS.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/020.schema.functions.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0478.schema.naco_normalize_tweak.sql,
	Open-ILS/tests/naco_normalize.t: backport naco_normalize revisions
	to rel_2_0 This implements the latest version of the NACO normalization
	specification found at
	http://www.loc.gov/catdir/pcc/naco/SCA_PccNormalization_Final_revised.pdfThis version of the algorithm is more general -- for example, all
	combining characters are removed -- so there should be fewer fiddly
	edge cases to worry about for most European languages.  Rebuilding the metabib.*_field_entry tables (e.g., by using
	reingest-1.6-2.0.pl) is recommended if there are any bibs that
	contain any non-ASCII characters.  Normalized text is now left in the NFKD form, so while this should
	be transparent to the search system after reindexing, it does mean
	that (for example) Korean text in metabib.*_field_entry may not be
	in the same Unicode normalization form as that found in
	biblio.record_entry.  Also includes fix for bug #684467: more bulletproofing of
	naco_normalize Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19205
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-19  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/020.schema.functions.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0476.schema.authority_normalize_heading
	.sql: Avoid escaping issues in authority.normalize_heading() by
	parameterizing the query Long story short: MARC subfield values containing backslashes caused
	noise and in some cases painful errors. Using
	spi_prepare/spi_exec_query is the safest way of handling escaping,
	rather than adding more regexes and munging the data before it even
	gets to naco_normalize().  Most painful case was <subfield code="a">Foo, Bar\</subfield> - the
	trailing slash ended up escaping the enclosing single quote (because
	PostgreSQL isn't configured by default with strict conformance to
	SQL escaping rules yet) and threw an error.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19202
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-18  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/siss_editor.js: Protect
	against blank and invalid scap IDs in issuance editor git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19198
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-18  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Invoice.pm: fix
	glitch that could break invoice proration Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19196
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-18  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml: user saved searches are only
	accessible to the originating user; remove (incorrect) permacrud
	config for usr_saved_searches git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19194
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-18  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0475.schema.auto-placeholder-barcodes.s
	ql: Auto-generation of placeholder barcodes approved for backport git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19191
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-17  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/manage_items.js: In serial
	control, if they defined a *_call_number, honor it as the default git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19188
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-17  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/po/create.js: default
	ordering-agency org unit to workstation org in PO create dialog git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19186
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-15  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm,
	Open-ILS/xul/staff_client/server/serial/manage_items.js: Postpone
	advanced serial call-number handling until after 2.0 Sharing of a single call-number for multiple volumes, while well
	intentioned, was not ready for primetime for various reasons.  This
	commit: 1) harmonizes and unifies call-number handling in Serial.pm,
	sticking with current practices 2) adds a very basic and now necessary prompt to the Serial Control
	view git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19183
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-14  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Search/Z3950.pm: Enable
	truncation attribute in Z39.50 queries to be left out entirely Per https://bugs.launchpad.net/evergreen/+bug/702695, some Z39.50
	servers hate the truncation attribute (@attr 5=anything) and always
	return 0 hits.  This gives you the ability to specify a negative value for the
	truncation attribute and thereby prevent the truncation attribute
	from being included in the Z39.50 query for a given server.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19177
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-12  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install: Add Net::SSH2 to the prereqs
	as the libnet-ssh2-perl package is not on Debian Lenny git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19171
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-12  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/opensrf.xml.example: Deprecate overdue/predue
	config sections in favour of action/trigger Set email notification to "false" for holds, overdues, and predues.  Fix one line of whitespace.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19170
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-12  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/AutoFieldWidget.js: 
	AutoFieldWidget no longer uses CurrencyTextBox dijit NumberTextBox used instead to work around problem with
	CurrencyTextBox's support for negative monetary amounts in Dojo 1.3.
	See https://bugs.launchpad.net/evergreen/+bug/702117 Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19168
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-12  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Backport fixes for
	custom indexes in the database schema during 1.6.1-2.0 upgrade r19133 and r19136 provide more sophisticated, working handling of
	custom indexes during the 1.6.1-2.0 database schema upgrade.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19165
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-12  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/AutoFieldWidget.js: allow data
	entry of negative currency amounts Plug in fix for Dojo bug http://bugs.dojotoolkit.org/ticket/9438,
	which was preventing the input of discounts and credits during
	invoice creation.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19164
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-11  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/invoice/view.js: allow deletion of
	incomplete invoice LIs Fix silent failure when attempting to delete a LI whose type or cost
	was not set; dojo.string.subtitute does not like replacement values
	to be null.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19161
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-11  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/common/js/opac_utils.js: fix regression with org
	selector when specifying ?ol= and the org unit hiding setting is
	unset git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19159
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-11  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Order.pm: repaired
	pending-order vs order-pending thinko.  Thanks to Kathy Lussier and
	Mike R. for the diagnosis git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19153
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-11  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm: Backport
	authority browsing fixes from trunk Primary fix is to remove duplicate records from the results when
	dupes are returned due to similar 1XX/4XX/5XX values in the same
	records.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19151
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-10  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm: Additional
	code unification; add 'reset item' capability to unitize_items() git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19149
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-10  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/actor/user/register.js: avoid fetching
	user settings for new user registration;  the result of fetching
	settings with a null user id is that settings of the staff/editor
	were fetched instead, leading to settings that appeared to selected,
	but were not saved during submit git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19147
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-10  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/c-apps/Makefile.am: Clean up c-apps Makefile.am and
	make everything load cleanly again Executable programs don't have library versions, so don't set
	-version-info for them.  Add -version-info to liboils_idl and liboils_util, and link
	liboils_util explicitly against liboils_idl rather than relying on
	AM_LDFLAGS.  Set the linking dependencies correctly; if a library links against
	liboils_util, set that as the sole link dependency; no need for
	liboils_idl once (let alone twice!) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19143
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-10  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/c-apps/Makefile.am: Set explicit library versioning
	for Evergreen 2.0 to 2:0:0 This should help for anything linking to core Evergreen libraries;
	as we revise the -version-info number, anything that links against
	the core Evergreen libraries will quickly scream if we rev the
	interface number without specifying via the age number that previous
	interfaces are still supported. Let's remember to revise it
	accordingly! Also remove redundant linkage to oils_idl.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19142
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-07  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/PermaCrud/Store.js: Backport r19137
	from trunk Make openils.PermaCrud.Store use a default order_by clause in common
	situations This avoids an issue where, using a FilteringSelect dijit, sometimes
	you type a couple letters, let's says "ABC", and you get a set of
	matches like this: "ABCDE" "ABCD" "ABC" just because there happens to be no specific ordering.  If you click
	the ABC match and tab away too quickly, the dijit will reset itself
	to the first match, "ABCDE".  This is probably a Dojo/Dijit bug, as
	I've been able to duplicate the problem with other stores, but
	that's all murky.  This avoids the issue by making sure the shortest match is at the
	top of the list.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19138
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-07  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Invoice.pm: Backport
	r19134 from trunk Acq: fix prorating bug When prorating, the system decides what funds to target by looking
	at what funds have already been spent against.  Previously, the
	system only looked at acqie objects, but an invoice can also be
	composed of acqii objects.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19135
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-05  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm: Unify some
	summarization code in preparation for further development.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19130
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-05  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Perhaps naive method
	of bumping existing custom config.metabib_field entries git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19127
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-05  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Cat/AssetCommon.pm,
	Open-ILS/src/perlmods/OpenILS/Utils/CStoreEditor.pm: roll back xact
	in set_item_lost when copy is alrady marked lost and we exit the
	sub;  if caller passes an event to editor->die_event, capture it as
	the editor's last event Signed-off-by: Bill Erickson <berick@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19124
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-05  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/Makefile: Finish adding authority.js to i18n Makefile Forgot to add some crucial bits in the extensive copy and paste
	effort that's required to add another file to the i18n build.  Sigh.
	Rewrites welcome! And sorry for leaving this trap for you to fall
	into, miker.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19122
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-04  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/marc_export: Clean up marc_export and
	teach it how to export (all) authority records The new "--type" parameter enables users to specify "authority" and
	have the expected result.  Add an "--all" option to marc_export and silence some warnings Rather than forcing users to generate a set of record IDs using a
	separate process, the --all option enables to to export all records
	of the specified type. Note that the approach is basic: grab the
	record with the highest ID, then start at ID 0 and count up by 1
	while trying to retrieve each record along the way. While this will
	undoubtedly generate plenty of warnings for deleted records or gaps
	in the ID sequences, the alternative of retrieving an ID list for
	potentially millions of records in large Evergreen instances wasn't
	appealing.  Some other refactoring and fixes: Three large chunks of code were factored out into subroutines to
	make it a little easier to read the main flow of the code.  As we explicitly call uc() on the $format input parameter to begin
	with, we don't have to call it subsequently.  If a requested ID did not exist in the database, then the script
	would die; now we trap and flag that error but continue to fulfill
	subsequent requests.  The --money parameter is now documented in the help, and the help
	has a brief overview that describes (poorly) the expected format for
	the list of IDs.  An uninitialized variable error when exporting BRE format records
	was squashed.  Also, $count{did} and $count{bib} resulted in uninitialized variable
	warnings if no records were actually exported, so initialize them to
	0.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19114
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-04  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/authority/nls/authority.js,
	Open-ILS/web/js/ui/default/cat/authority/list.js,
	build/i18n/Makefile: Internationalize the JavaScript portion of the
	"Manage Authorities" interface We can use the dojo i18n infrastructure to support translations of
	the "Manage Authorities" interface, but unfortunately we still don't
	have a TT2 solution for i18n. Still, better to do what we can.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19113
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-04  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm,
	Open-ILS/src/perlmods/OpenILS/WWW/SuperCat.pm,
	Open-ILS/xul/staff_client/server/cat/marcedit.js,
	Open-ILS/xul/staff_client/server/locale/en-US/cat.properties: 
	Improve see from / see also handling in MARC editor authority menu (Backporting r19091 and r19092 from trunk) The 2.0-style authorities use a browse menu that currently consists
	of matches against the 1XX entries, which makes working with see
	from / see also entries rather difficult. To prepare for an
	authority browse method that does surface matches against 4xx and
	5xx entries, we will now display the 4xx and 5xx entries for a given
	authority record immediately below the 1xx entry in the browse menu,
	with the entry text italicized, aligned to the right, and prefixed
	with "See also" or "See from" appropriately. This won't provide a
	perfect alphabetized solution - we won't know which field provided
	the alphabetical browse match, so the best we can do is present the
	1xx in the main browse menu and the 4xx / 5xx below - but it will
	provide access to the other references.  We now display the 4xx fields in the authority summary / selector
	menu along with the 5xx fields. As part of making the 4xx and 5xx
	fields first-class entries in the context menu, 5xx subfields are no
	longer appended to their 1xx field menu entry with a "/" in the
	context menu.  $0 subfields are no longer added to the 4xx and 5xx fields from the
	authority summary / selector menu; if a user had selected a 5xx and
	the $0 that had been added by the menu, the field would have
	incorrectly been linked to the 1xx authority record. To link to a
	5xx entry, for now the workaround is for the user to select the 5xx
	subfield(s), "Apply Selected", then right-click on the new subfield
	to generate a new authority context menu.  To improve the 5xx
	handling, we need to make the "See also" entry fire a new authority
	context menu based on the 5xx contents so that the actual 1xx
	authority record can be inserted and linked against.  Consider an authority record containing the following fields: 150 $a Infants 450 $a Babies 550 $a Children The ASCII-ized authority context menu will now display: Infants              ->     See from: Babies ->   See also: Children -> The submenu in each case will currently lead to the authority record
	for "Infants". If we teach the underlying authority browse and
	startswith methods to return matches based on 4xx and 5xx fields
	instead of just 1xx fields, then the menu triggered by a right-click
	on "Childs" might look like: Chickens             -> Infants              ->     See from: Babies ->   See also: Children -> Choking              -> The main entry will be out of alphabetical order, which is not
	ideal, but the linkage from the 5xx should at least be evident.
	(Also, this suggests that when clicking on a 5xx entry in the
	authority menu is changed to launch a new authority menu, it should
	use the 1xx-only browse variant to avoid showing the record from
	which the user was referred...) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19112
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-04  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/base.js: mixing use of '/' and '/eg' for the
	auth cookie path is creating complications;  fall back to '/', which
	is the assumption from most EG code Signed-off-by: Bill Erickson <berick@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19109
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm: Addressing
	https://bugs.launchpad.net/evergreen/+bug/696078 where
	deleted/inactive records are included in the freshmeat feed.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19107
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-04  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Vandelay.pm,
	Open-ILS/web/js/ui/default/vandelay/vandelay.js,
	Open-ILS/web/templates/default/vandelay/inc/upload.tt2: cleaned up
	vestigal item import API call; repaired some faulty assumptions in
	vandelay UI regarding which types of import to attempt based on user
	input Signed-off-by: Bill Erickson <berick@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19104
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0474.schema.xpath_table-empty-fields.sq
	l: oils_xpath_table was too strict about field nullness -- we need
	/some/ data, not /all/ data, to be present git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19102
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm: Patch from Jason Stephenson to silence spurious warnings:
	https://bugs.launchpad.net/evergreen/+bug/695510 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19097
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2011-01-04  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Claims.pm,
	Open-ILS/web/js/dojo/openils/acq/nls/acq.js,
	Open-ILS/web/js/ui/default/acq/common/claim_dialog.js,
	Open-ILS/web/js/ui/default/acq/common/li_table.js,
	Open-ILS/web/templates/default/acq/common/claim_dialog.tt2: Acq:
	backport r19040 and r19094 from trunk [19040] Acq: support manual claiming as always intended, which to
	some users means claiming with no predefined policy [19094] Acq: Make manual lineitem claiming work better. When a
	claiming policy has not been applied, users can now choose claim
	actions manually (this is what a claiming policy would have
	specified).  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19095
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-30  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/checkin.js: Never do money
	math as anything but pennies I tell you. :-)  Three $0.60
	transactions run through check-in were showing a running tally of
	$1.79 instead of $1.80.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19087
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-30  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/display.js: fix a bug with
	standing penalties and the stop sign page.  We still have a race
	condition where the stop sign page may not show, and this seems to
	happen when multiple patrons are retrieved at once from a patron
	search.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19085
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-29  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Order.pm: at po
	activation time, apply the provider's default claim policy to each
	lineitem when no policy is already applied Signed-off-by: Bill Erickson <berick@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19082
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-29  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Vandelay.pm: Vandelay
	import repairs Disable OpenSRF response chunking on calls that respond with small,
	sparse status updates.  Repaired some bugs with status reporting and changed the reporting
	style for queue imports to report more early in the import, then
	plateau.  Added some fault-tolerance to record importing Signed-off-by: Bill Erickson <erickson@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19080
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-29  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Cat/Authority.pm,
	Open-ILS/xul/staff_client/server/cat/marcedit.js: Create authority
	records with meaningful cataloging agency values Hardcoded values in the 040 are problematic for sites that want to
	be a source of authority records; with the addition of another
	parameter to the
	open-ils.cat.authority.record.create_from_bib(.readonly) API, we can
	solve that problem. The callers of this API (the MARC editor) have
	access to the cat.marc_control_number_identifier OU setting, so as
	long as that is set correctly, problem solved.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19078
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-29  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marc_new.xul,
	Open-ILS/xul/staff_client/server/cat/z3950.js: Invoke MARC editor
	with the appropriate control number identifier The control number identifier is most critical for the creation of
	authority records; given that the callers have the required context,
	have them pass in the control number identifier to the MARC editor.
	Edit MARC record, new MARC record, import MARC record; those have to
	be the big ones, right? git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19076
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-29  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/cat/authority/list.js: Enhance
	usability of authority record deletion dialogue Don't show the number of linked bib records unless it is a non-zero
	sum.  Make "Cancel" the button with focus in the dialog, so that an errant
	press of the "Enter" key doesn't do the wrong thing.  Trim space from the authority text in the display. Move the
	authority text from the dialog title to the contents of the dialog.  Do not display the MARC for the authority record by default; add a
	"View MARC" button and toggle it to show/hide MARC.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19075
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-29  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/cat/authority/list.js: Towards a more
	useful authority delete confirmation pane Rather than simply creating a raw confirm dialogue that only
	provides the cataloguer with the ID of the authority record that is
	about to be deleted (not an especially useful handle), supply a
	confirmation dialogue that recaps how many bibliographic records are
	linked to this authority record and also displays the MARC of the
	record about to be deleted.  Most authority records appear to be short enough that the MARC
	display is not a concern, but if it becomes a problem we can opt not
	to show the MARC by default and give the cataloguer the ability to
	click a "View MARC" button on the confirmation dialog instead.  Along the way, make some more variables local and remove some
	unnecessary workarounds for object IDs.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19074
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-28  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Money.pm: Update
	auth-cached user after payment After payment toward one's own account, reset the cached user object
	so that it will contain the latest last_xact_id value.  This is
	necessary for supporting patron credit card payments in the catalog.  Signed-off-by: Bill Erickson <erickson@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19070
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-28  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/c-apps/oils_auth.c: refresh cached user during auth
	session reset Add a boolean (1/0) param to open-ils.auth.session.reset_timeout
	that forces open-ils.auth to refresh the cached user object.  Useful
	if a column on actor.usr was updated and the client may be pulling
	the object from the cache w/ a page reload, etc.  Signed-off-by: Bill Erickson <erickson@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19069
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-23  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/MARC/Field.js,
	Open-ILS/web/js/dojo/MARC/Record.js: commit
	620f5d756619b84200add4c534a7cf22e1c0d037 further fixes to null
	indicator handling in flat-text MARC editor [1] ensure that null indicators are converted to blanks [2] fix
	glitch when supplying default indicator values Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19062
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-23  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/MARC/Record.js: When the subfield delimiter
	is configured as "$" (the default), use {dollar} to represent a
	literal dollar sign.  This is apparently in line with other
	Breaker-format tools.  Fix suggested by Galen Charlton, thanks gmc! Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19061
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-23  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/MARC/Field.js,
	Open-ILS/web/js/dojo/MARC/Record.js: addressing two Breaker-format
	issues: 1) supply an "empty" (space) value for indicators in the
	internal format if they are left out and 2) add indicator
	placeholders to incoming Breaker datafield lines if they seem to be
	missing.  Addresses https://bugs.launchpad.net/evergreen/+bug/693468 Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19060
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-23  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/c-apps/oils_sql.c: Patch from Nathanael Schilling
	protecting cstore/pcrud from no-search-param segfaults (with minor
	editorializing) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19048
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-23  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/012.schema.vandelay.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0473.schema.vandelay-replace_field.sql: 
	allow vandelay.replace_field() to handle a complex field spec by
	splitting and looping; bringing 1.6.1-2.0 upgrade script up to date git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19044
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-22  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/rdetail.js: OPAC/Serials: small
	aesthetic change to render held issues more neatly git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19042
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-21  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/manage_subs.js: For making
	predictions, remove some debug/dead code, refresh the list.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19039
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-21  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm,
	Open-ILS/xul/staff_client/server/serial/manage_items.js: 'Bindery'
	item status rethink - this status should eventually be tracked at
	the unit level, not the item level.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19037
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-21  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/org_tree_proximity.pl: Add line feeds to the
	output of org_tree_proximity.pl When another routine was appended to autogen.sh, the output was
	appended to the result string returned from org_tree_proximity.pl;
	adding a linefeed cleans that up.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19035
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-21  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/011.schema.authority.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0472.schema.authority-merge.sql: 
	Propagate merged authority record change to bibliographic record Launchpad bug 688015 reported that the merge of authority records
	resulted in the control number identifier in a controlled field in a
	bibliographic record changing to the right value, but the value of
	the field itself wasn't being changed.  The problem turned out to be a confusion of the "source" and
	"target" values in the authority.merge_record() function. Once that
	was straightened out, the merge updated the controlled field as
	expected.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19033
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-21  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Order.pm: Acq: Fix a
	bug where upon PO activation, lineitems in the order-ready state
	would stay there, rather than progressing to the on-order state git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19031
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-20  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/common/js/opac_utils.js: protect against null
	orig-location resulting in depth=-1 searches after logout git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19029
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-20  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/financial/list_funds.js: Acq: In
	fund propagation and rollover, add amounts as numbers, not strings git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19027
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-20  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js,
	Open-ILS/xul/staff_client/server/locale/en-US/cat.properties: Add an
	"Apply full authority" option to the MARC editor By definition, the only subfields that should be applied from an
	authority record to a bibliographic record are the complete set from
	the 1XX field of the authority record. So, rather than forcing the
	user to select the correct subfields from the chosen authority
	record, give them this handy shortcut to do the right thing.  Also, add copyright / licensing header - hopefully accurate.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19024
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-20  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/cat/authority/list.js: Display the tag
	and indicators for authority records in the merge box Also, avoid the risk of creating or stomping on global variables by
	using 'var' to declare our variables.  Also, apply copyright statement for the International Institute of
	Social History. Thanks for sponsoring this contribution to
	Evergreen! git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19020
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-20  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: Display the tag
	of the displayed authority record in MARC Editor context We currently display both 1xx and 5xx fields in the authority
	record, but do not display the tag. This can lead to some confusion
	when a 5xx field is actually present. Ergo, show the tag to
	disambiguate the fields in the authority browse selection interface.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19019
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-20  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: Provide starting
	context for authority browse in MARC Editor context menu Using the browse interface instead of startwith provides a first
	page of results that shows some of the authority entries that
	precede the first alphabetical match for the chosen term. Context is
	good.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19018
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-17  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/conify/global/acq/provider.js: Backport
	r19013 from trunk Thanks to Sally Fortin for drawing attention to this bug, wherein
	new Holding Subfields can't be created in this interface via the
	staff client.  Acq: Tracked down a small but subtle bug with the Holding Subfield
	tab of the Provider editor interface.  We apparently have a global variable "name" defined somewhere which,
	when assigned in place of an overrideWidget for an AutoGrid thanks
	to some vestigial code, ultimately causes an error from within
	AutoFieldWidget, if you're using the staff client.  That's because
	name is the string "browser_browser" in the staff client, but if you
	access this interface from Firefox, name is apparently set to some
	value that evaluates to false in a boolean context, because
	AutoFieldWidget doesn't choke on it (the comparison at line 182 of
	that file will return false).  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19014
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-17  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/WWW/SuperCat.pm: Do an equality
	test, instead of assigning a value Thanks to Bill Erickson for catching this; this fixes a bug where
	SuperCat requests would end up returning authority records instead
	of bibliographic records.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19010
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-17  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/rdetail.js,
	Open-ILS/web/opac/skin/default/js/result_common.js: dump() is a
	mozilla thing;  use console.log instead git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19008
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-16  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/web/templates/default/conify/global/asset/copy_template.tt
	2: Backport r18852, r19005 from trunk [18852] Serials: make some IDL changes and some changes to field
	order in an AutoGrid to support easier creation of working copy
	templates with serials.  [19005] Serials: the circ_lib field on a copy template has no
	meaning in the only context where these copy templates are used,
	which is serials.  Any copy-like objects that are created in serials
	have their circ_lib determined by distribution.holding_lib So remove the circ_lib from the interface.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19006
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-15  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0471.schema.asset-call-number-add-sortk
	ey-compound-index.sql: Address the call number browsing performance
	problem raised in LP 690242 The ORDER BY clause currently generated by call number browsing does
	not have a sufficient index to use to assist the sorting of the
	returned rows, and consequently does a sequential scan of the
	asset.call_number table.  Which, as you can imagine, is not fast for
	a system with more than a few thousand call numbers.  This adds an index specifically to enable the query to go back to an
	index scan instead of a sequential scan. We can investigate whether
	other indexes should be removed to enable efficient data loading
	once we've squashed the sequential scan problem.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19004
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-15  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/main/main.js,
	Open-ILS/xul/staff_client/server/main/data.xul: augment the
	useragent for the xulrunner staff client git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19002
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-15  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: Two
	bug fixes: 1) only allow one fine generator call per circulation
	during a given transaction; 2) require that a circulation be open,
	based on the xact_finish field, in order to be the parent of a
	renewal (I suspect this used to depend on the open-circ view) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@19000
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-13  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/batch_receive.js: Serials:
	simple bug in batch receive. Certain field values got treated like
	strings sometimes when they weren't. No more.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18998
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-13  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/ils_events.xml,
	Open-ILS/src/perlmods/OpenILS/WWW/Method.pm: regularize spelling of
	"fulfill" Based on patch by Steve Callender Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18996
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-13  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: 
	Backport of r18989: boolean test for hard due force flag git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18990
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-13  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: repaired order-by in
	update_hard_due_dates function to prevent sql errors git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18987
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-13  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0470.schema.config_update_hard_due_date
	s_repairs.sql: repaired order-by in update_hard_due_dates function
	to prevent sql errors git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18986
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-10  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* ChangeLog, Open-ILS/src/perlmods/OpenILS/Application.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql, README: arg ... reverting
	version bump that got applied to the wrong branch git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18981
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-10  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* ChangeLog, Open-ILS/src/perlmods/OpenILS/Application.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql, README: bumping version
	numbers git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18979
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-10  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Utils/ModsParser.pm: Patch from
	James Fournie to address
	https://bugs.launchpad.net/evergreen/+bug/622908 wherein we learn
	that related item physical description might be used as the main PD
	of the main item, if the main item lacks such a field in the MARC git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18968
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-10  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/Util.js: Provide a mechanism to load
	any random JS file via dojo.require()-ish syntax.  Why would we want to do such a thing, you might ask? Well, the short answer is that Firefox hates pages that have more
	than one script block (inline is worse than tag) that contains
	pre-onLoad XHR. So, this allows us to pull the actual loading of JS
	from the same domain as the page into an inline block. This allows
	us to eliminate the WSOD on FF by pulling all (dangerous) JS into a
	single, final inline block, after which we don't care if the
	DOMContentLoaded event fires -- that's when it should fire,
	structurally -- but in FF it may fire for a different reason (bug)
	than it should (fell of the end of the page in the rendering
	engine).  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18965
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-10  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/011.schema.authority.sql,
	Open-ILS/src/sql/Pg/012.schema.vandelay.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0469.schema.authority-maint-trigger-fun
	cs.sql: Backporting r18957 from trunk: Fix two bugs:  * Wide Character warning in authority.generate_overlay_template due
	 to the generated template not being UTF-8 encoded internally * Correctly test the same space-normalization form of the pre- and
	post-strip records during the application of a replace rule in
	vandelay.replace_field This addresses https://bugs.launchpad.net/evergreen/+bug/687996 for
	2.0beta5 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18960
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-10  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/WWW/SuperCat.pm: Return authority
	records for freshmeat when authority records are requested Previously, freshmeat was hardcoded to return bibliographic records,
	even when authority records were requested.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18959
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-10  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm: Give the
	recent_changes list the ability to sort authority records correctly We were always sorting by bibliographic record entry, which does not
	work all that well for authority records.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18958
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-09  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/util.js: big thinko.  Going
	by the stock receipt template, this should be the workstation lib.
	Destination is handled by a different variable git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18951
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-09  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/util.js: transit isn't in
	payload first time through with ROUTE_ITEM checkin, fallback on
	check.org git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18947
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-08  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Serial.pm,
	Open-ILS/web/opac/skin/default/js/holds.js: Backport r18800 from
	trunk (I thought I already had! r18932 depends on it) Place holds on issuances from the OPAC. Also a couple very minor API
	documentation fixes.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18937
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-08  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm: Support for
	predicting serials with no chronology caption git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18936
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-08  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Utils/MFHD/Caption.pm: Add a simple
	subfields_list() method to MFHD/Caption.pm to match that in
	Holding.pm git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18934
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-07  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm,
	Open-ILS/web/js/dojo/openils/opac/nls/opac.js,
	Open-ILS/web/opac/locale/en-US/opac.dtd,
	Open-ILS/web/opac/skin/default/js/rdetail.js,
	Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_summary.xml: 
	Backport r18931 from trunk Serials: When the fully compressed serial holdings are active in the
	OPAC, you get this "issues held" display with an expand/compress
	toggle that will either show you individual holdings (and allow you
	to place holds on them) or compressed holdings statements.  The functionality existed in trunk before this commit, but this
	cleans it up and makes it better. It's more consistent with the the
	result detail table, it doesn't offer you the change to place holds
	on issues that don't have units (copy-equivalent objects), etc etc.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18932
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-03  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Moving bits around
	and protecting against a pre-existing subject|complete index
	definition that some sites have git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18921
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-03  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: The "All Subjects"
	index never made it into 1.6, so we need it in the upgrade script git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18918
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-03  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/MARC/Record.js: protect against empty control
	fields (bad MARC) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18916
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-03  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/BibTemplate.js: Backport part of
	r18912 from trunk BibTemplate: make a couple of IE-friendly changes to BibTemplate.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18914
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-03  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/adv_global.js: Normalize spaces
	in notcontains advance search query terms to address bug
	https://bugs.launchpad.net/evergreen/+bug/677122 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18907
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-02  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/admin/work_log.js: copy/paste-o.
	Retrieve Patron in the patron log section of the Admin->Local
	Admin->Work Log uses the right list now git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18903
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-01  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/checkout.js: Return the copy
	status name when a copy is not available It looks like the checkout operation used to return a fleshed
	config.copy_status object, but that changed and we now get a raw ccs
	ID back.  Retrieve the status name using the ccs ID and present that to the
	users. Also, in case problems like this happen in the future,
	provide a more specific error message and var name so that it will
	be (hopefully!) a little clearer what payload was expected in the
	first place :) Resolves https://bugs.launchpad.net/evergreen/+bug/680575 Thanks to Jason Etheridge for a major assist with this bug.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18898
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-12-01  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/manage_subs.js,
	Open-ILS/xul/staff_client/server/serial/notes.xul,
	Open-ILS/xul/staff_client/server/serial/sdist2_editor.xul,
	Open-ILS/xul/staff_client/server/serial/serctrl_main.xul: Assorted
	small serials fixes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18896
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-30  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/tests/module_versions.t: test case for minimum required
	version of Perl modules Encode > 2.12 particularly matters, but there are likely others of
	significance.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18894
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-30  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/theme/default/css/colors.css: Move Google
	Preview badge below the book cover image, if there is one There might be a more correct way to do this in CSS, but works++ Also, give a little room between the images.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18892
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-30  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/apache/eg_vhost.conf: Clean up some of the
	Apache config mod_rewrite rules Thomas Berezansky suggested some improvements to the mod_rewrite
	rules in eg_vhost.conf on the -devel mailing list; this is a stab at
	correcting the most egregious problems.  Tested with Zotero and unAPI still works; tested with the staff
	client and language-switching still works, as do the Conify and
	Vandelay interfaces. Seems reasonably good.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18890
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-30  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/WWW/SuperCat.pm: protect some of the
	supercat browse interfaces from unboundedness E.g., browsing from a call number that contains forward slashes,
	e.g., "02/05/2004" Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18885
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-30  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/home/index_body.xml: Enable GET
	params to be added properly in buildOPACLink() Symptom was that the "?l=#" parameter wasn't being added to the home
	screen "Advanced Search" link. Cause was that the
	dojo.addOnLoad(init) call was being made after the
	dojo.addOnLoad(home_init) call, which depended on globals being set
	by init(). This started happening when the JavaScript was shifted
	around in an attempt to kill the white screen of death.  There may be other similar issues in other interfaces; keep your
	eyes open! git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18883
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-30  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/picklist/brief_record.js: specify
	default leader for acq brief bibs In particular, avoid fun that could ensue if the Leader/09 is not
	set to 'a'.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18879
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-30  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_menus.xul: 
	menu entry for Admin->Server Administration->Acquisitions->Line Item
	MARC Attribute Definitions git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18876
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-30  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/999.functions.global.sql,
	Open-ILS/src/sql/Pg/reporter-schema.sql,
	Open-ILS/src/sql/Pg/upgrade/0468.schema.simple_rec_triggers.sql: 
	straighten out triggers that maintain rmsr In particular, make sure that the old zzz_ trigger on
	metabib.real_full_rec is completely removed, as it needlessly slows
	down bib ingest.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18870
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-30  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/acq/Lineitem.js: fix failure when
	attempting to create invoice Occurred for line items that were not part of a selection list Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18867
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-29  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm: logic error (inversion) in retargetting of previous copy when no
	other holds are looking at it git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18859
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-29  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/holds.js: Patch from Jeff
	Godin, backported from trunkified version: In the staff client, the holds context menu option "Edit
	PickupLibrary" displays and allows selection of org units that it
	shouldn't.  Org units whose type has can_have_users = FALSE are not valid pickup
	locations.  Using the default types as an example, CONS and SYS1 are invalid
	pickup locations.  The OPAC enforces this when allowing patrons to edit a hold.  The staff client does not enforce this when staff edit a hold.  The can_have_users() method of the au object returns a string 't' or
	'f' which is then compared to 0.  The attached patch corrects this issue. ( foo == 0 becomes
	!isTrue(foo) ).  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18855
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-29  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/cat/opac.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/server/cat/copy_browser.js,
	Open-ILS/xul/staff_client/server/cat/spine_labels.js,
	Open-ILS/xul/staff_client/server/cat/util.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js,
	Open-ILS/xul/staff_client/server/circ/copy_status.js: merge r18841
	from trunk for label interface bug
	https://bugs.launchpad.net/evergreen/+bug/677628 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18853
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-28  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Address 1.6.1-2.0
	upgrade problems reported by Ben Shum 1. We were attempting to update the asset.uri ID sequence value with
	the wrong syntax; also, adding just 1 would return an error in the
	event that only the seed value for asset.uri had been inserted.  2. Somehow the body of the maintain_control_numbers() function was
	pasted twice, resulting in a syntax error.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18849
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-24  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Add the
	asset.copy(create_date) index to the 1.6.1-2.0 update script git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18848
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-24  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_menus.xul: 
	Backport r18845 from trunk Everything else in the menu is alphabetized (in English anyway), so
	Copy Template Editor may as well be too.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18846
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-24  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/0466.schema.asset-copy-add-create-date-
	index.sql: Add an index on asset.copy(create_date) for item-age
	browse Running an item-age browse against a database with a reasonable
	number of entries in asset.copy is dog-slow without an index like
	this.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18843
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-23  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm: Backport
	r18838 from trunk Serials: Fix error in batch receiving when trying to change the
	shelving location of the previous item in the stream when there /is/
	no previous item in the stream git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18839
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-23  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: fix broken prefix
	and namespace URI for the mods32 transform This breakage can be found in databases that started out at version
	1.2 or earlier; matters since in-DB ingest is stricter with its
	XPATH processing.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18836
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-22  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/lineitem/findbib.js: fix missing
	dep that prevented acq bib search form from working Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18832
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-22  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/BibTemplate.js: minor FeedTemplate
	bug fixes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18830
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-22  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/holds.js: append to bottom
	of list for xul-based hold list interfaces.  The result of this is
	that rows appended off-screen (with just the hold id) will not make
	a network request for fleshing until they either become visible, or
	a column sort action is initiated git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18829
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-22  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/reingest-1.6-2.0.pl: bug #680096 - upgrade
	script to partially reingest bibs after upgrade to 2.0 This solves the problem of the new facets sidebar showing up empty
	in OPAC search results.  Since the process of populating
	metabib.facet_entry and updating metabib.*_field_entry can take a
	long time on large databases, the update SQL is generated by a
	separate script, reingest-1.6-2.0.pl.  Usage from an example run is: ./reingest-1.6-2.0.pl: generate SQL script to reingest bibs during
	an upgrade to Evergreen 2.0 By default, the script writes to the file reingest-1.6-2.0.sql.  To
	modify this script's behavior, you can supply the following options: --config /path/to/opensrf_core.xml  used to get connection
	                                    information to the Evergreen database --chunk_size n
	                                    number of bibs to reingest in a chunk; specify if you don't want all
	                                    of the bibs in the database to be reindexes                                     in a single transaction --output
	/path/to/output_file.sql   path of output SQL file Writing output to file reingest-1.6-2.0.sql SQL script complete.  To perform the reingest, please run the script
	using the psql program, e.g., psql {connection parameters}  < reingest-1.6-2.0.sql If you are running a large Evergreen installation, it is recommend
	that you examine the script first; note that a reingest of a large
	Evergreen database can take several hours.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18825
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-22  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm: more
	SuperCat XML fixup needed to support serials data -- important for
	opac customization though BibTemplate (as in, "do not blow up") git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18824
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-22  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml: add field to IDL needed by, well, a
	bunch of stuff: sstr-[has_many]->items git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18822
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-22  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/opensrf.xml.example,
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm, Open-ILS/src/support-scripts/fine_generator.pl: parallel fine
	generator The fine generator cronjob can now use multiple parallel processes
	by setting fine_generator/parallel in opensrf.xml to a value greater
	than 1.  This can speed up periodic fine generation in a database
	containing a large number of overdue loans.  Also added a service to return just the list of IDs of overdue loans
	and reservations - fleshing the entire set of overdue loans when
	generating fines has been observed to cause significant
	swap-thrashing in at least one large database.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18820
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-22  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/opensrf.xml.example,
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm, Open-ILS/src/support-scripts/hold_targeter.pl: hold targeter:
	add option to run parallel targeter processes Permit the hold targeter to divvy up the work and run more than one
	process at a time by setting the opensrf.xml setting
	hold_targeter/parallel to a value greater than one.  Doing so can
	significantly reduce the time it takes to (re)target a large number
	of hold requests, although only up to a point (in other words, if
	increasing the number of parallel targeters beyond one, it is
	recommended to do so slowly.) Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18819
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-20  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0465.function.maintain_control_numbers.
	sql: Address maintain_control_numbers() database function bug
	#677160 Jason Stephenson reported a bug handling records with multiple 001
	or 003 fields, and supplied a set of test records to reproduce the
	condition. The bug caused the ingest process to throw a database
	error, rolling back the transaction and preventing the actual ingest
	of those records.  The solution was to simplify the logic in
	maintain_control_numbers().  Now, in the case that there are either
	multiple 001s or 003s in the incoming record, we simply delete all
	of the 003s and 001s and create the desired 001 and 003. Also, if
	there are not exactly one 001 and one 003 in the incoming record, we
	do not try to preserve one of those values in the 035 as it would be
	close to meaningless.  Many thanks to Jason for the clear bug report and test cases! git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18811
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-19  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.xul: no one likes
	the persisting call number with fast add, not even me :) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18808
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-18  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/AutoFieldWidget.js,
	Open-ILS/web/js/ui/default/acq/invoice/common.js,
	Open-ILS/web/js/ui/default/acq/po/create.js: only allow choice from
	active providers when creating POs and invoices Also removed cusotm defaultLinkedDataLoader for the provider
	selection widget; no longer necessary since pcrud handles filter by
	OUs Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18799
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-18  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/po/lang.dtd/ru-RU.po: Stomp another ru-RU PO problem in
	lang.dtd git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18797
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-18  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/po/lang.dtd/ru-RU.po: Unbreak the Russian translation Ampersands at the end of msgstr entries break translate-toolkit but
	good.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18794
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-18  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/manage_items.js,
	Open-ILS/xul/staff_client/server/serial/select_unit.xul: Replace
	deprecated use of window.opener in unit selection window.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18793
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-18  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/default/conify/global/acq/edi_account.tt2,
	Open-ILS/web/templates/default/conify/global/acq/provider.tt2: mark
	some non-NULL provider and EDI fields as required Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18791
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-18  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/AutoFieldWidget.js: use pcrud
	auto-complete widget when selecting providers Fixes general slowness working with invoice and PO forms if more
	than a couple hundred providers are defined.  This could be generalized with a bit of work with Fieldmapper to
	define "has-one-chosen-by-user-from-cast-of-thousands" relationships
	that should trigger use the auto-complete widget.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18787
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-18  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/PermaCrud/Store.js: 
	fetchItemByIdentity now returns null immediately upon null identity Besides being trivially more efficient, this avoids a situation
	where pcrud can sometimes time out when attempting to retrieve a row
	by a null PK value.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18786
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-18  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/common/li_table.js: fetch more than
	the default 10 (per page) distrib formulas;  500 is arbitrary, but
	still notably less than the infinity that was in effect before
	paging.  todo: research optiosn for using the new
	autofieldwidget/dojo/pcrud-store instead git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18781
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-18  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/apache/eg.conf: Apparently, IE versions 6+ can
	handle ssl+keepalive.  this apache change should help speed up IE w/
	ssl and reduce server back-and-forth git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18776
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-17  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/PermaCrud/Store.js,
	Open-ILS/web/js/dojo/openils/widget/PCrudAutocompleteBox.js,
	Open-ILS/web/js/ui/default/acq/common/li_table.js,
	Open-ILS/web/js/ui/default/acq/lineitem/related.js,
	Open-ILS/web/templates/default/acq/common/li_table.tt2,
	Open-ILS/web/templates/default/conify/global/booking/resource.tt2,
	Open-ILS/web/templates/default/conify/global/booking/resource_attr.
	tt2,
	Open-ILS/web/templates/default/conify/global/booking/resource_attr_
	map.tt2: Backport r18762 from trunk: Wonder of wonders, a Dojo data store supporting lazy loading objects
	via pcrud! So openils.PermaCrud.Store was dreamt up and directed by Mike
	Rylander, and implemented by me.  Right now it gives us a new way to
	provide widgets for selecting objects in Dojo-based interfaces.  Where previously we had some dropdowns here and there that really
	shouldn't be dropdowns (such as one for selection lists in Acq, and
	several for resources and resource types in Booking -- these
	examples I've replaced, but there are surely more) because loading a
	dropdown with potentially zillions of items to choose from can take
	forever and break the interface, now we can have autocompleting
	textboxes that only load items matching what you type (and even then
	with a low-ish default limit so that if you're vague in your input
	you still don't get huge unwieldy result sets).  Easiest way to see an example is if you already have any acq
	selection lists.  Just go to any catalog record, choose Actions for
	this Record, choose View/Place orders, then click "Add to Selection
	List." In the resulting dialog, that second field used to be a
	dropdown, but now it's an autocompleting textbox.  Alternatively, you can see these in the affected booking interfaces
	(see files modified in this commit) under Admin -> Server
	Administration -> Booking.  The future promises even better things for this store. When it
	implements the Dojo Write API, interfaces using grids can
	potentially be vastly simplified by relying on the store to save its
	own dirty objects. The Notification API would facilitate easy use of
	single stores with multiple widgets. All good things for
	faster-to-write interfaces.
	------------------------------------------------------------------------git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18774
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-17  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/src/perlmods/OpenILS/Application/Storage/CDBI.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Storage/CDBI/serial.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/asset.p
	m: Hold targeting didn't work right on type I (issuance) holds, but
	now it does git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18773
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-17  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: Add authority
	control support for 630 and 648 fields Thanks to Ole Kerpel <oke@iisg.nl> for providing the additional
	definitions for this support to bring us closer to MARC authority
	control norms.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18771
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-17  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/metabib
	.pm: 0 (zero) is a valid depth, so allow it via defined() git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18769
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-17  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/metabib
	.pm: pass the supplied depth parameter to the query parser for use git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18767
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-17  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install: add libnet-ssh2-perl to
	Debian package deps Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18765
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-16  dbwells <dbwells@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm,
	Open-ILS/web/js/ui/default/serial/subscription/issuance.js: Backport
	r18760: small serial fixes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18761
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: push the asset.uri
	pkey serial into reality -- before 2.0 we did not use the serial git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18756
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-15  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/fieldmapper/Fieldmapper.js,
	Open-ILS/web/js/dojo/fieldmapper/IDL.js: return AutoIDL to its
	original state of loading the while IDL if no classes are selected.
	This will ease the process of moving to /IDL2js;  other minor
	cleanup git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18748
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-15  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/conify/global/asset/copy_template.js,
	Open-ILS/web/templates/default/conify/global/asset/copy_template.tt
	2,
	Open-ILS/web/templates/default/serial/subscription/caption_and_patt
	ern.tt2: Backport r18745 from trunk: serials ease-of-use issues It's comical how near a miss this commit is to making it into beta2,
	but it's fairly minor stuff.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18746
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-15  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/I18N.js,
	Open-ILS/web/js/dojo/openils/widget/Searcher.js: make sure
	dojo.cookie is loaded before use; removed unnecessary import of
	dojoData git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18741
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-15  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/reporter/clark-kent.pl: Reverting and extending
	r18472 to correct implementation thinko git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18735
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-15  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: Prevent creation
	of authority records that are truncated by one letter The summarizeField() function grabbed the values of the XUL
	elements, which were set by the keypress event listeners on the XUL
	elements.  However, the keypress event listener seems to capture the
	value of the XUL element before the value of the new key is appended
	to the existing value in a textbox - so, when you typed a new
	subfield, then right-clicked to create an authority, the value that
	was captured was missing the final character.  Adding the "input" event to the registered listeners captures the
	actual value for creating an authority and solves the problem. It
	might be possible to remove the keypress event listeners, but for
	now we'll take the cautious route.  Address Launchpad bug 669445 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18732
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-15  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm: Fix
	negative paging issue in
	open-ils.supercat.authority.author.startwith When paging backwards through authority lists, we were skipping the
	first page of results. By reducing the offset by the value of one
	page, we restore the expected order.  The same problem might affect other paging interfaces: to be
	determined.  Closes Launchpad bug 669247 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18730
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-15  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: Do not cache the
	authority context menu Caching would be great, except when you add an authority in the flow
	and you expect to see it the next time you right-click on the
	authority that you just added.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18729
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-13  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/po/admin.properties/cs-CZ.po,
	build/i18n/po/admin.properties/de-DE.po,
	build/i18n/po/admin.properties/en-CA.po,
	build/i18n/po/admin.properties/en-GB.po,
	build/i18n/po/admin.properties/es-ES.po,
	build/i18n/po/admin.properties/fr-CA.po,
	build/i18n/po/admin.properties/hy-AM.po,
	build/i18n/po/admin.properties/pt-BR.po,
	build/i18n/po/admin.properties/ru-RU.po,
	build/i18n/po/auth.properties/cs-CZ.po,
	build/i18n/po/auth.properties/de-DE.po,
	build/i18n/po/auth.properties/en-CA.po,
	build/i18n/po/auth.properties/en-GB.po,
	build/i18n/po/auth.properties/es-ES.po,
	build/i18n/po/auth.properties/fr-CA.po,
	build/i18n/po/auth.properties/hy-AM.po,
	build/i18n/po/auth.properties/pt-BR.po,
	build/i18n/po/auth.properties/ru-RU.po,
	build/i18n/po/cat.properties/cs-CZ.po,
	build/i18n/po/cat.properties/de-DE.po,
	build/i18n/po/cat.properties/en-CA.po,
	build/i18n/po/cat.properties/en-GB.po,
	build/i18n/po/cat.properties/es-ES.po,
	build/i18n/po/cat.properties/fr-CA.po,
	build/i18n/po/cat.properties/hy-AM.po,
	build/i18n/po/cat.properties/pt-BR.po,
	build/i18n/po/cat.properties/ru-RU.po,
	build/i18n/po/circ.properties/cs-CZ.po,
	build/i18n/po/circ.properties/de-DE.po,
	build/i18n/po/circ.properties/en-CA.po,
	build/i18n/po/circ.properties/en-GB.po,
	build/i18n/po/circ.properties/es-ES.po,
	build/i18n/po/circ.properties/fr-CA.po,
	build/i18n/po/circ.properties/hy-AM.po,
	build/i18n/po/circ.properties/pt-BR.po,
	build/i18n/po/circ.properties/ru-RU.po,
	build/i18n/po/common.properties/cs-CZ.po,
	build/i18n/po/common.properties/de-DE.po,
	build/i18n/po/common.properties/en-CA.po,
	build/i18n/po/common.properties/en-GB.po,
	build/i18n/po/common.properties/es-ES.po,
	build/i18n/po/common.properties/fr-CA.po,
	build/i18n/po/common.properties/hy-AM.po,
	build/i18n/po/common.properties/pt-BR.po,
	build/i18n/po/common.properties/ru-RU.po,
	build/i18n/po/conify.dtd/cs-CZ.po,
	build/i18n/po/conify.dtd/de-DE.po,
	build/i18n/po/conify.dtd/en-CA.po,
	build/i18n/po/conify.dtd/en-GB.po,
	build/i18n/po/conify.dtd/es-ES.po,
	build/i18n/po/conify.dtd/fr-CA.po,
	build/i18n/po/conify.dtd/hy-AM.po,
	build/i18n/po/conify.dtd/pt-BR.po,
	build/i18n/po/conify.dtd/ru-RU.po,
	build/i18n/po/conify.js/cs-CZ.po, build/i18n/po/conify.js/de-DE.po,
	build/i18n/po/conify.js/en-CA.po, build/i18n/po/conify.js/en-GB.po,
	build/i18n/po/conify.js/es-ES.po, build/i18n/po/conify.js/fr-CA.po,
	build/i18n/po/conify.js/hy-AM.po, build/i18n/po/conify.js/pt-BR.po,
	build/i18n/po/conify.js/ru-RU.po, build/i18n/po/db.seed/cs-CZ.po,
	build/i18n/po/db.seed/de-DE.po, build/i18n/po/db.seed/en-CA.po,
	build/i18n/po/db.seed/en-GB.po, build/i18n/po/db.seed/es-ES.po,
	build/i18n/po/db.seed/fr-CA.po, build/i18n/po/db.seed/hy-AM.po,
	build/i18n/po/db.seed/pt-BR.po, build/i18n/po/db.seed/ru-RU.po,
	build/i18n/po/fm_IDL.dtd/cs-CZ.po,
	build/i18n/po/fm_IDL.dtd/de-DE.po,
	build/i18n/po/fm_IDL.dtd/en-GB.po,
	build/i18n/po/fm_IDL.dtd/es-ES.po,
	build/i18n/po/fm_IDL.dtd/hy-AM.po,
	build/i18n/po/fm_IDL.dtd/pt-BR.po,
	build/i18n/po/fm_IDL.dtd/ru-RU.po,
	build/i18n/po/ils_events.xml/cs-CZ.po,
	build/i18n/po/ils_events.xml/de-DE.po,
	build/i18n/po/ils_events.xml/en-CA.po,
	build/i18n/po/ils_events.xml/en-GB.po,
	build/i18n/po/ils_events.xml/es-ES.po,
	build/i18n/po/ils_events.xml/fr-CA.po,
	build/i18n/po/ils_events.xml/hy-AM.po,
	build/i18n/po/ils_events.xml/pt-BR.po,
	build/i18n/po/ils_events.xml/ru-RU.po,
	build/i18n/po/lang.dtd/cs-CZ.po, build/i18n/po/lang.dtd/de-DE.po,
	build/i18n/po/lang.dtd/en-CA.po, build/i18n/po/lang.dtd/en-GB.po,
	build/i18n/po/lang.dtd/es-ES.po, build/i18n/po/lang.dtd/fr-CA.po,
	build/i18n/po/lang.dtd/hy-AM.po, build/i18n/po/lang.dtd/pt-BR.po,
	build/i18n/po/lang.dtd/ru-RU.po,
	build/i18n/po/multiclass_search_help.html/cs-CZ.po,
	build/i18n/po/multiclass_search_help.html/de-DE.po,
	build/i18n/po/multiclass_search_help.html/en-CA.po,
	build/i18n/po/multiclass_search_help.html/en-GB.po,
	build/i18n/po/multiclass_search_help.html/es-ES.po,
	build/i18n/po/multiclass_search_help.html/fr-CA.po,
	build/i18n/po/multiclass_search_help.html/hy-AM.po,
	build/i18n/po/multiclass_search_help.html/pt-BR.po,
	build/i18n/po/multiclass_search_help.html/ru-RU.po,
	build/i18n/po/offline.properties/cs-CZ.po,
	build/i18n/po/offline.properties/de-DE.po,
	build/i18n/po/offline.properties/en-CA.po,
	build/i18n/po/offline.properties/en-GB.po,
	build/i18n/po/offline.properties/es-ES.po,
	build/i18n/po/offline.properties/fr-CA.po,
	build/i18n/po/offline.properties/hy-AM.po,
	build/i18n/po/offline.properties/pt-BR.po,
	build/i18n/po/offline.properties/ru-RU.po,
	build/i18n/po/opac.dtd/cs-CZ.po, build/i18n/po/opac.dtd/de-DE.po,
	build/i18n/po/opac.dtd/en-CA.po, build/i18n/po/opac.dtd/en-GB.po,
	build/i18n/po/opac.dtd/es-ES.po, build/i18n/po/opac.dtd/fr-CA.po,
	build/i18n/po/opac.dtd/hy-AM.po, build/i18n/po/opac.dtd/pt-BR.po,
	build/i18n/po/opac.dtd/ru-RU.po, build/i18n/po/opac.js/cs-CZ.po,
	build/i18n/po/opac.js/de-DE.po, build/i18n/po/opac.js/en-CA.po,
	build/i18n/po/opac.js/en-GB.po, build/i18n/po/opac.js/es-ES.po,
	build/i18n/po/opac.js/fr-CA.po, build/i18n/po/opac.js/hy-AM.po,
	build/i18n/po/opac.js/pt-BR.po, build/i18n/po/opac.js/ru-RU.po,
	build/i18n/po/patron.properties/cs-CZ.po,
	build/i18n/po/patron.properties/de-DE.po,
	build/i18n/po/patron.properties/en-CA.po,
	build/i18n/po/patron.properties/en-GB.po,
	build/i18n/po/patron.properties/es-ES.po,
	build/i18n/po/patron.properties/fr-CA.po,
	build/i18n/po/patron.properties/hy-AM.po,
	build/i18n/po/patron.properties/pt-BR.po,
	build/i18n/po/patron.properties/ru-RU.po,
	build/i18n/po/reports.dtd/cs-CZ.po,
	build/i18n/po/reports.dtd/de-DE.po,
	build/i18n/po/reports.dtd/en-CA.po,
	build/i18n/po/reports.dtd/en-GB.po,
	build/i18n/po/reports.dtd/es-ES.po,
	build/i18n/po/reports.dtd/fr-CA.po,
	build/i18n/po/reports.dtd/hy-AM.po,
	build/i18n/po/reports.dtd/pt-BR.po,
	build/i18n/po/reports.dtd/ru-RU.po,
	build/i18n/po/reports.js/cs-CZ.po,
	build/i18n/po/reports.js/de-DE.po,
	build/i18n/po/reports.js/en-CA.po,
	build/i18n/po/reports.js/en-GB.po,
	build/i18n/po/reports.js/es-ES.po,
	build/i18n/po/reports.js/fr-CA.po,
	build/i18n/po/reports.js/hy-AM.po,
	build/i18n/po/reports.js/pt-BR.po,
	build/i18n/po/reports.js/ru-RU.po,
	build/i18n/po/vandelay.dtd/cs-CZ.po,
	build/i18n/po/vandelay.dtd/de-DE.po,
	build/i18n/po/vandelay.dtd/en-CA.po,
	build/i18n/po/vandelay.dtd/en-GB.po,
	build/i18n/po/vandelay.dtd/es-ES.po,
	build/i18n/po/vandelay.dtd/fr-CA.po,
	build/i18n/po/vandelay.dtd/hy-AM.po,
	build/i18n/po/vandelay.dtd/pt-BR.po,
	build/i18n/po/vandelay.dtd/ru-RU.po: Merge translations from
	Launchpad git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18725
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-12  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/myopac.js: in some scenarios,
	the 'mous' class may not have loaded yet.  pre-load the class in
	myopac init git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18724
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/c-apps/oils_sql.c: Backporting r18686 for great
	justice (and PCRUD speed) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18722
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/I18N.js: Cache the language set (per
	locale) in a cookie git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18721
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/Searcher.js: Trim the set of
	classes and fields pulled in by Searcher; Cache the cmc data (cmf is
	too big) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18720
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-12  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/apache/eg_vhost.conf,
	Open-ILS/examples/apache/startup.pl,
	Open-ILS/examples/opensrf.xml.example,
	Open-ILS/src/perlmods/OpenILS/WWW/IDL2js.pm,
	Open-ILS/web/conify/global/actor/org_unit.html,
	Open-ILS/web/conify/global/actor/org_unit_type.html,
	Open-ILS/web/conify/global/config/copy_status.html,
	Open-ILS/web/conify/global/config/marc_code_maps.html,
	Open-ILS/web/conify/global/permission/grp_tree.html,
	Open-ILS/web/conify/global/permission/perm_list.html,
	Open-ILS/web/js/dojo/fieldmapper/Fieldmapper.js,
	Open-ILS/web/js/dojo/fieldmapper/IDL.js,
	Open-ILS/web/js/dojo/fieldmapper/OrgUtils.js,
	Open-ILS/web/js/dojo/fieldmapper/dojoData.js,
	Open-ILS/web/js/dojo/fieldmapper/hash.js,
	Open-ILS/web/js/ui/base.js,
	Open-ILS/web/opac/skin/default/xml/common/js_common.xml,
	Open-ILS/web/templates/base.tt2, Open-ILS/xsl/fm_IDL2js.xsl,
	Open-ILS/xul/staff_client/server/OpenILS/util_overlay.xul,
	Open-ILS/xul/staff_client/server/admin/copy_locations.xhtml,
	Open-ILS/xul/staff_client/server/admin/org_unit_settings.xhtml: 
	Back-port of 18712 and related changes: Server-generated IDL JS The goal is to reduce use of pre-onload XHR, which is known to cause
	problems (dreaded white-screen-of-death) in firefox/xulrunner.
	Change allows opac, staff client, and embedded browser interfaces to
	load a pre-formatted JS object instead of IDL XML via XHR. In
	addition to dropping the XHR, clients no longer parse the XML, which
	should reduce page render time. Finally, in the staff interfaces,
	the full IDL is once again loaded, so there is no need to specifiy
	per-page classes.  Per-page classes are still supported and used in
	the OPAC to reduce the up-front load time.  Change requires an update to the Evergreen Apache config.  Part of this change included condensing fieldmapper.hash and
	fielmapper.dojoData content into fieldmapper.Fieldmapper to avoid
	circular dependencies, which was causing problems with IE. Will
	eventually want to deprecate .hash and .dojoData, but for now they
	still function as before.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18717
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-12  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/common/js/opac_utils.js: ensure that we only
	fetch this setting once per page git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18716
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-12  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/conify/global/actor/org_unit.html,
	Open-ILS/web/conify/global/actor/org_unit.js,
	Open-ILS/web/conify/global/actor/org_unit_type.html,
	Open-ILS/web/conify/global/actor/org_unit_type.js,
	Open-ILS/web/conify/global/config/copy_status.html,
	Open-ILS/web/conify/global/config/copy_status.js,
	Open-ILS/web/conify/global/config/marc_code_maps.html,
	Open-ILS/web/conify/global/permission/grp_tree.html,
	Open-ILS/web/conify/global/permission/grp_tree.js,
	Open-ILS/web/conify/global/permission/perm_list.html,
	Open-ILS/web/conify/global/permission/perm_list.js,
	Open-ILS/web/js/ui/base.js,
	Open-ILS/web/opac/common/js/RemoteRequest.js,
	Open-ILS/web/opac/common/js/opac_utils.js,
	Open-ILS/web/opac/extras/bbags.xml,
	Open-ILS/web/opac/extras/circ/alt_holds_print.html,
	Open-ILS/web/opac/extras/selfcheck/selfcheck.js,
	Open-ILS/web/opac/extras/selfcheck/selfcheck.xml,
	Open-ILS/web/opac/skin/craftsman/js/sidebar.js,
	Open-ILS/web/opac/skin/default/js/adv_global.js,
	Open-ILS/web/opac/skin/default/js/mresult.js,
	Open-ILS/web/opac/skin/default/js/rresult.js,
	Open-ILS/web/opac/skin/default/js/sidebar.js,
	Open-ILS/web/opac/skin/default/xml/common/js_common.xml,
	Open-ILS/web/reports/oils_rpt.js,
	Open-ILS/web/reports/oils_rpt_common.xhtml,
	Open-ILS/web/reports/xul/template_builder.xul,
	Open-ILS/xul/staff_client/server/admin/cash_reports.xhtml,
	Open-ILS/xul/staff_client/server/admin/closed_dates.xhtml,
	Open-ILS/xul/staff_client/server/admin/copy_locations.xhtml,
	Open-ILS/xul/staff_client/server/admin/hold_pull_list.xhtml,
	Open-ILS/xul/staff_client/server/admin/hold_pull_list_classic.xhtml
	, Open-ILS/xul/staff_client/server/admin/non_cat_types.xhtml,
	Open-ILS/xul/staff_client/server/admin/stat_cat_editor.xhtml,
	Open-ILS/xul/staff_client/server/main/data.xul,
	Open-ILS/xul/staff_client/server/patron/ue.xhtml: merge r18687 from
	trunk for cookie library changes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18713
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-11  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0464.function.maintain_control_numbers.
	sql: Avoid munging 035 when a new record is created If there is no 003 in the record when it is created, then we will
	not attempt to generate a 035. If the incoming record contains a 001
	and 003, then we will create a 035.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18709
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-11  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Cat/Authority.pm: Do not
	supply a default value for 003 in new authority records With cat.maintain_control_numbers enabled by default, we can trust
	the database trigger to create the appropriate 003 for us - and by
	not supplying a 003 in the new record, we won't create a spurious
	035 for a brand new record.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18708
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-11  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/tips.js: wraps tips appendChild
	in try/catch to prevent occaisonal exeptions.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18703
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-11  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/cat/authority/list.js,
	Open-ILS/web/opac/skin/default/js/rdetail.js: Update the edit dates
	for authority and MFHD records when they are edited Addresses the oversight in the original implementation that missed
	this; important if we're going to differentiate between creating and
	editing a record for triggers.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18696
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-10  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0463.config.enable_id_global_flags.sql: 
	Enable "maintain control numbers" and "record ID as TCN" behavior by
	default Per http://ur1.ca/2bgc4, this behavior hews more closely to the
	MARC21 specification. Note, however, that duplicate bib detection in
	the "Import via Z39.50" interface will be somewhat affected; a more
	trustworthy workaround is to include the "Local catalog" in Z39.50
	searches to determine if a matching record already exists in the
	database.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18694
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-10  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/chrome/content/cat/opac.js,
	Open-ILS/xul/staff_client/chrome/content/main/constants.js,
	Open-ILS/xul/staff_client/server/locale/en-US/serial.properties,
	Open-ILS/xul/staff_client/server/serial/editor_base.js,
	Open-ILS/xul/staff_client/server/serial/manage_dists.js,
	Open-ILS/xul/staff_client/server/serial/manage_dists.xul,
	Open-ILS/xul/staff_client/server/serial/manage_subs.js,
	Open-ILS/xul/staff_client/server/serial/sbsum_editor.js,
	Open-ILS/xul/staff_client/server/serial/sbsum_editor.xul,
	Open-ILS/xul/staff_client/server/serial/sdist2_editor.xul,
	Open-ILS/xul/staff_client/server/serial/sdist_editor.js,
	Open-ILS/xul/staff_client/server/serial/select_aou.xul,
	Open-ILS/xul/staff_client/server/serial/sisum_editor.js,
	Open-ILS/xul/staff_client/server/serial/sisum_editor.xul,
	Open-ILS/xul/staff_client/server/serial/sssum_editor.js,
	Open-ILS/xul/staff_client/server/serial/sssum_editor.xul,
	Open-ILS/xul/staff_client/server/serial/sstr_editor.js,
	Open-ILS/xul/staff_client/server/serial/sstr_editor.xul: Backport
	r18685 and r18691 from trunk: serials-integration work + patch from
	Dan Wells git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18692
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-10  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: 
	Backport r18688 from trunk: booking bugfix git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18689
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-10  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Move the magic-bib
	update to the top of the file, avoiding triggers that care about XML
	namespaces git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18682
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-10  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/reporter-schema.sql,
	Open-ILS/src/sql/Pg/upgrade/0462.schema.no-truncate-during-bib-view
	-refresh.sql: do not use TRUNCATE when refreshing
	reporter.materialized_simple_record Previous behavior would break Slony replication after doing a bib
	load.  Since a deletion is slower than a truncate, if you're not
	using Slony replication, you may prefer to truncate rmsr prior to
	calling reporter.enable_materialized_simple_record_trigger.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18678
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-09  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/common/js/DP_DateExtensions.js,
	Open-ILS/web/opac/extras/selfcheck/selfcheck.xml,
	Open-ILS/web/opac/skin/craftsman/xml/common/holds.xml,
	Open-ILS/web/opac/skin/craftsman/xml/page_myopac.xml,
	Open-ILS/web/opac/skin/default/js/myopac.js,
	Open-ILS/web/opac/skin/default/xml/common/holds.xml,
	Open-ILS/web/opac/skin/default/xml/page_myopac.xml: merge r18675
	from trunk for DP_DateExtension removal git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18676
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-08  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/fieldmapper/Fieldmapper.js: dynamically
	loaded classes also need access to toHash git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18674
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-08  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/fieldmapper/Fieldmapper.js,
	Open-ILS/web/js/dojo/fieldmapper/IDL.js: Backporting IDL bug fixes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18671
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-08  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/search/unified.js: Backport r18662
	from trunk: don't try to render dropdown of all bib IDs git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18663
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-08  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: More fixing related
	to r18657 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18661
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-08  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/012.schema.vandelay.sql,
	Open-ILS/src/sql/Pg/upgrade/0461.schema.vandelay.replace_field.sql: 
	Bacport r18657: syntax problem spotted by Jason Etheridge git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18658
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-08  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: 1.6-2.0 upgrade
	script syncing, re r18652 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18655
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-08  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/012.schema.vandelay.sql,
	Open-ILS/src/sql/Pg/upgrade/0461.schema.vandelay.replace_field.sql: 
	Backporting r18652: Teach vandelay.replace_field to be a little
	smarter by allowing simple cases of both replacing and
	regexp-testing the same subfield git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18653
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-08  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: holds
	retrieval API call sorting and cleanup;  sort non-cancelled holds by
	ready-for pickup, then active, then suspended;  use json_query to
	fetch IDs first, so id_list calls can avoid fetching the full hold
	objects in the ML.  sort fleshed transit by send time to pick up the
	latest transit git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18651
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-08  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install: Further Fedora prereq
	installer tweaks   * Install the Perl DBD::Pg module   * Force the CPAN modules, as Business::OnlinePayment::AuthorizeNet     still suffers from an install-crippling bug git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18649
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-08  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install: Add UUID::Tiny to Fedora
	prerequisites git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18647
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-08  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install: Improve Fedora prerequisite
	installer   * Explicitly install wget, which isn't installed in a minimal
	  install * Hack JavaScript-SpiderMonkey Makefile.PL for 32-bit Fedora   * Provide a fedora14 target   * Change "fedora-13" to "fedora13" to match OpenSRF prereq
	  installer git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18645
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-05  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: #671213: remove
	extraneous insert from upgrade script Somebody upgrading from 1.6.1 should already have this.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18640
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-05  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/acq/Lineitem.js,
	Open-ILS/web/js/dojo/openils/acq/Picklist.js,
	Open-ILS/web/js/ui/default/acq/common/li_table.js,
	Open-ILS/web/js/ui/default/acq/invoice/view.js,
	Open-ILS/web/js/ui/default/acq/lineitem/related.js,
	Open-ILS/web/js/ui/default/acq/picklist/brief_record.js,
	Open-ILS/web/js/ui/default/acq/picklist/user_request.js,
	Open-ILS/web/js/ui/default/acq/picklist/view.js,
	Open-ILS/web/js/ui/default/acq/picklist/view_list.js,
	Open-ILS/web/js/ui/default/acq/search/picklist.js,
	Open-ILS/xul/staff_client/server/circ/util.js: switch to
	authoritative methods for various acq retrievals Avoid race condition when using Slony replication Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18638
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-05  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/sql/Pg/upgrade/0459.schema.password-reset-request-time
	.sql: missed database update from password reset fix Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18636
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-05  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/sidebar.js,
	Open-ILS/web/opac/skin/default/xml/common/login.xml: backport
	r18548, 18564, and 18602 from trunk for opac login form tweaks git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18631
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-05  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: remove
	aupr.request_time fix from 1.6.1-2.0 upgrade Fix also in 1.6.1.3 Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18627
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-05  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/main/constants.js: 
	Backport r18622 from trunk: legacy serials OPAC fix git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18624
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-05  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/005.schema.actors.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: fix user password
	reset request time column def Needs to be a timestamp with time zone; fixes a bug where it was
	interpreted as a UTC time, throwing off the calculation of the
	expiration of the password reset request.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18621
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-05  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Vandelay.pm: remove some
	extra rollbacks, and catch the failure of others where they may or
	may not be needed git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18616
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-05  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_overlay.xu
	l, Open-ILS/xul/staff_client/chrome/skin/media/images/licenses.txt: 
	backporting r18609 patch from bshum for catalog search in button bar git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18610
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-04  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install,
	Open-ILS/src/perlmods/OpenILS/Utils/RemoteAccount.pm: Backport
	r18606 from trunk: no more Net::uFTP git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18607
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/fieldmapper/IDL.js: cut down on reloading of
	IDL classes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18604
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/012.schema.vandelay.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0458.schema.vandelay-add_fields.sql: 
	General 2.0b1 cleanup  * Problem in vandelay.add_fields spotted by tsbere  * Syncing 1.6.1-2.0 upgrade script with reality git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18601
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/apache/startup.pl: over-aggressive backporting
	-- only in trunk and 1.6 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18600
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-04  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger/Reactor.pm: add
	TT helper to squeeze strings into the UNOB straitjacket The force_jedi_unob helper strips non-ASCII characters from template
	output but does so nicely by converting the string to NFD first.
	This is meant to be used by EDI templates, although could be useful
	for A/T output that goes to receipt printers that cannot print
	diacritics.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18599
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-03  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Order.pm: blimey git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18597
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-03  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/apache/startup.pl: add the Batch Bib Update
	module to startup.pl git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18594
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-03  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Order.pm: flip sense
	of spending limit check Testing showed users expecting that the limit would be based on
	amount spent, not the amount available to send.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18592
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-03  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Invoice.pm: Backport
	r18589 from trunk: acq invoice voucher fix git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18590
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-02  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/web/templates/base.tt2,
	Open-ILS/web/templates/default/conify/global/config/circ_matrix_mat
	chpoint.tt2,
	Open-ILS/web/templates/default/conify/global/config/hard_due_date.t
	t2,
	Open-ILS/web/templates/default/conify/global/config/hard_due_date_v
	alues.tt2, Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_menus.xul: 
	Backport r18535 from trunk: hard due date interfaces git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18587
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-02  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/0454.function.authority_merge_records.sql,
	Open-ILS/src/sql/Pg/upgrade/0454.function.authority_merge_records.s
	ql: Move upgrade to upgrade directory git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18586
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-02  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Invoice.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0457.data.acqinv.print.sql: Backport
	r18583 from trunk, fund totals on an invoice voucher git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18584
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-02  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/money.p
	m: Patch from Steve Callender to address a booking-related
	collection agency reporting problem git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18581
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-02  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/200.schema.acq.sql,
	Open-ILS/src/sql/Pg/upgrade/0456.data.upc-lineitem-attr.sql: DROP
	TRIGGER IF EXISTS push_due_date_tgr ON action.circulation; add
	definition for UPC line item attribute Useful for providers of audiovisual material that don't have ISBNs.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18579
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-02  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/EDI.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Acq/Financials.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Acq/Invoice.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Acq/Lineitem.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Acq/Picklist.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Acq/Provider.pm: enable
	authoritative versions of various acq retrieval functions Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18577
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-02  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/200.schema.acq.sql,
	Open-ILS/src/sql/Pg/upgrade/0455.schema.acq-tweak-lineitem-attr-spl
	itting.sql: don't break up title and author when ingesting
	acquisitions MARC Note that this can be done more cleanly once oils_xpath groks XPATH
	2.0 functions, in particular string-join.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18575
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-02  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Provider.pm,
	Open-ILS/web/js/dojo/openils/widget/AutoFieldWidget.js: back-porting
	18571, 18572.  provider fetching updates, autofieldwidget linked
	class loader git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18573
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-02  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/SIP/Patron.pm: in SIP patron
	retrieval, only fetch non-archived penalties and penalties that that
	matter (fines, overdues, blocking penalties).  pair down the penalty
	comparisons to avoid fleshing the penalty type, potentially numerous
	times for a given type, by using the constant identifiers git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18570
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-02  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/011.schema.authority.sql,
	Open-ILS/src/sql/Pg/0454.function.authority_merge_records.sql: 
	Enable merge of authority records to do the right thing The target and source authority record was flipped, causing the
	update to fail. In reconsidering this function, it is not necessary
	to change the contents of the source authority record just to
	propagate the content of the target authority record to any linked
	bibliographic records.  Instead, take the approach of updating the ID of the controlled
	field in the bib record, then temporarily set "reingest on same
	MARC" to TRUE and update the target authority record by setting
	deleted = FALSE (which propagates the "changes" to the linked bib
	records), then set "reingest on same MARC" flag back to its original
	value.  This has the bonus of actually working.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18568
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-01  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Lineitem.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Acq/Search.pm,
	Open-ILS/web/js/ui/default/acq/common/li_table.js: yet another
	replication race condition fix Fixes problems that can occur when creating a lineitem from an
	existing bib in the catalog; adds an authoritative version of
	open-ils.acq.lineitem.retrieve.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18566
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-01  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/012.schema.vandelay.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0453.schema.vandely.add_field_fix.sql: 
	Backporting r18561 from trunk: Make vandelay.add_field smarter about
	applying add rules when no target field exists before hand git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18562
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-01  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/cat/opac.js,
	Open-ILS/xul/staff_client/server/cat/marcedit.js: Replace hard-coded
	'(CONS)' for MARC control number identifier in authority records We created an actor.org_unit_setting,
	'cat.marc_control_number_identifier', for specifying the preferred
	MARC control number identifier, but when we create a new authority
	record from the MARC editor, the hardcoded value of 'CONS' is being
	used.  This teaches the staff client how to pull the appropriate value from
	the AOUS when invoking the MARC Editor.  Resolves https://bugs.launchpad.net/evergreen/+bug/669245 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18560
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-01  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/999.functions.global.sql,
	Open-ILS/src/sql/Pg/upgrade/0452.schema.authority.propagate_changes
	.sql: Ensure that changes to authority records propagate to linked
	bibliographic records Per https://bugs.launchpad.net/evergreen/+bug/669596, updated
	authority records weren't being reflected in bibliographic records
	with fields that link to those authority records. We were missing
	the call to authority.propaagate_changes() withing the ingest
	trigger on authority.record_entry.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18558
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-01  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm: we should
	not restrict to the top org only, get all counts git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18556
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-01  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm: Backport
	thinko fix for count reporting git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18554
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-01  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/110.hold_matrix.sql,
	Open-ILS/src/sql/Pg/upgrade/0451.schema.in_db-hold_permit.sql: 
	Backport of in-db hold permit improvements from trunk git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18551
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-01  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm: syntax git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18547
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-01  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm: Include
	copy counts in holdings XML -- I will destroy MVRs yet! git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18546
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-11-01  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/200.schema.acq.sql,
	Open-ILS/src/sql/Pg/upgrade/0450.schema.drop-balance-check-constrai
	nts.sql: let libraries allow funds to be overcommitted The check constraints on the balance warning and stop limits were
	too strict - a library can validly choose to permit a fund to have a
	commitment greater than 100% of its allocation Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18544
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-29  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Driver/Pg/QueryPa
	rser.pm: adjust quoting of phrase searches This has three main effects: * This formalizes the current behavior where a   phrase search like   title:"^Harry Potter"   acts as a left-anchored search and   title:"Harry Potter$"   acts as a right-anchored search.  In particular, this can be useful for constructing searches of
	bibliographic call numbers.  * Other regex metacharacters in phrase searches are   now escaped.  * Phrase searches like "C++" will no longer crash; in fact,   this makes a phrase search currently the only way to   accurately retrieve all C++ titles with the usual   normalization rules Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18541
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-29  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/EDI.pm: loosen
	cross-check of line item ID when processing incoming EDI messages Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18539
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-28  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/EDI.pm: wrap some
	EDI message retrievals in transactions Avoid errors when operating under Slony.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18537
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-28  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: 
	calling noop with no arguments (and not capturing the output) is,
	well, a no-op.  set the value to true as originally intended git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18533
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-28  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/css/skin/default/serial.css,
	Open-ILS/web/js/ui/default/serial/subscription.js,
	Open-ILS/web/templates/default/serial/subscription.tt2,
	Open-ILS/web/templates/default/serial/subscription/distribution.tt2
	, Open-ILS/xul/staff_client/server/serial/batch_receive.js: Backport
	r18530 from trunk: misc alt serials UI minor improvements, tweaks git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18531
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-28  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/AppUtils.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Circ.pm,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0448.data.trigger.circ.staff_age_to_los
	t.sql, Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/chrome/content/main/constants.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_menus.xul,
	Open-ILS/xul/staff_client/chrome/locale/en-US/offline.properties,
	Open-ILS/xul/staff_client/server/admin/circ_age_to_lost.js,
	Open-ILS/xul/staff_client/server/admin/circ_age_to_lost.xul,
	Open-ILS/xul/staff_client/server/locale/en-US/admin.properties: 
	backport r18498-18499 from trunk for staff-initiated age overdue
	circ/item to Lost functionality, with upgrade script git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18527
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-28  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/SIP.pm,
	Open-ILS/src/perlmods/OpenILS/SIP/Patron.pm: condensed SIP patron
	lookup by barcode into 1 cstore call;  provided option for
	slimmed-down user object fetching in the case of checkin, where all
	we really need is the barcode of the user on the circulation git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18520
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-28  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Cat.pm: Backport r18516:
	Ensure call numbers are returned to the holdings editor in ascending
	sorted order James Fournie in https://bugs.launchpad.net/evergreen/+bug/635121
	reported that call numbers were being displayed in the order that
	they had been added to the database, rather than in sorted call
	number label order.  Although I have been unable to reproduce this problem on two
	different test systems, the patch he provided for 1.6.1 (which fixes
	the problem on their test system) shouldn't hurt other systems.  For sortkey-aware branches, I modified James' patch to take
	advantage of the asset.call_number.label_sortkey column and the
	oils_text_as_bytea() function.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18518
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-27  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: 
	Backport r18514 from trunk, more circ speedups when booking not in
	play git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18515
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-27  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: more
	micro-optimization of checkin code; protect against undef var
	warning in info message; removed unused sub git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18512
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-27  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/100.circ_matrix.sql,
	Open-ILS/src/sql/Pg/upgrade/0449.schema.kill_explode_array_and_use_
	unnest.sql: Move towards unnest (faster than explode_array); bring
	upgrade script up to speed git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18509
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-27  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: since
	they typically repeat, cache the org and requestor objects in the
	permit loop of the find-best-hold calculation git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18506
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-27  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: 
	Backport of r18494, r18500 and r18501 from trunk: split fine
	generation git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18504
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-27  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: 
	Backport r18502 from trunk: make booking avoidable in circ service
	(speedup!) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18503
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-27  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0447.data.remove-extra-local-avail-sett
	ings.sql: remove unused settings and permission circ.holds.alert_if_local_avail and circ.holds.deny_if_local_avail
	are redundant; circ.holds.hold_has_copy_at.{alert|block} are the
	settings that will actually be used.  Also remove a related,
	redundant permission.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18496
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-27  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/web/templates/default/conify/global/acq/distribution_formu
	la.tt2: added grid autoHeight to distrib formula page to prevent the
	grid from consuming the whole page git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18492
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-27  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Picklist.pm,
	Open-ILS/web/js/ui/default/conify/global/acq/distribution_formula.j
	s: Backport r18489 from trunk: distribution formula UI paging git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18490
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-27  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/WWW/SuperCat.pm: fix glitch in
	escaping call number labels Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18488
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-27  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/chrome/content/util/browser.js,
	Open-ILS/xul/staff_client/chrome/content/util/browser.xul,
	Open-ILS/xul/staff_client/chrome/content/util/rbrowser.xul: View
	Source option for embedded browser (click on the Debug link) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18486
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-26  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/conify/global/asset/copy_template.js,
	Open-ILS/web/templates/default/conify/global/asset/copy_template.tt
	2: Backport r18480 from trunk: copy template editor bugfix git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18481
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-26  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/020.schema.functions.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0446.schema.naco-normalize-modifiers.sq
	l: fix NACO normalization of four letter modifier characters Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18477
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-26  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/reporter/clark-kent.pl: include more information in
	the debugging dump; correct the "back to index" link git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18470
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-25  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/circ/alternate_copy_summary.js,
	Open-ILS/xul/staff_client/server/circ/alternate_copy_summary.xul: 
	Floating field in alternate item details UI git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18468
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-25  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/020.schema.functions.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0445.schema.replace-connect_by.sql: 
	quickly, before anyone notices ... minor speed enhancement (aka,
	thinko) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18466
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-25  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/020.schema.functions.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0445.schema.replace-connect_by.sql: 
	Backport r18462-r18463 from trunk: Remove some connectby() uses and
	update upgrade script git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18464
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-25  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/reporter/clark-kent.pl: Dump some debugging output
	from clark; may later make this optional, but we usually need it
	when looking for the cause of problems.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18458
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-22  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_summary.xml: 
	further protection against dreaded opac bank page; wrap settimeout
	redetail bibtemplate loading in an onload to ensure it runs after
	dojo onload events git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18455
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-22  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/financial/claim_eligible.js,
	Open-ILS/web/js/ui/default/acq/search/unified.js,
	Open-ILS/xul/staff_client/server/serial/batch_receive.js: Use
	standard JS syntax; var [...] seems to be a Spidermonkey extension git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18453
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-22  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_summary.xml: 
	typo in setTimeout spotted by dbs git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18451
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-22  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/lineitem/related.js: Backport
	r18448 from trunk, minor acq glitch with view/place orders interface git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18449
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-22  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/body.xml,
	Open-ILS/web/opac/skin/default/xml/common/js_common.xml,
	Open-ILS/web/opac/skin/default/xml/home/index_body.xml,
	Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_summary.xml: Move
	dojo loading around to avoid the "white screen of death" in Firefox
	and xulrunner (See:

	http://o.dojotoolkit.org/forum/dojo-foundation/general-discussion/firefox-3-fires-domcontentloaded-event-prematurely )git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18447
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-21  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/serial/subscription.js: Backport r18442
	from trunk, autogrid cut-off tweak git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18443
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-21  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/checkout.js: ilsevent is no
	longer a number, but a string.  I knew that, but missed this test git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18441
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-21  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/asset.p
	m, Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm,
	Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0444.schema.upper-bytea.sql: improve
	call number sorting oils_text_as_bytea now does uppercasing in addition to converting
	strings to bytea, working around the limitation that json_query
	can't stack transforms Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18436
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-20  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: use a
	transaction when searching for the nearest hold request Solves the following problem in a setup that uses Slony - if
	multiple items that can fulfill the same hold are checked in one
	after another, occassionally two items will end up being put in
	transit for the same hold request.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18433
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-20  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/SIP.pm,
	Open-ILS/src/perlmods/OpenILS/SIP/Patron.pm,
	Open-ILS/src/perlmods/OpenILS/SIP/Transaction/Checkin.pm: added some
	time diagnostics to checkin process;  more org unit caching; do less
	user fleshing on hold user during checkin (only card and name is
	needed) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18430
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-20  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml: These fields exist ... tell the IDL
	about them git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18429
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-20  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm: add
	start_date and end_date to scap serialization git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18426
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-20  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/extras/selfcheck/selfcheck.js: don't allow
	inactive cards with web-selfcheck git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18424
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-20  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm: Backport
	r18421 from trunk git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18422
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-20  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm: Backport
	r18419 from trunk: supercat bugs on records with serials data
	attached git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18420
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-20  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: Patch
	from tsbere to address backporting issue of hard due dates patch
	against trunk (also, get rid of 3-space indentation..) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18418
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-20  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger/Event.pm: 
	Backport r18416 from trunk: a/t use rstore to flesh if cstore not
	available git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18417
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-20  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml: Backport r18414 from trunk git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18415
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-20  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: 1.6.1-2.0 upgrade
	script needs to fall in line with reality, re 0442 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18412
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-20  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/999.functions.global.sql,
	Open-ILS/src/sql/Pg/upgrade/0443.schema.authority_ingest.sql: 
	Prevent "Validate" from matching against deleted authority records 2.0 introduces the ability to delete authority records. The routines
	in OpenILS:Application:Storage:Publisher:authority check for
	matching values of authority.full_rec without concern about whether
	the corresponding entry in authority.record_entry has been deleted
	or not.  This change removes entries from authority.full_rec when an
	authority.record_entry row is deleted, with the (possibly incorrect)
	assumption that there won't be many cases where users will want to
	search for deleted authority records and undelete them. If that
	assumption turns out to be incorrect, then further changes can
	follow; this change at least makes the current behaviour for
	user-visible actions work as expected.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18410
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-20  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/serial/list_stream.js,
	Open-ILS/web/js/ui/default/serial/list_subscription.js,
	Open-ILS/web/js/ui/default/serial/subscription.js,
	Open-ILS/web/templates/default/serial/list_stream.tt2,
	Open-ILS/web/templates/default/serial/list_subscription.tt2,
	Open-ILS/web/templates/default/serial/subscription.tt2,
	Open-ILS/xul/staff_client/chrome/content/cat/opac.js: Backport
	r18407 from trunk: alt serials interface tweak git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18408
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-20  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/SIP.pm,
	Open-ILS/src/perlmods/OpenILS/SIP/Transaction/Checkin.pm: during
	checkin, an item's hold may have a fleshed pickup_lib.  added code
	to detect and protect against treating a ref as an ID.  minor
	cleanup git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18403
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-20  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/crontab.example, Open-ILS/examples/fm_IDL.xml,
	Open-ILS/src/Makefile.am,
	Open-ILS/src/perlmods/OpenILS/Application/AppUtils.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/100.circ_matrix.sql,
	Open-ILS/src/sql/Pg/upgrade/0442.schema.due_date_ceiling_alt_impl.s
	ql, Open-ILS/src/support-scripts/update_hard_due_dates.srfsh,
	Open-ILS/web/templates/base.tt2: Backporting r18396 from trunk:
	Patch from Thomas Berezansky providing an alternate implementation
	of Hard Due Dates git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18397
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-19  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/result_common.js: expand the
	scope of BT on the result list page, allowing simpler slots git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18393
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-18  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: update 1.6.1 to 2.0
	upgrade script for 0441 Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18391
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-18  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/020.schema.functions.sql,
	Open-ILS/src/sql/Pg/upgrade/0441.schema.naco-normalized-crossed-d.s
	ql: fix mapping of the crossed D character in naco_normalize Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18389
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-18  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Cat.pm,
	Open-ILS/web/js/dojo/openils/widget/AutoGrid.js,
	Open-ILS/web/js/dojo/openils/widget/EditPane.js,
	Open-ILS/web/js/ui/default/conify/global/asset/copy_template.js,
	Open-ILS/web/templates/default/conify/global/asset/copy_template.tt
	2: Backport r18386 from trunk, asset.copy_template editing
	improvement git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18387
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-18  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm: Backport
	r18384 from trunk: serials previous issue copy location moving git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18385
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-18  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0440.schema.biblio_extract_located_uris
	.sql: Protect biblio.extract_located_uris() from a NULL uri_use
	value by using the href as a fallback If an 856 field contained a subfield "9" but did not contain a
	subfield "z", "2", or "n", then ingest of the MARC record would fail
	as it attempted to retrieve an asset.uri row where uri_use = NULL -
	which was never true.  This change adds the subfield "u" to fall back to for the uri_use
	variable, just like we do for the uri_label variable, and prevents
	ugly ingest errors from getting thrown back at the client.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18383
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-18  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/display.js: stop sign page
	was incorrectly coming up for all penalties git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18381
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-18  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/main/menu.js: make
	Circulation -> Enter Offline Interface open a new window instead of
	a tab, like the button from the login window.  This works around a
	permission issue with loading the offline receipt templates git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18378
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-18  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/OpenILS/data.js,
	Open-ILS/xul/staff_client/server/patron/bill2.js: merge r18374-18375
	from trunk for bill receipt fixes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18376
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/asset.p
	m, Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm,
	Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0439.schema.function-bytea-index-label.
	sql: Backporting r18364-r18366 from trunk: use a function to wrap up
	escaping of solidus and casting to bytea, propogate to indexing and
	where/order_by git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18367
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-15  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Poked by scottmk to
	incorporate 0438 into the 1.6.1-2.0 upgrade script. This may
	duplicate effort if one is already on 1.6.1.3+ (when it exists) but
	there is no harm in it either.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18356
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-15  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Storage/QueryParser.pm: 
	tweak expanding search field aliases Avoids a glitch that can occur if a search field alias exists that
	happens to have the same name as a search field.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18354
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-14  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/SIP/Item.pm: If an item is captured
	for a hold, but not in transit (i.e. on holds shelf), set the
	destination_location equal to the pickup library (i.e where it's
	supposedly on the shelf).  This is useful for autmated sorting so
	that the item will return to the branch whose shelf where it
	belongs.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18352
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-14  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Trigger/Event.pm,
	Open-ILS/src/support-scripts/action_trigger_runner.pl: Back-porting
	a number of action/trigger fixes from trunk: parallel collection and reaction with multisession cut down xact
	begin/rollbacks to reduce call overhead during collection force
	granularity-only when running w/ --granularity git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18350
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-14  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/upgrade/0438.schema.bytea-index-label.sql: 
	upgrade version number fix git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18348
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-14  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/asset.p
	m, Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/0438.schema.bytea-index-label.sql: "as"
	not "to" ... you pointed that out the first time, miker, what is
	your deal? git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18344
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-14  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/asset.p
	m, Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/0438.schema.bytea-index-label.sql: 
	backward compat indexing for label instead of label_sortkey git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18337
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-14  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0437.schema.bytea-index-label_sortkey.s
	ql: cast label_sortkey to bytea in order to get ascii-betical
	sorting in any locale, even C. stupid glibc ...  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18334
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-14  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/ue_config.js: patch from
	Steve Callendar to avoid resetting the passwd every time a phone
	number changes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18332
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-14  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm: correct
	top-half ordering by label_sortkey git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18330
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-14  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/cat/marcedit.js,
	Open-ILS/xul/staff_client/server/cat/marcedit.xul: change the Swap
	Editor button to a persisted checkbox git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18327
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-13  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/c-apps/oils_sql.c: Change the treatment of ORDER BY.
	Except as noted, these changes apply only to methods other than
	json_query.  1. Allow the use of array syntax for specifying an ORDER BY clause
	as an array of field specifications, such as can be used in
	json_query.  The older syntax, using a hash based on class name, is
	still available.  2. For json_query, using the array syntax: relax the requirement
	that a class be in scope.  A field from an out-of-scope class will
	now be silently ignored.  This change avoids certain problems with
	fleshing queries, which use the same order_by array at multiple
	levels.  3. For the hash syntax: relax the requirement that the class be
	referenced in the SELECT clause.  Now it suffices that it be in
	scope in the generated SQL.  As a result, you can now sort by a
	column in a joined class without artificially including that column
	in the SELECT list.  4. When all or part of an ORDER BY clause is expressed as a string
	literal: require that the string not contain any semicolons, in
	order to block certain kinds of SQL injection.  This measure could
	create problems if a semicolon appears within a quoted string --
	which is possible in theory but highly improbable in practice.  5. Don't include a virtual field in an ORDER BY clause.  If one is
	specified, silently ignore it.  M    Open-ILS/src/c-apps/oils_sql.c git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18325
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-13  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Utils/Penalty.pm: clean up duplicate
	system-controlled penalties during penalty calculation; perform
	penalty trigger event creation after the standalone commit occurs.
	todo, handle non-standalone post-commit penalty trigger event
	creation git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18324
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-13  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/012.schema.vandelay.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0436.schema.multiple-rules.sql: thinko
	supporting multiple rules of the same type in in-line merge rulesets git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18304
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/MARC/Field.js,
	Open-ILS/web/js/dojo/MARC/Record.js: Backporting MARC js fixes from
	trunk git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18284
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-12  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/tools/update.sh: Be sure to copy new JS files from OpenSRF
	on a FULL update/install git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18283
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-12  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Incorporate upgrade
	# 0433 into the consolidated upgrade script.  M    Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18276
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-11  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Actor.pm,
	Open-ILS/web/js/ui/default/actor/user/register.js: avoid race
	condition with post-save patron editor refresh and replicated
	databases git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18275
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-11  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/alternate_copy_summary.js: 
	initialize these lists just once to prevent display glitch git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18270
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-11  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/edi_pusher.pl: Tighter verbose format
	for skipped POs git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18263
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-11  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/action_trigger_runner.pl: wait to
	run-pending if a specific granularity used git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18257
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-08  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/web/js/ui/default/conify/global/action_trigger/event_defin
	ition.js,
	Open-ILS/web/templates/default/conify/global/action_trigger/event_d
	efinition.tt2: mild fixes for a/t interface admin interface.  sort
	by def name instead of hook, which probably makes more sense to a
	human.  hide the opt-in and max-delay columns to free up some badly
	needed horizontal space.  use percentage width for name column,
	which acts a lot like 'auto', but allows the user to manually resize git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18254
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-08  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/util.js: typo git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18252
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-08  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: Backport
	r18249 from trunk: clear hold shelf work even on brokenish holds git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18250
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-08  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/util.js: fix logic error
	where we were just testing for the presence of a user setting
	instead of its value git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18248
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-08  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/info_group.js: moving
	users in and out of groups produced dialogs that expected vertical
	patron summaries.  this fixes that git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18246
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-08  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/apache/eg.conf: Avoid scary SSL / HTTPS errors
	in Apache configuration When port 443 is the last listener port, Apache generates lots of
	"unknown protocol speaking not SSL to HTTPS port!?" errors in the
	logs - which are scary, but harmless. Putting port 80 last avoids
	those errors entirely, per
	http://wiki.apache.org/httpd/InternalDummyConnection git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18238
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-08  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Driver/Pg/QueryPa
	rser.pm: do not apply superpage limit inside bib search joins Oddly, empirical evidence suggests that this might actually be
	faster, and if this pans out, search results will definitely be more
	complete.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18234
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-07  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/web/opac/extras/circ/alt_holds_print.html,
	Open-ILS/web/opac/extras/circ/alt_holds_print.js: Backport r18230
	and 18231, hold shelf clearer/printer git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18232
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-07  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Utils/PermitHold.pm: choose the hold
	permit test variant correctly Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18229
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-07  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/extras/circ/alt_holds_print.html: Backport
	r18226 from trunk git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18227
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-07  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0433.edi_orders_template.sql: EDI
	template update for ORDERS This template produces JSON for the edi translator to convert into
	actual EDI lines.  It now handles vendor-specific requirements for
	account and sub-account identification, and also transmits notes of
	the vendor-public variety as FTX segments in the lineitem.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18225
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-07  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/extras/circ/alt_holds_print.html: Backport
	r18222 from trunk: reasonable default sorting for expired holds list git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18223
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-07  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/util.js: merge r18220 from
	trunk for %destination_shelf% macro in hold and hold/transit slip
	templates git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18221
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-06  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/tools/update_db.sh: Warn but continue on skipped upgrade
	revs.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18218
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-06  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/web/opac/extras/circ/alt_holds_print.html,
	Open-ILS/web/opac/extras/circ/alt_pull_list.html,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/admin/index.xhtml,
	Open-ILS/xul/staff_client/server/patron/holds.js,
	Open-ILS/xul/staff_client/server/patron/holds_overlay.xul: Backport
	r18215 from trunk: alternate printing for expired holds shelf lists This is slim so that it supports bigger datasets than the usual
	interface for this. Needs improvment: make the template more
	customizable git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18216
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-06  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/sql/Pg/upgrade/0429.noop-because-miker-skipped-it.sql: 
	Backport spackling from trunk: db upgrade script dislikes holes --
	spackle this one git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18212
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-06  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Incorporate upgrades
	0427 and 0428 into the consolidated upgrade script.  M    Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18209
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-06  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger/Event.pm: avoid
	retreiving/searching a linked object, when there is no object to
	retrieve (i.e. ident value is null) and silence various warnings by
	skipping this scenario.  mild variable refactor for easy reading for
	feeble eyes.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18206
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-06  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/util.js: hold/transit slips
	may want to use stat cats as well git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18204
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-06  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/110.hold_matrix.sql,
	Open-ILS/src/sql/Pg/upgrade/0428.schema.hold_retarget.sql: 
	Backporting a syntax correction; SQL functions cannot reference
	their parameters by name.  M    Pg/upgrade/0428.schema.hold_retarget.sql M
	Pg/110.hold_matrix.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18201
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-06  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/web/templates/default/conify/global/config/hold_matrix_mat
	chpoint.tt2: suppress usr_grp field in hold matrix matchpoint;  see
	also 18188 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18200
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-06  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/110.hold_matrix.sql,
	Open-ILS/src/sql/Pg/upgrade/0431.schema.hold_retarget.sql: Backport
	r18195 from trunk: Make retargetting check less lax by including
	appropriate patron-side test git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18197
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-06  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger.pm: first level
	of groups hash can be array or hash, leading to breakage;  for now,
	keep it simple and return continue-status to keep the caller alive git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18194
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-06  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/web/templates/default/conify/global/config/hold_matrix_mat
	chpoint.tt2: Backport r18188 from trunk: usr_grp is entirely unused
	currently; hide it git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18190
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-06  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm, Open-ILS/src/perlmods/OpenILS/Utils/PermitHold.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/110.hold_matrix.sql,
	Open-ILS/src/sql/Pg/upgrade/0428.schema.hold_retarget.sql: Backport
	r18187 from trunk: Add a retargetting specific version of the
	hold-permit function which skips user tests git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18189
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-05  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/110.hold_matrix.sql,
	Open-ILS/src/sql/Pg/upgrade/0427.schema.hold_matrix_root_ou.sql: 
	hold matrix selection: treat root OU as just another OU Treat the root OU as just another OU for the purpose of calculating
	OU proximity adjustments when selecting a matchpoint.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18186
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-05  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/util/list.js: be quiet
	with errors retrieving remote column settings git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18181
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-05  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/edi_pusher.pl: The whole point of
	test mode, NOT actually committing actions.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18178
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-05  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/extras/circ/alt_pull_list.html: Backport r18175 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18176
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-05  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/default/acq/po/view.tt2: Add title to PO
	view page.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18174
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-05  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/edi_fetcher.pl,
	Open-ILS/src/support-scripts/edi_pusher.pl: EDI job POD git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18173
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-05  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/bill2.xul: merge r18169
	from trunk for CSS hooks git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18170
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-05  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/metabib
	.pm: make it easier to grep for bib search durations from the Pg log Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18168
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-05  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Order.pm: avoid
	running activated hook when in dry run mode git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18166
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-04  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/templates/password-reset/strings.fr-CA: French
	translation of password reset form and prompts at
	/opac/password/fr-CA/ git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18161
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-04  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/xul/staff_client/server/circ/util.js,
	Open-ILS/xul/staff_client/server/locale/en-US/circ.properties,
	Open-ILS/xul/staff_client/server/patron/hold_details.js,
	Open-ILS/xul/staff_client/server/patron/holds.js: Backport r18158
	from trunk: patron alias column in some holds interfaces git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18160
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-04  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/vandelay/vandelay.js: fixed typo in
	vandelay merge profile permission check git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18154
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-04  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: Backport
	r18148 from trunk: fix pull list retrieval bug for alt pull list
	print git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18149
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Search/Biblio.pm: 
	Backport r18141 from trunk: Allow caller to ignore selected facet
	classes; ignore identifier class by default git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18143
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-04  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Trigger/Event.pm: Backport
	r18140 from trunk: moved the cache clear to later in the firing to
	pick up data; fixed some typos/thinkos git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18142
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-03  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Incorporate upgrade
	scripts 0423 and 0424 M    Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18139
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-02  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/web/opac/extras/circ/alt_pull_list.html: Backporting r18136
	from trunk: configurable chunking of the holds stream to avoid the
	xulrunner "I forgot the chunked stream" problem git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18137
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-02  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Driver/Pg/QueryPa
	rser.pm: Backportin r181323 and r18133 from trunk: Massive search
	core-query speed improvement.   * Only compile the tsquery once  * Use direct ids instead of going back to the db udring a queyr  * Change a remaining CASE to COALESCE/NULLIF git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18135
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-02  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Trigger/Event.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Trigger/EventGroup.pm: 
	Backporting r18123 from trunk: Implement a process-local cache for
	event target fleshing -- particularly helpful with large event
	groups git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18134
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-01  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/WWW/Proxy.pm,
	Open-ILS/xul/staff_client/server/patron/holds.js: Backport r18130
	from trunk git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18131
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-01  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/090.schema.action.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0424.schema.circ_due_date_trigger.sql: 
	Set due times for durations measured in days to 23:59:59 after
	inserts OR updates The existing trigger acted only on the initial insert of a
	circulation transaction for duration intervals perfectly divisible
	by 24 hours.  If updates to those due dates were subsequently
	issued, then the due time would revert to 00:00:00 - which could
	cause surprising overdue fines to be generated on the due date,
	rather than after the due date.  This commit makes the trigger take effect on both INSERT and UPDATE
	to the action.circulation table.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18127
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-01  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/apache/eg_vhost.conf,
	Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/web/opac/extras/circ/alt_pull_list.html,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/patron/holds.js,
	Open-ILS/xul/staff_client/server/patron/holds_overlay.xul: Backport
	r18124 from trunk: another pull list printing pathway git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18125
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-01  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/remoteauth.cgi: use an opac login here, which
	doesn't require the STAFF_LOGIN permission by default git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18122
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-01  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/SIP/Patron.pm: Silence warning Warnings was: Use of uninitialized value in subroutine entry at
	/openils/lib/perl5/OpenILS/SIP/Patron.pm line 230.  Signed-off-by: Joe Atzberger <atz@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18118
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-01  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/remoteauth.cgi: tweak remoteauth.cgi to offer
	usrname and barcode params in addition to user.  user param now
	looks for the opac.barcode_regex org unit setting to determine
	whether the value is a usrname or barcode.  change double-quotes to
	single-quotes if we're not doing string interpolation.  change
	apache instructions for configuration git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18117
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-01  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/marc_export: Teach marc_export script
	how to export MFHD serial records Passing the --mfhd flag will export any non-deleted MFHD records in
	serial.record_entry associated with each bib ID. So, for a
	hypothetical set of bib IDs 1, 2, 3, where 2 has no associated MFHD
	records and 3 has 2 MFHD records associated with it, the output will
	be structured as follows: Bib MARC for bib ID 1 MFHD MARC for bib ID 1 Bib MARC for bib ID 2
	Bib MARC for bib ID 3 MFHD MARC for bib ID 3 MFHD MARC for bib ID 2 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18115
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-10-01  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Storage/CDBI/serial.pm: 
	Add serial.record_entry to CDBI definitions Better late than never; never added the serial.record_entry CDBI
	definitions in the 1.6 series, but as that table can still be active
	in 2.0 we might as well get it in place.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18114
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-30  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: fire the
	hold_request.cancel.staff when hold is cancelled by staff git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18110
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-30  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/authori
	ty.pm: Merge r18076 from trunk: Make authority validation rules
	match authority ingest rules for better matches This resolves a problem in
	O:A:Storage:Publisher:authority:validate_tag() where the full NACO
	normalization rules that are applied to the subfields of the
	authority records when they are ingested into authority.full_rec are
	not similarly applied to the incoming subfields of the bib field
	that is being validated; only diacritic characters in the bib field
	subfields were being normalized.  Now we apply naco_normalize() to the search terms so that they will
	match the ingested form of the authority record.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18108
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-29  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/XUL.js, Open-ILS/web/js/ui/base.js,
	Open-ILS/web/opac/common/js/opac_utils.js: merge r18106 from trunk
	for needless auth prompting git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18107
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-29  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml: fix FM type of reporter.report.data Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18104
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-29  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/reporter/clark-kent.pl: reporter: don't try to write
	Excel formulas Any cell value that starts with = is now always written as a text
	cell in spreadsheet output.  Avoids a possible exploit as well as
	errors like this: Couldn't parse formula: = at /openils/bin/clark-kent.pl line 429 Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18102
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-29  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Trigger/Event.pm,
	Open-ILS/src/support-scripts/action_trigger_runner.pl: Backport
	r18099 from trunk: support per-grunlarity parallelizing via flag and
	lock file git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18100
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-29  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Vandelay.pm: Backport
	r18097 from trunk: Process item imports during record import, not as
	a secondary call (never should have worked, but for transaction
	timing) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18098
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Vandelay.pm: Backport
	r18095 from trunk: Use transactions everywhere in Vandelay git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18096
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/auth/session.js: Delete
	all cookies on logoff.  There's dojo code that looks for stale
	session cookies and has the xul client prompt for a new session.
	When you logoff, the session is destroyed, but the stale cookies
	were being left behind (and not overwritten on login? I don't
	understand that part).  But this fixes it git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18094
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger.pm: Backport
	r18091 from trunk: move the early-out response so we avoid breaking
	the caller git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18092
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger.pm: Backport
	r18089 from trunk. A/T feature.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18090
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger/Reactor.pm: for
	troubleshooting, log the size of the template output to be stored git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18088
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/oils_sip.xml.example,
	Open-ILS/src/perlmods/OpenILS/SIP.pm,
	Open-ILS/src/perlmods/OpenILS/SIP/Patron.pm,
	Open-ILS/src/perlmods/OpenILS/SIP/Transaction/Checkin.pm: backport
	18084: sip override checkins, bug fixes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18087
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: repaired logic bug
	in lineitem worksheet template git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18086
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_overlay.xu
	l: this breaks (hides) the buttonbar in windows.  Sorry James, miker git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18082
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/opensrf.xml.example: Change memcached default
	location to 127.0.0.1 from localhost Debian Squeeze currently doesn't fare well with memcached servers
	pointing to localhost and needs an explicit 127.0.0.1, whereas
	Ubuntu Lucid is happy with either. Changing the default here means
	one less possible gotcha in the out of the box install & configure
	experience for Debian Squeeze folk.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18080
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0423.schema.support-null-function-in-xp
	ath_table.sql: Backport r18077 from trunk: add support for the
	null() xpath function, which works in pgxml (AKA xml2) but not in
	the builtin XPATH function for 8.3+ git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18078
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Incorporate several
	recent upgrade scripts, through # 0422.  M    Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18074
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0422.schema.acq.lineitem-history-bigint
	.sql: Turn an int into a bigint in acq.acq_lineitem_history,
	following up on a similar change to acq.lineitem.  M    Open-ILS/src/sql/Pg/002.schema.config.sql A

	Open-ILS/src/sql/Pg/upgrade/0422.schema.acq.lineitem-history-bigint.sqlgit-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18071
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Utils/RemoteAccount.pm: typo in POD git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18067
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/edi_pusher.pl: Minor cleanup git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18066
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Utils/RemoteAccount.pm: Fix POD for
	RemoteAccount git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18065
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/edi_translator/install.RHEL.sh: For edi_translator on
	RHEL Note: RubyGems 1.3.4 is not available anymore git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18064
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/BibTemplate.js,
	Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_summary.xml: Use
	quoted attribute values to make Firefox / XULRunner happier about
	dojo queries The unquoted values in BibTemplate and the OPAC detail template were
	generating mucho noise in the JavaScript console; this hushes it up
	nicely.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18063
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/edi_translator/data/BakerAndTaylor/edifact_sample.orde
	rs.edi,
	Open-ILS/src/edi_translator/data/BakerAndTaylor/edifact_sample.orde
	rs.edi.long,
	Open-ILS/src/edi_translator/data/BakerAndTaylor/edifact_sample.ordr
	sp.edi,
	Open-ILS/src/edi_translator/data/BakerAndTaylor/edifact_sample.ordr
	sp.edi.long,
	Open-ILS/src/edi_translator/data/BakerAndTaylor/edifact_sample2.ord
	rsp.edi,
	Open-ILS/src/edi_translator/data/bergware/bergware.net.flat.order,
	Open-ILS/src/edi_translator/data/bergware/bergware.net.order,
	Open-ILS/src/edi_translator/data/brodart/1130B766274.inv,
	Open-ILS/src/edi_translator/data/brodart/HOGJ-037.ack,
	Open-ILS/src/edi_translator/data/brodart/brodart_bibzII_MARC_on-ord
	er_records_w_funds.001,
	Open-ILS/src/edi_translator/data/brodart/round_01/evergreen-0323B66
	8342.inv,
	Open-ILS/src/edi_translator/data/brodart/round_01/evergreen-6.ack,
	Open-ILS/src/edi_translator/data/brodart/round_01/evergreen_edi_bro
	dart.tst,
	Open-ILS/src/edi_translator/data/edidev.net/edidev.net.invoice,
	Open-ILS/src/edi_translator/data/ingram/ingram_437.ordrsp.edi,
	Open-ILS/src/edi_translator/data/ingram/ingram_437.ordrsp.edi.break
	out, Open-ILS/src/edi_translator/data/ingram/ingram_isbns.txt,
	Open-ILS/src/edi_translator/data/misc/ORDRSP.json,
	Open-ILS/src/edi_translator/data/misc/perl_json2edi.json,
	Open-ILS/src/edi_translator/data/sources.txt,
	Open-ILS/src/edi_translator/data/stylus/stylus.flat.order,
	Open-ILS/src/edi_translator/data/stylus/stylus.order,
	Open-ILS/src/edi_translator/data/test_output/NAD_regular.orders,
	Open-ILS/src/edi_translator/data/test_output/NAD_suffix.orders,
	Open-ILS/src/edi_translator/data/test_output/baker_taylor_NAD_suffi
	x.orders,
	Open-ILS/src/edi_translator/data/test_output/baker_taylor_NAD_suffi
	x.ordrsp,
	Open-ILS/src/edi_translator/data/test_output/perl_json2edi.tmp,
	Open-ILS/src/edi_translator/data/test_output/ruby_json2edi.tmp: 
	edi_translator sample EDI/JEDI docs EDI test and sample data Ingram ORDRSP that fails translation git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18061
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/support-scripts/clear_expired_circ_history.srfsh: 
	Script is executable git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18060
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-28  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Utils/ISBN.pm: Utility for
	ISBN10->ISBN13 upconversion git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18059
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/012.schema.vandelay.sql,
	Open-ILS/src/sql/Pg/070.schema.container.sql,
	Open-ILS/src/sql/Pg/090.schema.action.sql,
	Open-ILS/src/sql/Pg/095.schema.booking.sql,
	Open-ILS/src/sql/Pg/200.schema.acq.sql,
	Open-ILS/src/sql/Pg/upgrade/0421.schema.embiggen-ints.sql: 1. Turn some ints into bigints.  2. Rename the uniqueness constraint for booking.resource_type.  M    Open-ILS/src/sql/Pg/090.schema.action.sql M
	Open-ILS/src/sql/Pg/200.schema.acq.sql M
	Open-ILS/src/sql/Pg/012.schema.vandelay.sql M
	Open-ILS/src/sql/Pg/095.schema.booking.sql M
	Open-ILS/src/sql/Pg/002.schema.config.sql M
	Open-ILS/src/sql/Pg/070.schema.container.sql A
	Open-ILS/src/sql/Pg/upgrade/0421.schema.embiggen-ints.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18053
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/web/js/ui/default/conify/global/action_trigger/event_defin
	ition.js: Backport r18051: fix a glitch with the granularity column
	of the event def UI git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18052
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0420.schema.premunge_dates.sql: 
	adjustments to pubdate sorting patch * handle upgrade for date1/date2 containing the empty string * syntax error fix Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18050
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm: fix another hold targeting glitch Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18048
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm: fix glitch in hold target OU weighting We want to weight by the copy's circulation library, not the pickup
	library.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18046
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql: missed in the previous
	commit, sorry folks git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18044
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger.pm: Backport
	r18041 from trunk: Correct the subquery for A/T opt_in_setting git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18042
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Driver/Pg/QueryPa
	rser.pm, Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0420.schema.premunge_dates.sql: 
	Backporting 18039 from trunk: make pubdate sorting on search faster
	by pre-munging date1 and date2 into an acceptable sortkey git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18040
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/default/circ/selfcheck/audio_config.tt2: 
	fix default path to selfcheck sounds Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18038
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/AppUtils.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: backporting
	some xact management fine tuning git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18036
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Vandelay.pm: Backport
	r18034 from trunk: use transaction when gathering records from a
	newly created queue; adjust rollback usage in import loop git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18035
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: 
	Backporting r17984 from trunk: pedantic protection of cstore
	backends -- always use die_event when in xact mode, and rollback
	otherwise git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18033
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/OpenILS/global_util.js,
	Open-ILS/xul/staff_client/chrome/content/main/main.xul,
	Open-ILS/xul/staff_client/external/dojo_template.xul,
	Open-ILS/xul/staff_client/external/template.xul,
	Open-ILS/xul/staff_client/server/admin/do_not_auto_attempt_print_se
	tting.xul,
	Open-ILS/xul/staff_client/server/admin/font_settings.xul,
	Open-ILS/xul/staff_client/server/admin/offline_manage_xacts.xul,
	Open-ILS/xul/staff_client/server/admin/transit_list.xul,
	Open-ILS/xul/staff_client/server/admin/work_log.xul,
	Open-ILS/xul/staff_client/server/cat/bib_brief.xul,
	Open-ILS/xul/staff_client/server/cat/copy_browser.xul,
	Open-ILS/xul/staff_client/server/cat/copy_buckets_overlay.xul,
	Open-ILS/xul/staff_client/server/cat/copy_editor.xul,
	Open-ILS/xul/staff_client/server/cat/copy_notes.xul,
	Open-ILS/xul/staff_client/server/cat/marc_new.xul,
	Open-ILS/xul/staff_client/server/cat/marc_view.xul,
	Open-ILS/xul/staff_client/server/cat/spine_labels.xul,
	Open-ILS/xul/staff_client/server/cat/volume_buckets.xul,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.xul,
	Open-ILS/xul/staff_client/server/cat/z3950.xul,
	Open-ILS/xul/staff_client/server/circ/alternate_copy_summary.xul,
	Open-ILS/xul/staff_client/server/circ/circ_brief.xul,
	Open-ILS/xul/staff_client/server/circ/circ_summary.xul,
	Open-ILS/xul/staff_client/server/circ/copy_details.xul,
	Open-ILS/xul/staff_client/server/circ/missing_pieces.xul,
	Open-ILS/xul/staff_client/server/circ/pre_cat_fields.xul,
	Open-ILS/xul/staff_client/server/circ/print_list_template_editor.xu
	l, Open-ILS/xul/staff_client/server/main/simple_auth.xul,
	Open-ILS/xul/staff_client/server/main/verify_credentials.xul,
	Open-ILS/xul/staff_client/server/patron/barcode_entry.xul,
	Open-ILS/xul/staff_client/server/patron/bill2.xul,
	Open-ILS/xul/staff_client/server/patron/bill_cc_info.xul,
	Open-ILS/xul/staff_client/server/patron/bill_check_info.xul,
	Open-ILS/xul/staff_client/server/patron/bill_details.xul,
	Open-ILS/xul/staff_client/server/patron/bill_wizard.xul,
	Open-ILS/xul/staff_client/server/patron/display_horiz_overlay.xul,
	Open-ILS/xul/staff_client/server/patron/display_overlay.xul,
	Open-ILS/xul/staff_client/server/patron/edit_standing_penalty.xul,
	Open-ILS/xul/staff_client/server/patron/hold_cancel.xul,
	Open-ILS/xul/staff_client/server/patron/hold_details.xul,
	Open-ILS/xul/staff_client/server/patron/info_group.xul,
	Open-ILS/xul/staff_client/server/patron/info_notes.xul,
	Open-ILS/xul/staff_client/server/patron/info_stat_cats.xul,
	Open-ILS/xul/staff_client/server/patron/info_surveys.xul,
	Open-ILS/xul/staff_client/server/patron/items.xul,
	Open-ILS/xul/staff_client/server/patron/items_overlay.xul,
	Open-ILS/xul/staff_client/server/patron/new_standing_penalty.xul,
	Open-ILS/xul/staff_client/server/patron/search_form.xul,
	Open-ILS/xul/staff_client/server/patron/search_form_horiz.xul,
	Open-ILS/xul/staff_client/server/patron/search_result.xul,
	Open-ILS/xul/staff_client/server/patron/standing_penalties.xul,
	Open-ILS/xul/staff_client/server/patron/summary.xul,
	Open-ILS/xul/staff_client/server/patron/user_buckets.xul,
	Open-ILS/xul/staff_client/server/serial/manage_items.xul,
	Open-ILS/xul/staff_client/server/serial/manage_subs.xul,
	Open-ILS/xul/staff_client/server/serial/notes.xul,
	Open-ILS/xul/staff_client/server/serial/sdist_editor.xul,
	Open-ILS/xul/staff_client/server/serial/serctrl_main.xul,
	Open-ILS/xul/staff_client/server/serial/siss_editor.xul,
	Open-ILS/xul/staff_client/server/serial/sitem_editor.xul,
	Open-ILS/xul/staff_client/server/serial/ssub_editor.xul: merge part
	of r18002, and all of r18003 and r18004 from trunk for
	persistent/sticky slider positions and window sizes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18032
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/util.js: accidental change
	in previous commit.  long term plan here is a 'slip' printer role git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18031
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/actor/nls/register.js,
	Open-ILS/web/js/ui/default/actor/user/register.js,
	Open-ILS/xul/staff_client/server/circ/util.js: since we're enforcing
	the requiredness of address type, let's give it a default value
	(since empty strings don't work with these widgets) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18030
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/reporter-schema.sql,
	Open-ILS/src/sql/Pg/upgrade/0419.schema.hold_record_view.sql: 
	Backport r18027 from trunk: Adjust hold-to-record view to cover I, F
	and R hold types git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18028
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/FacetSidebar.js: Backport
	r18025 from trunk: Provide for limiting the number of classOrder
	elements to a specific number. Skips those without facet values.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18026
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Resolve differences
	between stored procedures in a freshly installed 2.0 database and
	those in an upgraded one.  M    Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18024
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-27  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/circ/selfcheck/selfcheck.js: avoid
	multiple clicks of selfcheck logout link Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18022
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-26  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/SIP/Transaction/Checkin.pm: backport
	18017: honor SIP return date as the circ backdate git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18020
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-26  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: 
	backport 18016: no need to warn when emails may just be disabled git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18019
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-26  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/CopyLocations.pm,
	Open-ILS/web/js/ui/default/conify/global/asset/copy_location_order.
	js: backport 18015 : push copy location order update into ML method.
	return updated orders from method to prevent replication issues.
	update UI JS to match git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18018
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-26  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: 
	Remove a debugging statement that slipped in git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18014
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-26  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Storage/CDBI/asset.pm: 
	added missing columns to CDBI table definitions Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18012
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-26  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/FacetSidebar.js: Backport
	r18009 from trunk: Only show facetOrder limited facets that have
	values git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18010
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-26  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/FacetSidebar.js: Backport
	r18007 from trunk: allow more complex facet ordering git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18008
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-26  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/default/actor/user/register_table.tt2: make
	address_type required in the patron editor, otherwise a blank value
	sends a null to the db where it silently fails git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@18000
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-26  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ.pm,
	Open-ILS/web/js/ui/default/circ/selfcheck/selfcheck.js: more
	selfcheck receipt transaction hackery Instead of having authoritative versions of
	open-ils.circ.fire_*_trigger_events, wrap just the target retrieval
	itself in a transaction.  Avoids as yet unexplained rollback failure
	that occurs if processing a selfcheck receipt with more than a few
	items on it.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17998
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-26  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Utils/CStoreEditor.pm: don't leak
	cstores if CStoreEditor rollback fails Patch by Mike Rylander.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17996
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-25  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ.pm: Backport r17992
	from trunk: misplaced paranoia git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17993
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-25  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/PermaCrud.js: Backport r17989 from
	trunk git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17990
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-25  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger.pm: events don't
	have granularity's.  removing git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17988
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-25  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ.pm: Backport r17985 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17986
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-25  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Actor.pm: Backport
	r17982 from trunk git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17983
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-24  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Booking.pm: more
	transaction cleanups git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17981
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-24  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/AppUtils.pm: clean up
	the fire_object_events cstore xact git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17979
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-24  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm: backport 17976 from trunk Remove confusing older targeter version; move status trimming to
	earlier in the process --miker Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17977
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-24  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/default/vandelay/inc/item_attrs.tt2: 
	Backport r17974 from trunk git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17975
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-24  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: Backport
	r17972 from trunk: removed extra {}s from where clause git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17973
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-24  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/util.js: spawn item attribute
	editor instead of item notes UI during process missing pieces
	workflow git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17966
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-24  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: 
	Backporting hold queue stats fixes from 17956, 17957 and 17963 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17964
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-24  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/skin/patron_display.css: merge
	r17958 from trunk for patron display juvenile CSS git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17959
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-24  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm: improve hold targetting * all potential capturable copies are now checked (up to the first   one that is permitted for the request), instead of a small random   subset of them * don't do redundant permission checks Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17955
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-24  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/OpenILS/data.js: this
	call returns an array; fixes surprise stat cats in patron display git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17953
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-24  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/AppUtils.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: Backport
	r17950 from trunk git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17951
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-24  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/util/network.js: We're
	starting to get events where ilsevent == empty string now, not just
	null or a number.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17949
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-24  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/PermaCrud.js: Backport r17946 from
	trunk: use _session_request in RO calls git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17947
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-24  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/090.schema.action.sql,
	Open-ILS/src/sql/Pg/upgrade/0418.function.action.fix-purge-circ.sql: 
	Apply some fixes that were earlier applied to the base installation
	script 090.schema.action.sql, but not in an upgrade script.  Also: correct a typo (INTEVAL -> INTERVAL).  Hence this upgrade
	needs to go to v2.0 as well as to trunk.  M    Open-ILS/src/sql/Pg/090.schema.action.sql M
	Open-ILS/src/sql/Pg/002.schema.config.sql A
	Open-ILS/src/sql/Pg/upgrade/0418.function.action.fix-purge-circ.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17943
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-24  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/PermaCrud.js: Backport r17941 from
	trunk: miker's permacrud authoritative search git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17942
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-23  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm: Backport r17939 from trunk: Stopping the leak git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17940
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-23  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ.pm,
	Open-ILS/web/js/ui/default/circ/selfcheck/selfcheck.js: I can has
	authoritative for selfcheck receipts git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17936
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-23  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/ProgressDialog.js: Backport
	r17933 from trunk: unneeded comma removed to placate IE git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17934
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-23  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger.pm: repaired
	search call for user_setting. cstoreeditor uses the fieldmapper
	name, sos/usr/user/ git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17932
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-23  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Resolving various
	discrepancies between a freshly built 2.0 database and an upgraded
	one.  M    Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17930
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-23  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/hold_details.js,
	Open-ILS/xul/staff_client/server/patron/holds.js,
	Open-ILS/xul/staff_client/server/patron/holds_overlay.xul: disable
	holds Detail View button until the asynchronously loading details UI
	is ready git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17928
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-23  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/AppUtils.pm: Backport
	r17913 from trunk: event firing util code needs to run in a xact git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17926
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-23  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Utils/CStoreEditor.pm: Backport
	r17912 from trunk: Have the CStoreEditor grow a DESTROY git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17925
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-23  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Trigger/Event.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Trigger/EventGroup.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Trigger/Reactor.pm: 
	Merging r17905 and r17914 from trunk: A/T transaction semantics
	fixes r17905: Use a transaction to avoid talking to a replicated db when
	building A/T data structures r17914: In EventGroup.pm, fetch updated
	event back from the R/W db before comitting git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17924
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-23  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/ue.js: Forward-port of a
	patch from Steve Callendar, via James Fournie, via launchpad: When the patron.password.use_phone is set, new patrons are created
	 with their password set to the last 4 digits of their phone number,
	 HOWEVER, when a patron's password is reset, it does not work
	properly. Although the little underlined summary shows the proper 4
	digits, the password box displays 9- ish digits, and is not the last
	4 digits of the password.  The attached patch was created by Steve Callender and is confirmed
	working on 1.6.0 ORIGINAL CAVEAT: This patch will not work on 2.0 as that has a new
	user editor, but it would presumably be worthwhile to verify this
	functionality wor ks in that editor as well.  ED NOTE: Because it is possible to use the old editor -- it still
	exists -- this patch should be applied.  It does what it advertises
	to do, which is fix the old editor to follow the "use phone number"
	OU setting.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17923
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-23  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0415.schema.rename-field-class-fkey.sql: 
	Dropping and recreating a foreign key constraint for
	config.metabib_field, in order to change its name.  WHen this
	foreign key was first introduced, the upgrade script gave it one
	name and the base install script gave it a different name.  Here we
	bring the names into sync.  M    Open-ILS/src/sql/Pg/002.schema.config.sql A
	Open-ILS/src/sql/Pg/upgrade/0415.schema.rename-field-class-fkey.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17916
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-23  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: Remove most
	annoying UI "feature" of the new authority browse list interface When I added the new authority browse list interface, I used
	dojo.xhrGet() to retrieve records from the authority browse backend
	- but because I didn't specify sync:true, when you first
	right-clicked on a subfield, the function would return immediately
	and default to showing the context menu. You would then need to
	click two more times to show the authority list.  Now you get it on your first right-click, as it should be.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17911
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-23  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/cat/authority/list.js: Browse through
	20 authority records at a time in management interface The default browse list is set to 9 elements, but we have enough
	vertical space to make use of more. Perhaps we should check the font
	size and viewport height and then adjust accordingly, but that would
	be Hard.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17909
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-23  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/cat/authority/list.js: Backport r17906:
	Remove most UI annoyances from authority management interface   * term input field now gets the focus automatically   * pressing enter in most places submits a new search   * removed the onBlur event as that required users to click a
	    second time to open the action menu git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17907
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-23  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Trigger/Event.pm: Backport
	r17903 from trunk: only flesh up to, but not including, the leaf for
	the group_field git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17904
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-23  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/base.tt2: Backport r17901 from trunk: IDL
	chunking fixin' git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17902
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-23  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: Backport
	r17899 from trunk: fix a pull list sorting issue git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17900
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-22  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/util/print.js,
	Open-ILS/xul/staff_client/server/cat/spine_labels.js: merge
	r17896-17897 from trunk for printing fixes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17898
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-22  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/circ/alternate_copy_summary.js: 
	merge r17894 from trunk to fix bug in Item Status -> Alternate View
	for items with no circ modifier git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17895
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-22  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/copy_browser.js: merge r17892
	from trunk for holdings maintenance fix allowing volumes at top of
	org tree git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17893
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-22  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0414.schema.call-number-upd-ins-trigger
	.sql: Adding a trigger.  Upgrade # 0364 created the trigger function
	but not the trigger itself.  However the base install script
	040.schema.asset.sql creates both the function and the trigger.  M    Open-ILS/src/sql/Pg/002.schema.config.sql A

	Open-ILS/src/sql/Pg/upgrade/0414.schema.call-number-upd-ins-trigger.sqlgit-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17890
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-22  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/090.schema.action.sql: For action.circulation
	and action.aged_circulation: add indexes on the target_copy column.  This change was made in upgrade script # 0017, but was apparently
	never applied to the base install script.  M    Open-ILS/src/sql/Pg/090.schema.action.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17888
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-22  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/200.schema.acq.sql: In acq.fund_transfer: drop
	the NOT NULL constraint from dest_fund and dest_amount, in order to
	accommodate deallocations -- where we move money out of a fund
	without moving it into another fund.  This change was applied via upgrade script # 0135, but apparently
	was never applied to the base installation script.  M    Open-ILS/src/sql/Pg/200.schema.acq.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17885
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-22  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Search/Biblio.pm: 
	Forward port r17847: Make query parser a bit more careful when
	converting convenience classes to search classes Queries like "Heart disease: a global problem" were getting
	converted to series searches due to the trailing "se:" in the search
	terms. This change ensures that the convenience class is either at
	the start of the input or preceded by whitespace.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17884
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-22  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/holds.js: handle null as a
	return result for an empty list git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17882
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-22  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/holds.js: merge r17879
	from trunk to increase timeout for full pull list call git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17880
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-21  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Replace some changes
	that had inadvertently been deleted M    Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17878
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-21  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Don't make new
	auditor columns NOT NULL, or update them M    Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17876
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-21  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/sql/Pg/upgrade/0413.schema.upgrade-auditor-tables.sql: 
	Don't update history tables to fill in new columns M
	Open-ILS/src/sql/Pg/upgrade/0413.schema.upgrade-auditor-tables.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17874
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-21  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/sql/Pg/upgrade/0413.schema.upgrade-auditor-tables.sql: 
	Resolve some discrepancies in the auditor schema between a freshly
	installed database and an upgraded one.  A
	Open-ILS/src/sql/Pg/upgrade/0413.schema.upgrade-auditor-tables.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17871
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-21  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/chrome/content/OpenILS/data.js,
	Open-ILS/xul/staff_client/chrome/content/circ/offline.js,
	Open-ILS/xul/staff_client/chrome/content/circ/offline_checkin.js,
	Open-ILS/xul/staff_client/chrome/content/circ/offline_checkout.js,
	Open-ILS/xul/staff_client/chrome/content/circ/offline_in_house_use.
	js, Open-ILS/xul/staff_client/chrome/content/circ/offline_renew.js,
	Open-ILS/xul/staff_client/server/admin/printer_settings.html: merge
	r17869 from trunk for offline printer role git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17870
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-21  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Trigger/Validator.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0412.data.trigger.validator.HoldIsCance
	lled.sql: merge r17867 from trunk for HoldIsCancelled action_trigger
	validator git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17868
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-21  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Correct various
	discrepancies, especially in the auditor schema, between a freshly
	installed 2.0 database and an upgraded one.  M    Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17865
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-21  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/030.schema.metabib.sql,
	Open-ILS/src/sql/Pg/upgrade/0410.schema.allow_parallel_reingest.sql
	,
	Open-ILS/src/sql/Pg/upgrade/0411.schema.assume_inserts_only_flag.sq
	l: backport r17862 and r17863 from trunk Two new internal_flags to improve parallel bib ingest.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17864
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-21  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Cat/Authority.pm: 
	Backport r17860 from trunk: Clean up description of ARN in
	O:A:Cat::Authority now that arn_value is gone A comment in the create_authority_record_from_bib_field() method
	stated that the ARN value needed to be unique across the database;
	that is no longer true as of r17722. Fix comment accordingly.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17861
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-21  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js: Merge r17587 and
	r17588 from trunk to add $0 control subfields for newly controlled
	fields In the MARC editor, when editing a bibliographic record and
	right-clicking on a controllable subfield, the "Create new authority
	from this field" options now both add a $0 control subfield to the
	target bib field once the new auth record has successfully been
	created.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17859
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-21  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* README: Backport r17855 from trunk: Use verbose parameters for
	createdb Thomas Berezansky noticed that the README was using "createdb -t
	template0", which isn't a valid option. To avoid case problems and
	to be more apparent what these options mean, let's use the verbose
	parameters.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17856
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-20  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0409.data.receive-serial-perm.sql: 
	Backport r17853 from trunk git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17854
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-20  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/upgrade/0408.schema.update_maintain_901.sql: add
	missing upgrade script for maintain_901() stored function Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17851
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-20  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0407.data.serial-perm.sql: Backport
	r17848 from trunk, sort of In rel_2_0, one of these permissions was already there, and the IDs
	are different, but this should be functionally equivalent.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17849
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-20  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/BibTemplate.js: Backport BibTemplate
	callback support from trunk git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17846
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-20  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/base.tt2: back-port: 17844 => added pgpt
	class to pre-load set git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17845
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-20  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Resolving various
	discrepancies between an upgraded 2.0 database and a freshly
	installed one.  M    Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17842
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-20  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml: Backport r17840: misspelling fixing git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17841
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-20  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/summary.js,
	Open-ILS/xul/staff_client/server/patron/summary_overlay_horiz.xul: 
	merge r17838 from trunk, change to stat cat display in horizontal
	patron summary git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17839
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-20  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml: back-port: 17836 =>  addd missing
	opac_visible col and labels to config.usr_setting_type git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17837
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-20  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/import/marc_add_ids: marc_add_ids - better
	failure recovery Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17834
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-20  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/css/skin/default/serial.css,
	Open-ILS/web/js/dojo/openils/widget/HoldingCode.js,
	Open-ILS/web/js/ui/default/serial/subscription.js,
	Open-ILS/web/js/ui/default/serial/subscription/issuance.js: Backport
	r17831 from trunk: holding code miniwizard git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17832
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-20  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/common/li_table.js,
	Open-ILS/web/templates/default/acq/common/li_table.tt2,
	Open-ILS/web/templates/default/acq/search/unified.tt2: Backport
	r17829 from trunk: actions menu to ordinary select in li table git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17830
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-20  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/nls/Searcher.js: Backport
	r17827 from trunk: Search for humans: AND and OR are more
	understandable than "&&" and "||" The operators && and || will not mean much to many people, whereas
	AND and OR have common meanings that will aid in understanding the
	advanced search interface.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17828
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-20  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/default/acq/picklist/upload.tt2,
	Open-ILS/web/templates/default/acq/picklist/user_request.tt2: 
	Backport r17825 from trunk: changing "Picklist" to "Selection List" git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17826
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-20  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/search/unified.js: Backport r17823
	from trunk: acq po and invoice interfaces git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17824
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-19  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/common/li_table.js,
	Open-ILS/web/js/ui/default/acq/po/view_po.js,
	Open-ILS/web/templates/default/acq/common/inv_dialog.tt2,
	Open-ILS/web/templates/default/acq/po/view.tt2: Backport r17821 from
	trunk: delay acq provider loading git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17822
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-19  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/server/OpenILS/util_overlay.xul: remove
	redundant invocation of custom.js, and tweak how menu.js loads it git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17820
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-19  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/circ/selfcheck/selfcheck.js: back-port:
	17817 => for large sets of holds, usually around 10 or more, the
	holds display takes a little too long.  instead of collecting them
	all and sorting them by queue position, slot them into the display
	table (by queue position) as they arrive git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17818
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-19  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/OpenILS/data.js,
	Open-ILS/xul/staff_client/chrome/content/circ/offline.js,
	Open-ILS/xul/staff_client/chrome/content/util/print.js: Make sure
	offline interfaces correctly load printer settings outside of
	logins.  Some refactoring git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17816
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-18  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/common/li_table.js: in acq copies
	display, default to ws lib as recipient lib git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17814
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-18  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/base.tt2: back-port: 17810 => added cnal to
	autoidl pile git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17811
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-18  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Remove UNIQUE NOT
	NULL from config.index_normalizer.description.  M    Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17807
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-18  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/result_common.js: Backport
	r17802 and r17803 to provide a human-visible RSS feed in the dynamic
	OPAC Despite having RSS and Atom feeds at the core since version 1.0, it
	can be hard for humans to access those feeds. This will dynamically
	add a feed to the dynamic OPAC so that the RSS feed indicator will
	light up. Google Reader, look out! git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17806
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-18  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_overlay.xu
	l: Patch from James Fournie of SITKA: This is a patch that makes the toolbar work with the little
	jellybean button on Macs.   It's that little lozenge-like button on
	the top right of Mac programs that shows/hides the toolbar.  With
	this patch it will show/hide the toolbar "button bar", making it
	behave more like most Mac programs.  It shouldn't have any affect on
	other platforms.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17805
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-18  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/110.hold_matrix.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0406.schema.hold-matrix.user-not-reques
	tor.sql: Backport r17800 from trunk: Offer a global flag to cause
	the testing of hold matrix rules against the receiving user instead
	of the requestor, and set the initial value to enabled as this seems
	to be the less surprising value for current users of in-db hold
	logic git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17801
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-18  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/400.schema.action_trigger.sql: silly me,
	acqpo.activate is the new format.po.jedi Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17799
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-18  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/CopyLocations.pm,
	Open-ILS/web/js/dojo/openils/Util.js,
	Open-ILS/xul/staff_client/server/serial/batch_receive.js,
	Open-ILS/xul/staff_client/server/serial/pattern_wizard_overlay.xul: 
	Backport r17796 from trunk: serials batch receive improvements git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17797
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-18  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/base.tt2: more user stat cat classes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17795
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/400.schema.action_trigger.sql: added
	format.po.jedi hook to initial seed Signed-off-By: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17793
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/base.tt2: need cit and actsc for patron reg git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17791
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/AutoFieldWidget.js: load the
	right class in the on-the-fly IDL loader call git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17789
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Order.pm,
	Open-ILS/web/js/ui/default/acq/po/view_po.js: Backport r17786, acq
	po activation failure improvements git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17787
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/biblio.
	pm: enable translation of location name in copy location/status
	summary Implementation is iffy because it exposes oils_i18n_xlate outside of
	cstore.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17785
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/standing_penalties.js: 
	merge r17782 from trunk to fix progressbar and list refresh after
	modifying/archiving existing message/penalty in Patron Messages UI git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17783
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/skin/global.css,
	Open-ILS/xul/staff_client/server/skin/global.css: get rid of the
	disabled-look for the Actions for this Record menu label git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17781
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/base.tt2: Backport r17778, IDL chunking
	fixes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17779
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Vandelay.pm: Backport
	r17776 from trunk: Revert attempt to prevent encoding corruption
	that was causing encoding corruption LDR/09 was never showing up as 'a' where it was being tested, and
	adding the 'a' was preventing a reconversion to UTF8. It somewhat
	looks like the UTF8 MARCXML input gets converted to MARC8 as part of
	MARC::Batch's magic, then gets converted back to UTF8 by
	MARC::File::XML::as_xml_record(). Seems like this would mean
	potential performance / encoding problems but it works, which is
	better than what my meddlesome tests were doing.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17777
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Restore two foreign
	keys that were somehow inadvertently dropped, probably by some funky
	interaction with inheritance.  M    Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17774
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Vandelay.pm: back-port:
	17772 => vandelay import list report all option git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17773
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install: Backport r17769 from trunk:
	use HTTP URLs to download prereqs to avoid protocol-blocking
	annoyances git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17771
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/vandelay/vandelay.js: Backport r17767
	from trunk, vandelay Edit Attributes fix git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17768
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Order.pm: back-port:
	17765 => protect against fetching lineitem details by ref instead of
	ID git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17766
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/vandelay/vandelay.js: Backport r17763
	from trunk git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17764
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/upgrade/0405.schema.acq-hold-copy-map-drop-fkey
	.sql: -- Dropping a foreign key (which has already been dropped from
	the -- base installation scripts).  M    Open-ILS/src/sql/Pg/002.schema.config.sql M
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql A

	Open-ILS/src/sql/Pg/upgrade/0405.schema.acq-hold-copy-map-drop-fkey.sqlgit-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17761
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/metabib
	.pm: Backport r17759 from trunk: normalize all locales used in
	locale-lang mapping for QueryParser git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17760
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Search/Biblio.pm: 
	Backport r17757 from trunk: OU locale lookup needs a bit more work,
	it needs to pass a language instead of an xx-YY locale string git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17758
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_summary.xml: 
	Backport r17754 from trunk: Only show "issues held" if there is
	something to show git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17756
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-17  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm: Backport
	r17752 from trunk git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17753
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/base.tt2,
	Open-ILS/web/templates/default/conify/global/asset/copy_template.tt
	2: Backport r17750 from trunk, IDL chunks + copy template UI fix git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17751
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Add column
	usr_summary to actor.stat_cat.  (This column was added before we
	started maintaining individual update scripts.) M    Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17749
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* build/i18n/po/AutoFieldWidget.js/AutoFieldWidget.js.pot,
	build/i18n/po/TranslatorPopup.js/TranslatorPopup.js.pot,
	build/i18n/po/User.js/User.js.pot,
	build/i18n/po/XULTermLoader.js/XULTermLoader.js.pot,
	build/i18n/po/acq.js/acq.js.pot,
	build/i18n/po/admin.properties/admin.properties.pot,
	build/i18n/po/auth.properties/auth.properties.pot,
	build/i18n/po/capture.js/capture.js.pot,
	build/i18n/po/cat.properties/cat.properties.pot,
	build/i18n/po/circ.properties/circ.properties.pot,
	build/i18n/po/common.properties/common.properties.pot,
	build/i18n/po/conify.dtd/conify.dtd.pot,
	build/i18n/po/conify.js/conify.js.pot,
	build/i18n/po/db.seed/db.seed.pot,
	build/i18n/po/fm_IDL.dtd/fm_IDL.dtd.pot,
	build/i18n/po/ils_events.xml/ils_events.xml.pot,
	build/i18n/po/lang.dtd/lang.dtd.pot,
	build/i18n/po/multiclass_search_help.html/multiclass_search_help.ht
	ml.pot, build/i18n/po/offline.properties/offline.properties.pot,
	build/i18n/po/opac.dtd/opac.dtd.pot,
	build/i18n/po/opac.js/opac.js.pot,
	build/i18n/po/patron.properties/patron.properties.pot,
	build/i18n/po/pickup_and_return.js/pickup_and_return.js.pot,
	build/i18n/po/pull_list.js/pull_list.js.pot,
	build/i18n/po/register.js/register.js.pot,
	build/i18n/po/reports.dtd/reports.dtd.pot,
	build/i18n/po/reports.js/reports.js.pot,
	build/i18n/po/reservation.js/reservation.js.pot,
	build/i18n/po/selfcheck.js/selfcheck.js.pot,
	build/i18n/po/vandelay.dtd/vandelay.dtd.pot: .pot files generated
	during the alpha2 build process git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17746
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Driver/Pg/QueryPa
	rser.pm: remove internal limit with querying on facets This allows non-selective facets such a material type facet to bring
	in correct results - the tradeoff is that queries that involve
	facets will run slower.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17745
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm: Backport
	r17717 from trunk git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17741
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/rdetail.js,
	Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_summary.xml: 
	Backport r17735 from trunk, opac holds issuances expandy git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17740
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/base.tt2: Backport r17738 from trunk: more
	IDL chunking fixing git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17739
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/base.tt2: Backport r17736 from trunk: more
	IDL chunking-related fixes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17737
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/200.schema.acq.sql,
	Open-ILS/src/sql/Pg/upgrade/0404.schema.acq-provider-contact-null-n
	ull.sql: Make acq.provider_contact.name NOT NULL.  This change corrects the effect of a typo (NULL NULL instead of NOT
	NULL).  M    Open-ILS/src/sql/Pg/200.schema.acq.sql M
	Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql A

	Open-ILS/src/sql/Pg/upgrade/0404.schema.acq-provider-contact-null-null.sqlgit-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17734
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/sql/Pg/upgrade/0387.schema.perm_list_fkeys_restrict_de
	lete.sql: This needs to be the same in 2.0 as trunk, and the changes
	to this script need to make it into the 1.6-2.0 upgrade script as
	well, if not there already git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17731
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/default/vandelay/inc/item_attrs.tt2: typo
	backport git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17730
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/User.js: no need to ignore this
	improvement, which makes browser-focused dev simpler git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17729
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/upgrade/0385.schema.perm_list_fkeys.sql: This
	needs to be the same in 2.0 as trunk, and the changes to this script
	need to make it into the 1.6-2.0 upgrade script as well, if not
	there already git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17728
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: Missed some
	holds-related OU setting types from
	0077.data.holds_local_avail_and_override.sql in the seed data git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17727
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml: A couple useful, missing backports
	for the IDL git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17726
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Incorporate several
	late-breaking upgrades into the upgrade script.  M    Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17725
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/base.tt2: Backport r17723 from trunk: Add
	AutoIDL classes for Vandelay happiness Vandelay needs these class definitions for basic import operations.  Ideally every templated page wouldn't need to load these, but this
	seems to be the best short-term solution.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17724
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/src/extras/import/marc2are.pl,
	Open-ILS/src/perlmods/OpenILS/Application/Cat/AuthCommon.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Storage/CDBI/authority.pm
	, Open-ILS/src/perlmods/OpenILS/WWW/Exporter.pm,
	Open-ILS/src/sql/Pg/002.functions.config.sql,
	Open-ILS/src/sql/Pg/011.schema.authority.sql,
	Open-ILS/src/sql/Pg/020.schema.functions.sql,
	Open-ILS/src/sql/Pg/800.fkeys.sql,
	Open-ILS/src/sql/Pg/upgrade/0400.schema.unique_authority_index.sql,
	Open-ILS/src/sql/Pg/upgrade/0401.schema.authority_record_entry_drop
	_arn.sql,
	Open-ILS/src/sql/Pg/upgrade/0402.schema.unique_authority_index_revi
	sited.sql, Open-ILS/xul/staff_client/server/cat/marcedit.js: Drop
	the arn_value / arn_source columns on authority.record_entry and
	create an index instead The authority record number (ARN) was problematic when trying to
	generate local authorities because the number had no correlation to
	the content of the authority heading. By creating an index on
	authority records based on their heading, thesaurus, and heading
	text, we can do a better job of controlling the actual content of
	the authority records.  In a future release, we may convert this index to a unique index.
	2.0 will give sites an opportunity to begin cleaning up their
	authorities by identifying duplicate and problematic records through
	the authority.normalize_heading(TEXT) database function.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17722
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/AutoFieldWidget.js,
	Open-ILS/web/js/dojo/openils/widget/AutoWidget.js,
	Open-ILS/web/templates/base.tt2: Backport IDL-chunking work for
	interfaces under web/templates, as well as
	AutoWidget/AutoFieldWidget improvements to deal with some cases of
	not having an IDL class preloaded.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17721
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/asset.p
	m: Backport of r17718 from trunk: teach
	open-ils.storage.serial.issuance.ranged_tree about "global"
	issuances git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17720
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-16  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/210.schema.serials.sql,
	Open-ILS/src/sql/Pg/upgrade/0403.schema.serials-tweaks.sql: 
	Backporting r17715 from trunk: Patch from Dan Wells to extend the
	serial schema a bit in pref for upcoming improvement to existing
	features git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17716
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-15  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Search/Serial.pm: 
	Backporting r17710 from trunk: Need to start the arrayref out right git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17712
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-15  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: Replace the seed
	data for permission.perm_list, using the values assigned for
	predefined permissions by the upgrade script from 1.6.1 to 2.0.  M    Open-ILS/src/sql/Pg/950.data.seed-values.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17711
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-15  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js: merge
	r17707-r17708 from trunk for batch call number updates in same UI as
	batch barcode updates git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17709
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-15  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: 1. Revamp the contents of permission.perm_list: a) Renumber the permissions so that predefined permissions and
	non-predefined permissions are in separate ranges.  That was always
	the intent but the intent has not always been followed.  b) Add permissions that are referenced in the IDL but not defined in
	the database.  c) Where the description is NULL, apply the code as a description;
	that's better than nothing.  2. Incorporate miscellaneous recent changes from individual upgrade
	scripts.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17705
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-15  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/100.circ_matrix.sql,
	Open-ILS/src/sql/Pg/upgrade/0399.schema.strict-renewal-test.sql: 
	Backporting r17702 from trunk: Require that the matchpoint
	is_renewal flag be respected if set git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17703
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-15  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/financial/view_fund.js: back-port:
	17699 => filter debits/allocs by fund in view fund UI git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17700
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-15  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/210.schema.serials.sql,
	Open-ILS/src/sql/Pg/upgrade/0398.schema.serials-indexes.sql: 
	Backporting from trunk: A big pile of useful serial-schema indexes git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17695
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-15  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/apache/eg_vhost.conf,
	Open-ILS/src/edi_translator/README,
	Open-ILS/src/edi_translator/test_client.pl,
	Open-ILS/src/perlmods/OpenILS/Application/Acq/EDI.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Acq/Lineitem.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Acq/Order.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Trigger/Validator/Acq/Pur
	chaseOrderEDIRequired.pm,
	Open-ILS/src/perlmods/OpenILS/Utils/Cronscript.pm,
	Open-ILS/src/perlmods/OpenILS/Utils/RemoteAccount.pm,
	Open-ILS/src/support-scripts/edi_fetcher.pl,
	Open-ILS/src/support-scripts/edi_pusher.pl,
	Open-ILS/src/support-scripts/test-scripts/edi_object.pl,
	Open-ILS/src/support-scripts/test-scripts/ftp_ls.pl,
	Open-ILS/src/support-scripts/test-scripts/ordrsp_parse.pl,
	Open-ILS/tests/datasets/edi_scratch/0BzIfl53u8.ORDRSP.jedi,
	Open-ILS/tests/datasets/edi_scratch/0LGQQtTxuv.orders.edi,
	Open-ILS/tests/datasets/edi_scratch/4PkcdYeZtT.edi,
	Open-ILS/tests/datasets/edi_scratch/5pGP3O5rgS,
	Open-ILS/tests/datasets/edi_scratch/acq.bugs,
	Open-ILS/tests/datasets/edi_scratch/baker_taylor.ordrsp.edi,
	Open-ILS/tests/datasets/edi_scratch/baker_taylor.ordrsp.edi.split,
	Open-ILS/tests/datasets/edi_scratch/baker_taylor.ordrsp.edi2,
	Open-ILS/tests/datasets/edi_scratch/baker_taylor.ordrsp.jedi,
	Open-ILS/tests/datasets/edi_scratch/baker_taylor.ordrsp.jedi.pl,
	Open-ILS/tests/datasets/edi_scratch/baker_taylor.ordrsp.jedi.tidy.p
	l, Open-ILS/tests/datasets/edi_scratch/baker_taylor.ordrsp.jedi2,
	Open-ILS/tests/datasets/edi_scratch/brodart_001_edi.tst,
	Open-ILS/tests/datasets/edi_scratch/edi_splitter.pl,
	Open-ILS/tests/datasets/edi_scratch/ftx_test.jedi,
	Open-ILS/tests/datasets/edi_scratch/ftx_test.output,
	Open-ILS/tests/datasets/edi_scratch/ruby_json2edi.orders,
	Open-ILS/tests/datasets/edi_scratch/zBFqgVwJ7l.orders.edi,
	Open-ILS/web/templates/default/conify/global/acq/edi_account.tt2: 
	backport EDI changes from trunk (r17669:17690,r17692) EDI work done by Joe Atzberger; highlights of the enhancements are: * ORDRSP processing improvements * overhaul of edi_fetcher * EDI test files * Beginning of modperl EDI message viewer Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17693
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-15  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/marcedit.js,
	Open-ILS/xul/staff_client/server/locale/en-US/marcedit-tooltips-aut
	hority.xml,
	Open-ILS/xul/staff_client/server/locale/en-US/marcedit-tooltips-mfh
	d.xml,
	Open-ILS/xul/staff_client/server/locale/en-US/marcedit-tooltips.xml: 
	MARC tooltip updates * updated bibliographic tooltips; now current as of LC MARC21
	 Bibliographic Update 11, including the RDA tags.  Along the way,
	 enhanced the bib tooltips to: * include definitions for embedded holdings tags (84X, 853-855,
	 863-868, 876-878) * expand dropdown for nonfiling indicator values * added tooltip files for authority records and MFHDs * taught MARC editor how to choose the correct tooltip file Caveat: if you localize the authority and MFHD tooltips for a locale
	other than en-US, you must edit marcedit.js, either to take your
	translation into account or to make it smarter about checking for
	available translations of the tooltips.  Signed-off-by: Galen Charlton <gmc@esilibrary.com git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17691
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-14  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Cat/Authority.pm,
	Open-ILS/xul/staff_client/server/cat/marcedit.js,
	Open-ILS/xul/staff_client/server/locale/en-US/cat.properties: 
	Backport r17644 from trunk: Integrate authority browse and creation
	support into the MARC editor This commit changes the contextual authority menu to be based on the
	authority browse interface; this should result in better matching
	behavior. The browse axis (author, subject, title, topic) is based
	on the context tag.  The browse interface has enabled the contextual menu to grow "Next
	page" / "Previous page" menu items to enable cataloguers to wade
	through long lists of similar authority entries.  The browse interface has also grown a "Create new authority record"
	menu with two submenu items:  * "Create immediately" takes the field in context and creates a new
	   authority record based on that field, with matching indicators and
	subfields.   * "Create and edit..." displays the MARCXML for the authority
	   record in a MARC editor window before saving the record to the
	database.  TODO: Make the "Create..." contextual options add the $0 linking
	subfield to the newly controlled field.  TODO: Address some of the flaky UI behaviour, such as having to
	right-click three times on an authority-controllable field to
	display the authority menu.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17664
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-14  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0397.data.coust.opac_fully_compresssed.
	sql, Open-ILS/web/opac/skin/default/js/rdetail.js,
	Open-ILS/web/opac/skin/default/xml/rdetail/rdetail_summary.xml: 
	Backport r17661 from trunk, serials opac holding display git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17662
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-14  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/CreditCard.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0396.data.org-setting-payflowpro.sql: 
	Backport r17657 from trunk: payflowpro support git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17660
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-14  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: 
	back-port: 17658 =>additional issuance holds supporting code; in
	this case, hold_to_mvr func which is used by the uber hold details
	method;  commit also includes a small speed tweak for fetching
	details for copy holds (1 less cstore call) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17659
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-14  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/main/bindings.xml: regexp
	for robust filename mangling git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17656
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-14  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xsl/ATOM2XHTML.xsl: Backport r17653: unbreak item count
	in result list of slimpac git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17654
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-14  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/WWW/SuperCat.pm,
	Open-ILS/xsl/MARC21slim2HTMLCard-holdings.xsl: Backport from trunk:
	slimpac cleanup git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17651
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-14  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm: Backport from
	trunk: method for generating a set of compressed holdings statements git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17650
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-14  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/006.schema.permissions.sql,
	Open-ILS/src/sql/Pg/upgrade/0393.schema.perm-id-change-i18n-protect
	ion.sql, Open-ILS/src/sql/Pg/upgrade/0395.schema.fix-i18n-fixer.sql: 
	Backport I18N protection for permission descriptions git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17649
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-13  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/apache/eg.conf,
	Open-ILS/src/cgi-bin/circ-rules.cgi,
	Open-ILS/src/cgi-bin/config.cgi,
	Open-ILS/src/cgi-bin/copy_statuses.cgi,
	Open-ILS/src/cgi-bin/lib-setup.cgi,
	Open-ILS/src/cgi-bin/org_unit_types.cgi,
	Open-ILS/src/cgi-bin/perms-setup.cgi,
	Open-ILS/src/cgi-bin/support/dtree.js,
	Open-ILS/src/cgi-bin/usr_group-setup.cgi,
	Open-ILS/src/extras/Makefile.install,
	Open-ILS/src/perlmods/OpenILS/Utils/OfflineStore.pm,
	Open-ILS/src/support-scripts/eg_db_config.pl,
	Open-ILS/web/Makefile.am, README: Merge r17574, r17575, r17584,
	r17585, r17628, r17639 from trunk to delete deprecated cgi-bin
	configuration interfaces The CGI interfaces have not been maintained; the interfaces
	available through the Admin -> Server Administration menu in the
	staff client are the recommended method for setting up new libraries
	in the organizational hierarchy, permissions, copy statuses, and
	circulation rules.  Note that an adjustment to eg.conf is recommended to point to the
	offline.pl script, which is the only remaining CGI script in use;
	this should avoid conflicting Apache definitions for the /cgi-bin/
	alias.  Most modern systems will install Class::DBI::Frozen::301 to avoid
	conflicts with incompatible Class::DBI packages. We need to teach
	offline.pl how to use Class::DBI::Frozen::301 if it is available.  Note that we're using "use parent" instead of "use base" per the
	recommendation of "perldoc base"; accordingly, we're adding the
	system prerequisite for the parent pragma.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17642
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-13  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/bib_brief_overlay.js,
	Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js: fix
	retrieval of cat.default_classification_scheme Fixes bug where the cat.default_classification_scheme OU setting was
	effectively ignored in bib call # display in bib overlay and list of
	default call numbers during volume creation.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17641
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-13  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Fielder.pm,
	Open-ILS/web/js/dojo/openils/I18N.js,
	Open-ILS/web/js/dojo/openils/widget/Searcher.js: Backport r17629 and
	r17630 from trunk: teach fielder to cache (off by default), with a
	default timeout of 5min; have fielder cache some frequently used
	data git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17631
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-13  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Search/Biblio.pm: added
	declaration of facet cache limit var, which was likely missed during
	back-port git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17627
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-13  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/opensrf.xml.example: make the other two k_* MARC
	templates usable by default Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17626
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-13  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/main/bindings.xml: 
	back-port: 17622 =>  wrap custom props file reader in try/catch to
	prevent xhr complaining about missing file git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17623
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-12  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm: Backport
	r17620 from trunk: serials opac method bugfix git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17621
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-12  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/main/bindings.xml: merge
	r17617 from trunk for _custom.properties file overlays with
	messagecatalog git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17619
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-12  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/OpenILS/data.js,
	Open-ILS/xul/staff_client/server/cat/copy_editor.js,
	Open-ILS/xul/staff_client/server/circ/alternate_copy_summary.js,
	Open-ILS/xul/staff_client/server/circ/pre_cat_fields.xul,
	Open-ILS/xul/staff_client/server/circ/util.js,
	Open-ILS/xul/staff_client/server/locale/en-US/common.properties,
	Open-ILS/xul/staff_client/server/serial/batch_receive.js: merge
	r17614 from trunk for customizable circ modifier rendering in staff
	client git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17618
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-12  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml, Open-ILS/web/css/skin/default.css,
	Open-ILS/web/css/skin/default/serial.css,
	Open-ILS/web/js/dojo/openils/XUL.js,
	Open-ILS/web/js/ui/default/serial/list_stream.js,
	Open-ILS/web/js/ui/default/serial/list_subscription.js,
	Open-ILS/web/js/ui/default/serial/subscription.js,
	Open-ILS/web/js/ui/default/serial/subscription/caption_and_pattern.
	js, Open-ILS/web/js/ui/default/serial/subscription/issuance.js,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/web/templates/default/serial/list_stream.tt2,
	Open-ILS/web/templates/default/serial/list_subscription.tt2,
	Open-ILS/web/templates/default/serial/subscription.tt2,
	Open-ILS/web/templates/default/serial/subscription/caption_and_patt
	ern.tt2,
	Open-ILS/web/templates/default/serial/subscription/distribution.tt2
	, Open-ILS/web/templates/default/serial/subscription/issuance.tt2,
	Open-ILS/xul/staff_client/chrome/content/cat/opac.js,
	Open-ILS/xul/staff_client/chrome/content/cat/opac.xul,
	Open-ILS/xul/staff_client/chrome/locale/en-US/offline.properties,
	Open-ILS/xul/staff_client/server/serial/batch_receive.js,
	Open-ILS/xul/staff_client/server/serial/pattern_wizard_overlay.xul: 
	Backport r17615 from trunk: serials quick-and-dirty admin interfaces git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17616
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-12  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm: Backport
	r17612 from trunk: serials prediction for multiple dists git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17613
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm: Backporting
	r17605 and r17606 from trunk: Method for retrieving received
	issuances attached to a bib, optionally scoped by location, holding
	type or item status, with paging and ordering support git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17611
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-12  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/FacetSidebar.js: Backporting
	r17609 from trunk: add maxValuesPerFacet attr/param git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17610
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-12  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm,
	Open-ILS/src/perlmods/OpenILS/Utils/MFHD.pm: Backport r17607 from
	trunk: serials predictions until end_date git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17608
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-11  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/apache/eg_vhost.conf,
	Open-ILS/examples/openils.profile.js,
	Open-ILS/src/perlmods/OpenILS/Application/Search/Biblio.pm,
	Open-ILS/web/js/dojo/openils/widget/FacetSidebar.js: Backporting
	17856, 17587, 17593, 17601 and 17603 from trunk: mod_deflate
	support; improved and expanded dojo layers; support for limiting
	facet retrieval in IE to just the initially displayed set (IE is
	terrible with large data sets) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17604
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-10  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/default/acq/financial/view_fund.tt2,
	Open-ILS/web/templates/default/acq/search/unified.tt2: Backport
	r17599 from trunk, refresh grid buttons git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17600
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-10  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/AutoGrid.js: Backport r17597
	from trunk, autogrid refresh git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17598
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-10  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/cat/opac.js: Backport
	r17595 from trunk, nav buttons in view/place orders git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17596
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-10  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/locale/en-US/patron.properties,
	Open-ILS/xul/staff_client/server/patron/bill2.js,
	Open-ILS/xul/staff_client/server/patron/bill_details.js,
	Open-ILS/xul/staff_client/server/patron/util.js: merge r17588-r17592
	from trunk for patron refunds and misc tweaks git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17594
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-10  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0392.data.org-setting-ui.patron.editor_
	address_requirement.sql,
	Open-ILS/web/js/dojo/openils/actor/nls/register.js,
	Open-ILS/web/js/ui/default/actor/user/register.js: merge r17582 from
	trunk for ui.patron.registration.require_address setting git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17583
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-10  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/util/list.js,
	Open-ILS/xul/staff_client/server/locale/en-US/patron.properties,
	Open-ILS/xul/staff_client/server/patron/bill2.js,
	Open-ILS/xul/staff_client/server/patron/bill_history.js,
	Open-ILS/xul/staff_client/server/patron/bills.js,
	Open-ILS/xul/staff_client/server/patron/info_group.js,
	Open-ILS/xul/staff_client/server/patron/search_result.js,
	Open-ILS/xul/staff_client/server/patron/util.js: merge r17576-r17580
	from trunk for improved columns in Patron Search results list.  Also
	fleshes some patron data sent to misc receipt templates git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17581
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-10  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/oils_ctl.sh: back-porting: 17566 => added
	command line option for defining a stderr output log file for the
	SIP server git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17567
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-10  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/web/templates/default/conify/global/booking/resource_type.
	tt2: Backport r17563 from trunk: booking bugfix git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17564
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-09  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/hold_details.js,
	Open-ILS/xul/staff_client/server/patron/holds.js: merge r17560 from
	trunk for tweaks to holds and hold details interfaces git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17561
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-09  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm,
	Open-ILS/web/opac/common/js/config.js,
	Open-ILS/web/opac/locale/en-US/opac.dtd,
	Open-ILS/web/opac/skin/default/js/holds.js,
	Open-ILS/web/opac/skin/default/xml/common/holds.xml: back-porting:
	17553 17554 => support for viewing and editing existing
	issuance-level holds to the default opac skin; alternate issuance
	flesh call that only fleshes the subscription;  used for public/opac
	display git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17559
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-09  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/templates/default/actor/user/register_table.tt2: 
	merge r17557 from trunk for to prevent accidental address deletion
	attempt in patron editor git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17558
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-09  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/AutoFieldWidget.js,
	Open-ILS/web/js/dojo/openils/widget/EditPane.js: Backport r17555
	from trunk, better autogrid overrideEditWidget value shoving git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17556
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-09  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/cat/volume_copy_creator.js: merge
	r17550 from trunk for call number sorting in volume/item creator git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17552
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-09  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/cat/bib_brief_overlay.js,
	Open-ILS/xul/staff_client/server/cat/bib_brief_overlay.xul,
	Open-ILS/xul/staff_client/server/circ/alternate_copy_summary.xul,
	Open-ILS/xul/staff_client/server/circ/util.js,
	Open-ILS/xul/staff_client/server/locale/en-US/circ.properties,
	Open-ILS/xul/staff_client/server/skin/global.css: merge r17549 from
	trunk for brief bib summary bar git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17551
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-09  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/AutoFieldWidget.js,
	Open-ILS/web/js/dojo/openils/widget/EditPane.js: Backport r17547
	from trunk: overrideEditWidgets in AutoGrid improvement git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17548
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-09  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Actor/UserGroups.pm: 
	Backport from trunk: loop over users in a group, as the plan for
	usrgroup+mous is terrible git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17546
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-09  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/upgrade/0391.schema.copy_note_owner_index.sql: 
	Backporting from trunk: should have had this index all along, but
	was less important until now where copy notes are used up front git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17544
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-09  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/005.schema.actors.sql,
	Open-ILS/src/sql/Pg/upgrade/0390.schema.usrgroup-index.sql: Backport
	from trunk: With group billing calls we need a new index git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17542
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-09  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application.pm: updated ils_version
	for 2-0 branch, updated comment on format git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17539
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-09  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/serial/pattern_wizard.js: 
	Backport r17537 from trunk: serials pattern wizard bugfix git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17538
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-09  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm: 
	back-port: 17535 => for consistency, use 'issuanceid' as the
	issuance ID param for holds possibility testing; removed some
	crusty, old hold create code git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17536
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-09  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql: Address typos and
	grammar in seed data TODO: Consistently wrap translatable content in oils_i18n_gettext()
	calls git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17534
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-09  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/src/perlmods/OpenILS/Const.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0389.data.issuance-holds.sql: Merging
	r17527-17529 from trunk: Backend issuance-level hold logic git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17532
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-09  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/opensrf.xml.example: Make OpenLibrary the
	default added content provider OpenLibrary is a better choice than Amazon for added content out of
	the box because: 1) The OpenLibrary added content handler provides cover images +
	tables of content, whereas the Amazon added content handler only
	provides cover images.  2) The terms of use for OpenLibrary content are much friendlier than
	the Amazon "Product Advertising API".  We discussed this back in mid-2009:
	http://markmail.org/message/csx2hl6aleznapga git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17531
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-08  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm: Backport
	r17525 from trunk: summary generation at receive time git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17526
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-08  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0388.data.org-setting-ui.patron.editor_
	defaults.sql, Open-ILS/web/css/skin/default/register.css,
	Open-ILS/web/js/ui/default/actor/user/register.js,
	Open-ILS/web/templates/default/actor/user/register.tt2: Backport
	17516, 17517, 17522, 17523: Allows us to create an
	/openils/var/web/css/skin/default/register_custom.css file
	containing local CSS for styling the patron editor.  Example: TR[fmfield=ident_type] { display: none; } /* be sure to set the
	ui.patron.default_ident_type setting */ TR[fmfield=ident_value2] {
	border: solid thick red; font-size: x-large; } TR[fmfield=barred] {
	display: none; } TR[fmfield=country] { display: none; } /* be sure
	to set the ui.patron.default_country setting */
	TR[fmfield=master_account] { display: none; }
	TR[fmfield=alert_message] { display: none; } TR[fmfield=ident_value]
	{ z-index: -1; } TR[stat_cat_id='1'] { border: solid thick red;
	font-size: x-large; } git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17524
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-08  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install: Backport r17520: Make
	Class::DBI::Frozen::301 a common forced module for all distros;
	genericize RHEL/CentOS git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17521
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-08  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/Makefile.install: Backport r17518 from trunk:
	install Library::CallNumber::LC from CPAN We briefly had to grab Library::CallNumber::LC from the SVN repo,
	but that broke on systems without subversion installed (argh).
	Thankfully the maintainer moved Library::CallNumber::LC to CPAN so
	our job becomes routine.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17519
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-08  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Actor.pm: backporting
	r17514 from trunk: A simple "vital stats" collector method returning
	information about a user for display in the OPAC or Staff Client.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17515
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-08  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/chrome/content/util/widgets.js,
	Open-ILS/xul/staff_client/server/cat/copy_browser.js,
	Open-ILS/xul/staff_client/server/cat/copy_browser.xul,
	Open-ILS/xul/staff_client/server/skin/cat.css: backport 17506, 17507
	for saner navigation in Holdings Maintenance git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17513
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-08  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/SIP.pm,
	Open-ILS/src/perlmods/OpenILS/SIP/Transaction/Checkin.pm: 
	back-porting: 17502 17503 => cache the SIP login session to
	determine 'where' a transaction is occuring in case the caller does
	not indicate the location; compare hold pickup lib to physical
	location to determine alert type; small logging and format tweaks git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17512
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-08  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/OpenILS/data.js,
	Open-ILS/xul/staff_client/server/circ/util.js,
	Open-ILS/xul/staff_client/server/patron/summary.js: backport 17508,
	17509, for better user stat cat lookups and exposing such stat cats
	in hold slips git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17510
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-07  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: The reporter and
	extend_reporter schemas are no longer optional.  So changes to them
	go back into the transaction.  ALTERs to auditor.action_hold_request_history stay outside of the
	transaction, at least for now, until the status of that table is
	clarified.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17504
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-07  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Move some operations
	out of the transaction so that they can fail without killing the
	script.  The affected objects do not necessarily exist -- i.e. the
	reporter schema, the extend_reporter schema, and the
	auditor.action_hold_request_history table.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17500
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-07  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/display.js: Only modify
	msg when needed or we'll get spurious 'stop sign' pages git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17499
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-07  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/common/li_table.js: make lineitem
	price updates synchronous to prevent race condition between onChange
	of price set completion and PO activation git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17497
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-07  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/1.6.1-2.0-upgrade-db.sql: Consolidated upgrade
	script for 1.6 -> 2.0.  Things still missing: 1. Inserts and other changes to permission.perm_list and
	permission.grp_perm_map.  These can't be derived in a simple way
	from the individual upgrade scripts, and will have to be
	hand-crafted to fit what's already in the seed data.  2. Operations on optional schemas need to be moved out of the
	transaction so that the script will work in a database that doesn't
	have them.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17494
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-03  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/Util.js,
	Open-ILS/web/js/dojo/openils/widget/AutoFieldWidget.js: Backport
	r17491 from trunk: fix timestamps in AutoFieldWidget git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17492
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-03  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/SIP/Transaction/Checkin.pm: event
	code may be 0 (SUCCESS) == false in SIP checkin, check defined
	instead git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17489
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-03  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/MARC/Field.js,
	Open-ILS/web/js/dojo/MARC/Record.js: backporting r17476, r17477 and
	r17486 from trunk -- MARC Dojo module improvements git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17487
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-03  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql: give default OUs
	separate addresses Per suggestion from Anoop Atre to avoid a new user changing one OU
	address in a new database and wondering why all of the OU addresses
	were changed.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17485
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-03  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/006.schema.permissions.sql,
	Open-ILS/src/sql/Pg/800.fkeys.sql,
	Open-ILS/src/sql/Pg/upgrade/0387.schema.perm_list_fkeys_restrict_de
	lete.sql: restrict deletion of perm_lists in use Per suggestion by Mike Rylander; prevents overzealous administrator
	from removing necessary permisions that are in use.  TODO: UI to make it clear when that happens Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17483
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-03  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0386.data.org-setting-patron-clone-copy
	-addr.sql, Open-ILS/web/js/ui/default/actor/user/register.js: 
	back-porting: 17480 => patron address copy on clone instead of link git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17481
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-03  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/action.
	pm: repaired thinko in hold targeting org-unit max-loops check git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17479
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-03  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/006.schema.permissions.sql,
	Open-ILS/src/sql/Pg/800.fkeys.sql,
	Open-ILS/src/sql/Pg/upgrade/0385.schema.perm_list_fkeys.sql: allow
	updates of permission.perm_list.id to cascade Doing this to make it possible to reshuffle permission IDs for
	upgrades to 2.0.x Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17475
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-03  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/locale/en-US/serial.properties,
	Open-ILS/xul/staff_client/server/serial/batch_receive.js,
	Open-ILS/xul/staff_client/server/serial/batch_receive_overlay.xul,
	Open-ILS/xul/staff_client/server/serial/common.js,
	Open-ILS/xul/staff_client/server/serial/pattern_wizard.js,
	Open-ILS/xul/staff_client/server/serial/pattern_wizard.xul,
	Open-ILS/xul/staff_client/server/serial/pattern_wizard_overlay.xul,
	Open-ILS/xul/staff_client/server/serial/scap_editor.js,
	Open-ILS/xul/staff_client/server/serial/scap_editor.xul,
	Open-ILS/xul/staff_client/server/skin/serial.css: Backport r17472
	from trunk, serials pattern code wizard git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17473
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-03  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/SuperCat.pm: backporting
	supercat improvements from r17469 and r17470 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17471
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-03  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/util.js: back-port: 17467
	=> users with no transaction history will have no xact summary;
	protect git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17468
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-03  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/holds.js: up the default
	pull list limit from 50 to 100 git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17466
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-03  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Holds.pm,
	Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0384.data.hold_pull_list_template.sql,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/chrome/content/main/constants.js,
	Open-ILS/xul/staff_client/server/patron/holds.js,
	Open-ILS/xul/staff_client/server/patron/holds_overlay.xul: backport
	17445, 17464: A/T template based full pull list printing for holds git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17465
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/acq/nls/acq.js,
	Open-ILS/web/js/ui/default/acq/po/view_po.js,
	Open-ILS/web/templates/default/acq/po/view.tt2: back-porting: 17446
	=> display PO order (activation) date in PO page git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17462
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/widget/AutoFieldWidget.js,
	Open-ILS/web/js/dojo/openils/widget/FilteringTreeSelect.js,
	Open-ILS/web/js/ui/default/actor/user/register.js: back-porting:
	17416 17417 17418 => filtering-tree-select disable fields query w/
	auto-widget pass-thru; disable non-user-group fields in patron
	editor git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17461
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm,
	Open-ILS/src/perlmods/OpenILS/SIP/Transaction/Checkin.pm: 
	back-porting: 17400 17401 => support for overridable physical
	location in checkin and honoring current_location in SIP checkin
	code git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17460
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Acq/Order.pm,
	Open-ILS/web/images/licenses.txt,
	Open-ILS/web/js/dojo/openils/conify/nls/conify.js,
	Open-ILS/web/js/ui/default/conify/global/acq/distribution_formula.j
	s,
	Open-ILS/web/templates/default/conify/global/acq/distribution_formu
	la.tt2: back-porting: 17399 17413 => optimized distrib formula
	management UI git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17459
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/fieldmapper/Fieldmapper.js,
	Open-ILS/web/js/dojo/openils/PermaCrud.js,
	Open-ILS/web/js/dojo/openils/widget/AutoGrid.js: back-porting:
	r17391 17397 17398; pcrud/fieldmapper bug fixes; autogrid suppress
	edit fields option git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17458
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/circ/selfcheck/selfcheck.js: 
	back-porting: 17390 => disallow self-check login w/ inactive barcode git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17457
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/openils/acq/nls/acq.js,
	Open-ILS/web/js/ui/default/acq/common/li_table.js,
	Open-ILS/web/templates/default/acq/common/li_table.tt2: 
	back-porting: 17389 => show lineitem ID for each lineitem in
	lineitem table (po/pl) and general lineitem summary blob (invoicing) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17456
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/acq/search/invoice.js,
	Open-ILS/web/templates/default/acq/search/unified.tt2: back-porting:
	17355 use openils.Util.printHtmlString for invoice printing; added
	progress dialog while wiating for invoices to arrive git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17455
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/SIP/Item.pm: back-porting: added
	support for returning hold shelf expire time (CM field) in item info
	response when an item has been captured for a hold.  value is
	populated if item is on holds shelf or in transit to holds shelf git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17454
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/apache/eg_vhost.conf,
	Open-ILS/src/perlmods/OpenILS/WWW/Redirect.pm: back-porting: added
	support for configuring redirect depth, skin, and locale during
	IP-based org unit redirection; w/ sample config git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17453
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/web/templates/default/conify/global/config/rule_age_hold_p
	rotect.tt2,
	Open-ILS/web/templates/default/conify/global/config/rule_circ_durat
	ion.tt2,
	Open-ILS/web/templates/default/conify/global/config/rule_max_fine.t
	t2,
	Open-ILS/web/templates/default/conify/global/config/rule_recurring_
	fine.tt2, Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_menus.xul: 
	back-porting: conify UIs for circ/hold-related config.rule_ tables git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17452
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/auth/session.js: fix the
	problem where login does not work immediately after registering a
	workstation git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17451
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Booking.pm: Backport
	r17447: kill CAPTURE_RESERVATION git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17448
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/craftsman/xml/rdetail/rdetail_extras.xml,
	Open-ILS/web/opac/skin/craftsman/xml/result/result_table.xml: 
	backport 17441: stop the chilifresh undefined errors in craftsman git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17443
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/craftsman/js/rdetail.js,
	Open-ILS/web/opac/skin/default/js/rdetail.js: Backport rtype
	parameters for invoking MARC editor This will result in no different behaviour than before, but adding
	the rtype parameter won't hurt, either.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17440
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/cat/authority/list.js,
	Open-ILS/web/templates/default/cat/authority/list.tt2: Backport
	r17343 from trunk: Add explicit identification of the master
	authority record when merging We now generate a table with the first cell containing either
	"Master" (indicating the record into which the other records will be
	merged) and or "Target" (indicating that the record will be merged
	into the master.  This also adds a horizontal rule to delineate between the form
	buttons at the top, and adds borders to provide more clarity between
	the mergebox contents.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17439
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/xul/staff_client/server/admin/copy_locations.js,
	Open-ILS/xul/staff_client/server/admin/copy_locations.xhtml,
	Open-ILS/xul/staff_client/server/cat/spine_labels.js,
	Open-ILS/xul/staff_client/server/cat/spine_labels.xul: UI portions
	of spine label editing enhancements listed in r17437 Also include the IDL for the new fields on asset.copy_location.
	Oops.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17438
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/040.schema.asset.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0380.data.spine_label.sql,
	Open-ILS/src/sql/Pg/upgrade/0381.data.spine_label_font_weight.sql,
	Open-ILS/src/sql/Pg/upgrade/0382.schema.asset_copy_location_callnum
	s.sql, Open-ILS/web/opac/locale/en-US/lang.dtd: Backport spine label
	editing and printing enhancements from trunk   * Automatically add prefix and/or suffix to a spine label if set     in the copy locations editor   * Set default font size, family, and weight along with label
	    height, width, and left margin for each library via library
	settings editor.    * Navigate up and down using cursor keys and insert/delete lines
	    with the insert/delete keys.    * Provide some basic LC formatting for line wrapping.    * Use different print strategies depending on whether we're using     xulrunner 1.9.0 or 1.9.2.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17437
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-02  dbs <dbs@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Cat/BibCommon.pm,
	Open-ILS/src/perlmods/OpenILS/Application/Vandelay.pm,
	Open-ILS/web/js/ui/default/acq/common/li_table.js,
	Open-ILS/web/js/ui/default/vandelay/vandelay.js,
	Open-ILS/xul/staff_client/chrome/content/cat/opac.js,
	Open-ILS/xul/staff_client/server/cat/marcedit.js,
	Open-ILS/xul/staff_client/server/cat/marcedit.xul,
	Open-ILS/xul/staff_client/server/cat/z3950.js: Backport biblio
	source enhancements from trunk:   * Make biblio source selection in Vandelay set the source for
	    imported bib records.    * Place a biblio source editor widget on the MARC Editor when
	    invoked with a biblio record that already exists in the database
	    ("rtype": "bre" with a specific ID).  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17435
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-01  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm,
	Open-ILS/xul/staff_client/server/serial/batch_receive.js,
	Open-ILS/xul/staff_client/server/serial/batch_receive_overlay.xul: 
	Backport r17431 from trunk, checkbox to en/disable batch receive w/
	units git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17432
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-01  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Serial.pm,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/locale/en-US/serial.properties,
	Open-ILS/xul/staff_client/server/serial/batch_receive.js,
	Open-ILS/xul/staff_client/server/serial/batch_receive_overlay.xul,
	Open-ILS/xul/staff_client/server/skin/serial.css: Backport r17428
	from trunk: serial batch receive improvements (w/ call number) git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17430
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-01  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/extras/ils_events.xml,
	Open-ILS/src/perlmods/OpenILS/Application/Serial.pm,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/server/locale/en-US/serial.properties,
	Open-ILS/xul/staff_client/server/serial/batch_receive.js,
	Open-ILS/xul/staff_client/server/serial/batch_receive_overlay.xul: 
	Backport r17364 from trunk: serial batch receive improvements git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17429
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-01  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/skin/default/js/container.js,
	Open-ILS/web/opac/skin/default/js/holds.js,
	Open-ILS/web/opac/skin/default/js/result_common.js: backport r17419
	from trunk: added explicit IDL class loading for cbreb, cbrebi, mvr,
	and ahr git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17421
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-09-01  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/dojo/fieldmapper/IDL.js,
	Open-ILS/web/js/dojo/fieldmapper/dojoData.js,
	Open-ILS/web/opac/skin/default/xml/common/js_common.xml: backport
	r17396 from trunk: Allow the OPAC to autoload IDL classes instead of
	either pulling in a long class list and evaluating them all, or
	loading a .5MB+ xml file and parsing the whole thing. 40% speedup in
	simple tests where cache is bypassed.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17420
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-31  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/util/browser.js: 
	printable_output() support in util.browser had stopped working, and
	this fixes that.  If an interface embedded in util.browser has a
	printable_output() function, the text output from that function
	should be printed, instead of a direct print attempt against the
	content window git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17415
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-31  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/chrome/content/main/main.js: fixes a bug
	when purging offline transactions after an Export git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17409
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-31  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/booking/reservation.js: Backport
	r17405: fix start/end date selection problem with reservations git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17406
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-30  scottmk <scottmk@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0378.data.fix_org_unit_setting_types.sq
	l: Backporting corrections to some org unit setting types.  A
	Open-ILS/src/sql/Pg/upgrade/0378.data.fix_org_unit_setting_types.sql
	M    Open-ILS/src/sql/Pg/950.data.seed-values.sql git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17392
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-30  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/fm_IDL.xml,
	Open-ILS/web/js/ui/default/conify/global/asset/copy_template.js,
	Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/web/templates/default/conify/global/asset/copy_template.tt
	2, Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_menus.xul: 
	Backport r17387, basic copy template editor git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17388
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-30  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0383.data.org-setting-circ.do_not_tally
	_claims_returned.sql,
	Open-ILS/xul/staff_client/server/patron/summary.js: backport 17385:
	option to not include claims returned circs in summary sidebar and
	under-button tallies git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17386
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-30  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/display.js: backport
	17383: show penalty/message notes on "Stop Sign Page" git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17384
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-30  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/items.js: Backport 17373,
	making "show item details" consistent within "items out" i'face git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17382
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-30  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/sql/Pg/002.schema.config.sql,
	Open-ILS/src/sql/Pg/950.data.seed-values.sql,
	Open-ILS/src/sql/Pg/upgrade/0379.data.org-setting-circ.missing_piec
	es.copy_status.sql: backport 17335: circ.missing_pieces.copy_status
	org unit setting to support the Mark/Scan as Missing Pieces workflow git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17381
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-30  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/chrome/content/OpenILS/data.js,
	Open-ILS/xul/staff_client/chrome/content/util/browser.js,
	Open-ILS/xul/staff_client/chrome/content/util/browser.xul,
	Open-ILS/xul/staff_client/chrome/content/util/list.js,
	Open-ILS/xul/staff_client/chrome/content/util/print.js,
	Open-ILS/xul/staff_client/chrome/content/util/rbrowser.xul,
	Open-ILS/xul/staff_client/chrome/locale/en-US/offline.properties,
	Open-ILS/xul/staff_client/server/admin/printer_settings.html,
	Open-ILS/xul/staff_client/server/admin/printer_settings.js,
	Open-ILS/xul/staff_client/server/circ/checkin.js,
	Open-ILS/xul/staff_client/server/circ/checkout.js,
	Open-ILS/xul/staff_client/server/patron/bill2.js,
	Open-ILS/xul/staff_client/server/patron/bills.js,
	Open-ILS/xul/staff_client/server/patron/items.js,
	Open-ILS/xul/staff_client/server/patron/summary.xul: backport
	17375-17379 for context sensitive (role-based) print settings git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17380
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-27  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/bill2.xul: backport 17361:
	support hiding of patron credit functionality. To do this, create a
	server/skin/global_custom.css file containing .hide_patron_credit {
	display: none } git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17362
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-26  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/examples/opensrf.xml.example: examples of how to specify
	default preferred language and weight values git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17352
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-26  senator <senator@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Circ/Circulate.pm: 
	Backport r17346 to fix broken OPAC renewals git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17347
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-25  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	*
	Open-ILS/src/perlmods/OpenILS/Application/Storage/Publisher/actor.p
	m: update standing penalty query for blocked barcode list, trunk
	style! git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17340
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-24  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/opac/locale/en-US/lang.dtd,
	Open-ILS/xul/staff_client/chrome/content/main/menu.js,
	Open-ILS/xul/staff_client/chrome/content/main/menu_frame_menus.xul,
	Open-ILS/xul/staff_client/defaults/preferences/prefs.js: rip the
	join tab feature out of 2.0; it's still experimental and doesn't
	work well with the embedded OPAC git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17329
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-24  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/xul/staff_client/server/patron/ue.js: 1-line fix for
	false 404 from sylvar solves "The requested URL
	/xul/rel_1_6_0_7/server/patron/ue.xhtml&clone=112879 was not found
	on this server." git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17324
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-23  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/reporter/clark-kent.pl: Paste error git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17321
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-23  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/WWW/Web.pm: Perltidy death to tabs git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17320
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-23  atz <atz@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/reporter/clark-kent.pl: Failure to open a
	file(handle) should be a fatal error.  Otherwise we aren't getting any output anyway.  Also a few formatting touchups for readability.  TODO: use warnings!  use Cronscript for standardized lockfile and
	options.  git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17319
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-23  phasefx <phasefx@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/web/js/ui/default/actor/user/register.js,
	Open-ILS/xul/staff_client/server/patron/summary.js: backport 17314:
	address deletion in patron editor git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17315
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-23  gmc <gmc@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Application/Search/Biblio.pm: 
	display copy counts correctly in staff search results Useless use of a constant in void context at
	.../OpenILS/Application/Search/Biblio.pm line 263.  Signed-off-by: Galen Charlton <gmc@esilibrary.com> git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17310
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-23  erickson <erickson@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Open-ILS/src/perlmods/OpenILS/Utils/MFHD.pm: perl 5.8 requires
	quotes around the version # git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17308
	dcc99617-32d9-48b4-a31d-7c20da2025e4

2010-08-23  miker <miker@dcc99617-32d9-48b4-a31d-7c20da2025e4>

	* Branching for the 2.0 series git-svn-id: svn://svn.open-ils.org/ILS/branches/rel_2_0@17304
	dcc99617-32d9-48b4-a31d-7c20da2025e4

