<?xml version="1.0" encoding="UTF-8"?>
<!--

Copyright (C) 2006-2008 Georgia Public Library Service
Copyright (C) 2008 Equinox Software, Inc
Author: Mike Rylander <miker@esilibrary.com>

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA

############################
          TEMPLATE
############################

    <class
        id=""
        controller="open-ils.cstore open-ils.pcrud"
        oils_obj:fieldmapper=""
        oils_persist:tablename=""
        reporter:label=""
        oils_persist:field_safe=""
        oils_persist:virtual=""
        oils_persist:readonly=""
        reporter:core=""
    >

        <oils_persist:source_definition><![CDATA[
            SELECT * FROM foo
        ]]></oils_persist:source_definition>

        <fields oils_persist:primary="" oils_persist:sequence="">
            <field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="" name="" reporter:datatype="org_unit"/>
            <field reporter:label="" name="" reporter:datatype="text"/>
            <field reporter:label="" name="" reporter:datatype="link"/>
            <field reporter:label="" name="" reporter:datatype="timestamp"/>
            <field reporter:label="" name="" reporter:datatype="money"/>
            <field reporter:label="" name="" reporter:datatype="bool"/>
            <field reporter:label="" name="" reporter:datatype="int" oils_obj:required="true"/>
            <field reporter:label="" name="" reporter:datatype="int" oils_persist:virtual="true"/>
        </fields>

        <links>
            <link field="" reltype="has_a" key="" map="" class=""/>
        </links>

        <permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
            <actions>
                <create permission="" gloabl_required="true"/>
                <retrieve/>
                <update permission="" context_field=""/>
                <delete permission="">
                    <context link="" field=""/>
                </delete>
            </actions>
        </permacrud>

    </class>

 ###############################################################################
 #### Rules of thumb for using the @reltype attribute on the <link> element ####
 ###############################################################################

 * If the field is not virtual, but backed by a real column: use "has_a"
 * If the field is virtual, but there's only ever going to be, at most, one row on the other end of the join: use "might_have"
 * If the field is virtual, and there can be any number of rows on the other end of the join: use "has_many"
 
 There are exceptions and deviations from those rules of thumb, especially WRT links through primary keys. Ask on the Evergreen
 Developer mailing list, or the #evergreen IRC channel on the Libera network, if you are unsure of which to use.

-->
<IDL xmlns="http://opensrf.org/spec/IDL/base/v1" xmlns:idl="http://opensrf.org/spec/IDL/base/v1" xmlns:oils_persist="http://open-ils.org/spec/opensrf/IDL/persistence/v1" xmlns:oils_obj="http://open-ils.org/spec/opensrf/IDL/objects/v1" xmlns:reporter="http://open-ils.org/spec/opensrf/IDL/reporter/v1" xmlns:sr="http://open-ils.org/spec/opensrf/IDL/simple-reporter/v1" xmlns:permacrud="http://open-ils.org/spec/opensrf/IDL/permacrud/v1" xmlns:repsec="http://open-ils.org/spec/opensrf/IDL/reporter/v1/security">

	<!-- Virtual classes -->

	<class id="oaib" controller="open-ils.cstore" oils_obj:fieldmapper="oai::biblio" oils_persist:readonly="true" reporter:core="false" reporter:label="OAI2 record list" oils_persist:tablename="oai.biblio">
		<fields oils_persist:primary="rec_id">
			<field reporter:label="Record ID\OAI identifier postfix" name="rec_id" reporter:datatype="id"/>
			<field reporter:label="Last edit date\OAI datestamp" name="datestamp" reporter:datatype="timestamp"/>
			<field reporter:label="Is Deleted?" name="deleted" reporter:datatype="bool"/>
			<field reporter:label="Setspec" name="set_spec" oils_persist:virtual="true"/>
		</fields>
	</class>
	<class id="oaia" controller="open-ils.cstore" oils_obj:fieldmapper="oai::authority" oils_persist:readonly="true" reporter:core="false" reporter:label="OAI2 record list" oils_persist:tablename="oai.authority">
		<fields oils_persist:primary="rec_id">
			<field reporter:label="Record ID\OAI identifier postfix" name="rec_id" reporter:datatype="id"/>
			<field reporter:label="Last edit date\OAI datestamp" name="datestamp" reporter:datatype="timestamp"/>
			<field reporter:label="Is Deleted?" name="deleted" reporter:datatype="bool"/>
			<field reporter:label="Setspec" name="set_spec" oils_persist:virtual="true"/>
		</fields>
	</class>

	<class id="mups" controller="open-ils.cstore" oils_obj:fieldmapper="money::user_payment_summary" oils_persist:virtual="true" reporter:label="User Payment Summary">
		<fields>
			<field name="usr" oils_persist:virtual="true"/>
			<field name="forgive_payment" oils_persist:virtual="true"/>
			<field name="work_payment" oils_persist:virtual="true"/>
			<field name="credit_payment" oils_persist:virtual="true"/>
			<field name="goods_payment" oils_persist:virtual="true"/>
			<field name="account_adjustment" oils_persist:virtual="true"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
	</class>

	<class id="mwps" controller="open-ils.cstore" oils_obj:fieldmapper="money::workstation_payment_summary" oils_persist:virtual="true" reporter:label="Workstation Payment Summary">
		<fields>
			<field name="workstation" oils_persist:virtual="true"/>
			<field name="cash_payment" oils_persist:virtual="true"/>
			<field name="check_payment" oils_persist:virtual="true"/>
			<field name="credit_card_payment" oils_persist:virtual="true"/>
			<field name="debit_card_payment" oils_persist:virtual="true"/>
		</fields>
		<links>
			<link field="workstation" reltype="has_a" key="id" map="" class="aws"/>
		</links>
	</class>

	<class id="brn" controller="open-ils.cstore" oils_obj:fieldmapper="biblio::record_node" oils_persist:virtual="true" reporter:label="Record Node">
		<fields>
			<field name="id" oils_persist:virtual="true"/>
			<field name="children" oils_persist:virtual="true"/>
			<field name="owner_doc" oils_persist:virtual="true"/>
			<field name="intra_doc_id" oils_persist:virtual="true"/>
			<field name="parent_node" oils_persist:virtual="true"/>
			<field name="node_type" oils_persist:virtual="true"/>
			<field name="namespace_uri" oils_persist:virtual="true"/>
			<field name="name" oils_persist:virtual="true"/>
			<field name="value" oils_persist:virtual="true"/>
		</fields>
	</class>

	<class id="mvr" controller="open-ils.cstore" oils_obj:fieldmapper="metabib::virtual_record" oils_persist:virtual="true" reporter:label="Virtual Record">
		<fields>
			<field name="title" oils_persist:virtual="true"/>
			<field name="author" oils_persist:virtual="true"/>
			<field name="doc_id" oils_persist:virtual="true"/>
			<field name="doc_type" oils_persist:virtual="true"/>
			<field name="pubdate" oils_persist:virtual="true"/>
			<field name="isbn" oils_persist:virtual="true"/>
			<field name="publisher" oils_persist:virtual="true"/>
			<field name="tcn" oils_persist:virtual="true"/>
			<field name="subject" oils_persist:virtual="true"/>
			<field name="types_of_resource" oils_persist:virtual="true"/>
			<field name="call_numbers" oils_persist:virtual="true"/>
			<field name="edition" oils_persist:virtual="true"/>
			<field name="online_loc" oils_persist:virtual="true"/>
			<field name="synopsis" oils_persist:virtual="true"/>
			<field name="physical_description" oils_persist:virtual="true"/>
			<field name="toc" oils_persist:virtual="true"/>
			<field name="copy_count" oils_persist:virtual="true"/>
			<field name="series" oils_persist:virtual="true"/>
			<field name="serials" oils_persist:virtual="true"/>
			<field name="foreign_copy_maps" oils_persist:virtual="true"/>
		</fields>
	</class>

	<class id="ex" controller="open-ils.cstore" oils_obj:fieldmapper="ex" oils_persist:virtual="true">
		<fields>
			<field name="err_msg" oils_persist:virtual="true"/>
			<field name="type" oils_persist:virtual="true"/>
		</fields>
	</class>

	<class id="perm_ex" controller="open-ils.cstore" oils_obj:fieldmapper="perm_ex" oils_persist:virtual="true">
		<fields>
			<field name="err_msg" oils_persist:virtual="true"/>
			<field name="type" oils_persist:virtual="true"/>
		</fields>
	</class>

	<class id="amtr" controller="open-ils.cstore" oils_obj:fieldmapper="action::matrix_test_result" oils_persist:virtual="true" reporter:label="Matrix Test Result">
		<fields oils_persist:primary="matchpoint">
			<field reporter:label="Matchpoint ID" name="matchpoint" reporter:datatype="id"/>
			<field reporter:label="Success" name="success" reporter:datatype="bool"/>
			<field reporter:label="Failure Part" name="fail_part" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="matchpoint" reltype="has_a" key="id" map="" class="ccmm"/>
		</links>
	</class>

	<class id="accs" controller="open-ils.cstore" oils_obj:fieldmapper="action::circ_chain_summary" oils_persist:virtual="true" reporter:label="Circulation Chain Summary">
		<!-- when the time is right, turn me into a view.  -->
		<fields>
			<field reporter:label="Total Circs" name="num_circs" reporter:datatype="int"/>
			<field reporter:label="Start Time" name="start_time" reporter:datatype="timestamp"/>
			<field reporter:label="Checkout Workstation" name="checkout_workstation" reporter:datatype="text"/>
			<field reporter:label="Last Renewal Time" name="last_renewal_time" reporter:datatype="timestamp"/>
			<field reporter:label="Last Stop Fines" name="last_stop_fines" reporter:datatype="text"/>
			<field reporter:label="Last Stop Fines Time" name="last_stop_fines_time" reporter:datatype="timestamp"/>
			<field reporter:label="Last Renewal Workstation" name="last_renewal_workstation" reporter:datatype="text"/>
			<field reporter:label="Last Checkin Workstation" name="last_checkin_workstation" reporter:datatype="text"/>
			<field reporter:label="Last Checkin Time" name="last_checkin_time" reporter:datatype="timestamp"/>
			<field reporter:label="Last Checkin Scan Time" name="last_checkin_scan_time" reporter:datatype="timestamp"/>
		</fields>
	</class>

	<class id="rhr" oils_obj:fieldmapper="resolver::holdings_record" oils_persist:virtual="true">
		<fields>
			<field name="public_name" oils_persist:virtual="true"/>
			<field name="target_url" oils_persist:virtual="true"/>
			<field name="target_coverage" oils_persist:virtual="true"/>
			<field name="target_embargo" oils_persist:virtual="true"/>
		</fields>
	</class>

	<!-- Actually in the DB -->
	<class id="vmp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::merge_profile" oils_persist:tablename="vandelay.merge_profile" reporter:label="Bib Import Merge Profile">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.merge_profile_id_seq">
			<field reporter:label="Field ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Add Specification" name="add_spec" reporter:datatype="text"/>
			<field reporter:label="Replace Specification" name="replace_spec" reporter:datatype="text"/>
			<field reporter:label="Remove Specification" name="strip_spec" reporter:datatype="text"/>
			<field reporter:label="Preserve Specification" name="preserve_spec" reporter:datatype="text"/>
			<field reporter:label="Min. Quality Ratio" name="lwm_ratio" reporter:datatype="float"/>
			<field reporter:label="Update Bib. Source" name="update_bib_source" reporter:datatype="bool"/>
			<field reporter:label="Update Bib. Edit Date" name="update_bib_editor" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_MERGE_PROFILE CREATE_MERGE_PROFILE" context_field="owner"/>
				<retrieve permission="ADMIN_MERGE_PROFILE CREATE_MERGE_PROFILE UPDATE_MERGE_PROFILE DELETE_MERGE_PROFILE VIEW_MERGE_PROFILE" context_field="owner"/>
				<update permission="ADMIN_MERGE_PROFILE UPDATE_MERGE_PROFILE" context_field="owner"/>
				<delete permission="ADMIN_MERGE_PROFILE DELETE_MERGE_PROFILE" context_field="owner"/>
			</actions>
		</permacrud>
	</class>

	<class id="vibtf" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::import_bib_trash_fields" oils_persist:tablename="vandelay.import_bib_trash_fields" reporter:label="Import/Overlay Fields for Removal">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.import_bib_trash_fields_id_seq">
			<field reporter:label="Field ID" name="id" reporter:datatype="id" reporter:selector="field"/>
			<field reporter:label="Group" name="grp" reporter:datatype="link" config_field="true" oils_obj:required="true"/>
			<field reporter:label="Field" name="field" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="grp" reltype="has_a" key="id" map="" class="vibtg"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_IMPORT_TRASH_FIELD">
					<context link="grp" field="owner"/>
				</create>
				<retrieve/>
				<update permission="UPDATE_IMPORT_TRASH_FIELD">
					<context link="grp" field="owner"/>
				</update>
				<delete permission="DELETE_IMPORT_TRASH_FIELD">
					<context link="grp" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="rrbs" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="rating::record_badge_score" oils_persist:tablename="rating.record_badge_score" reporter:label="Statistical Popularity Badge">
		<fields oils_persist:primary="id" oils_persist:sequence="rating.record_badge_score_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Badge" name="badge" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Record" name="record" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Score" name="score" reporter:datatype="int" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="badge" reltype="has_a" key="id" map="" class="rb"/>
			<link field="record" reltype="has_a" key="id" map="" class="bre"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="rp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="rating::popularity_parameter" oils_persist:tablename="rating.popularity_parameter" reporter:label="Statistical Popularity Parameter">
		<fields oils_persist:primary="id" oils_persist:sequence="rating.popularity_parameter_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="name" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text"/>
			<field reporter:label="Population Function" name="func" reporter:datatype="text"/>
			<field reporter:label="Require Horizon" name="require_horizon" reporter:datatype="bool"/>
			<field reporter:label="Require Percentile" name="require_percentile" reporter:datatype="bool"/>
			<field reporter:label="Require Importance" name="require_importance" reporter:datatype="bool"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_POP_PARAMETER" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_POP_PARAMETER" global_required="true"/>
				<delete permission="DELETE_POP_PARAMETER" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="rb" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="rating::badge" oils_persist:tablename="rating.badge" reporter:label="Statistical Popularity Badge">
		<fields oils_persist:primary="id" oils_persist:sequence="rating.badge_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Scope" name="scope" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Weight" name="weight" reporter:datatype="int"/>
			<field reporter:label="Age Horizon" name="horizon_age" reporter:datatype="text"/>
			<field reporter:label="Importance Horizon" name="importance_age" reporter:datatype="text"/>
			<field reporter:label="Importance Interval" name="importance_interval" reporter:datatype="text"/>
			<field reporter:label="Importance Scale" name="importance_scale" reporter:datatype="text"/>
			<field reporter:label="Percentile" name="percentile" reporter:datatype="float"/>
			<field reporter:label="Attribute Filter" name="attr_filter" reporter:datatype="text"/>
			<field reporter:label="Circ Mod Filter" name="circ_mod_filter" reporter:datatype="link"/>
			<field reporter:label="Bib Source Filter" name="src_filter" reporter:datatype="link"/>
			<field reporter:label="Location Group Filter" name="loc_grp_filter" reporter:datatype="link"/>
			<field reporter:label="Recalculation Interval" name="recalc_interval" reporter:datatype="text"/>
			<field reporter:label="Fixed Rating" name="fixed_rating" reporter:datatype="int"/>
			<field reporter:label="Discard Value Count" name="discard" reporter:datatype="int"/>
			<field reporter:label="Last Refresh Time" name="last_calc" reporter:datatype="timestamp"/>
			<field reporter:label="Popularity Parameter" name="popularity_parameter" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="scope" reltype="has_a" key="id" map="" class="aou"/>
			<link field="popularity_parameter" reltype="has_a" key="id" map="" class="rp"/>
			<link field="src_filter" reltype="has_a" key="id" map="" class="cbs"/>
			<link field="circ_mod_filter" reltype="has_a" key="code" map="" class="ccm"/>
			<link field="loc_grp_filter" reltype="has_a" key="id" map="" class="acplg"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_POP_BADGE" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_POP_BADGE" global_required="true"/>
				<delete permission="DELETE_POP_BADGE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="vibtg" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::import_bib_trash_group" oils_persist:tablename="vandelay.import_bib_trash_group" reporter:label="Import/Overlay Field Groups for Removal">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.import_bib_trash_group_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="label"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Always Apply" name="always_apply" reporter:datatype="bool"/>
			<field reporter:label="Fields" name="import_bib_trash_fields" oils_persist:virtual="true" reporter:datatype="link" config_field="true"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="import_bib_trash_fields" reltype="has_many" key="grp" map="" class="vibtf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_IMPORT_TRASH_FIELD" context_field="owner"/>
				<retrieve/>
				<update permission="UPDATE_IMPORT_TRASH_FIELD" context_field="owner"/>
				<delete permission="DELETE_IMPORT_TRASH_FIELD" context_field="owner"/>
			</actions>
		</permacrud>
	</class>


	<class id="vii" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::import_item" oils_persist:tablename="vandelay.import_item" reporter:label="Import Item">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.import_item_id_seq">
			<field reporter:label="Import Item ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Import Record" name="record" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Attribute Definition" name="definition" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Import Error" name="import_error" reporter:datatype="link"/>
			<field reporter:label="Import Error Detail" name="error_detail" reporter:datatype="text"/>
			<field reporter:label="Final Target Item" name="imported_as" reporter:datatype="link"/>
			<field reporter:label="Import Time" name="import_time" reporter:datatype="timestamp"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="int"/>
			<field reporter:label="Circulating Library" name="circ_lib" reporter:datatype="int"/>
			<field reporter:label="Call Number" name="call_number" reporter:datatype="text"/>
			<field reporter:label="Item Number" name="copy_number" reporter:datatype="int"/>
			<field reporter:label="Status" name="status" reporter:datatype="int"/>
			<field reporter:label="Shelving Location" name="location" reporter:datatype="int"/>
			<field reporter:label="Circulate" name="circulate" reporter:datatype="bool"/>
			<field reporter:label="Deposit" name="deposit" reporter:datatype="bool"/>
			<field reporter:label="Deposit Amount" name="deposit_amount" reporter:datatype="money"/>
			<field reporter:label="Reference" name="ref" reporter:datatype="bool"/>
			<field reporter:label="Holdable" name="holdable" reporter:datatype="bool"/>
			<field reporter:label="Price" name="price" reporter:datatype="money"/>
			<field reporter:label="Barcode" name="barcode" reporter:datatype="text"/>
			<field reporter:label="Circulation Modifier" name="circ_modifier" reporter:datatype="text"/>
			<field reporter:label="Circulate As MARC Type" name="circ_as_type" reporter:datatype="text"/>
			<field reporter:label="Alert Message" name="alert_message" reporter:datatype="text"/>
			<field reporter:label="Public Note" name="pub_note" reporter:datatype="text"/>
			<field reporter:label="Private Note" name="priv_note" reporter:datatype="text"/>
			<field reporter:label="OPAC Visible" name="opac_visible" reporter:datatype="bool"/>
			<field reporter:label="Overlay Match ID" name="internal_id" reporter:datatype="int"/>
			<field reporter:label="Stat Cat Data" name="stat_cat_data" reporter:datatype="text"/>
			<field reporter:label="Parts Data" name="parts_data" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="import_error" reltype="has_a" key="code" map="" class="vie"/>
			<link field="record" reltype="has_a" key="id" map="" class="vqbr"/>
			<link field="definition" reltype="has_a" key="id" map="" class="viiad"/>
			<link field="imported_as" reltype="has_a" key="id" map="" class="acp"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_IMPORT_ITEM">
					<context link="definition" field="owner"/>
				</create>
				<retrieve permission="CREATE_IMPORT_ITEM UPDATE_IMPORT_ITEM DELETE_IMPORT_ITEM">
					<context link="definition" field="owner"/>
				</retrieve>
				<update permission="UPDATE_IMPORT_ITEM">
					<context link="definition" field="owner"/>
				</update>
				<delete permission="DELETE_IMPORT_ITEM">
					<context link="definition" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="viiad" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::import_item_attr_definition" oils_persist:tablename="vandelay.import_item_attr_definition" reporter:label="Import Item Attribute Definition">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.import_item_attr_definition_id_seq">
			<field reporter:label="Definition ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Tag" name="tag" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="text"/>
			<field reporter:label="Circulating Library" name="circ_lib" reporter:datatype="text"/>
			<field reporter:label="Call Number" name="call_number" reporter:datatype="text"/>
			<field reporter:label="Status" name="status" reporter:datatype="text"/>
			<field reporter:label="Shelving Location" name="location" reporter:datatype="text"/>
			<field reporter:label="Circulate" name="circulate" reporter:datatype="text"/>
			<field reporter:label="Deposit" name="deposit" reporter:datatype="text"/>
			<field reporter:label="Deposit Amount" name="deposit_amount" reporter:datatype="text"/>
			<field reporter:label="Reference" name="ref" reporter:datatype="text"/>
			<field reporter:label="Holdable" name="holdable" reporter:datatype="text"/>
			<field reporter:label="Price" name="price" reporter:datatype="text"/>
			<field reporter:label="Barcode" name="barcode" reporter:datatype="text"/>
			<field reporter:label="Circulation Modifier" name="circ_modifier" reporter:datatype="text"/>
			<field reporter:label="Circulate As MARC Type" name="circ_as_type" reporter:datatype="text"/>
			<field reporter:label="Alert Message" name="alert_message" reporter:datatype="text"/>
			<field reporter:label="Public Note" name="pub_note" reporter:datatype="text"/>
			<field reporter:label="Private Note" name="priv_note" reporter:datatype="text"/>
			<field reporter:label="OPAC Visible" name="opac_visible" reporter:datatype="text"/>
			<field reporter:label="Item Number" name="copy_number" reporter:datatype="text"/>
			<field reporter:label="Overlay Match ID" name="internal_id" reporter:datatype="text"/>
			<field reporter:label="Stat Cat Data" name="stat_cat_data" reporter:datatype="text"/>
			<field reporter:label="Parts Data" name="parts_data" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_IMPORT_ITEM_ATTR_DEF ADMIN_IMPORT_ITEM_ATTR_DEF" context_field="owner"/>
				<retrieve permission="CREATE_IMPORT_ITEM_ATTR_DEF UPDATE_IMPORT_ITEM_ATTR_DEF DELETE_IMPORT_ITEM_ATTR_DEF ADMIN_IMPORT_ITEM_ATTR_DEF" context_field="owner"/>
				<update permission="UPDATE_IMPORT_ITEM_ATTR_DEF ADMIN_IMPORT_ITEM_ATTR_DEF" context_field="owner"/>
				<delete permission="DELETE_IMPORT_ITEM_ATTR_DEF ADMIN_IMPORT_ITEM_ATTR_DEF" context_field="owner"/>
			</actions>
		</permacrud>
	</class>

	<class id="vbi" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::background_import" oils_persist:tablename="vandelay.background_import" reporter:label="Import/Overlay Background Import Job">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.background_import_id_seq">
			<field reporter:label="Background Import Job ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="link"/>
			<field reporter:label="Workstation" name="workstation" reporter:datatype="link"/>
			<field reporter:label="Notification Email" name="email" reporter:datatype="text"/>
			<field reporter:label="Type" name="import_type" reporter:datatype="text"/>
			<field reporter:label="Parameters" name="params" reporter:datatype="text"/>
			<field reporter:label="State" name="state" reporter:datatype="text"/>
			<field reporter:label="Request Time" name="request_time" reporter:datatype="timestamp"/>
			<field reporter:label="Complete Time" name="complete_time" reporter:datatype="timestamp"/>
			<field reporter:label="Queue ID" name="queue" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="au"/>
			<link field="workstation" reltype="has_a" key="id" map="" class="aws"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_BACKGROUND_IMPORT" owning_user="owner">
                    <context link="workstation" field="owning_lib"/>
                </create>
				<retrieve permission="VIEW_BACKGROUND_IMPORT" owning_user="owner">
                    <context link="workstation" field="owning_lib"/>
                </retrieve>
				<update permission="UPDATE_BACKGROUND_IMPORT" owning_user="owner">
                    <context link="workstation" field="owning_lib"/>
                </update>
				<delete permission="UPDATE_BACKGROUND_IMPORT" owning_user="owner">
                    <context link="workstation" field="owning_lib"/>
                </delete>
			</actions>
		</permacrud>
	</class>

	<class id="vbq" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::bib_queue" oils_persist:tablename="vandelay.bib_queue" reporter:label="Import/Overlay Bib Queue">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.queue_id_seq">
			<field reporter:label="Queue ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Complete" name="complete" reporter:datatype="bool"/>
			<field reporter:label="Type" name="queue_type" reporter:datatype="text"/>
			<field reporter:label="Match Set" name="match_set" reporter:datatype="link"/>
			<field reporter:label="Item Import Attribute Definition" name="item_attr_def" reporter:datatype="link"/>
			<field reporter:label="Match Bucket" name="match_bucket" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="au"/>
			<link field="item_attr_def" reltype="has_a" key="id" map="" class="viiad"/>
			<link field="match_set" reltype="has_a" key="id" map="" class="vms"/>
			<link field="match_bucket" reltype="has_a" key="id" map="" class="cbreb"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_BIB_IMPORT_QUEUE" global_required="true"/>
				<retrieve permission="CREATE_BIB_IMPORT_QUEUE UPDATE_BIB_IMPORT_QUEUE DELETE_BIB_IMPORT_QUEUE" global_required="true"/>
				<update permission="UPDATE_BIB_IMPORT_QUEUE" global_required="true"/>
				<delete permission="DELETE_BIB_IMPORT_QUEUE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="vie" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::import_error" oils_persist:tablename="vandelay.import_error" reporter:label="Import/Overlay Error Definitions">
		<fields oils_persist:primary="code">
			<field reporter:label="Error Code" name="code" reporter:selector="description" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="item_attr_def" reltype="has_a" key="id" map="" class="viiad"/>
			<link field="match_set" reltype="has_a" key="id" map="" class="vms"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="vqbr" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::queued_bib_record" oils_persist:tablename="vandelay.queued_bib_record" reporter:label="Queued Bib Record">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.queued_record_id_seq">
			<field reporter:label="Record ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Create Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Import Time" name="import_time" reporter:datatype="timestamp"/>
			<field reporter:label="MARC" name="marc" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Queue" name="queue" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Bib Source" name="bib_source" reporter:datatype="link"/>
			<field reporter:label="Final Target Record" name="imported_as" reporter:datatype="link"/>
			<field reporter:label="Import Error" name="import_error" reporter:datatype="link"/>
			<field reporter:label="Import Error Detail" name="error_detail" reporter:datatype="text"/>
			<field reporter:label="Purpose" name="purpose" reporter:datatype="text"/>
			<field reporter:label="Attributes" name="attributes" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Matches" name="matches" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Import Items" name="import_items" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Quality" name="quality" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="import_error" reltype="has_a" key="code" map="" class="vie"/>
			<link field="queue" reltype="has_a" key="id" map="" class="vbq"/>
			<link field="bib_source" reltype="has_a" key="id" map="" class="cbs"/>
			<link field="imported_as" reltype="has_a" key="id" map="" class="bre"/>
			<link field="attributes" reltype="has_many" key="record" map="" class="vqbra"/>
			<link field="matches" reltype="has_many" key="queued_record" map="" class="vbm"/>
			<link field="import_items" reltype="has_many" key="record" map="" class="vii"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_BIB_IMPORT_QUEUE" global_required="true"/>
				<retrieve permission="CREATE_BIB_IMPORT_QUEUE UPDATE_BIB_IMPORT_QUEUE DELETE_BIB_IMPORT_QUEUE" global_required="true"/>
				<update permission="UPDATE_BIB_IMPORT_QUEUE" global_required="true"/>
				<delete permission="DELETE_BIB_IMPORT_QUEUE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="vqbrad" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::bib_attr_definition" oils_persist:tablename="vandelay.bib_attr_definition" reporter:label="Queued Bib Record Attribute Definition">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.bib_attr_definition_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Code" name="code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="XPath" name="xpath" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Remove RegExp" name="remove" reporter:datatype="text"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_BIB_IMPORT_FIELD_DEF" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_BIB_IMPORT_IMPORT_FIELD_DEF" global_required="true"/>
				<delete permission="DELETE_BIB_IMPORT_IMPORT_FIELD_DEF" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="vqbra" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::queued_bib_record_attr" oils_persist:tablename="vandelay.queued_bib_record_attr" reporter:label="Queued Bib Record Attribute">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.queued_bib_record_attr_id_seq">
			<field reporter:label="Attribute ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Record" name="record" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Field" name="field" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Value" name="attr_value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="record" reltype="has_a" key="id" map="" class="vqbr"/>
			<link field="field" reltype="has_a" key="id" map="" class="vqbrad"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_BIB_IMPORT_QUEUE" global_required="true"/>
				<retrieve permission="CREATE_BIB_IMPORT_QUEUE UPDATE_BIB_IMPORT_QUEUE DELETE_BIB_IMPORT_QUEUE" global_required="true"/>
				<update permission="UPDATE_BIB_IMPORT_QUEUE" global_required="true"/>
				<delete permission="DELETE_BIB_IMPORT_QUEUE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="vbm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::bib_match" oils_persist:tablename="vandelay.bib_match" reporter:label="Queued Bib Record Match">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.bib_match_id_seq">
			<field reporter:label="Match ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Queued Record" name="queued_record" reporter:datatype="link"/>
			<field reporter:label="Evergreen Record" name="eg_record" reporter:datatype="link"/>
			<field reporter:label="Quality" name="quality" reporter:datatype="text"/>
			<field reporter:label="Match Score" name="match_score" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="queued_record" reltype="has_a" key="id" map="" class="vqbr"/>
			<link field="eg_record" reltype="has_a" key="id" map="" class="bre"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_BIB_IMPORT_QUEUE" global_required="true"/>
				<retrieve permission="CREATE_BIB_IMPORT_QUEUE UPDATE_BIB_IMPORT_QUEUE DELETE_BIB_IMPORT_QUEUE" global_required="true"/>
				<update permission="UPDATE_BIB_IMPORT_QUEUE" global_required="true"/>
				<delete permission="DELETE_BIB_IMPORT_QUEUE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="vaq" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::authority_queue" oils_persist:tablename="vandelay.authority_queue" reporter:label="Import/Overlay Authority Queue">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.queue_id_seq">
			<field reporter:label="Queue ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Complete" name="complete" reporter:datatype="bool"/>
			<field reporter:label="Type" name="queue_type" reporter:datatype="text"/>
			<field reporter:label="Match Set" name="match_set" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="match_set" reltype="has_a" key="id" map="" class="vms"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_AUTHORITY_IMPORT_QUEUE" global_required="true"/>
				<retrieve permission="CREATE_AUTHORITY_IMPORT_QUEUE UPDATE_AUTHORITY_IMPORT_QUEUE DELETE_AUTHORITY_IMPORT_QUEUE" global_required="true"/>
				<update permission="UPDATE_AUTHORITY_IMPORT_QUEUE" global_required="true"/>
				<delete permission="DELETE_AUTHORITY_IMPORT_QUEUE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="vqar" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::queued_authority_record" oils_persist:tablename="vandelay.queued_authority_record" reporter:label="Queued Authority Record">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.queued_record_id_seq">
			<field reporter:label="Record ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Create Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Import Time" name="import_time" reporter:datatype="timestamp"/>
			<field reporter:label="MARC" name="marc" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Queue" name="queue" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Final Target Record" name="imported_as" reporter:datatype="link"/>
			<field reporter:label="Import Error" name="import_error" reporter:datatype="link"/>
			<field reporter:label="Import Error Detail" name="error_detail" reporter:datatype="text"/>
			<field reporter:label="Purpose" name="purpose" reporter:datatype="text"/>
			<field reporter:label="Attributes" name="attributes" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Matches" name="matches" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Quality" name="quality" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="import_error" reltype="has_a" key="code" map="" class="vie"/>
			<link field="queue" reltype="has_a" key="id" map="" class="vaq"/>
			<link field="imported_as" reltype="has_a" key="id" map="" class="are"/>
			<link field="attributes" reltype="has_many" key="record" map="" class="vqara"/>
			<link field="matches" reltype="has_many" key="queued_record" map="" class="vam"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_AUTHORITY_IMPORT_QUEUE" global_required="true"/>
				<retrieve permission="CREATE_AUTHORITY_IMPORT_QUEUE UPDATE_AUTHORITY_IMPORT_QUEUE DELETE_AUTHORITY_IMPORT_QUEUE" global_required="true"/>
				<update permission="UPDATE_AUTHORITY_IMPORT_QUEUE" global_required="true"/>
				<delete permission="DELETE_AUTHORITY_IMPORT_QUEUE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="vqarad" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::authority_attr_definition" oils_persist:tablename="vandelay.authority_attr_definition" reporter:label="Queued Authority Record Attribute Definition">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.authority_attr_definition_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Code" name="code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="XPath" name="xpath" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Remove RegExp" name="remove" reporter:datatype="text"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_AUTHORITY_IMPORT_IMPORT_FIELD_DEF" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_AUTHORITY_IMPORT_IMPORT_FIELD_DEF" global_required="true"/>
				<delete permission="DELETE_AUTHORITY_IMPORT_IMPORT_FIELD_DEF" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="vqara" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::queued_authority_record_attr" oils_persist:tablename="vandelay.queued_authority_record_attr" reporter:label="Queued Authority Record Attribute">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.queued_authority_record_attr_id_seq">
			<field reporter:label="Attribute ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Record" name="record" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Field" name="field" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Value" name="attr_value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="record" reltype="has_a" key="id" map="" class="vqar"/>
			<link field="field" reltype="has_a" key="id" map="" class="vqarad"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_AUTHORITY_IMPORT_QUEUE" global_required="true"/>
				<retrieve permission="CREATE_AUTHORITY_IMPORT_QUEUE UPDATE_AUTHORITY_IMPORT_QUEUE DELETE_AUTHORITY_IMPORT_QUEUE" global_required="true"/>
				<update permission="UPDATE_AUTHORITY_IMPORT_QUEUE" global_required="true"/>
				<delete permission="DELETE_AUTHORITY_IMPORT_QUEUE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="vam" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::authority_match" oils_persist:tablename="vandelay.authority_match" reporter:label="Queued Authority Record Match">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.authority_match_id_seq">
			<field reporter:label="Match ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Queued Record" name="queued_record" reporter:datatype="link"/>
			<field reporter:label="Evergreen Record" name="eg_record" reporter:datatype="link"/>
			<field reporter:label="Quality" name="quality" reporter:datatype="int"/>
			<field reporter:label="Match Score" name="match_score" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="queued_record" reltype="has_a" key="id" map="" class="vqar"/>
			<link field="eg_record" reltype="has_a" key="id" map="" class="are"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_AUTHORITY_IMPORT_QUEUE" global_required="true"/>
				<retrieve permission="CREATE_AUTHORITY_IMPORT_QUEUE UPDATE_AUTHORITY_IMPORT_QUEUE DELETE_AUTHORITY_IMPORT_QUEUE" global_required="true"/>
				<update permission="UPDATE_AUTHORITY_IMPORT_QUEUE" global_required="true"/>
				<delete permission="DELETE_AUTHORITY_IMPORT_QUEUE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="vms" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::match_set" oils_persist:tablename="vandelay.match_set" reporter:label="Record Matching Definition Set">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.match_set_id_seq">
			<field reporter:label="Match Set ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Owning Library" name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Match Set Type" name="mtype" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_IMPORT_MATCH_SET" context_field="owner"/>
				<retrieve permission="ADMIN_IMPORT_MATCH_SET VIEW_IMPORT_MATCH_SET" context_field="owner"/>
				<update permission="ADMIN_IMPORT_MATCH_SET" context_field="owner"/>
				<delete permission="ADMIN_IMPORT_MATCH_SET" context_field="owner"/>
			</actions>
		</permacrud>
	</class>

	<class id="vmsp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::match_set_point" oils_persist:tablename="vandelay.match_set_point" reporter:label="Record Matching Definition">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.match_set_point_id_seq">
			<field reporter:label="Match Definition ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Expression Tree Parent" name="parent" reporter:datatype="link"/>
			<field reporter:label="Match Set" name="match_set" reporter:datatype="link"/>
			<field reporter:label="Boolean Operator" name="bool_op" reporter:datatype="text"/>
			<field reporter:label="Coded Field" name="svf" reporter:datatype="link"/>
			<field reporter:label="Tag" name="tag" reporter:datatype="text"/>
			<field reporter:label="Subfield" name="subfield" reporter:datatype="text"/>
			<field reporter:label="Negate" name="negate" reporter:datatype="bool"/>
			<field reporter:label="Importance" name="quality" reporter:datatype="int"/>
			<field reporter:label="Expression Tree Children" name="children" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Authority Heading" name="heading" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="parent" reltype="has_a" key="id" map="" class="vmsp"/>
			<link field="match_set" reltype="has_a" key="id" map="" class="vms"/>
			<link field="svf" reltype="has_a" key="id" map="" class="crad"/>
			<link field="children" reltype="has_many" key="parent" map="" class="vmsp"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_IMPORT_MATCH_SET">
					<context link="match_set" field="owner"/>
				</create>
				<retrieve permission="ADMIN_IMPORT_MATCH_SET VIEW_IMPORT_MATCH_SET">
					<context link="match_set" field="owner"/>
				</retrieve>
				<update permission="ADMIN_IMPORT_MATCH_SET">
					<context link="match_set" field="owner"/>
				</update>
				<delete permission="ADMIN_IMPORT_MATCH_SET">
					<context link="match_set" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="vmsq" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::match_set_quality" oils_persist:tablename="vandelay.match_set_quality" reporter:label="Record Quality Metric">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.match_set_quality_id_seq">
			<field reporter:label="Quality Metric ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Match Set" name="match_set" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Record Attribute" name="svf" reporter:datatype="text"/>
			<field reporter:label="Tag" name="tag" reporter:datatype="text"/>
			<field reporter:label="Subfield" name="subfield" reporter:datatype="text"/>
			<field reporter:label="Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Quality" name="quality" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="match_set" reltype="has_a" key="id" map="" class="vms"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_IMPORT_MATCH_SET">
					<context link="match_set" field="owner"/>
				</create>
				<retrieve permission="ADMIN_IMPORT_MATCH_SET">
					<context link="match_set" field="owner"/>
				</retrieve>
				<update permission="ADMIN_IMPORT_MATCH_SET">
					<context link="match_set" field="owner"/>
				</update>
				<delete permission="ADMIN_IMPORT_MATCH_SET">
					<context link="match_set" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="vst" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="vandelay::session_tracker" oils_persist:tablename="vandelay.session_tracker" reporter:label="Vandelay Session Tracker">
		<fields oils_persist:primary="id" oils_persist:sequence="vandelay.session_tracker_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Session Key" name="session_key" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Workstation" name="workstation" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Record Type" name="record_type" reporter:datatype="text"/>
			<!-- queue doesn't use datatype 'link' because it may refer to a bib
				 queue or an auth queue and there's no IDL class for vandelay.queue .
				 parent table.
			-->
			<field reporter:label="Source Queue" name="queue" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Create Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Update Time" name="update_time" reporter:datatype="timestamp"/>
			<field reporter:label="State" name="state" reporter:datatype="text"/>
			<field reporter:label="Action Type" name="action_type" reporter:datatype="text"/>
			<field reporter:label="Total Actions" name="total_actions" reporter:datatype="int"/>
			<field reporter:label="Actions Performed" name="actions_performed" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="workstation" reltype="has_a" key="id" map="" class="aws"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<!-- created by the API -->
				<retrieve global_required="true" permission="CREATE_BIB_IMPORT_QUEUE CREATE_AUTHORITY_IMPORT_QUEUE"/>
				<update global_required="true" permission="UPDATE_BIB_IMPORT_QUEUE UPDATE_AUTHORITY_IMPORT_QUEUE">
					<context link="workstation" field="owning_lib"/>
				</update>
				<delete permission="DELETE_BIB_IMPORT_QUEUE DELETE_AUTHORITY_IMPORT_QUEUE">
					<context link="workstation" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="auoi" controller="open-ils.cstore" oils_obj:fieldmapper="actor::usr_org_unit_opt_in" oils_persist:tablename="actor.usr_org_unit_opt_in" reporter:label="User Sharing Opt-in">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.usr_org_unit_opt_in_id_seq">
			<field reporter:label="Opt-in ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Workstation" name="opt_in_ws" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Staff Member" name="staff" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Allowed Org Unit" name="org_unit" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Opt-in Date/Time" name="opt_in_ts" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="opt_in_ws" reltype="has_a" key="id" map="" class="aws"/>
		</links>
	</class>

	<class id="cgf" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::global_flag" oils_persist:tablename="config.global_flag" reporter:label="Global Flags and Settings" oils_persist:field_safe="true">
		<fields oils_persist:primary="name">
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Value" name="value" reporter:datatype="text"/>
			<field reporter:label="Enabled" name="enabled" reporter:datatype="bool"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_GLOBAL_FLAG" global_required="true"/>
				<retrieve permission="ADMIN_GLOBAL_FLAG" global_required="true"/>
				<update permission="ADMIN_GLOBAL_FLAG" global_required="true"/>
				<delete permission="ADMIN_GLOBAL_FLAG" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="cin" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::index_normalizer" oils_persist:tablename="config.index_normalizer" reporter:label="Indexing Normalizer" oils_persist:field_safe="true">
		<fields oils_persist:primary="id">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Function" name="func" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Required Parameter Count" name="param_count" reporter:datatype="int"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_INDEX_NORMALIZER" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_INDEX_NORMALIZER" global_required="true"/>
				<delete permission="ADMIN_INDEX_NORMALIZER" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="cmfinm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::metabib_field_index_norm_map" oils_persist:tablename="config.metabib_field_index_norm_map" reporter:label="Metabib Field to Indexing Normalizer Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="config.metabib_field_index_norm_map_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Metabib Field" name="field" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Normalizer" name="norm" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Parameters (JSON Array)" name="params" reporter:datatype="text"/>
			<field reporter:label="Order of Application" name="pos" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="field" reltype="has_a" key="id" map="" class="cmf"/>
			<link field="norm" reltype="has_a" key="id" map="" class="cin"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_INDEX_NORMALIZER" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_INDEX_NORMALIZER" global_required="true"/>
				<delete permission="ADMIN_INDEX_NORMALIZER" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="cmrcfmt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::marc_format" oils_persist:tablename="config.marc_format" reporter:label="MARC Formats" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="config.marc_format_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Code" name="code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_TAG_TABLE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_TAG_TABLE" global_required="true"/>
				<delete permission="ADMIN_TAG_TABLE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="cmrcfld" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::marc_field" oils_persist:tablename="config.marc_field" reporter:label="MARC Fields" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="config.marc_field_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="MARC Format" name="marc_format" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="MARC Record Type" name="marc_record_type" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="MARC Tag" name="tag" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Fixed Field?" name="fixed_field" reporter:datatype="bool"/>
			<field reporter:label="Repeatable?" name="repeatable" reporter:datatype="bool"/>
			<field reporter:label="Mandatory?" name="mandatory" reporter:datatype="bool"/>
			<field reporter:label="Hidden?" name="hidden" reporter:datatype="bool"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="org_unit"/>
		</fields>
		<links>
			<link field="marc_format" reltype="has_a" key="id" map="" class="cmrcfmt"/>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_TAG_TABLE" context_field="owner"/>
				<retrieve/>
				<update permission="ADMIN_TAG_TABLE" context_field="owner"/>
				<delete permission="ADMIN_TAG_TABLE" context_field="owner"/>
			</actions>
		</permacrud>
	</class>

	<class id="cmrcsubfld" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::marc_subfield" oils_persist:tablename="config.marc_subfield" reporter:label="MARC Subfields" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="config.marc_subfield_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="MARC Format" name="marc_format" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="MARC Record Type" name="marc_record_type" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="MARC Tag" name="tag" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="MARC Subfield" name="code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Repeatable?" name="repeatable" reporter:datatype="bool"/>
			<field reporter:label="Mandatory?" name="mandatory" reporter:datatype="bool"/>
			<field reporter:label="Hidden?" name="hidden" reporter:datatype="bool"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="org_unit"/>
		</fields>
		<links>
			<link field="marc_format" reltype="has_a" key="id" map="" class="cmrcfmt"/>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_TAG_TABLE" context_field="owner"/>
				<retrieve/>
				<update permission="ADMIN_TAG_TABLE" context_field="owner"/>
				<delete permission="ADMIN_TAG_TABLE" context_field="owner"/>
			</actions>
		</permacrud>
	</class>

	<class id="crad" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::record_attr_definition" oils_persist:tablename="config.record_attr_definition" reporter:label="SVF Record Attribute Defintion" oils_persist:field_safe="true">
		<fields oils_persist:primary="name">
			<field reporter:label="Name" name="name" reporter:datatype="id" reporter:selector="label" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_obj:required="true" oils_persist:i18n="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Multi-valued?" name="multi" reporter:datatype="bool"/>
			<field reporter:label="Filter?" name="filter" reporter:datatype="bool"/>
			<field reporter:label="Sorter?" name="sorter" reporter:datatype="bool"/>
			<field reporter:label="Composite attribute?" name="composite" reporter:datatype="bool"/>
			<field reporter:label="MARC Tag" name="tag" reporter:datatype="text"/>
			<field reporter:label="MARC Subfields" name="sf_list" reporter:datatype="text"/>
			<field reporter:label="Joiner" name="joiner" reporter:datatype="text"/>
			<field reporter:label="XPath" name="xpath" reporter:datatype="text"/>
			<field reporter:label="Format" name="format" reporter:datatype="link"/>
			<field reporter:label="Starting Position" name="start_pos" reporter:datatype="int"/>
			<field reporter:label="String Length" name="string_len" reporter:datatype="int"/>
			<field reporter:label="Fixed Field" name="fixed_field" reporter:datatype="text"/>
			<field reporter:label="Physical Characteristic" name="phys_char_sf" reporter:datatype="text"/>
			<field reporter:label="Vocabulary URI" name="vocabulary" reporter:datatype="text"/>
			<field reporter:label="Normalizers" name="normalizers" reporter:datatype="link" oils_persist:virtual="true"/>
		</fields>
		<links>
			<link field="format" reltype="has_a" key="name" map="" class="cxt"/>
			<link field="normalizers" reltype="has_many" key="name" map="" class="crainm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SVF" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_SVF" global_required="true"/>
				<delete permission="ADMIN_SVF" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="csc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::sms_carrier" oils_persist:tablename="config.sms_carrier" reporter:label="SMS Carrier" oils_persist:field_safe="true" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.sms_carrier_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Region" name="region" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Active" name="active" reporter:datatype="bool"/>
			<field reporter:label="Email Gateway" name="email_gateway" reporter:datatype="text" oils_persist:i18n="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SMS_CARRIER" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_SMS_CARRIER" global_required="true"/>
				<delete permission="ADMIN_SMS_CARRIER" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="ccraed" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::composite_attr_entry_definition" oils_persist:tablename="config.composite_attr_entry_definition" reporter:label="Composite Attribute Definitions" oils_persist:field_safe="true">
		<fields oils_persist:primary="coded_value">
			<field reporter:label="Coded Value" name="coded_value" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Defintion" name="definition" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="coded_value" reltype="has_a" key="id" map="" class="ccvm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CODED_VALUE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_CODED_VALUE" global_required="true"/>
				<delete permission="ADMIN_CODED_VALUE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="murav" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="metabib::uncontrolled_record_attr_value" oils_persist:tablename="metabib.uncontrolled_record_attr_value" reporter:label="Uncontrolled Record Attribute Values" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="metabib.uncontrolled_record_attr_value_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Attribute" name="attr" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="attr" reltype="has_a" key="name" map="" class="crad"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>


	<class id="mrs" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="metabib::record_sorter" oils_persist:tablename="metabib.record_sorter" reporter:label="Record Sort Values" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="metabib.record_sorter_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Bib Record ID" name="source" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Attribute" name="attr" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="source" reltype="has_a" key="id" map="" class="bre"/>
			<link field="attr" reltype="has_a" key="name" map="" class="crad"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>


	<class id="mravl" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="metabib::record_attr_vector_list" oils_persist:tablename="metabib.record_attr_vector_list" reporter:label="MVF Record Attribute Vectors" oils_persist:field_safe="true">
		<fields oils_persist:primary="source">
			<field reporter:label="Record ID" name="source" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Vector" name="vlist" reporter:datatype="text" oils_obj:required="true"/> <!-- Actually an int[], but this is the best we can do in fm_IDL.xml -->
		</fields>
		<links>
			<link field="source" reltype="has_a" key="id" map="" class="bre"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="mraf" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="metabib::record_attr_flat" oils_persist:tablename="metabib.record_attr_flat" reporter:label="MVF Record Attribute Flat List" oils_persist:field_safe="true">
		<fields>
			<field reporter:label="Record ID" name="id" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Attribute" name="attr" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="bre"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="mra" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="metabib::record_attr" oils_persist:tablename="metabib.record_attr" reporter:label="SVF Record Attribute" oils_persist:field_safe="true" oils_persist:readonly="true">
		<fields oils_persist:primary="id">
			<field reporter:label="Record ID" name="id" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Attributes" name="attrs" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="bre"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="crainm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::record_attr_index_norm_map" oils_persist:tablename="config.record_attr_index_norm_map" reporter:label="SVF Record Attribute to Indexing Normalizer Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="config.record_attr_index_norm_map_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="SVF Attribute" name="attr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Normalizer" name="norm" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Parameters (JSON Array)" name="params" reporter:datatype="text"/>
			<field reporter:label="Order of Application" name="pos" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="attr" reltype="has_a" key="name" map="" class="crad"/>
			<link field="norm" reltype="has_a" key="id" map="" class="cin"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_INDEX_NORMALIZER" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_INDEX_NORMALIZER" global_required="true"/>
				<delete permission="ADMIN_INDEX_NORMALIZER" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="ccvm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::coded_value_map" oils_persist:tablename="config.coded_value_map" reporter:label="SVF Record Attribute Coded Value Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="config.coded_value_map_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" oils_obj:required="true" reporter:selector="value"/>
			<field reporter:label="SVF Attribute" name="ctype" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Code" name="code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Value" name="value" reporter:datatype="text" oils_obj:required="true" oils_persist:i18n="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="OPAC Visible" name="opac_visible" reporter:datatype="bool"/>
			<field reporter:label="Search Label" name="search_label" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Is Simple Selector" name="is_simple" reporter:datatype="bool"/>
			<field reporter:label="Concept URI" name="concept_uri" reporter:datatype="text"/>
			<field reporter:label="Composite Definition" name="composite_def" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="ctype" reltype="has_a" key="name" map="" class="crad"/>
			<link field="composite_def" reltype="might_have" key="coded_value" map="" class="ccraed"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CODED_VALUE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_CODED_VALUE" global_required="true"/>
				<delete permission="ADMIN_CODED_VALUE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="cracct" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::remote_account" oils_persist:tablename="config.remote_account" reporter:label="Remote (3rd party) Account">
		<fields oils_persist:primary="id" oils_persist:sequence="config.remote_account_id_seq">
			<field name="id" reporter:datatype="id" reporter:label="ID"/>
			<field name="label" reporter:datatype="text" reporter:label="Label" oils_obj:required="true"/>
			<field name="host" reporter:datatype="text" reporter:label="Host" oils_obj:required="true"/>
			<field name="username" reporter:datatype="text" reporter:label="Username"/>
			<field name="password" reporter:datatype="text" reporter:label="Password"/>
			<field name="account" reporter:datatype="text" reporter:label="Account"/>
			<field name="path" reporter:datatype="text" reporter:label="Path"/>
			<field name="owner" reporter:datatype="link" reporter:label="Owner" oils_obj:required="true"/>
			<field name="last_activity" reporter:datatype="timestamp" reporter:label="Last Activity"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CONFIG_REMOTE_ACCOUNT" context_field="owner"/>
				<retrieve permission="ADMIN_CONFIG_REMOTE_ACCOUNT" context_field="owner"/>
				<update permission="ADMIN_CONFIG_REMOTE_ACCOUNT" context_field="owner"/>
				<delete permission="ADMIN_CONFIG_REMOTE_ACCOUNT" context_field="owner"/>
			</actions>
		</permacrud>
	</class>

	<class id="czs" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::z3950_source" oils_persist:tablename="config.z3950_source" reporter:label="Z39.50 Source" oils_persist:cardinality="low">
		<fields oils_persist:primary="name">
			<field reporter:label="Z39.50 Source" name="name" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Host" name="host" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Port" name="port" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="DB" name="db" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Record Format" name="record_format" reporter:datatype="text"/>
			<field reporter:label="Transmission Format" name="transmission_format" reporter:datatype="text"/>
			<field reporter:label="Auth" name="auth" reporter:datatype="bool"/>
			<field reporter:label="Attrs" name="attrs" oils_persist:virtual="true" reporter:datatype="link" config_field="true"/>
			<field reporter:label="Use Permission" name="use_perm" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="attrs" reltype="has_many" key="source" map="" class="cza"/>
			<link field="use_perm" reltype="has_a" key="id" map="" class="ppl"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_Z3950_SOURCE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_Z3950_SOURCE" global_required="true"/>
				<delete permission="ADMIN_Z3950_SOURCE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="cza" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::z3950_attr" oils_persist:tablename="config.z3950_attr" reporter:label="Z39.50 Attribute" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.z3950_attr_id_seq">
			<field reporter:label="Z39.50 Attribute ID" name="id" reporter:datatype="id" reporter:selector="label"/>
			<field reporter:label="Z39.50 Source" name="source" reporter:datatype="link" config_field="true" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Code" name="code" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Format" name="format" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Truncation" name="truncation" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="source" reltype="has_a" key="name" map="" class="czs"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_Z3950_SOURCE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_Z3950_SOURCE" global_required="true"/>
				<delete permission="ADMIN_Z3950_SOURCE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="czifm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::z3950_index_field_map" oils_persist:tablename="config.z3950_index_field_map" reporter:label="Z39.50 Index Field Map">
		<fields oils_persist:primary="id" oils_persist:sequence="config.z3950_index_field_map_id_seq">
			<field reporter:label="Map ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Metabib Field" name="metabib_field" reporter:datatype="link"/>
			<field reporter:label="Record Attribute" name="record_attr" reporter:datatype="link"/>
			<field reporter:label="Z39.50 Attribute" name="z3950_attr" reporter:datatype="link"/>
			<field reporter:label="Z39.50 Attribute Type" name="z3950_attr_type" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="metabib_field" reltype="has_a" key="id" map="" class="cmf"/>
			<link field="record_attr" reltype="has_a" key="name" map="" class="crad"/>
			<link field="z3950_attr" reltype="has_a" key="id" map="" class="cza"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_Z3950_SOURCE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_Z3950_SOURCE" global_required="true"/>
				<delete permission="ADMIN_Z3950_SOURCE" global_required="true"/>
			</actions>
		</permacrud>
	</class>


	<class id="ateo" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action_trigger::event_output" oils_persist:tablename="action_trigger.event_output" reporter:label="Event Output">
		<fields oils_persist:primary="id" oils_persist:sequence="action_trigger.event_output_id_seq">
			<field reporter:label="Output ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Create Date/Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Data" name="data" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Is Error" name="is_error" reporter:datatype="bool"/>
			<field reporter:label="Events" name="events" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Error Events" name="error_events" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Output Locale" name="locale" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="events" reltype="has_many" key="template_output" map="" class="atev"/>
			<link field="error_events" reltype="has_many" key="error_output" map="" class="atev"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
				<delete permission="ADMIN_TRIGGER_TEMPLATE_OUTPUT DELETE_TRIGGER_TEMPLATE_OUTPUT" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="ath" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action_trigger::hook" oils_persist:tablename="action_trigger.hook" reporter:label="Trigger Hook Point">
		<fields oils_persist:primary="key">
			<field reporter:label="Hook Key" name="key" reporter:datatype="text" reporter:selector="key" oils_obj:required="true"/>
			<field reporter:label="Core Type" name="core_type" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Passive" name="passive" reporter:datatype="bool"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_TRIGGER_HOOK CREATE_TRIGGER_HOOK" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_TRIGGER_HOOK UPDATE_TRIGGER_HOOK" global_required="true"/>
				<delete permission="ADMIN_TRIGGER_HOOK DELETE_TRIGGER_HOOK" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="atcol" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action_trigger::collector" oils_persist:tablename="action_trigger.collector" reporter:label="Trigger Environment Collector">
		<fields oils_persist:primary="module">
			<field reporter:label="Module Name" name="module" reporter:datatype="text" reporter:selector="module" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="atval" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action_trigger::validator" oils_persist:tablename="action_trigger.validator" reporter:label="Trigger Condition Validator">
		<fields oils_persist:primary="module">
			<field reporter:label="Module Name" name="module" reporter:datatype="text" reporter:selector="module" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_TRIGGER_VALIDATOR CREATE_TRIGGER_VALIDATOR" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_TRIGGER_VALIDATOR UPDATE_TRIGGER_VALIDATOR" global_required="true"/>
				<delete permission="ADMIN_TRIGGER_VALIDATOR DELETE_TRIGGER_VALIDATOR" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="atreact" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action_trigger::reactor" oils_persist:tablename="action_trigger.reactor" reporter:label="Trigger Event Reactor">
		<fields oils_persist:primary="module">
			<field reporter:label="Module Name" name="module" reporter:datatype="text" reporter:selector="module" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_TRIGGER_REACTOR CREATE_TRIGGER_REACTOR" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_TRIGGER_REACTOR UPDATE_TRIGGER_REACTOR" global_required="true"/>
				<delete permission="ADMIN_TRIGGER_REACTOR DELETE_TRIGGER_REACTOR" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="atclean" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action_trigger::cleanup" oils_persist:tablename="action_trigger.cleanup" reporter:label="Trigger Event Cleanup">
		<fields oils_persist:primary="module">
			<field reporter:label="Module Name" name="module" reporter:datatype="text" reporter:selector="module" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_TRIGGER_CLEANUP CREATE_TRIGGER_CLEANUP" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_TRIGGER_CLEANUP UPDATE_TRIGGER_CLEANUP" global_required="true"/>
				<delete permission="ADMIN_TRIGGER_CLEANUP DELETE_TRIGGER_CLEANUP" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="atenv" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action_trigger::environment" oils_persist:tablename="action_trigger.environment" reporter:label="Trigger Event Environment Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="action_trigger.environment_id_seq">
			<field reporter:label="Environment ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Event Definition" name="event_def" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Field Path" name="path" reporter:datatype="text"/>
			<field reporter:label="Collector" name="collector" reporter:datatype="link"/>
			<field reporter:label="Label" name="label" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="event_def" reltype="has_a" key="id" map="" class="atevdef"/>
			<link field="collector" reltype="has_a" key="id" map="" class="atcol"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_TRIGGER_EVENT_DEF CREATE_TRIGGER_EVENT_DEF">
					<context link="event_def" field="owner"/>
				</create>
				<retrieve permission="ADMIN_TRIGGER_EVENT_DEF VIEW_TRIGGER_EVENT_DEF">
					<context link="event_def" field="owner"/>
				</retrieve>
				<update permission="ADMIN_TRIGGER_EVENT_DEF UPDATE_TRIGGER_EVENT_DEF">
					<context link="event_def" field="owner"/>
				</update>
				<delete permission="ADMIN_TRIGGER_EVENT_DEF DELETE_TRIGGER_EVENT_DEF">
					<context link="event_def" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="atevdef" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action_trigger::event_definition" oils_persist:tablename="action_trigger.event_definition" reporter:label="Trigger Event Definition">
		<fields oils_persist:primary="id" oils_persist:sequence="action_trigger.event_definition_id_seq">
			<field reporter:label="Definition ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Enabled" name="active" reporter:datatype="bool"/>
			<field reporter:label="Owning Library" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Hook" name="hook" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Validator" name="validator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Reactor" name="reactor" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Success Cleanup" name="cleanup_success" reporter:datatype="link"/>
			<field reporter:label="Failure Cleanup" name="cleanup_failure" reporter:datatype="link"/>
			<field reporter:label="Processing Delay" name="delay" reporter:datatype="interval"/>
			<field reporter:label="Max Event Validity Delay" name="max_delay" reporter:datatype="interval"/>
			<field reporter:label="Processing Delay Context Field" name="delay_field" reporter:datatype="text"/>
			<field reporter:label="Processing Group Context Field" name="group_field" reporter:datatype="text"/>
			<field reporter:label="Template" name="template" reporter:datatype="text"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Granularity" name="granularity" reporter:datatype="text"/>
			<field reporter:label="Opt-In User Field" name="usr_field" reporter:datatype="text"/>
			<field reporter:label="Opt-In Setting Type" name="opt_in_setting" reporter:datatype="link"/>
			<field reporter:label="Event Repeatability Delay" name="repeat_delay" reporter:datatype="interval"/>
			<field reporter:label="Message Template" name="message_template" reporter:datatype="text"/>
			<field reporter:label="Message Title" name="message_title" reporter:datatype="text"/>
			<field reporter:label="Message User Path" name="message_usr_path" reporter:datatype="text"/>
			<field reporter:label="Message Library Path" name="message_library_path" reporter:datatype="text"/>
			<field reporter:label="Environment Entries" name="env" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Parameters" name="params" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Retention Interval" name="retention_interval" reporter:datatype="interval"/>
			<field reporter:label="Context User Path" name="context_usr_path" reporter:datatype="text"/>
			<field reporter:label="Context Library Path" name="context_library_path" reporter:datatype="text"/>
			<field reporter:label="Context Bib Path" name="context_bib_path" reporter:datatype="text"/>
			<field reporter:label="Context Item Path" name="context_item_path" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="hook" reltype="has_a" key="key" map="" class="ath"/>
			<link field="validator" reltype="has_a" key="module" map="" class="atval"/>
			<link field="reactor" reltype="has_a" key="module" map="" class="atreact"/>
			<link field="cleanup_success" reltype="has_a" key="module" map="" class="atclean"/>
			<link field="cleanup_failure" reltype="has_a" key="module" map="" class="atclean"/>
			<link field="env" reltype="has_many" key="event_def" map="" class="atenv"/>
			<link field="params" reltype="has_many" key="event_def" map="" class="atevparam"/>
			<link field="opt_in_setting" reltype="has_a" key="name" map="" class="cust"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_TRIGGER_EVENT_DEF CREATE_TRIGGER_EVENT_DEF" context_field="owner"/>
				<retrieve permission="ADMIN_TRIGGER_EVENT_DEF VIEW_TRIGGER_EVENT_DEF" context_field="owner"/>
				<update permission="ADMIN_TRIGGER_EVENT_DEF UPDATE_TRIGGER_EVENT_DEF" context_field="owner"/>
				<delete permission="ADMIN_TRIGGER_EVENT_DEF DELETE_TRIGGER_EVENT_DEF" context_field="owner"/>
			</actions>
		</permacrud>
	</class>

	<class id="atevalt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action_trigger::alternate_template" oils_persist:tablename="action_trigger.alternate_template" reporter:label="Alternate Action Trigger Templates">
		<fields oils_persist:primary="id" oils_persist:sequence="action_trigger.alternate_template_id_seq">
			<field reporter:label="Alternate Template ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Enabled" name="active" reporter:datatype="bool"/>
			<field reporter:label="Template" name="template" reporter:datatype="text"/>
			<field reporter:label="Template Locale" name="locale" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Message Title" name="message_title" reporter:datatype="text"/>
			<field reporter:label="Message Template" name="message_template" reporter:datatype="text"/>
			<field reporter:label="Event Definition" name="event_def" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="event_def" reltype="has_a" key="id" map="" class="atevdef"/>
			<link field="locale" reltype="has_a" key="code" map="" class="i18n_l"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_TRIGGER_EVENT_DEF CREATE_TRIGGER_EVENT_DEF">
					<context link="event_def" field="owner"/>
				</create>
				<retrieve permission="ADMIN_TRIGGER_EVENT_DEF VIEW_TRIGGER_EVENT_DEF">
					<context link="event_def" field="owner"/>
				</retrieve>
				<update permission="ADMIN_TRIGGER_EVENT_DEF UPDATE_TRIGGER_EVENT_DEF">
					<context link="event_def" field="owner"/>
				</update>
				<delete permission="ADMIN_TRIGGER_EVENT_DEF DELETE_TRIGGER_EVENT_DEF">
					<context link="event_def" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>


	<class id="atevdefg" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action_trigger::event_def_group" oils_persist:tablename="action_trigger.event_def_group" reporter:label="Trigger Event Definition Group" oils_persist:restrict_primary="100">
		<fields oils_persist:primary="id" oils_persist:sequence="action_trigger.event_def_group_id_seq">
			<field reporter:label="Group ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Enabled" name="active" reporter:datatype="bool"/>
			<field reporter:label="Owning Library" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Hook" name="hook" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Members" name="members" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="hook" reltype="has_a" key="key" map="" class="ath"/>
			<link field="members" reltype="has_many" key="grp" map="" class="atevdefgm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_TRIGGER_EVENT_DEF CREATE_TRIGGER_EVENT_DEF" context_field="owner"/>
				<retrieve permission="ADMIN_TRIGGER_EVENT_DEF VIEW_TRIGGER_EVENT_DEF" context_field="owner"/>
				<update permission="ADMIN_TRIGGER_EVENT_DEF UPDATE_TRIGGER_EVENT_DEF" context_field="owner"/>
				<delete permission="ADMIN_TRIGGER_EVENT_DEF DELETE_TRIGGER_EVENT_DEF" context_field="owner"/>
			</actions>
		</permacrud>
	</class>

	<class id="atevdefgm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action_trigger::event_def_group_member" oils_persist:tablename="action_trigger.event_def_group_member" reporter:label="Trigger Event Definition Group Member">
		<fields oils_persist:primary="id" oils_persist:sequence="action_trigger.event_def_group_member_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Group" name="grp" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Event Definition" name="event_def" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Sortable" name="sortable" reporter:datatype="bool"/>
			<field reporter:label="Include Holdings" name="holdings" reporter:datatype="bool"/>
			<field reporter:label="Externally Processed" name="external" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="grp" reltype="has_a" key="id" map="" class="atevdefg"/>
			<link field="event_def" reltype="has_a" key="id" map="" class="atevdef"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_TRIGGER_EVENT_DEF CREATE_TRIGGER_EVENT_DEF">
					<context link="grp" field="owner"/>
				</create>
				<retrieve permission="ADMIN_TRIGGER_EVENT_DEF VIEW_TRIGGER_EVENT_DEF">
					<context link="grp" field="owner"/>
				</retrieve>
				<update permission="ADMIN_TRIGGER_EVENT_DEF UPDATE_TRIGGER_EVENT_DEF">
					<context link="grp" field="owner"/>
				</update>
				<delete permission="ADMIN_TRIGGER_EVENT_DEF DELETE_TRIGGER_EVENT_DEF">
					<context link="grp" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="atev" controller="open-ils.cstore" oils_obj:fieldmapper="action_trigger::event" oils_persist:tablename="action_trigger.event" reporter:label="Trigger Event Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="action_trigger.event_id_seq">
			<field reporter:label="Event ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Target ID" name="target" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Event Definition" name="event_def" reporter:datatype="link"/>
			<field reporter:label="Add Time" name="add_time" reporter:datatype="timestamp"/>
			<field reporter:label="Run Time" name="run_time" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Start Time" name="start_time" reporter:datatype="timestamp"/>
			<field reporter:label="Update Time" name="update_time" reporter:datatype="timestamp"/>
			<field reporter:label="Complete Time" name="complete_time" reporter:datatype="timestamp"/>
			<field reporter:label="State" name="state" reporter:datatype="text"/>
			<field reporter:label="User Data" name="user_data" reporter:datatype="text"/>
			<field reporter:label="Template Output" name="template_output" reporter:datatype="link"/>
			<field reporter:label="Error Output" name="error_output" reporter:datatype="text"/>
			<field reporter:label="Asynchronous Output" name="async_output" reporter:datatype="link"/>
			<field reporter:label="Update Process" name="update_process" reporter:datatype="int"/>
			<field reporter:label="Context User" name="context_user" reporter:datatype="link"/>
			<field reporter:label="Context Library" name="context_library" reporter:datatype="link"/>
			<field reporter:label="Context Bib" name="context_bib" reporter:datatype="link"/>
			<field reporter:label="Context Item" name="context_item" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="event_def" reltype="has_a" key="id" map="" class="atevdef"/>
			<link field="template_output" reltype="has_a" key="id" map="" class="ateo"/>
			<link field="error_output" reltype="has_a" key="id" map="" class="ateo"/>
			<link field="async_output" reltype="has_a" key="id" map="" class="ateo"/>
			<link field="context_user" reltype="has_a" key="id" map="" class="au"/>
			<link field="context_library" reltype="has_a" key="id" map="" class="aou"/>
			<link field="context_bib" reltype="has_a" key="id" map="" class="bre"/>
			<link field="context_item" reltype="has_a" key="id" map="" class="acp"/>
		</links>
	</class>

	<class id="atevparam" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action_trigger::event_param" oils_persist:tablename="action_trigger.event_params" reporter:label="Trigger Event Parameter">
		<fields oils_persist:primary="id" oils_persist:sequence="action_trigger.event_params_id_seq">
			<field reporter:label="Parameter ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Event Definition" name="event_def" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Parameter Name" name="param" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Parameter Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="event_def" reltype="has_a" key="id" map="" class="atevdef"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_TRIGGER_EVENT_DEF CREATE_TRIGGER_EVENT_DEF">
					<context link="event_def" field="owner"/>
				</create>
				<retrieve permission="ADMIN_TRIGGER_EVENT_DEF VIEW_TRIGGER_EVENT_DEF">
					<context link="event_def" field="owner"/>
				</retrieve>
				<update permission="ADMIN_TRIGGER_EVENT_DEF UPDATE_TRIGGER_EVENT_DEF">
					<context link="event_def" field="owner"/>
				</update>
				<delete permission="ADMIN_TRIGGER_EVENT_DEF DELETE_TRIGGER_EVENT_DEF">
					<context link="event_def" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="atul" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action_trigger::user_log" reporter:label="Action Trigger User Log" oils_persist:readonly="true">
		<oils_persist:source_definition><![CDATA[
		SELECT	atevdef.hook,
			atevdef.name,
			atevdef.reactor,
			atev.id,
			atev.event_def,
			atev.add_time,
			atev.run_time,
			atev.start_time,
			atev.update_time,
			atev.complete_time,
			atev.update_process,
			atev.state,
			atev.user_data,
			atev.template_output,
			atev.error_output,
			atev.async_output,
			targ_circ.id AS target_circ,
			targ_ahr.id AS target_hold,
			COALESCE(
				targ_circ.circ_lib,
				targ_ahr.pickup_lib
			) AS perm_lib
		FROM action_trigger.event atev
		JOIN action_trigger.event_definition atevdef ON
			(atevdef.id = atev.event_def)
		JOIN action_trigger.hook ath ON
			(ath.key = atevdef.hook)
		LEFT JOIN action.circulation targ_circ ON
			(ath.core_type = 'circ' AND targ_circ.id = atev.target)
		LEFT JOIN action.hold_request targ_ahr ON
			(ath.core_type = 'ahr' AND targ_ahr.id = atev.target)
		WHERE atev.add_time > NOW() - (SELECT MIN(value) FROM (
			SELECT value::INTERVAL FROM actor.org_unit_ancestor_setting(
				'circ.staff.max_visible_event_age',
				COALESCE(targ_circ.circ_lib, targ_ahr.pickup_lib)
			) UNION
			SELECT '1000 YEARS'::INTERVAL AS value
		) ous)
		]]></oils_persist:source_definition>
		<fields oils_persist:primary="id">
			<field reporter:label="Hook" name="hook" reporter:datatype="link"/>
			<field reporter:label="Name" name="name" reporter:datatype="text"/>
			<field reporter:label="Reactor" name="reactor" reporter:datatype="text"/>
			<field reporter:label="Event ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Event Definition ID" name="event_def" reporter:datatype="int"/>
			<field reporter:label="Event Add Time" name="add_time" reporter:datatype="timestamp"/>
			<field reporter:label="Event Run Time" name="run_time" reporter:datatype="timestamp"/>
			<field reporter:label="Event Start Time" name="start_time" reporter:datatype="timestamp"/>
			<field reporter:label="Event Update Time" name="update_time" reporter:datatype="timestamp"/>
			<field reporter:label="Event Complete Time" name="complete_time" reporter:datatype="timestamp"/>
			<field reporter:label="Event Update PID" name="update_process" reporter:datatype="int"/>
			<field reporter:label="Event State" name="state" reporter:datatype="text"/>
			<field reporter:label="Event User Data" name="user_data" reporter:datatype="text"/>
			<field reporter:label="Event Template Output" name="template_output" reporter:datatype="link"/>
			<field reporter:label="Event Error Output" name="error_output" reporter:datatype="link"/>
			<field reporter:label="Event Async Output" name="async_output" reporter:datatype="link"/>
			<field reporter:label="Target Circulation" name="target_circ" reporter:datatype="link"/>
			<field reporter:label="Target Hold" name="target_hold" reporter:datatype="link"/>
			<field reporter:label="Permission Context" name="perm_lib" reporter:datatype="org_unit"/>
		</fields>
		<links>
			<link field="hook" reltype="has_a" key="key" map="" class="ath"/>
			<link field="template_output" reltype="has_a" key="id" map="" class="ateo"/>
			<link field="error_output" reltype="has_a" key="id" map="" class="ateo"/>
			<link field="async_output" reltype="has_a" key="id" map="" class="ateo"/>
			<link field="target_circ" reltype="has_a" key="id" map="" class="circ"/>
			<link field="target_hold" reltype="has_a" key="id" map="" class="ahr"/>
			<link field="perm_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_TRIGGER_EVENT" context_field="perm_lib"/>
			</actions>
		</permacrud>
	</class>

	<class id="atoul" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action_trigger::optimized_user_log" reporter:label="Action Trigger Optimized User Log" oils_persist:readonly="true">
		<oils_persist:source_definition><![CDATA[
		SELECT	atevdef.hook,
			atevdef.name,
			atevdef.reactor,
			atev.id,
			atev.event_def,
			atev.add_time,
			atev.run_time,
			atev.start_time,
			atev.update_time,
			atev.complete_time,
			atev.update_process,
			atev.state,
			atev.user_data,
			atev.template_output,
			atev.error_output,
			atev.async_output,
			atev.target,
			CASE WHEN ath.core_type = 'circ' THEN atev.target END AS target_circ,
			CASE WHEN ath.core_type = 'ahr' THEN atev.target END AS target_hold,
			atev.context_user,
			atev.context_library,
			atev.context_bib,
			atev.context_item,
			rssr.title,
			rssr.author
		FROM action_trigger.event atev
		JOIN action_trigger.event_definition atevdef ON
			(atevdef.id = atev.event_def)
		JOIN action_trigger.hook ath ON
			(ath.key = atevdef.hook AND ath.core_type IN ('circ','ahr'))
		LEFT JOIN reporter.super_simple_record rssr ON
			(atev.context_bib = rssr.id)
		WHERE atev.add_time > NOW() - (SELECT MIN(value) FROM (
			SELECT value::INTERVAL FROM actor.org_unit_ancestor_setting(
				'circ.staff.max_visible_event_age',
				atev.context_library
			) UNION
			SELECT '1000 YEARS'::INTERVAL AS value
		) ous)
		]]></oils_persist:source_definition>
		<fields oils_persist:primary="id">
			<field reporter:label="Hook" name="hook" reporter:datatype="link"/>
			<field reporter:label="Name" name="name" reporter:datatype="text"/>
			<field reporter:label="Reactor" name="reactor" reporter:datatype="text"/>
			<field reporter:label="Event ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Event Definition ID" name="event_def" reporter:datatype="int"/>
			<field reporter:label="Event Add Time" name="add_time" reporter:datatype="timestamp"/>
			<field reporter:label="Event Run Time" name="run_time" reporter:datatype="timestamp"/>
			<field reporter:label="Event Start Time" name="start_time" reporter:datatype="timestamp"/>
			<field reporter:label="Event Update Time" name="update_time" reporter:datatype="timestamp"/>
			<field reporter:label="Event Complete Time" name="complete_time" reporter:datatype="timestamp"/>
			<field reporter:label="Event Update PID" name="update_process" reporter:datatype="int"/>
			<field reporter:label="Event State" name="state" reporter:datatype="text"/>
			<field reporter:label="Event User Data" name="user_data" reporter:datatype="text"/>
			<field reporter:label="Event Template Output" name="template_output" reporter:datatype="link"/>
			<field reporter:label="Event Error Output" name="error_output" reporter:datatype="link"/>
			<field reporter:label="Event Async Output" name="async_output" reporter:datatype="link"/>
			<field reporter:label="Event Target Object ID" name="target" reporter:datatype="link"/>
			<field reporter:label="Target Circulation" name="target_circ" reporter:datatype="link"/>
			<field reporter:label="Target Hold" name="target_hold" reporter:datatype="link"/>
			<field reporter:label="Context User" name="context_user" reporter:datatype="link"/>
			<field reporter:label="Context Library" name="context_library" reporter:datatype="org_unit"/>
			<field reporter:label="Context Bib" name="context_bib" reporter:datatype="link"/>
			<field reporter:label="Context Item" name="context_item" reporter:datatype="link"/>
			<field reporter:label="Title" name="title" reporter:datatype="text"/>
			<field reporter:label="Author" name="author" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="hook" reltype="has_a" key="key" map="" class="ath"/>
			<link field="template_output" reltype="has_a" key="id" map="" class="ateo"/>
			<link field="error_output" reltype="has_a" key="id" map="" class="ateo"/>
			<link field="async_output" reltype="has_a" key="id" map="" class="ateo"/>
			<link field="target_circ" reltype="has_a" key="id" map="" class="circ"/>
			<link field="target_hold" reltype="has_a" key="id" map="" class="ahr"/>
			<link field="context_user" reltype="has_a" key="id" map="" class="au"/>
			<link field="context_library" reltype="has_a" key="id" map="" class="aou"/>
			<link field="context_bib" reltype="has_a" key="id" map="" class="bre"/>
			<link field="context_item" reltype="has_a" key="id" map="" class="acp"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_TRIGGER_EVENT" context_field="context_library"/>
			</actions>
		</permacrud>
	</class>

	<class id="aws" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::workstation" oils_persist:tablename="actor.workstation" reporter:label="Workstation">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.workstation_id_seq">
			<field reporter:label="Workstation ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Workstation Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Toolbars" name="toolbars" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Circulations" name="circulations" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="toolbars" reltype="has_many" key="ws" map="" class="atb"/>
			<link field="circulations" reltype="has_many" key="workstation" map="" class="circ"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="STAFF_LOGIN" context_field="owning_lib"/>
			</actions>
		</permacrud>
	</class>

	<class id="ccm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::circ_modifier" oils_persist:tablename="config.circ_modifier" reporter:label="Circulation Modifier" oils_persist:cardinality="low">
		<fields oils_persist:primary="code">
			<field reporter:label="Code" name="code" reporter:selector="name" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="SIP2 Media Type" name="sip2_media_type" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Magnetic Media" name="magnetic_media" reporter:datatype="bool"/>
			<field reporter:label="Average Wait Time" name="avg_wait_time" reporter:datatype="interval"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CIRC_MOD" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_CIRC_MOD" global_required="true"/>
				<delete permission="ADMIN_CIRC_MOD" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="aiit" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::invoice_item_type" oils_persist:tablename="acq.invoice_item_type" reporter:label="Non-bibliographic Invoice Item Type" oils_persist:field_safe="true" oils_persist:cardinality="low">
		<fields oils_persist:primary="code">
			<field reporter:label="Code" name="code" reporter:selector="name" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Label" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Prorate?" name="prorate" reporter:datatype="bool"/>
			<field reporter:label="Blanket?" name="blanket" reporter:datatype="bool"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_INVOICE_ITEM_TYPE" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_INVOICE_ITEM_TYPE" global_required="true"/>
				<delete permission="DELETE_INVOICE_ITEM_TYPE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqim" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::invoice_method" oils_persist:tablename="acq.invoice_method" reporter:label="Invoice Method used by Vendor" oils_persist:field_safe="true">
		<fields oils_persist:primary="code">
			<field reporter:label="Code" name="code" reporter:selector="name" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Label" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_INVOICE_METHOD CREATE_INVOICE_METHOD" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_INVOICE_METHOD UPDATE_INVOICE_METHOD" global_required="true"/>
				<delete permission="ADMIN_INVOICE_METHOD DELETE_INVOICE_METHOD" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="ccpbt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="container::copy_bucket_type" oils_persist:tablename="container.copy_bucket_type" reporter:label="Item Bucket Type" oils_persist:field_safe="true">
		<fields oils_persist:primary="code">
			<field reporter:label="Code" name="code" reporter:selector="name" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_COPY_BTYPE" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_COPY_BTYPE" global_required="true"/>
				<delete permission="DELETE_COPY_BTYPE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="ccnbt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="container::call_number_bucket_type" oils_persist:tablename="container.call_number_bucket_type" reporter:label="Call Number Bucket Type" oils_persist:field_safe="true">
		<fields oils_persist:primary="code">
			<field reporter:label="Code" name="code" reporter:selector="name" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_CN_BTYPE" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_CN_BTYPE" global_required="true"/>
				<delete permission="DELETE_CN_BTYPE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="bpt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="biblio::peer_type" oils_persist:tablename="biblio.peer_type" reporter:label="Bibliographic Record Peer Type" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="biblio.peer_type_id_seq">
			<field reporter:label="ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_BIB_PTYPE" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_BIB_PTYPE" global_required="true"/>
				<delete permission="DELETE_BIB_PTYPE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="bpbcm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="biblio::peer_bib_copy_map" oils_persist:tablename="biblio.peer_bib_copy_map" reporter:label="Bibliographic Record Peer Item Map">
		<fields oils_persist:primary="id" oils_persist:sequence="biblio.peer_bib_copy_map_id_seq">
			<field reporter:label="ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Peer Type" name="peer_type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Peer Record" name="peer_record" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Target Item" name="target_copy" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="peer_type" reltype="has_a" key="id" map="" class="bpt"/>
			<link field="peer_record" reltype="has_a" key="id" map="" class="bre"/>
			<link field="target_copy" reltype="has_a" key="id" map="" class="acp"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="UPDATE_COPY">
					<context link="target_copy" field="circ_lib"/>
				</create>
				<retrieve/>
				<update permission="UPDATE_COPY">
					<context link="target_copy" field="circ_lib"/>
				</update>
				<delete permission="UPDATE_COPY">
					<context link="target_copy" field="circ_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="cbrebt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="container::biblio_record_entry_bucket_type" oils_persist:tablename="container.biblio_record_entry_bucket_type" reporter:label="Bibliographic Record Bucket Type" oils_persist:field_safe="true">
		<fields oils_persist:primary="code">
			<field reporter:label="Code" name="code" reporter:selector="name" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_BIB_BTYPE" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_BIB_BTYPE" global_required="true"/>
				<delete permission="DELETE_BIB_BTYPE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="cubt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="container::user_bucket_type" oils_persist:tablename="container.user_bucket_type" reporter:label="User Bucket Type" oils_persist:field_safe="true">
		<fields oils_persist:primary="code">
			<field reporter:label="Code" name="code" reporter:selector="name" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_USER_BTYPE" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_USER_BTYPE" global_required="true"/>
				<delete permission="DELETE_USER_BTYPE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="cvrfm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::videorecording_format_map" oils_persist:tablename="config.videorecording_format_map" reporter:label="Videorecording Format" oils_persist:field_safe="true">
		<fields oils_persist:primary="code">
			<field reporter:label="Code" name="code" reporter:selector="value" reporter:datatype="id"/>
			<field reporter:label="Format" name="value" reporter:datatype="text" oils_persist:i18n="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_MARC_CODE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_MARC_CODE" global_required="true"/>
				<delete permission="ADMIN_MARC_CODE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="chmw" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::hold_matrix_weights" oils_persist:tablename="config.hold_matrix_weights" reporter:label="Hold Matrix Weights">
		<fields oils_persist:primary="id" oils_persist:sequence="config.hold_matrix_weights_id_seq">
			<field reporter:label="Hold Weights ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="User Home Library" name="user_home_ou" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Request Library" name="request_ou" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Pickup Library" name="pickup_ou" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Owning Library" name="item_owning_ou" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Item Circ Library" name="item_circ_ou" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="User Permission Group" name="usr_grp" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Requestor Permission Group" name="requestor_grp" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Circulation Modifier" name="circ_modifier" oils_persist:primitive="string" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="MARC Type" name="marc_type" oils_persist:primitive="string" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="MARC Form" name="marc_form" oils_persist:primitive="string" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="MARC Bib Level" name="marc_bib_level" oils_persist:primitive="string" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Videorecording Format" name="marc_vr_format" oils_persist:primitive="string" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Juvenile?" name="juvenile_flag" oils_persist:primitive="string" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Reference?" name="ref_flag" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Item Age &lt;" name="item_age" reporter:datatype="float" oils_obj:required="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_HOLD_MATRIX_MATCHPOINT" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_HOLD_MATRIX_MATCHPOINT" global_required="true"/>
				<delete permission="ADMIN_HOLD_MATRIX_MATCHPOINT" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="ccmw" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::circ_matrix_weights" oils_persist:tablename="config.circ_matrix_weights" reporter:label="Circ Matrix Weights">
		<fields oils_persist:primary="id" oils_persist:sequence="config.circ_matrix_weights_id_seq">
			<field reporter:label="Circ Weights ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Renewal?" name="is_renewal" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Org Unit" name="org_unit" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Item Circ Library" name="copy_circ_lib" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Item Owning Library" name="copy_owning_lib" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="User Home Library" name="user_home_ou" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Permission Group" name="grp" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Circulation Modifier" name="circ_modifier" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Shelving Location" name="copy_location" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="MARC Type" name="marc_type" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="MARC Form" name="marc_form" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="MARC Bib Level" name="marc_bib_level" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Videorecording Format" name="marc_vr_format" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Reference?" name="ref_flag" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Juvenile?" name="juvenile_flag" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="User Age: Lower Bound" name="usr_age_lower_bound" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="User Age: Upper Bound" name="usr_age_upper_bound" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Item Age &lt;" name="item_age" reporter:datatype="float" oils_obj:required="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CIRC_MATRIX_MATCHPOINT" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_CIRC_MATRIX_MATCHPOINT" global_required="true"/>
				<delete permission="ADMIN_CIRC_MATRIX_MATCHPOINT" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="cwa" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::weight_assoc" oils_persist:tablename="config.weight_assoc" reporter:label="Matrix Weight Association">
		<fields oils_persist:primary="id" oils_persist:sequence="config.weight_assoc_id_seq">
			<field reporter:label="Assoc ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Active?" name="active" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Org Unit" name="org_unit" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Circ Weights" name="circ_weights" reporter:datatype="link"/>
			<field reporter:label="Hold Weights" name="hold_weights" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
			<link field="circ_weights" reltype="has_a" key="id" map="" class="ccmw"/>
			<link field="hold_weights" reltype="has_a" key="id" map="" class="chmw"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CIRC_MATRIX_MATCHPOINT ADMIN_HOLD_MATRIX_MATCHPOINT" context_field="org_unit"/>
				<retrieve permission="ADMIN_CIRC_MATRIX_MATCHPOINT ADMIN_HOLD_MATRIX_MATCHPOINT VIEW_CIRC_MATRIX_MATCHPOINT VIEW_HOLD_MATRIX_MATCHPOINT" context_field="org_unit"/>
				<update permission="ADMIN_CIRC_MATRIX_MATCHPOINT ADMIN_HOLD_MATRIX_MATCHPOINT" context_field="org_unit"/>
				<delete permission="ADMIN_CIRC_MATRIX_MATCHPOINT ADMIN_HOLD_MATRIX_MATCHPOINT" context_field="org_unit"/>
			</actions>
		</permacrud>
	</class>

	<class id="chmm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::hold_matrix_matchpoint" oils_persist:tablename="config.hold_matrix_matchpoint" reporter:label="Hold Matrix Matchpoint">
		<fields oils_persist:primary="id" oils_persist:sequence="config.hold_matrix_matchpoint_id_seq">
			<field reporter:label="Matchpoint ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Active?" name="active" reporter:datatype="bool"/>
			<field reporter:label="Strict OU matches?" name="strict_ou_match" reporter:datatype="bool"/>
			<field reporter:label="User Home Library" name="user_home_ou" reporter:datatype="org_unit"/>
			<field reporter:label="Request Library" name="request_ou" reporter:datatype="org_unit"/>
			<field reporter:label="Pickup Library" name="pickup_ou" reporter:datatype="org_unit"/>
			<field reporter:label="Owning Library" name="item_owning_ou" reporter:datatype="org_unit"/>
			<field reporter:label="Item Circ Library" name="item_circ_ou" reporter:datatype="org_unit"/>
			<field reporter:label="User Permission Group" name="usr_grp" reporter:datatype="link"/>
			<field reporter:label="Requestor Permission Group" name="requestor_grp" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Circulation Modifier" name="circ_modifier" oils_persist:primitive="string" reporter:datatype="link"/>
			<field reporter:label="MARC Type" name="marc_type" oils_persist:primitive="string" reporter:datatype="link"/>
			<field reporter:label="MARC Form" name="marc_form" oils_persist:primitive="string" reporter:datatype="link"/>
			<field reporter:label="MARC Bib Level" name="marc_bib_level" oils_persist:primitive="string" reporter:datatype="link"/>
			<field reporter:label="Videorecording Format" name="marc_vr_format" oils_persist:primitive="string" reporter:datatype="link"/>
			<field reporter:label="Reference?" name="ref_flag" reporter:datatype="bool"/>
			<field reporter:label="Item Age &lt;" name="item_age" reporter:datatype="text"/>
			<field reporter:label="Holdable?" name="holdable" reporter:datatype="bool"/>
			<field reporter:label="Range is from Owning Lib?" name="distance_is_from_owner" reporter:datatype="bool"/>
			<field reporter:label="Transit Range" name="transit_range" reporter:datatype="link"/>
			<field reporter:label="Max Holds" name="max_holds" reporter:datatype="int"/>
			<field reporter:label="Max includes Frozen" name="include_frozen_holds" reporter:datatype="bool"/>
			<field reporter:label="Item Age Hold Protection Rule" name="age_hold_protect_rule" reporter:datatype="link"/>
			<field reporter:label="Stop Blocked User?" name="stop_blocked_user" reporter:datatype="bool"/>
			<field name="description" reporter:datatype="text" reporter:label="Description"/>
		</fields>
		<links>
			<link field="user_home_ou" reltype="has_a" key="id" map="" class="aou"/>
			<link field="request_ou" reltype="has_a" key="id" map="" class="aou"/>
			<link field="pickup_ou" reltype="has_a" key="id" map="" class="aou"/>
			<link field="item_owning_ou" reltype="has_a" key="id" map="" class="aou"/>
			<link field="item_circ_ou" reltype="has_a" key="id" map="" class="aou"/>
			<link field="usr_grp" reltype="has_a" key="id" map="" class="pgt"/>
			<link field="requestor_grp" reltype="has_a" key="id" map="" class="pgt"/>
			<link field="circ_modifier" reltype="has_a" key="code" map="" class="ccm"/>
			<link field="marc_type" reltype="has_a" key="code" map="" class="citm"/>
			<link field="marc_form" reltype="has_a" key="code" map="" class="cifm"/>
			<link field="marc_bib_level" reltype="has_a" key="code" map="" class="cblvl"/>
			<link field="marc_vr_format" reltype="has_a" key="code" map="" class="cvrfm"/>
			<link field="age_hold_protect_rule" reltype="has_a" key="id" map="" class="crahp"/>
			<link field="transit_range" reltype="has_a" key="id" map="" class="aout"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_HOLD_MATRIX_MATCHPOINT" global_required="true"/>
				<retrieve permission="ADMIN_HOLD_MATRIX_MATCHPOINT VIEW_HOLD_MATRIX_MATCHPOINT" global_required="true"/>
				<update permission="ADMIN_HOLD_MATRIX_MATCHPOINT" global_required="true"/>
				<delete permission="ADMIN_HOLD_MATRIX_MATCHPOINT" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="ccmm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::circ_matrix_matchpoint" oils_persist:tablename="config.circ_matrix_matchpoint" reporter:label="Circulation Matrix Matchpoint">
		<fields oils_persist:primary="id" oils_persist:sequence="config.circ_matrix_matchpoint_id_seq">
			<field reporter:label="Matchpoint ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Renewal?" name="is_renewal" reporter:datatype="bool"/>
			<field reporter:label="Active?" name="active" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Checkout Library" name="org_unit" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Item Circ Library" name="copy_circ_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Item Owning Library" name="copy_owning_lib" reporter:datatype="org_unit"/>
			<field reporter:label="User Home Library" name="user_home_ou" reporter:datatype="org_unit"/>
			<field reporter:label="Permission Group" name="grp" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Circulation Modifier" name="circ_modifier" oils_persist:primitive="string" reporter:datatype="link"/>
			<field reporter:label="Shelving Location" name="copy_location" reporter:datatype="link"/>
			<field reporter:label="MARC Type" name="marc_type" oils_persist:primitive="string" reporter:datatype="link"/>
			<field reporter:label="MARC Form" name="marc_form" oils_persist:primitive="string" reporter:datatype="link"/>
			<field reporter:label="MARC Bib Level" name="marc_bib_level" oils_persist:primitive="string" reporter:datatype="link"/>
			<field reporter:label="Videorecording Format" name="marc_vr_format" oils_persist:primitive="string" reporter:datatype="link"/>
			<field reporter:label="Reference?" name="ref_flag" reporter:datatype="bool"/>
			<field reporter:label="Juvenile?" name="juvenile_flag" reporter:datatype="bool"/>
			<field reporter:label="User Age: Lower Bound" name="usr_age_lower_bound" reporter:datatype="text"/>
			<field reporter:label="User Age: Upper Bound" name="usr_age_upper_bound" reporter:datatype="text"/>
			<field reporter:label="Item Age &lt;" name="item_age" reporter:datatype="text"/>
			<field reporter:label="Circulate?" name="circulate" reporter:datatype="bool"/>
			<field reporter:label="Duration Rule" name="duration_rule" reporter:datatype="link"/>
			<field reporter:label="Recurring Fine Rule" name="recurring_fine_rule" reporter:datatype="link"/>
			<field reporter:label="Max Fine Rule" name="max_fine_rule" reporter:datatype="link"/>
			<field reporter:label="Hard Due Date" name="hard_due_date" reporter:datatype="link"/>
			<field reporter:label="Renewals Override" name="renewals" reporter:datatype="int"/>
			<field reporter:label="Grace Period Override" name="grace_period" reporter:datatype="interval"/>
			<field reporter:label="Script Test" name="script_test" reporter:datatype="text"/>
			<field name="total_copy_hold_ratio" reporter:datatype="float" reporter:label="Minimum Total Item/Hold Ratio"/>
			<field name="available_copy_hold_ratio" reporter:datatype="float" reporter:label="Minimum Available Item/Hold Ratio"/>
			<field name="description" reporter:datatype="text" reporter:label="Description"/>
			<field name="renew_extends_due_date" reporter:datatype="bool" reporter:label="Early Renewal Extends Due Date"/>
			<field name="renew_extend_min_interval" reporter:datatype="interval" reporter:label="Early Renewal Minimum Duration Interval"/>
		</fields>
		<links>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
			<link field="copy_circ_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="copy_owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="user_home_ou" reltype="has_a" key="id" map="" class="aou"/>
			<link field="grp" reltype="has_a" key="id" map="" class="pgt"/>
			<link field="circ_modifier" reltype="has_a" key="code" map="" class="ccm"/>
			<link field="copy_location" reltype="has_a" key="id" map="" class="acpl"/>
			<link field="marc_type" reltype="has_a" key="code" map="" class="citm"/>
			<link field="marc_form" reltype="has_a" key="code" map="" class="cifm"/>
			<link field="marc_bib_level" reltype="has_a" key="code" map="" class="cblvl"/>
			<link field="marc_vr_format" reltype="has_a" key="code" map="" class="cvrfm"/>
			<link field="duration_rule" reltype="has_a" key="id" map="" class="crcd"/>
			<link field="max_fine_rule" reltype="has_a" key="id" map="" class="crmf"/>
			<link field="recurring_fine_rule" reltype="has_a" key="id" map="" class="crrf"/>
			<link field="hard_due_date" reltype="has_a" key="id" map="" class="chdd"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CIRC_MATRIX_MATCHPOINT" context_field="org_unit"/>
				<retrieve permission="ADMIN_CIRC_MATRIX_MATCHPOINT VIEW_CIRC_MATRIX_MATCHPOINT" context_field="org_unit"/>
				<update permission="ADMIN_CIRC_MATRIX_MATCHPOINT" context_field="org_unit"/>
				<delete permission="ADMIN_CIRC_MATRIX_MATCHPOINT" context_field="org_unit"/>
			</actions>
		</permacrud>
	</class>

	<class id="cclg" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::circ_limit_group" oils_persist:tablename="config.circ_limit_group" reporter:label="Circulation Limit Group" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.circ_limit_group_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CIRC_MATRIX_MATCHPOINT" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_CIRC_MATRIX_MATCHPOINT" global_required="true"/>
				<delete permission="ADMIN_CIRC_MATRIX_MATCHPOINT" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="ccls" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::circ_limit_set" oils_persist:tablename="config.circ_limit_set" reporter:label="Circulation Limit Set" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.circ_limit_set_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Items Out" name="items_out" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Min Depth" name="depth" reporter:datatype="int"/>
			<field reporter:label="Global" name="global" reporter:datatype="bool"/>
			<field reporter:label="Description" name="description" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CIRC_MATRIX_MATCHPOINT" context_field="owning_lib"/>
				<retrieve/>
				<update permission="ADMIN_CIRC_MATRIX_MATCHPOINT" context_field="owning_lib"/>
				<delete permission="ADMIN_CIRC_MATRIX_MATCHPOINT" context_field="owning_lib"/>
			</actions>
		</permacrud>
	</class>

	<class id="ccmlsm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::circ_matrix_limit_set_map" oils_persist:tablename="config.circ_matrix_limit_set_map" reporter:label="Circulation Matrix Limit Set Map">
		<fields oils_persist:primary="id" oils_persist:sequence="config.circ_matrix_limit_set_map_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Matchpoint" name="matchpoint" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Limit Set" name="limit_set" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Fallthrough" name="fallthrough" reporter:datatype="bool"/>
			<field reporter:label="Active" name="active" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="matchpoint" reltype="has_a" key="id" map="" class="ccmm"/>
			<link field="limit_set" reltype="has_a" key="id" map="" class="ccls"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CIRC_MATRIX_MATCHPOINT">
					<context link="matchpoint" field="org_unit"/>
				</create>
				<retrieve/>
				<update permission="ADMIN_CIRC_MATRIX_MATCHPOINT">
					<context link="matchpoint" field="org_unit"/>
				</update>
				<delete permission="ADMIN_CIRC_MATRIX_MATCHPOINT">
					<context link="matchpoint" field="org_unit"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="cclscmm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::circ_limit_set_circ_mod_map" oils_persist:tablename="config.circ_limit_set_circ_mod_map" reporter:label="Circulation Limit Set Circ Mod Map">
		<fields oils_persist:primary="id" oils_persist:sequence="config.circ_limit_set_circ_mod_map_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Limit Set" name="limit_set" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Circulation Modifier" name="circ_mod" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="limit_set" reltype="has_a" key="id" map="" class="ccls"/>
			<link field="circ_mod" reltype="has_a" key="code" map="" class="ccm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CIRC_MATRIX_MATCHPOINT">
					<context link="limit_set" field="owning_lib"/>
				</create>
				<retrieve/>
				<update permission="ADMIN_CIRC_MATRIX_MATCHPOINT">
					<context link="limit_set" field="owning_lib"/>
				</update>
				<delete permission="ADMIN_CIRC_MATRIX_MATCHPOINT">
					<context link="limit_set" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="cclsacpl" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::circ_limit_set_copy_loc_map" oils_persist:tablename="config.circ_limit_set_copy_loc_map" reporter:label="Circulation Limit Set Shelving Location Map">
		<fields oils_persist:primary="id" oils_persist:sequence="config.circ_limit_set_copy_loc_map_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Limit Set" name="limit_set" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Shelving Location" name="copy_loc" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="limit_set" reltype="has_a" key="id" map="" class="ccls"/>
			<link field="copy_loc" reltype="has_a" key="id" map="" class="acpl"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CIRC_MATRIX_MATCHPOINT">
					<context link="limit_set" field="owning_lib"/>
				</create>
				<retrieve/>
				<update permission="ADMIN_CIRC_MATRIX_MATCHPOINT">
					<context link="limit_set" field="owning_lib"/>
				</update>
				<delete permission="ADMIN_CIRC_MATRIX_MATCHPOINT">
					<context link="limit_set" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="cclsgm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::circ_limit_set_group_map" oils_persist:tablename="config.circ_limit_set_group_map" reporter:label="Circulation Limit Set Group Map">
		<fields oils_persist:primary="id" oils_persist:sequence="config.circ_limit_set_group_map_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Limit Set" name="limit_set" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Limit Group" name="limit_group" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Check Only" name="check_only" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="limit_set" reltype="has_a" key="id" map="" class="ccls"/>
			<link field="limit_group" reltype="has_a" key="id" map="" class="cclg"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CIRC_MATRIX_MATCHPOINT">
					<context link="limit_set" field="owning_lib"/>
				</create>
				<retrieve/>
				<update permission="ADMIN_CIRC_MATRIX_MATCHPOINT">
					<context link="limit_set" field="owning_lib"/>
				</update>
				<delete permission="ADMIN_CIRC_MATRIX_MATCHPOINT">
					<context link="limit_set" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="cit" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::identification_type" oils_persist:tablename="config.identification_type" reporter:label="Identification Type" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.identification_type_id_seq">
			<field reporter:label="Identification ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Identification Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_IDENT_TYPE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_IDENT_TYPE" global_required="true"/>
				<delete permission="ADMIN_IDENT_TYPE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="asvq" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::survey_question" oils_persist:tablename="action.survey_question" reporter:label="User Survey Question">
		<fields oils_persist:primary="id" oils_persist:sequence="action.survey_question_id_seq">
			<field reporter:label="Answers" name="answers" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Responses" name="responses" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Question ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Question" name="question" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Survey" name="survey" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="survey" reltype="has_a" key="id" map="" class="asv"/>
			<link field="responses" reltype="has_many" key="question" map="" class="asvr"/>
			<link field="answers" reltype="has_many" key="question" map="" class="asva"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SURVEY UPDATE_SURVEY">
					<context link="survey" field="owner"/>
				</create>
				<retrieve/>
				<update permission="ADMIN_SURVEY UPDATE_SURVEY">
					<context link="survey" field="owner"/>
				</update>
				<delete permission="ADMIN_SURVEY UPDATE_SURVEY">
					<context link="survey" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="mbts" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::billable_transaction_summary" oils_persist:tablename="money.materialized_billable_xact_summary" reporter:label="Billable Transaction Summary" oils_persist:readonly="true">
		<fields oils_persist:primary="id" oils_persist:sequence="">
			<field reporter:label="Balance Owed" name="balance_owed" reporter:datatype="money"/>
			<field reporter:label="Transaction ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Last Billing Note" name="last_billing_note" reporter:datatype="text"/>
			<field reporter:label="Last Billing Timestamp" name="last_billing_ts" reporter:datatype="timestamp"/>
			<field reporter:label="Last Billing Type" name="last_billing_type" reporter:datatype="text"/>
			<field reporter:label="Last Payment Note" name="last_payment_note" reporter:datatype="text"/>
			<field reporter:label="Last Payment Timestamp" name="last_payment_ts" reporter:datatype="timestamp"/>
			<field reporter:label="Last Payment Type" name="last_payment_type" reporter:datatype="text"/>
			<field reporter:label="Total Owed" name="total_owed" reporter:datatype="money"/>
			<field reporter:label="Total Paid" name="total_paid" reporter:datatype="money"/>
			<field reporter:label="Billed User" name="usr" reporter:datatype="link"/>
			<field reporter:label="Transaction Finish Time" name="xact_finish" reporter:datatype="timestamp"/>
			<field reporter:label="Transaction Start Time" name="xact_start" reporter:datatype="timestamp"/>
			<field reporter:label="Transaction Type" name="xact_type" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER_TRANSACTIONS">
					<context link="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="mbtslv" controller="open-ils.cstore" oils_obj:fieldmapper="money::billable_transaction_summary_location_view" oils_persist:tablename="money.billable_xact_summary_location_view" reporter:label="Billable Transaction Summary with Billing Location" oils_persist:readonly="true" reporter:core="true">
		<fields oils_persist:primary="id" oils_persist:sequence="">
			<field reporter:label="Balance Owed" name="balance_owed" reporter:datatype="money"/>
			<field reporter:label="Transaction ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Last Billing Note" name="last_billing_note" reporter:datatype="text"/>
			<field reporter:label="Last Billing Timestamp" name="last_billing_ts" reporter:datatype="timestamp"/>
			<field reporter:label="Last Billing Type" name="last_billing_type" reporter:datatype="text"/>
			<field reporter:label="Last Payment Note" name="last_payment_note" reporter:datatype="text"/>
			<field reporter:label="Last Payment Timestamp" name="last_payment_ts" reporter:datatype="timestamp"/>
			<field reporter:label="Last Payment Type" name="last_payment_type" reporter:datatype="text"/>
			<field reporter:label="Total Owed" name="total_owed" reporter:datatype="money"/>
			<field reporter:label="Total Paid" name="total_paid" reporter:datatype="money"/>
			<field reporter:label="Billed User" name="usr" reporter:datatype="link"/>
			<field reporter:label="Transaction Finish Time" name="xact_finish" reporter:datatype="timestamp"/>
			<field reporter:label="Transaction Start Time" name="xact_start" reporter:datatype="timestamp"/>
			<field reporter:label="Transaction Type" name="xact_type" reporter:datatype="text"/>
			<field reporter:label="Billing Location" name="billing_location" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="billing_location" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>
	<class id="aum" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::usr_message" oils_persist:tablename="actor.usr_message" reporter:label="User Message">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.usr_message_id_seq">
			<field reporter:label="Creation Date/Time" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Read Date/Time" name="read_date" reporter:datatype="timestamp"/>
			<field reporter:label="Creating Library" name="sending_lib" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Message ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Deleted?" name="deleted" reporter:datatype="bool"/>
			<field reporter:label="Title" name="title" reporter:datatype="text"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Message" name="message" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Patron Visible?" name="pub" reporter:datatype="bool"/>
			<field reporter:label="Stop Date/Time" name="stop_date" reporter:datatype="timestamp"/>
			<field reporter:label="Editor" name="editor" reporter:datatype="link"/>
			<field reporter:label="Edit Date/Time" name="edit_date" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="sending_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions> <!-- created magically, so no create action -->
				<retrieve permission="VIEW_USER" context_field="sending_lib"/>
				<update permission="UPDATE_USER" context_field="sending_lib"/>
				<delete permission="UPDATE_USER" context_field="sending_lib"/>
			</actions>
		</permacrud>
	</class>
	<class id="auml" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::usr_message_limited" oils_persist:tablename="actor.usr_message_limited" reporter:label="User Message (Limited Access)">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.usr_message_id_seq">
			<field reporter:label="Creation Date/Time" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Read Date/Time" name="read_date" reporter:datatype="timestamp"/>
			<field reporter:label="Creating Library" name="sending_lib" reporter:datatype="link"/>
			<field reporter:label="Message ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Deleted?" name="deleted" reporter:datatype="bool"/>
			<field reporter:label="Title" name="title" reporter:datatype="text"/>
			<field reporter:label="User" name="usr" reporter:datatype="link"/>
			<field reporter:label="Message" name="message" reporter:datatype="text"/>
			<field reporter:label="Patron Visible?" name="pub" reporter:datatype="bool"/>
			<field reporter:label="Stop Date/Time" name="stop_date" reporter:datatype="timestamp"/>
			<field reporter:label="Editor" name="usr" reporter:datatype="link"/>
			<field reporter:label="Edit Date/Time" name="edit_date" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="sending_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions> <!-- created magically, so no create action -->
				<retrieve permission="UPDATE_USER" context_field="sending_lib" owning_user="usr"/>
				<update permission="UPDATE_USER" context_field="sending_lib" owning_user="usr"/>
			</actions>
		</permacrud>
	</class>
	<class id="aump" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::usr_message_penalty" oils_persist:tablename="actor.usr_message_penalty" reporter:label="User Message Penalty">
		<fields oils_persist:primary="id">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Creation Date/Time" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Debug: Set Date (Penalty)" name="ausp_set_date" reporter:datatype="timestamp"/>
			<field reporter:label="Debug: Creation Date/Time (Message)" name="aum_create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Read Date/Time" name="read_date" reporter:datatype="timestamp"/>
			<field reporter:label="Creating Library" name="org_unit" reporter:datatype="link"/>
			<field reporter:label="Debug: Creating Library (Penalty)" name="ausp_org_unit" reporter:datatype="link"/>
			<field reporter:label="Debug: Creating Library (Message)" name="aum_sending_lib" reporter:datatype="link"/>
			<field reporter:label="Debug: Penalty ID" name="ausp_id" reporter:datatype="id"/>
			<field reporter:label="Debug: Message ID" name="aum_id" reporter:datatype="id"/>
			<field reporter:label="Deleted?" name="deleted" reporter:datatype="bool"/>
			<field reporter:label="Title" name="title" reporter:datatype="text"/>
			<field reporter:label="User" name="usr" reporter:datatype="link"/>
			<field reporter:label="Debug: User (Penalty)" name="ausp_usr" reporter:datatype="link"/>
			<field reporter:label="Debug: User (Message)" name="aum_usr" reporter:datatype="link"/>
			<field reporter:label="Message" name="message" reporter:datatype="text"/>
			<field reporter:label="Patron Visible?" name="pub" reporter:datatype="bool"/>
			<field reporter:label="Stop Date/Time" name="stop_date" reporter:datatype="timestamp"/>
			<field reporter:label="Debug: Stop Date/Time (Penalty)" name="ausp_stop_date" reporter:datatype="timestamp"/>
			<field reporter:label="Debug: Stop Date/Time (Message)" name="aum_stop_date" reporter:datatype="timestamp"/>
			<field reporter:label="Editor" name="editor" reporter:datatype="link"/>
			<field reporter:label="Edit Date/Time" name="edit_date" reporter:datatype="timestamp"/>
			<field name="staff" reporter:datatype="link" reporter:label="Staff"/>
			<field name="standing_penalty" reporter:datatype="link" reporter:label="Standing Penalty"/>
			<field name="ausp_usr_message" reporter:datatype="link" reporter:label="Debug: User Message (Penalty)"/>
		</fields>
		<links>
			<link field="ausp_id" reltype="has_a" key="id" map="" class="ausp"/>
			<link field="aum_id" reltype="has_a" key="id" map="" class="aum"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="ausp_usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="aum_usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
			<link field="aum_sending_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="ausp_org_unit" reltype="has_a" key="id" map="" class="aou"/>
			<link field="standing_penalty" reltype="has_a" key="id" map="" class="csp"/>
			<link field="ausp_usr_message" reltype="has_a" key="id" map="" class="aum"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions> <!-- created magically, so no create action -->
				<retrieve permission="VIEW_USER"><context link="usr" field="home_ou"/></retrieve>
				<update permission="UPDATE_USER"><context link="usr" field="home_ou"/></update>
			</actions>
		</permacrud>
	</class>

	<class id="aupw" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::usr_privacy_waiver" oils_persist:tablename="actor.usr_privacy_waiver" reporter:label="Privacy Waiver">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.usr_privacy_waiver_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Place Holds?" name="place_holds" reporter:datatype="bool"/>
			<field reporter:label="Pick Up Holds?" name="pickup_holds" reporter:datatype="bool"/>
			<field reporter:label="Obtain Circulation Information?" name="view_history" reporter:datatype="bool"/>
			<field reporter:label="Check Out Items?" name="checkout_items" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="UPDATE_USER">
					<context link="usr" field="home_ou"/>
				</create>
				<retrieve permission="VIEW_USER">
					<context link="usr" field="home_ou"/>
				</retrieve>
				<update permission="UPDATE_USER">
					<context link="usr" field="home_ou"/>
				</update>
				<delete permission="UPDATE_USER">
					<context link="usr" field="home_ou"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="aupr" controller="open-ils.cstore" oils_obj:fieldmapper="actor::usr_password_reset" oils_persist:tablename="actor.usr_password_reset" reporter:label="User password reset requests">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.usr_password_reset_id_seq">
			<field reporter:label="Request ID" name="id" reporter:datatype="id"/>
			<field reporter:label="UUID" name="uuid" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Request Time" name="request_time" reporter:datatype="timestamp"/>
			<field reporter:label="Was Reset?" name="has_been_reset" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
	</class>
	<class id="aus" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::user_setting" oils_persist:tablename="actor.usr_setting" reporter:label="User Setting">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.usr_setting_id_seq">
			<field reporter:label="Setting ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Name" name="name" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="name" reltype="has_a" key="name" map="" class="cust"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER">
					<context link="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="mafe" controller="open-ils.cstore" oils_obj:fieldmapper="metabib::author_field_entry" oils_persist:tablename="metabib.author_field_entry" reporter:label="Author Field Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="metabib.author_field_entry_id_seq">
			<field name="field" reporter:datatype="link" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id"/>
			<field name="source" reporter:datatype="link" oils_obj:required="true"/>
			<field name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="source" reltype="has_a" key="id" map="" class="bre"/>
			<link field="field" reltype="has_a" key="id" map="" class="cmf"/>
		</links>
	</class>
	<class id="aihu" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::in_house_use" oils_persist:tablename="action.in_house_use" reporter:core="true" reporter:label="In House Use">
		<fields oils_persist:primary="id" oils_persist:sequence="action.in_house_use_id_seq">
			<field reporter:label="Use ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Item" name="item" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Using Library" name="org_unit" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Recording Staff" name="staff" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Workstation" name="workstation" reporter:datatype="link"/>
			<field reporter:label="Use Date/Time" name="use_time" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="item" reltype="has_a" key="id" map="" class="acp"/>
			<link field="staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="workstation" reltype="has_a" key="id" map="" class="aws"/>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="ancihu" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::non_cat_in_house_use" oils_persist:tablename="action.non_cat_in_house_use" reporter:core="true" reporter:label="Non-cataloged In House Use">
		<fields oils_persist:primary="id" oils_persist:sequence="action.non_cat_in_house_use_id_seq">
			<field reporter:label="Use ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Item Type" name="item_type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Using Library" name="org_unit" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Recording Staff" name="staff" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Workstation" name="workstation" reporter:datatype="link"/>
			<field reporter:label="Use Date/Time" name="use_time" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="item_type" reltype="has_a" key="id" map="" class="cnct"/>
			<link field="staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="workstation" reltype="has_a" key="id" map="" class="aws"/>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="atc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::transit_copy" oils_persist:tablename="action.transit_copy" reporter:core="true" reporter:label="Item Transit">
		<fields oils_persist:primary="id" oils_persist:sequence="action.transit_copy_id_seq">
			<field reporter:label="Pretransit Item Status" name="copy_status" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Destination" name="dest" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Receive Date/Time" name="dest_recv_time" reporter:datatype="timestamp"/>
			<field reporter:label="Transit ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Persistent? (unused)" name="persistant_transfer" reporter:datatype="bool"/>
			<field reporter:label="Previous Hop (unused)" name="prev_hop" reporter:datatype="link"/>
			<field reporter:label="Source" name="source" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Prev Destination" name="prev_dest" reporter:datatype="org_unit"/>
			<field reporter:label="Send Date/Time" name="source_send_time" reporter:datatype="timestamp"/>
			<field reporter:label="Transited Item" name="target_copy" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Cancel Date/Time" name="cancel_time" reporter:datatype="timestamp"/>
			<field reporter:label="Hold Transit" name="hold_transit_copy" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="hold_transit_copy" reltype="might_have" key="id" map="" class="ahtc"/>
			<link field="source" reltype="has_a" key="id" map="" class="aou"/>
			<link field="prev_dest" reltype="has_a" key="id" map="" class="aou"/>
			<link field="copy_status" reltype="has_a" key="id" map="" class="ccs"/>
			<link field="dest" reltype="has_a" key="id" map="" class="aou"/>
			<link field="target_copy" reltype="has_a" key="id" map="" class="acp"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="TRANSIT_COPY" context_field="owner">
					<context link="target_copy" field="circ_lib"/>
				</create>
				<retrieve/>
				<update permission="UPDATE_TRANSIT" context_field="dest source"/>
				<delete permission="DELETE_TRANSIT" context_field="dest source"/>
			</actions>
		</permacrud>
	</class>
	<class id="asvr" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::survey_response" oils_persist:tablename="action.survey_response" reporter:label="Survey Response">
		<fields oils_persist:primary="id" oils_persist:sequence="action.survey_response_id_seq">
			<field reporter:label="Answer" name="answer" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Answer Date/Time" name="answer_date" reporter:datatype="timestamp"/>
			<field reporter:label="Effective Answer Date/Time" name="effective_date" reporter:datatype="timestamp"/>
			<field reporter:label="Answer ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Question" name="question" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Response Group ID" name="response_group_id" reporter:datatype="int"/>
			<field reporter:label="Survey" name="survey" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Responding User" name="usr" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="question" reltype="has_a" key="id" map="" class="asvq"/>
			<link field="survey" reltype="has_a" key="id" map="" class="asv"/>
			<link field="answer" reltype="has_a" key="id" map="" class="asva"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SURVEY UPDATE_USER">
					<context link="survey" field="owner"/>
				</create>
				<retrieve permission="VIEW_USER">
					<context link="usr" field="home_ou"/>
				</retrieve>
				<update permission="ADMIN_SURVEY UPDATE_USER">
					<context link="survey" field="owner"/>
				</update>
				<delete permission="ADMIN_SURVEY UPDATE_USER">
					<context link="survey" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="ccbi" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="container::copy_bucket_item" oils_persist:tablename="container.copy_bucket_item" reporter:label="Item Bucket Item">
		<fields oils_persist:primary="id" oils_persist:sequence="container.copy_bucket_item_id_seq">
			<field name="bucket" reporter:datatype="link" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id"/>
			<field name="target_copy" reporter:datatype="link" oils_obj:required="true"/>
			<field name="create_time" reporter:datatype="timestamp"/>
			<field name="pos" reporter:datatype="int"/>
			<field name="notes" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="target_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="bucket" reltype="has_a" key="id" map="" class="ccb"/>
			<link field="notes" reltype="has_many" map="" key="item" class="ccbin"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="ADMIN_COPY_BUCKET">
					<context link="bucket" field="owning_lib"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="ccbin" controller="open-ils.cstore" oils_obj:fieldmapper="container::copy_bucket_item_note" oils_persist:tablename="container.copy_bucket_item_note" reporter:label="Item Bucket Item Note">
		<fields oils_persist:primary="id" oils_persist:sequence="container.copy_bucket_item_note_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="item" reporter:datatype="link" oils_obj:required="true"/>
			<field name="note" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="item" reltype="has_a" key="id" map="" class="ccbi"/>
		</links>
	</class>

	<class id="acs" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="authority::control_set" oils_persist:tablename="authority.control_set" reporter:label="Authority Control Set" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="authority.control_set_id_seq">
			<field reporter:label="Control Set ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Controlling Authority Fields" name="authority_fields" reporter:datatype="link" oils_persist:virtual="true" config_field="true"/>
			<field reporter:label="Thesauri" name="thesauri" reporter:datatype="link" oils_persist:virtual="true" config_field="true"/>
		</fields>
		<links>
			<link field="authority_fields" reltype="has_many" key="control_set" map="" class="acsaf"/>
			<link field="thesauri" reltype="has_many" key="control_set" map="" class="at"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_AUTHORITY_CONTROL_SET" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_AUTHORITY_CONTROL_SET" global_required="true"/>
				<delete permission="DELETE_AUTHORITY_CONTROL_SET" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="acsaf" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="authority::control_set_authority_field" oils_persist:tablename="authority.control_set_authority_field" reporter:label="Authority Control Set Authority Field" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="authority.control_set_authority_field_id_seq">
			<field reporter:label="Control Set Authority Field ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Main Entry" name="main_entry" reporter:datatype="link"/>
			<field reporter:label="Control Set" name="control_set" reporter:datatype="link" config_field="true" oils_obj:required="true"/>
			<field reporter:label="Tag" name="tag" reporter:datatype="text" oils_obj:required="true" oils_obj:validate="^.{3}$"/>
			<field reporter:label="Subfield List" name="sf_list" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Subfield List for Display" name="display_sf_list" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Non-filing Indicator" name="nfi" reporter:datatype="text"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Linking Subfield" name="linking_subfield" reporter:datatype="text"/>
			<field reporter:label="Subordinate Entries" name="sub_entries" reporter:datatype="link" oils_persist:virtual="true"/>
			<field reporter:label="Controlled Bib Fields" name="bib_fields" reporter:datatype="link" oils_persist:virtual="true"/>
			<field reporter:label="Thesauri" name="thesauri" reporter:datatype="link" oils_persist:virtual="true"/>
			<field reporter:label="Browse Axis Maps" name="axis_maps" reporter:datatype="link" oils_persist:virtual="true"/>
			<field reporter:label="Joiner" name="joiner" reporter:datatype="text"/>
			<field reporter:label="Heading Field" name="heading_field" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="axis_maps" reltype="has_many" key="field" map="" class="abaafm"/>
			<link field="control_set" reltype="has_a" key="id" map="" class="acs"/>
			<link field="bib_fields" reltype="has_many" key="authority_field" map="" class="acsbf"/>
			<link field="thesauri" reltype="has_many" key="control_set" map="" class="at"/>
			<link field="main_entry" reltype="has_a" key="id" map="" class="acsaf"/>
			<link field="sub_entries" reltype="has_many" key="main_entry" map="" class="acsaf"/>
			<link field="heading_field" reltype="has_a" key="id" map="" class="ahf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_AUTHORITY_CONTROL_SET" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_AUTHORITY_CONTROL_SET" global_required="true"/>
				<delete permission="UPDATE_AUTHORITY_CONTROL_SET" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="acsbf" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="authority::control_set_bib_field" oils_persist:tablename="authority.control_set_bib_field" reporter:label="Authority Control Set Bib Field" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="authority.control_set_bib_field_id_seq">
			<field reporter:label="Controlled Bib Field ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Controlling Authority Field" name="authority_field" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Tag" name="tag" reporter:datatype="text" oils_obj:required="true" oils_obj:validate="^.{3}$"/>
		</fields>
		<links>
			<link field="authority_field" reltype="has_a" key="id" map="" class="acsaf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_AUTHORITY_CONTROL_SET" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_AUTHORITY_CONTROL_SET" global_required="true"/>
				<delete permission="UPDATE_AUTHORITY_CONTROL_SET" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="acsbfmfm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="authority::control_set_bib_field_metabib_field_map" oils_persist:tablename="authority.control_set_bib_field_metabib_field_map" reporter:label="Authority Control Set Bib Field to Metabib Field Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="authority.control_set_bib_field_metabib_field_map_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Bib Field" name="bib_field" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Metabib Field" name="metabib_field" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="bib_field" reltype="has_a" key="id" map="" class="acsbf"/>
			<link field="metabib_field" reltype="has_a" key="id" map="" class="cmf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_AUTHORITY_CONTROL_SET" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_AUTHORITY_CONTROL_SET" global_required="true"/>
				<delete permission="UPDATE_AUTHORITY_CONTROL_SET" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="at" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="authority::thesaurus" oils_persist:tablename="authority.thesaurus" reporter:label="Authority Thesaurus" oils_persist:field_safe="true">
		<fields oils_persist:primary="code">
			<field reporter:label="Thesaurus Code" name="code" reporter:datatype="id" reporter:selector="name" oils_obj:required="true"/>
			<field reporter:label="Control Set" name="control_set" reporter:datatype="link" config_field="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Short Code" name="short_code" reporter:datatype="text"/>
			<field reporter:label="URI" name="uri" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="control_set" reltype="has_a" key="id" map="" class="acs"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_AUTHORITY_CONTROL_SET" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_AUTHORITY_CONTROL_SET" global_required="true"/>
				<delete permission="UPDATE_AUTHORITY_CONTROL_SET" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="aba" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="authority::browse_axis" oils_persist:tablename="authority.browse_axis" reporter:label="Authority Browse Axis" oils_persist:field_safe="true">
		<fields oils_persist:primary="code">
			<field reporter:label="Code" name="code" reporter:datatype="id" reporter:selector="name" oils_obj:validate="^\S+$" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Sorter Attribute" name="sorter" reporter:datatype="link"/>
			<field reporter:label="Description" name="description" reporter:datatype="text"/>
			<field reporter:label="Authority Fields" name="fields" reporter:datatype="link" oils_persist:virtual="true"/>
			<field reporter:label="Authority Field Maps" name="maps" reporter:datatype="link" oils_persist:virtual="true"/>
		</fields>
		<links>
			<link field="sorter" reltype="has_a" key="name" map="" class="crad"/>
			<link field="fields" reltype="has_many" key="axis" map="field" class="abaafm"/>
			<link field="maps" reltype="has_many" key="axis" map="" class="abaafm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_AUTHORITY_CONTROL_SET" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_AUTHORITY_CONTROL_SET" global_required="true"/>
				<delete permission="UPDATE_AUTHORITY_CONTROL_SET" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="abaafm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="authority::browse_axis_authority_field_map" oils_persist:tablename="authority.browse_axis_authority_field_map" reporter:label="Authority Browse Axis Field Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="authority.browse_axis_authority_field_map_id_seq">
			<field reporter:label="Axis Authority Field Map ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Authority Field" name="field" oils_obj:required="true" reporter:datatype="link"/>
			<field reporter:label="Axis" name="axis" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="field" reltype="has_a" key="id" map="" class="acsaf"/>
			<link field="axis" reltype="has_a" key="code" map="" class="aba"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_AUTHORITY_CONTROL_SET" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_AUTHORITY_CONTROL_SET" global_required="true"/>
				<delete permission="UPDATE_AUTHORITY_CONTROL_SET" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="are" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="authority::record_entry" oils_persist:tablename="authority.record_entry" reporter:label="Authority Record Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="authority.record_entry_id_seq">
			<field name="active" reporter:datatype="bool"/>
			<field name="create_date" reporter:datatype="timestamp"/>
			<field name="creator"/>
			<field name="deleted" reporter:datatype="bool"/>
			<field name="edit_date" reporter:datatype="timestamp"/>
			<field name="editor"/>
			<field name="id" reporter:datatype="id"/>
			<field name="last_xact_id" oils_obj:required="true"/>
			<field name="marc" oils_obj:required="true"/>
			<field name="source"/>
			<field reporter:label="Control Set" name="control_set" reporter:datatype="link"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="org_unit"/>
			<field name="heading"/>
			<field name="simple_heading"/>
			<field name="fixed_fields" oils_persist:virtual="true" reporter:datatype="link"/>
			<field name="notes" oils_persist:virtual="true" reporter:datatype="link"/>
			<field name="bib_links" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="control_set" reltype="has_a" key="id" map="" class="acs"/>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="notes" reltype="has_many" key="record" map="" class="arn"/>
			<link field="bib_links" reltype="has_many" key="authority" map="" class="abl"/>
			<link field="fixed_fields" reltype="might_have" key="record" map="" class="ard"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_AUTHORITY_RECORD IMPORT_MARC" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_AUTHORITY_RECORD" global_required="true"/>
				<delete permission="DELETE_AUTHORITY_RECORD" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="ard" controller="open-ils.cstore" oils_obj:fieldmapper="authority::record_descriptor" oils_persist:tablename="authority.rec_descriptor" reporter:label="Authority Record Descriptor">
		<fields oils_persist:primary="id" oils_persist:sequence="authority.rec_descriptor_id_seq">
			<field name="char_encoding"/>
			<field name="id"/>
			<field name="record"/>
			<field name="record_status"/>
			<field name="thesaurus"/>
		</fields>
		<links>
			<link field="record" reltype="has_a" key="id" map="" class="are"/>
			<link field="thesaurus" reltype="has_a" key="code" map="" class="at"/>
		</links>
	</class>
	<class id="abl" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="authority::bib_linking" oils_persist:tablename="authority.bib_linking" reporter:label="Authority-Bibliographic Record Link">
		<fields oils_persist:primary="id" oils_persist:sequence="authority.bib_linking_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="bib" reporter:datatype="link" oils_obj:required="true"/>
			<field name="authority" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="bib" reltype="has_a" key="id" map="" class="bre"/>
			<link field="authority" reltype="has_a" key="id" map="" class="are"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="ash" controller="open-ils.cstore" oils_obj:fieldmapper="authority::simple_heading" oils_persist:tablename="authority.simple_heading" reporter:label="Authority Simple Heading">
		<fields oils_persist:primary="id" oils_persist:sequence="authority.simple_heading_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="record" reporter:datatype="link" oils_obj:required="true"/>
			<field name="atag" reporter:datatype="link" oils_obj:required="true"/>
			<field name="value" reporter:datatype="text" oils_obj:required="true"/>
			<field name="thesaurus" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="record" reltype="has_a" key="id" map="" class="are"/>
			<link field="atag" reltype="has_a" key="id" map="" class="acsaf"/>
		</links>
	</class>

	<class id="ahf" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="authority::heading_field" oils_persist:tablename="authority.heading_field" reporter:label="Authority Heading Fields">
		<fields oils_persist:primary="id" oils_persist:sequence="authority.heading_fields_id_seq">
			<field name="id" reporter:datatype="id" reporter:selector="label"/>
			<field name="heading_type" reporter:datatype="text" reporter:label="Heading Type" oils_obj:required="true"/>
			<field name="heading_purpose" reporter:datatype="text" reporter:label="Heading Purpose" oils_obj:required="true"/>
			<field name="label" reporter:datatype="text" reporter:label="Heading Field Label" oils_obj:required="true"/>
			<field name="format" reporter:datatype="text" reporter:label="Heading XSLT Format"/>
			<field name="heading_xpath" reporter:datatype="text" reporter:label="Heading XPath" oils_obj:required="true"/>
			<field name="component_xpath" reporter:datatype="text" reporter:label="Heading Component XPath" oils_obj:required="true"/>
			<field name="type_xpath" reporter:datatype="text" reporter:label="Related/Variant Type XPath"/>
			<field name="thesaurus_xpath" reporter:datatype="text" reporter:label="Thesaurus XPath"/>
			<field name="thesaurus_override_xpath" reporter:datatype="text" reporter:label="Thesaurus Override XPath"/>
			<field name="joiner" reporter:datatype="text" reporter:label="Joiner string"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_AUTHORITY_CONTROL_SET" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_AUTHORITY_CONTROL_SET" global_required="true"/>
				<delete permission="UPDATE_AUTHORITY_CONTROL_SET" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="clm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::language_map" oils_persist:tablename="config.language_map" reporter:label="Language Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="code" oils_persist:sequence="">
			<field reporter:label="Language Code" name="code" reporter:selector="value" reporter:datatype="text"/>
			<field reporter:label="Language" name="value" reporter:datatype="text" oils_persist:i18n="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_MARC_CODE" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_MARC_CODE" global_required="true"/>
				<delete permission="DELETE_MARC_CODE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="mccp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::credit_card_payment" oils_persist:tablename="money.credit_card_payment" reporter:label="Credit Card Payment">
		<fields oils_persist:primary="id" oils_persist:sequence="money.payment_id_seq">
			<field name="accepting_usr" oils_obj:required="true"/>
			<field name="amount" reporter:datatype="money" oils_obj:required="true"/>
			<field name="amount_collected" reporter:datatype="money" oils_obj:required="true"/>
			<field name="approval_code" reporter:datatype="text"/>
			<field name="cash_drawer" reporter:datatype="link"/>
			<field name="cc_number" reporter:datatype="text"/>
			<field name="cc_order_number" reporter:datatype="text"/>
			<field name="cc_processor" reporter:datatype="text"/>
			<field name="id" reporter:datatype="id"/>
			<field name="note" reporter:datatype="text"/>
			<field name="payment_ts" reporter:datatype="timestamp"/>
			<field name="xact" reporter:datatype="link" oils_obj:required="true"/>
			<field name="payment_type" oils_persist:virtual="true" reporter:datatype="text"/>
			<field name="payment" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="payment" reltype="might_have" key="id" map="" class="mp"/>
			<link field="accepting_usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="cash_drawer" reltype="has_a" key="id" map="" class="aws"/>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER_TRANSACTIONS">
					<context link="xact" jump="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="cxt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::xml_transform" oils_persist:tablename="config.xml_transform" reporter:label="XML/XSLT Transform Definition" oils_persist:field_safe="true">
		<fields oils_persist:primary="name">
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Namespace URI" name="namespace_uri" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Namespace Prefix" name="prefix" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="XSLT" name="xslt" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_XML_TRANSFORM" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_XML_TRANSFORM" global_required="true"/>
				<delete permission="DELETE_XML_TRANSFORM" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="cmsa" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::metabib_search_alias" oils_persist:tablename="config.metabib_search_alias" reporter:label="Metabib Search Alias" oils_persist:field_safe="true">
		<fields oils_persist:primary="alias">
			<field reporter:label="Alias (RegExp)" name="alias" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Class" name="field_class" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Field" name="field" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="field_class" reltype="has_a" key="name" map="" class="cmc"/>
			<link field="field" reltype="has_a" key="id" map="" class="cmf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_METABIB_SEARCH_ALIAS" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_METABIB_SEARCH_ALIAS" global_required="true"/>
				<delete permission="DELETE_METABIB_SEARCH_ALIAS" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="cmc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::metabib_class" oils_persist:tablename="config.metabib_class" reporter:label="Metabib Class" oils_persist:field_safe="true">
		<fields oils_persist:primary="name">
			<field reporter:label="Name" name="name" reporter:datatype="text" reporter:selector="label" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Buoyant?" name="buoyant" reporter:datatype="bool"/>
			<field reporter:label="Restrict?" name="restrict" reporter:datatype="bool"/>
			<field reporter:label="Combined?" name="combined" reporter:datatype="bool"/>
			<field reporter:label="A Weight" name="a_weight" reporter:datatype="float"/>
			<field reporter:label="B Weight" name="b_weight" reporter:datatype="float"/>
			<field reporter:label="C Weight" name="c_weight" reporter:datatype="float"/>
			<field reporter:label="D Weight" name="d_weight" reporter:datatype="float"/>
			<field reporter:label="Low Result Threshold for Suggestions" name="low_result_threshold" reporter:datatype="int"/>
			<field reporter:label="Max Suggestions" name="max_suggestions" reporter:datatype="int"/>
			<field reporter:label="Perform Variant Heading Authority Suggestion Cross-reference" name="variant_authority_suggestion" reporter:datatype="bool"/>
			<field reporter:label="Minimum Bib Record Suggestion Threshold" name="min_suggestion_use_threshold" reporter:datatype="int"/>
			<field reporter:label="Suggestion SOUNDEX Weight" name="soundex_weight" reporter:datatype="int"/>
			<field reporter:label="Suggestion PG Trigram Weight" name="pg_trgm_weight" reporter:datatype="int"/>
			<field reporter:label="Suggestion Keyboard Distance Weight" name="keyboard_distance_weight" reporter:datatype="int"/>
			<field reporter:label="Retain Case in Suggestions" name="symspell_transfer_case" reporter:datatype="bool"/>
			<field reporter:label="Avoid alternate suggestions on correctly spelled words" name="symspell_skip_correct" reporter:datatype="bool"/>
			<field reporter:label="Symspell suggestion calculation verbosity" name="symspell_suggestion_verbosity" reporter:datatype="int"/>
			<field reporter:label="Maximum average word Edit Distance" name="max_phrase_edit_distance" reporter:datatype="int"/>
			<field reporter:label="Maximum suggestions per word" name="suggestion_word_option_count" reporter:datatype="int"/>
			<field reporter:label="Fields" name="fields" reporter:datatype="link" oils_persist:virtual="true"/>
		</fields>
		<links>
			<link field="fields" reltype="has_many" key="name" map="" class="cmf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_METABIB_CLASS" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_METABIB_CLASS" global_required="true"/>
				<delete permission="DELETE_METABIB_CLASS" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="cmf" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::metabib_field" oils_persist:tablename="config.metabib_field" reporter:label="Metabib Field" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="config.metabib_field_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="label"/>
			<field reporter:label="Class" name="field_class" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Weight" name="weight" reporter:datatype="int"/>
			<field reporter:label="XPath" name="xpath" reporter:datatype="text"/>
			<field reporter:label="Joiner" name="joiner" reporter:datatype="text"/>
			<field reporter:label="Format" name="format" reporter:datatype="link"/>
			<field reporter:label="Search Field" name="search_field" reporter:datatype="bool"/>
			<field reporter:label="Facet Field" name="facet_field" reporter:datatype="bool"/>
			<field reporter:label="Facet XPath" name="facet_xpath" reporter:datatype="text"/>
			<field reporter:label="Display Field?" name="display_field" reporter:datatype="bool"/>
			<field reporter:label="Display XPath" name="display_xpath" reporter:datatype="text"/>
			<field reporter:label="Browse Field" name="browse_field" reporter:datatype="bool"/>
			<field reporter:label="Browse Folding is Case-Insensitive" name="browse_nocase" reporter:datatype="bool"/>
			<field reporter:label="Browse XPath" name="browse_xpath" reporter:datatype="text"/>
			<field reporter:label="Browse Sort XPath" name="browse_sort_xpath" reporter:datatype="text"/>
			<field reporter:label="Authority XPath" name="authority_xpath" reporter:datatype="text"/>
			<field reporter:label="Restrict?" name="restrict" reporter:datatype="bool"/>
			<field reporter:label="Display Field Map" name="display_field_map" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Virtual Field Data Suppliers" name="data_sources" oils_persist:virtual="true" reporter:datatype="link" config_field="true"/>
		</fields>
		<links>
			<link field="format" reltype="has_a" key="name" map="" class="cxt"/>
			<link field="field_class" reltype="has_a" key="name" map="" class="cmc"/>
			<link field="display_field_map" reltype="might_have" key="field" map="" class="cdfm"/>
			<link field="data_sources" reltype="has_many" key="virtual" map="" class="cmfvm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_METABIB_FIELD" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_METABIB_FIELD" global_required="true"/>
				<delete permission="DELETE_METABIB_FIELD" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="cmfvm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::metabib_field_virtual_map" oils_persist:tablename="config.metabib_field_virtual_map" reporter:label="Metabib Field Virtual Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="config.metabib_field_virtual_map_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Real" name="real" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Virtual" name="virtual" reporter:datatype="link" config_field="true" oils_obj:required="true"/>
			<field reporter:label="Weight" name="weight" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="real" reltype="has_a" key="id" map="" class="cmf"/>
			<link field="virtual" reltype="has_a" key="id" map="" class="cmf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_METABIB_FIELD ADMIN_METABIB_FIELD" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_METABIB_FIELD ADMIN_METABIB_FIELD" global_required="true"/>
				<delete permission="DELETE_METABIB_FIELD ADMIN_METABIB_FIELD" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="cbho" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::best_hold_order" oils_persist:tablename="config.best_hold_order" reporter:label="Best-Hold Sort Order" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.best_hold_order_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Name" name="name" reporter:datatype="text"/>
			<field reporter:label="Capture Lib to Pickup Lib Proximity" name="pprox" reporter:datatype="int"/>
			<field reporter:label="Circ Lib to Request Lib Proximity" name="hprox" reporter:datatype="int"/>
			<field reporter:label="Owning Lib to Patron Home Lib Proximity" name="owning_lib_to_home_lib_prox" reporter:datatype="int"/>
			<field reporter:label="Adjusted Circ Lib to Pickup Lib Proximity" name="aprox" reporter:datatype="int"/>
			<field reporter:label="Adjusted Capture Location to Pickup Lib Proximity" name="approx" reporter:datatype="int"/>
			<field reporter:label="Hold Priority" name="priority" reporter:datatype="int"/>
			<field reporter:label="Hold Cut-in-line State" name="cut" reporter:datatype="int"/>
			<field reporter:label="Hold Selection Depth" name="depth" reporter:datatype="int"/>
			<field reporter:label="Item Has Circulated From Home Lately" name="htime" reporter:datatype="int"/>
			<field reporter:label="Hold Request Time" name="rtime" reporter:datatype="int"/>
			<field reporter:label="Item Has Been Home At All Lately" name="shtime" reporter:datatype="int"/>
		</fields>
		<links>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_HOLD_CAPTURE_SORT" global_required="true"/>
				<retrieve permission="ADMIN_HOLD_CAPTURE_SORT" global_required="true"/>
				<update permission="ADMIN_HOLD_CAPTURE_SORT" global_required="true"/>
				<delete permission="ADMIN_HOLD_CAPTURE_SORT" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="cbfp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::biblio_fingerprint" oils_persist:tablename="config.biblio_fingerprint" reporter:label="Fingerprint Definition" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.biblio_fingerprint_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field name="xpath" reporter:datatype="text" oils_obj:required="true"/>
			<field name="format" reporter:datatype="link"/>
			<field name="first_word" reporter:datatype="bool"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_BIBLIO_FINGERPRINT" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_BIBLIO_FINGERPRINT" global_required="true"/>
				<delete permission="DELETE_BIBLIO_FINGERPRINT" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="cam" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::audience_map" oils_persist:tablename="config.audience_map" reporter:label="Audience Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="code" oils_persist:sequence="">
			<field reporter:label="Audience Code" name="code" reporter:selector="value" reporter:datatype="text"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Audience" name="value" reporter:datatype="text" oils_persist:i18n="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_MARC_CODE" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_MARC_CODE" global_required="true"/>
				<delete permission="DELETE_MARC_CODE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="cifm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::item_form_map" oils_persist:tablename="config.item_form_map" reporter:label="Item Form Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="code" oils_persist:sequence="">
			<field reporter:label="Item Form Code" name="code" reporter:selector="value" reporter:datatype="text"/>
			<field reporter:label="Item Form" name="value" reporter:datatype="text" oils_persist:i18n="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_MARC_CODE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_MARC_CODE" global_required="true"/>
				<delete permission="ADMIN_MARC_CODE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="acmc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::course_module_course" oils_persist:tablename="asset.course_module_course" reporter:label="Course">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.course_module_course_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Course Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Course Number" name="course_number" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Section Number" name="section_number" reporter:datatype="text"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Course Members" name="members" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Course Materials" name="materials" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Is Archived?" name="is_archived" reporter:datatype="bool"/>
			<field reporter:label="Terms Taught" name="terms_map" oils_persist:virtual="true" reporter:datatype="link" config_field="true"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="members" reltype="has_many" key="course" map="" class="acmcu"/>
			<link field="materials" reltype="has_many" key="course" map="" class="acmcm"/>
			<link field="terms_map" reltype="has_many" key="course" map="" class="acmtcm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="MANAGE_RESERVES" context_field="owning_lib"/>
				<retrieve/>
				<update permission="MANAGE_RESERVES" context_field="owning_lib"/>
				<delete permission="MANAGE_RESERVES" context_field="owning_lib"/>
			</actions>
		</permacrud>
	</class>
	<class id="acmcu" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::course_module_course_users" oils_persist:tablename="asset.course_module_course_users" reporter:label="Course Users">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.course_module_course_users_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Course" name="course" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="User Role" name="usr_role" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="course" reltype="has_a" key="id" map="" class="acmc"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="usr_role" reltype="has_a" key="id" map="" class="acmr"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="MANAGE_RESERVES">
					<context link="course" field="owning_lib"/>
				</create>
				<retrieve/>
				<update permission="MANAGE_RESERVES">
					<context link="course" field="owning_lib"/>
				</update>
				<delete permission="MANAGE_RESERVES">
					<context link="course" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="acmcm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::course_module_course_materials" oils_persist:tablename="asset.course_module_course_materials" reporter:label="Course Materials" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.course_module_course_materials_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Course" name="course" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Item" name="item" reporter:datatype="link"/>
			<field reporter:label="Record" name="record" reporter:datatype="link"/>
			<field reporter:label="Record is temporary?" name="temporary_record" reporter:datatype="bool"/>
			<field reporter:label="Item Relationship" name="relationship" reporter:datatype="text"/>
			<field reporter:label="Original Status" name="original_status" reporter:datatype="link"/>
			<field reporter:label="Original Circ Modifier" name="original_circ_modifier" reporter:datatype="link"/>
			<field reporter:label="Original Shelving Location" name="original_location" reporter:datatype="link"/>
			<field reporter:label="Original Callnumber" name="original_callnumber" reporter:datatype="link"/>
			<field reporter:label="Original Circulating Library" name="original_circ_lib" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="course" reltype="has_a" key="id" map="" class="acmc"/>
			<link field="item" reltype="has_a" key="id" map="" class="acp"/>
			<link field="record" reltype="has_a" key="id" map="" class="bre"/>
			<link field="original_callnumber" reltype="has_a" key="id" map="" class="acn"/>
			<link field="original_status" reltype="has_a" key="id" map="" class="ccs"/>
			<link field="original_circ_modifier" reltype="has_a" key="code" map="" class="ccm"/>
			<link field="original_location" reltype="has_a" key="id" map="" class="acpl"/>
			<link field="original_circ_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="MANAGE_RESERVES">
					<context link="course" field="owning_lib"/>
				</create>
				<retrieve/>
				<update permission="MANAGE_RESERVES">
					<context link="course" field="owning_lib"/>
				</update>
				<delete permission="MANAGE_RESERVES">
					<context link="course" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="acmt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::course_module_term" oils_persist:tablename="asset.course_module_term" reporter:label="Term" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.course_module_term_id_seq">
			<field reporter:label="Term ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Start Date" name="start_date" reporter:datatype="timestamp"/>
			<field reporter:label="End Date" name="end_date" reporter:datatype="timestamp"/>
			<field reporter:label="Courses" name="courses" reporter:datatype="link" oils_persist:virtual="true"/>
			<field reporter:label="Course Maps" name="maps" reporter:datatype="link" oils_persist:virtual="true"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="courses" reltype="has_many" key="term" map="course" class="acmtcm"/>
			<link field="maps" reltype="has_many" key="term" map="" class="acmtcm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="MANAGE_RESERVES" context_field="owning_lib"/>
				<retrieve/>
				<update permission="MANAGE_RESERVES" context_field="owning_lib"/>
				<delete permission="MANAGE_RESERVES" context_field="owning_lib"/>
			</actions>
		</permacrud>
	</class>
	<class id="acmtcm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::course_module_term_course_map" oils_persist:tablename="asset.course_module_term_course_map" reporter:label="Course Term Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.course_module_term_course_map_id_seq">
			<field reporter:label="Course Term Map ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Term" name="term" oils_obj:required="true" reporter:datatype="link"/>
			<field reporter:label="Course" name="course" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="term" reltype="has_a" key="id" map="" class="acmt"/>
			<link field="course" reltype="has_a" key="id" map="" class="acmc"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="MANAGE_RESERVES">
					<context link="course" field="owning_lib"/>
				</create>
				<retrieve/>
				<update permission="MANAGE_RESERVES">
					<context link="course" field="owning_lib"/>
				</update>
				<delete permission="MANAGE_RESERVES">
					<context link="course" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="acmr" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::course_module_role" oils_persist:tablename="asset.course_module_role" reporter:label="Course Role" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.course_module_role_id_seq">
			<field reporter:label="Role ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="OPAC Viewable?" name="is_public" reporter:datatype="bool"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="MANAGE_RESERVES" global_required="true"/>
				<retrieve/>
				<update permission="MANAGE_RESERVES" global_required="true"/>
				<delete permission="MANAGE_RESERVES" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	
	<class id="acnc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::call_number_class" oils_persist:tablename="asset.call_number_class" reporter:label="Call number classification scheme">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.call_number_class_id_seq">
			<field reporter:label="Call number class ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Normalizer function" name="normalizer" reporter:datatype="text"/>
			<field reporter:label="Call number fields" name="field" reporter:datatype="text"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="acns" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::call_number_suffix" oils_persist:tablename="asset.call_number_suffix" reporter:label="Call Number/Volume Suffix">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.call_number_suffix_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Label Sort Key" name="label_sortkey" reporter:datatype="text"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_VOLUME_SUFFIX" context_field="owning_lib"/>
				<retrieve/>
				<update permission="UPDATE_VOLUME_SUFFIX" context_field="owning_lib"/>
				<delete permission="DELETE_VOLUME_SUFFIX" context_field="owning_lib"/>
			</actions>
		</permacrud>
	</class>
	<class id="acnp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::call_number_prefix" oils_persist:tablename="asset.call_number_prefix" reporter:label="Call Number/Volume Prefix">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.call_number_prefix_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Label Sort Key" name="label_sortkey" reporter:datatype="text"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_VOLUME_PREFIX" context_field="owning_lib"/>
				<retrieve/>
				<update permission="UPDATE_VOLUME_PREFIX" context_field="owning_lib"/>
				<delete permission="DELETE_VOLUME_PREFIX" context_field="owning_lib"/>
			</actions>
		</permacrud>
	</class>
	<class id="acn" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::call_number" oils_persist:tablename="asset.call_number" reporter:label="Call Number/Volume">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.call_number_id_seq">
			<field reporter:label="Items" name="copies" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Create Date/Time" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Creating User" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Is Deleted" name="deleted" reporter:datatype="bool"/>
			<field reporter:label="Last Edit Date/Time" name="edit_date" reporter:datatype="timestamp"/>
			<field reporter:label="Last Editing User" name="editor" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Call Number/Volume ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Call Number Label" name="label" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Bib Record" name="record" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Notes" name="notes" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="URI Maps" name="uri_maps" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="URIs" name="uris" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Call Number Sort Key" name="label_sortkey" reporter:datatype="text"/>
			<field reporter:label="Classification Scheme" name="label_class" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Prefix" name="prefix" reporter:datatype="link"/>
			<field reporter:label="Suffix" name="suffix" reporter:datatype="link"/>
			<field reporter:label="Dewey Classification" name="dewey" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="record" reltype="has_a" key="id" map="" class="bre"/>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="notes" reltype="has_many" key="call_number" map="" class="acnn"/>
			<link field="copies" reltype="has_many" key="call_number" map="" class="acp"/>
			<link field="uris" reltype="has_many" key="call_number" map="uri" class="auricnm"/>
			<link field="uri_maps" reltype="has_many" key="call_number" map="" class="auricnm"/>
			<link field="label_class" reltype="has_a" key="id" map="" class="acnc"/>
			<link field="prefix" reltype="has_a" key="id" map="" class="acnp"/>
			<link field="suffix" reltype="has_a" key="id" map="" class="acns"/>
			<link field="dewey" reltype="might_have" key="call_number" map="" class="racnd"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_VOLUME" context_field="owning_lib"/>
				<retrieve/>
				<update permission="UPDATE_VOLUME" context_field="owning_lib"/>
				<delete permission="DELETE_VOLUME" context_field="owning_lib"/>
			</actions>
		</permacrud>
	</class>
	<class id="racnd" controller="open-ils.cstore open-ils.reporter-store open-ils.pcrud" oils_obj:fieldmapper="reporter::asset_call_number_dewey" oils_persist:tablename="reporter.asset_call_number_dewey" reporter:label="Dewey Classification">
		<fields oils_persist:primary="call_number">
			<field reporter:label="Call Number" name="call_number" reporter:datatype="link"/>
			<field reporter:label="Dewey Number" name="dewey" reporter:datatype="text"/>
			<field reporter:label="Dewey Range - Tens" name="dewey_range_tens" reporter:datatype="text"/>
			<field reporter:label="Dewey Range - Hundreds" name="dewey_range_hundreds" reporter:datatype="text"/>
			<field reporter:label="Dewey Block - Tens" name="dewey_block_tens" reporter:datatype="text"/>
			<field reporter:label="Dewey Block - Hundreds" name="dewey_block_hundreds" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="call_number" reltype="has_a" key="id" map="" class="acn"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="auri" controller="open-ils.cstore" oils_obj:fieldmapper="asset::uri" oils_persist:tablename="asset.uri" reporter:label="Electronic Access URI">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.uri_id_seq">
			<field reporter:label="URI ID" name="id" reporter:datatype="id"/>
			<field reporter:label="URI" name="href" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text"/>
			<field reporter:label="Use Information" name="use_restriction" reporter:datatype="text"/>
			<field reporter:label="Active" name="active" reporter:datatype="bool"/>
			<field reporter:label="Call Number Maps" name="call_number_maps" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Call Numbers" name="call_numbers" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="call_numbers" reltype="has_many" key="uri" map="call_number" class="auricnm"/>
			<link field="call_number_maps" reltype="has_many" key="uri" map="" class="auricnm"/>
		</links>
	</class>
	<class id="auricnm" controller="open-ils.cstore" oils_obj:fieldmapper="asset::uri_call_number_map" oils_persist:tablename="asset.uri_call_number_map" reporter:label="Electronic Access URI to Call Number Map">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.uri_call_number_map_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="URI" name="uri" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Call Number" name="call_number" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="uri" reltype="has_a" key="id" map="" class="auri"/>
			<link field="call_number" reltype="has_a" key="id" map="" class="acn"/>
		</links>
	</class>
	<class id="cst" controller="open-ils.cstore" oils_obj:fieldmapper="config::standing" oils_persist:tablename="config.standing" reporter:label="Standing Penalty" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.standing_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="value" oils_persist:i18n="true" oils_obj:required="true"/>
		</fields>
		<links/>
	</class>
	<class id="mous" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::open_user_summary" oils_persist:tablename="money.open_usr_summary" reporter:label="Open User Summary">
		<fields oils_persist:primary="usr" oils_persist:sequence="">
			<field name="balance_owed" reporter:datatype="money"/>
			<field name="total_owed" reporter:datatype="money"/>
			<field name="total_paid" reporter:datatype="money"/>
			<field name="usr" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER">
					<context link="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="mowbus" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::open_with_balance_user_summary" oils_persist:tablename="money.open_with_balance_usr_summary" reporter:label="Open User Summary for transactions with balances">
		<fields oils_persist:primary="usr" oils_persist:sequence="">
			<field name="balance_owed" reporter:datatype="money"/>
			<field name="total_owed" reporter:datatype="money"/>
			<field name="total_paid" reporter:datatype="money"/>
			<field name="usr" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER">
					<context link="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="mct" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::collections_tracker" oils_persist:tablename="money.collections_tracker" reporter:label="Collections Tracker">
		<fields oils_persist:primary="id" oils_persist:sequence="money.collections_tracker_id_seq">
			<field name="collector" oils_obj:required="true"/>
			<field name="enter_time" reporter:datatype="timestamp"/>
			<field name="id" reporter:datatype="id"/>
			<field name="location" reporter:datatype="link" oils_obj:required="true"/>
			<field name="usr" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="collector" reltype="has_a" key="id" map="" class="au"/>
			<link field="location" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="money.collections_tracker.create" context_field="location"/>
				<retrieve permission="money.collections_tracker.create" context_field="location"/> 
				<delete permission="money.collections_tracker.create" context_field="location"/>
			</actions>
		</permacrud>
	</class>
	<class id="bre" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="biblio::record_entry" oils_persist:tablename="biblio.record_entry" reporter:core="true" reporter:label="Bibliographic Record">
		<fields oils_persist:primary="id" oils_persist:sequence="biblio.record_entry_id_seq">
			<field reporter:label="Call Numbers" name="call_numbers" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Fixed Field Entry" name="fixed_fields" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Is Active?" name="active" reporter:datatype="bool"/>
			<field reporter:label="Record Creation Date/Time" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Record Creator" name="creator" reporter:datatype="link"/>
			<field reporter:label="Is Deleted?" name="deleted" reporter:datatype="bool"/>
			<field reporter:label="Last Edit Date/Time" name="edit_date" reporter:datatype="timestamp"/>
			<field reporter:label="Last Editing User" name="editor" reporter:datatype="link"/>
			<field reporter:label="Fingerprint" name="fingerprint" reporter:datatype="text"/>
			<field reporter:label="Record ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Last Transaction ID" name="last_xact_id" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="MARC21Slim" name="marc" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Overall Quality" name="quality" reporter:datatype="int"/>
			<field reporter:label="Record Source" name="source" reporter:datatype="link"/>
			<field reporter:label="TCN Source" name="tcn_source" reporter:datatype="text"/>
			<field reporter:label="TCN Value" name="tcn_value" reporter:datatype="text"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="org_unit"/>
			<field reporter:label="Share Depth" name="share_depth" reporter:datatype="int"/>
			<field reporter:label="Metarecord" name="metarecord" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Language Code" name="language" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Non-MARC Record Notes" name="notes" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Indexed Keyword Field Entries" name="keyword_field_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Indexed Subject Field Entries" name="subject_field_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Indexed Title Field Entries" name="title_field_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Indexed Identifier Field Entries" name="identifier_field_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Indexed Author Field Entries" name="author_field_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Indexed Series Field Entries" name="series_field_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Flattened MARC Fields " name="full_record_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Simple Record Extracts " name="simple_record" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Authority Links" name="authority_links" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Subscriptions" name="subscriptions" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="SVF Attributes" name="attrs" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="MVF Attributes" name="mattrs" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Display Fields" name="display_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Flat Display Entries" name="flat_display_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Compressed Display Entries" name="compressed_display_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Wide Display Entries" name="wide_display_entry" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Merge Date" name="merge_date" reporter:datatype="timestamp"/>
			<field reporter:label="Merged To" name="merged_to" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="simple_record" reltype="might_have" key="id" map="" class="rmsr"/>
			<link field="metarecord" reltype="might_have" key="source" map="metarecord" class="mmrsm"/>
			<link field="call_numbers" reltype="has_many" key="record" map="" class="acn"/>
			<link field="keyword_field_entries" reltype="has_many" key="source" map="" class="mkfe"/>
			<link field="fixed_fields" reltype="might_have" key="record" map="" class="mrd"/>
			<link field="language" reltype="might_have" key="record" map="item_lang" class="mrd"/>
			<link field="subject_field_entries" reltype="has_many" key="source" map="" class="msfe"/>
			<link field="title_field_entries" reltype="has_many" key="source" map="" class="mtfe"/>
			<link field="identifier_field_entries" reltype="has_many" key="source" map="" class="mife"/>
			<link field="notes" reltype="has_many" key="record" map="" class="bren"/>
			<link field="author_field_entries" reltype="has_many" key="source" map="" class="mafe"/>
			<link field="series_field_entries" reltype="has_many" key="source" map="" class="msefe"/>
			<link field="full_record_entries" reltype="has_many" key="record" map="" class="mfr"/>
			<link field="authority_links" reltype="has_many" key="bib" map="" class="abl"/>
			<link field="subscriptions" reltype="has_many" key="record_entry" map="" class="ssub"/>
			<link field="attrs" reltype="might_have" key="id" map="" class="mra"/>
			<link field="mattrs" reltype="has_many" key="id" map="" class="mraf"/>
			<link field="source" reltype="has_a" key="id" map="" class="cbs"/>
			<link field="display_entries" reltype="has_many" key="source" map="" class="mde"/>
			<link field="flat_display_entries" reltype="has_many" key="source" map="" class="mfde"/>
			<link field="compressed_display_entries" reltype="has_many" key="source" map="" class="mcde"/>
			<link field="wide_display_entry" reltype="might_have" key="source" map="" class="mwde"/>
			<link field="merged_to" reltype="has_a" key="id" map="" class="bre"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_MARC IMPORT_MARC" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_MARC" global_required="true"/>
		<!-- WARNING: Deleting records via PCRUD does NOT check that any prerequisite conditions have been handled first. It is your responsibility to check for those conditions before deleting bib records. -->
				<delete permission="DELETE_RECORD" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="aouhoo" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::org_unit::hours_of_operation" oils_persist:tablename="actor.hours_of_operation" reporter:label="Hours of Operation">
		<fields oils_persist:primary="id">
			<field name="dow_0_close"/>
			<field name="dow_0_open"/>
			<field name="dow_0_note" reporter:datatype="text"/>
			<field name="dow_1_close"/>
			<field name="dow_1_open"/>
			<field name="dow_1_note" reporter:datatype="text"/>
			<field name="dow_2_close"/>
			<field name="dow_2_open"/>
			<field name="dow_2_note" reporter:datatype="text"/>
			<field name="dow_3_close"/>
			<field name="dow_3_open"/>
			<field name="dow_3_note" reporter:datatype="text"/>
			<field name="dow_4_close"/>
			<field name="dow_4_open"/>
			<field name="dow_4_note" reporter:datatype="text"/>
			<field name="dow_5_close"/>
			<field name="dow_5_open"/>
			<field name="dow_5_note" reporter:datatype="text"/>
			<field name="dow_6_close"/>
			<field name="dow_6_open"/>
			<field name="dow_6_note" reporter:datatype="text"/>
			<field name="id" reporter:datatype="id" oils_obj:required="true"/>
			<field name="org_unit" oils_persist:virtual="true" reporter:datatype="org_unit"/>
		</fields>
		<links>
			<link field="id" reltype="might_have" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_HOURS_OF_OPERATION" context_field="id"/>
				<retrieve/>
				<update permission="UPDATE_HOURS_OF_OPERATION" context_field="id"/>
				<delete permission="DELETE_HOURS_OF_OPERATION" context_field="id"/>
			</actions>
		</permacrud>
	</class>
	<class id="bmp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="biblio::monograph_part" oils_persist:tablename="biblio.monograph_part" reporter:label="Monograph Parts" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="biblio.monograph_part_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="record" reporter:datatype="link" oils_obj:required="true"/>
			<field name="label" reporter:datatype="text" oils_obj:required="true"/>
			<field name="label_sortkey" reporter:datatype="text" oils_obj:required="true"/>
			<field name="deleted" reporter:datatype="bool"/>
			<field name="creator" reporter:datatype="link"/>
			<field name="create_date" reporter:datatype="timestamp"/>
			<field name="editor" reporter:datatype="link"/>
			<field name="edit_date" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="record" reltype="has_a" key="id" map="" class="bre"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_MONOGRAPH_PART" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_MONOGRAPH_PART" global_required="true"/>
				<delete permission="DELETE_MONOGRAPH_PART" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="acpm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::copy_part_map" oils_persist:tablename="asset.copy_part_map" reporter:label="Item Monograph Part Map">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.copy_part_map_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="target_copy" reporter:datatype="link" oils_obj:required="true"/>
			<field name="part" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="target_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="part" reltype="has_a" key="id" map="" class="bmp"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="MAP_MONOGRAPH_PART" global_required="true"/>
				<retrieve/>
				<update permission="MAP_MONOGRAPH_PART" global_required="true"/>
				<delete permission="MAP_MONOGRAPH_PART" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="aecc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::emergency_closing_circulation" oils_persist:tablename="action.emergency_closing_circulation" reporter:label="Emergency Closing Circulation Entry" oils_persist:readonly="true"> <!-- This is not a view, but is managed via functions, so it's readonly. -->
		<fields oils_persist:primary="id">
			<field name="id" reporter:datatype="id"/>
			<field name="circulation" reporter:datatype="link"/>
			<field name="emergency_closing" reporter:datatype="link"/>
			<field name="original_due_date" reporter:datatype="timestamp"/>
			<field name="process_time" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="circulation" reltype="has_a" key="id" map="" class="circ"/>
			<link field="emergency_closing" reltype="has_a" key="id" map="" class="aec"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="aecr" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::emergency_closing_reservation" oils_persist:tablename="action.emergency_closing_reservation" reporter:label="Emergency Closing Reservation Entry" oils_persist:readonly="true"> <!-- This is not a view, but is managed via functions, so it's readonly. -->
		<fields oils_persist:primary="id">
			<field name="id" reporter:datatype="id"/>
			<field name="reservation" reporter:datatype="link"/>
			<field name="emergency_closing" reporter:datatype="link"/>
			<field name="original_end_time" reporter:datatype="timestamp"/>
			<field name="process_time" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="reservation" reltype="has_a" key="id" map="" class="bresv"/>
			<link field="emergency_closing" reltype="has_a" key="id" map="" class="aec"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="aech" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::emergency_closing_hold" oils_persist:tablename="action.emergency_closing_hold" reporter:label="Emergency Closing Hold Entry" oils_persist:readonly="true"> <!-- This is not a view, but is managed via functions, so it's readonly. -->
		<fields oils_persist:primary="id">
			<field name="id" reporter:datatype="id"/>
			<field name="hold" reporter:datatype="link"/>
			<field name="emergency_closing" reporter:datatype="link"/>
			<field name="original_shelf_expire_time" reporter:datatype="timestamp"/>
			<field name="process_time" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="hold" reltype="has_a" key="id" map="" class="ahr"/>
			<link field="emergency_closing" reltype="has_a" key="id" map="" class="aec"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="aecs" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::emergency_closing_status" oils_persist:tablename="action.emergency_closing_status" reporter:label="Emergency Closing Status" oils_persist:readonly="true">
		<fields oils_persist:primary="id">
			<field name="id" reporter:datatype="id"/>
			<field name="creator" reporter:datatype="link"/>
			<field name="create_time" reporter:datatype="timestamp"/>
			<field name="process_start_time" reporter:datatype="timestamp"/>
			<field name="process_end_time" reporter:datatype="timestamp"/>
			<field name="last_update_time" reporter:datatype="timestamp"/>
			<field name="circulations" reporter:datatype="int"/>
			<field name="circulations_complete" reporter:datatype="int"/>
			<field name="reservations" reporter:datatype="int"/>
			<field name="reservations_complete" reporter:datatype="int"/>
			<field name="holds" reporter:datatype="int"/>
			<field name="holds_complete" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="aec"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="aec" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::emergency_closing" oils_persist:tablename="action.emergency_closing" reporter:label="Emergency Closing">
		<fields oils_persist:primary="id" oils_persist:sequence="action.emergency_closing_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field name="create_time" reporter:datatype="timestamp"/>
			<field name="process_start_time" reporter:datatype="timestamp"/>
			<field name="process_end_time" reporter:datatype="timestamp"/>
			<field name="last_update_time" reporter:datatype="timestamp"/>
			<field name="closing" oils_persist:virtual="true" reporter:datatype="link"/>
			<field name="status" oils_persist:virtual="true" reporter:datatype="link"/>
			<field name="circulations" oils_persist:virtual="true" reporter:datatype="link"/>
			<field name="reservations" oils_persist:virtual="true" reporter:datatype="link"/>
			<field name="holds" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="closing" reltype="might_have" key="emergency_closing" map="" class="aoucd"/>
			<link field="status" reltype="might_have" key="id" map="" class="aecs"/>
			<link field="circulations" reltype="has_many" key="emergency_closing" map="" class="aecc"/>
			<link field="reservations" reltype="has_many" key="emergency_closing" map="" class="aecr"/>
			<link field="holds" reltype="has_many" key="emergency_closing" map="" class="aech"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="EMERGENCY_CLOSING">
					<context link="closing" field="org_unit"/>
				</create>
				<retrieve/>
				<update permission="EMERGENCY_CLOSING">
					<context link="closing" field="org_unit"/>
				</update>
				<delete permission="EMERGENCY_CLOSING">
					<context link="closing" field="org_unit"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="aoucd" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::org_unit::closed_date" oils_persist:tablename="actor.org_unit_closed" reporter:label="Closed Dates">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.org_unit_closed_id_seq">
			<field name="close_end" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field name="close_start" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id"/>
			<field name="org_unit" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field name="reason" reporter:datatype="text"/>
			<field name="full_day" reporter:datatype="bool"/>
			<field name="multi_day" reporter:datatype="bool"/>
			<field name="emergency_closing" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
			<link field="emergency_closing" reltype="has_a" key="id" map="" class="aec"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_ORG_UNIT_CLOSING" context_field="org_unit"/>
				<retrieve/>
				<update permission="UPDATE_ORG_UNIT_CLOSING" context_field="org_unit"/>
				<delete permission="DELETE_ORG_UNIT_CLOSING" context_field="org_unit"/>
			</actions>
		</permacrud>
	</class>
	<class id="crcd" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::rules::circ_duration" oils_persist:tablename="config.rule_circ_duration" reporter:label="Circulation Duration Rule" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.rule_circ_duration_id_seq">
			<field name="extended" reporter:datatype="interval" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id" reporter:selector="name"/>
			<field name="max_renewals" reporter:datatype="int" oils_obj:required="true"/>
			<field name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field name="normal" reporter:datatype="interval" oils_obj:required="true"/>
			<field name="shrt" reporter:datatype="interval" oils_obj:required="true"/>
			<field name="max_auto_renewals" reporter:datatype="int" />
		</fields>
		<links>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_CIRC_DURATION" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_CIRC_DURATION" global_required="true"/>
				<delete permission="DELETE_CIRC_DURATION" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="chdd" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::hard_due_date" oils_persist:tablename="config.hard_due_date" reporter:label="Hard Due Date">
		<fields oils_persist:primary="id" oils_persist:sequence="config.hard_due_date_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Always Use?" name="forceto" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Current Ceiling Date" name="ceiling_date" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Values" name="values" oils_persist:virtual="true" reporter:datatype="link" config_field="true"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="values" reltype="has_many" key="hard_due_date" map="" class="chddv"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_CIRC_DURATION" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_CIRC_DURATION" global_required="true"/>
				<delete permission="DELETE_CIRC_DURATION" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="chddv" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::hard_due_date_values" oils_persist:tablename="config.hard_due_date_values" reporter:label="Hard Due Date Values">
		<fields oils_persist:primary="id" oils_persist:sequence="config.hard_due_date_values_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Hard Due Date" name="hard_due_date" reporter:datatype="link" config_field="true" oils_obj:required="true"/>
			<field reporter:label="Ceiling Date" name="ceiling_date" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Active Date" name="active_date" reporter:datatype="timestamp" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="hard_due_date" reltype="has_a" key="id" map="" class="chdd"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_CIRC_DURATION" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_CIRC_DURATION" global_required="true"/>
				<delete permission="DELETE_CIRC_DURATION" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="mobts" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::open_billable_transaction_summary" oils_persist:tablename="money.open_billable_xact_summary" reporter:label="Open Billable Transaction Summary">
		<fields oils_persist:primary="id" oils_persist:sequence="">
			<field name="balance_owed" reporter:datatype="money"/>
			<field name="id" reporter:datatype="id"/>
			<field name="last_billing_note" reporter:datatype="text"/>
			<field name="last_billing_ts" reporter:datatype="timestamp"/>
			<field name="last_billing_type" reporter:datatype="text"/>
			<field name="last_payment_note" reporter:datatype="text"/>
			<field name="last_payment_ts" reporter:datatype="timestamp"/>
			<field name="last_payment_type" reporter:datatype="text"/>
			<field name="total_owed" reporter:datatype="money"/>
			<field name="total_paid" reporter:datatype="money"/>
			<field name="usr" reporter:datatype="link"/>
			<field name="xact_finish" reporter:datatype="timestamp"/>
			<field name="xact_start" reporter:datatype="timestamp"/>
			<field name="xact_type" reporter:datatype="text"/>
			<field name="xact" oils_persist:virtual="true" reporter:datatype="link"/>
			<field name="grocery" oils_persist:virtual="true" reporter:datatype="link"/>
			<field name="circulation" oils_persist:virtual="true" reporter:datatype="link"/>
			<field name="reservation" oils_persist:virtual="true" reporter:datatype="link"/>
			<field name="billing_location" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="xact" reltype="might_have" key="id" map="" class="mbt"/>
			<link field="circulation" reltype="might_have" key="id" map="" class="circ"/>
			<link field="grocery" reltype="might_have" key="id" map="" class="mg"/>
			<link field="reservation" reltype="might_have" key="id" map="" class="bresv"/>
			<link field="billing_location" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER_TRANSACTIONS">
					<context link="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="au" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::user" oils_persist:tablename="actor.usr" reporter:core="true" reporter:label="ILS User">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.usr_id_seq">
			<field reporter:label="All Addresses" name="addresses" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="All Library Cards" name="cards" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="All Circulations" name="checkouts" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="All Hold Requests" name="hold_requests" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="All Permissions" name="permissions" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="All User Settings" name="settings" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Standing Penalties" name="standing_penalties" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Statistical Category Entries" name="stat_cat_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Survey Responses" name="survey_responses" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Privacy Waiver Entries" name="waiver_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Workstation Org Unit" name="ws_ou" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Workstation ID" name="wsid" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Active" name="active" reporter:datatype="bool"/>
			<field reporter:label="Barred" name="barred" reporter:datatype="bool"/>
			<field reporter:label="Physical Address" name="billing_address" reporter:datatype="link"/>
			<field reporter:label="Current Library Card" name="card" reporter:datatype="link"/>
			<field reporter:label="Claims-returned Count" name="claims_returned_count" reporter:datatype="int"/>
			<field reporter:label="Claims Never Checked Out Count" name="claims_never_checked_out_count" reporter:datatype="int"/>
			<field reporter:label="Record Creation Date/Time" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="User Credit Balance" name="credit_forward_balance" reporter:datatype="money"/>
			<field reporter:label="Daytime Phone" name="day_phone" reporter:datatype="text"/>
			<field reporter:label="Date of Birth" name="dob" reporter:datatype="timestamp"/>
			<field reporter:label="Email Address" name="email" reporter:datatype="text"/>
			<field reporter:label="Evening Phone" name="evening_phone" reporter:datatype="text"/>
			<field reporter:label="Privilege Expiration Date" name="expire_date" reporter:datatype="timestamp"/>
			<field reporter:label="Last Name" name="family_name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="First Name" name="first_given_name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Home Library" name="home_ou" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="User ID" name="id" reporter:datatype="id" reporter:selector="usrname"/>
			<field reporter:label="Primary Identification Type" name="ident_type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Secondary Identification Type" name="ident_type2" reporter:datatype="link"/>
			<field reporter:label="Primary Identification" name="ident_value" reporter:datatype="text"/>
			<field reporter:label="Secondary Identification" name="ident_value2" reporter:datatype="text"/>
			<field reporter:label="Last Transaction ID" name="last_xact_id" reporter:datatype="text"/>
			<field reporter:label="Mailing Address" name="mailing_address" reporter:datatype="link"/>
			<field reporter:label="Is Group Lead Account" name="master_account" reporter:datatype="bool"/>
			<field reporter:label="Internet Access Level" name="net_access_level" reporter:datatype="link"/>
			<field reporter:label="Other Phone" name="other_phone" reporter:datatype="text"/>
			<field reporter:label="Password" name="passwd" oils_persist:virtual="true" suppress_controller="open-ils.pcrud open-ils.reporter-store" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Photo URL" name="photo_url" reporter:datatype="text"/>
			<field reporter:label="Prefix/Title" name="prefix" reporter:datatype="text"/>
			<field reporter:label="Main (Profile) Permission Group" name="profile" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Middle Name" name="second_given_name" reporter:datatype="text"/>
			<field reporter:label="Standing (unused)" name="standing" reporter:datatype="link"/>
			<field reporter:label="Suffix" name="suffix" reporter:datatype="text"/>
			<field reporter:label="Is Super User" name="super_user" reporter:datatype="bool"/>
			<field reporter:label="Family Linkage or other Group" name="usrgroup" reporter:datatype="int"/>
			<field reporter:label="OPAC/Staff Client Username" name="usrname" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="OPAC/Staff Client Holds Alias" name="alias" reporter:datatype="text"/>
			<field reporter:label="Juvenile" name="juvenile" reporter:datatype="bool"/>
			<field reporter:label="Record Last Update Time" name="last_update_time" reporter:datatype="timestamp"/>
			<field reporter:label="Preferred Prefix" name="pref_prefix" reporter:datatype="text"/>
			<field reporter:label="Preferred First Name" name="pref_first_given_name" reporter:datatype="text"/>
			<field reporter:label="Preferred Middle Name" name="pref_second_given_name" reporter:datatype="text"/>
			<field reporter:label="Preferred Last Name" name="pref_family_name" reporter:datatype="text"/>
			<field reporter:label="Preferred Suffix" name="pref_suffix" reporter:datatype="text"/>
			<field reporter:label="Parent/Guardian" name="guardian" reporter:datatype="text"/>
			<field reporter:label="Name Keywords" name="name_keywords" reporter:datatype="text"/>
			<field reporter:label="Name Keyword internal tsvector" name="name_kw_tsvector" reporter:datatype="text"/>
			<field reporter:label="Additional Permission Groups" name="groups" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Is Deleted" name="deleted" reporter:datatype="bool"/>
			<field reporter:label="User Notes" name="notes" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Demographic Info" name="demographic" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Billable Transactions" name="billable_transactions" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Money Summary" name="money_summary" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Open Billable Transactions" name="open_billable_transactions_summary" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Checkins" name="checkins" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Circulations Performed as Staff" name="performed_circulations" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Fund Allocation Percentages" name="fund_alloc_pcts" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Reservations" name="reservations" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="User Activity Entries" name="usr_activity" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="User/Working Location Map" name="usr_work_ou_map" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Patron Preferred Language" name="locale" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="demographic" reltype="might_have" key="id" map="" class="rud"/>
			<link field="net_access_level" reltype="has_a" key="id" map="" class="cnal"/>
			<link field="profile" reltype="has_a" key="id" map="" class="pgt"/>
			<link field="ident_type" reltype="has_a" key="id" map="" class="cit"/>
			<link field="billing_address" reltype="has_a" key="id" map="" class="aua"/>
			<link field="mailing_address" reltype="has_a" key="id" map="" class="aua"/>
			<link field="home_ou" reltype="has_a" key="id" map="" class="aou"/>
			<link field="standing" reltype="has_a" key="id" map="" class="cst"/>
			<link field="card" reltype="has_a" key="id" map="" class="ac"/>
			<link field="ident_type2" reltype="has_a" key="id" map="" class="cit"/>
			<link field="stat_cat_entries" reltype="has_many" key="target_usr" map="" class="actscecm"/>
			<link field="waiver_entries" reltype="has_many" key="usr" map="" class="aupw"/>
			<link field="groups" reltype="has_many" key="usr" map="grp" class="pugm"/>
			<link field="usrgroup" reltype="has_many" key="usrgroup" map="" class="au"/>
			<link field="checkouts" reltype="has_many" key="usr" map="" class="circ"/>
			<link field="hold_requests" reltype="has_many" key="usr" map="" class="ahr"/>
			<link field="permissions" reltype="has_many" key="usr" map="perm" class="pupm"/>
			<link field="settings" reltype="has_many" key="usr" map="" class="aus"/>
			<link field="billable_transactions" reltype="has_many" key="usr" map="" class="mbt"/>
			<link field="open_billable_transactions_summary" reltype="has_many" key="usr" map="" class="mobts"/>
			<link field="money_summary" reltype="might_have" key="usr" map="" class="mus"/>
			<link field="standing_penalties" reltype="has_many" key="usr" map="" class="ausp"/>
			<link field="addresses" reltype="has_many" key="usr" map="" class="aua"/>
			<link field="survey_responses" reltype="has_many" key="usr" map="" class="asvr"/>
			<link field="notes" reltype="has_many" key="usr" map="" class="aum"/>
			<link field="checkins" reltype="has_many" key="checkin_staff" map="" class="circ"/>
			<link field="cards" reltype="has_many" key="usr" map="" class="ac"/>
			<link field="performed_circulations" reltype="has_many" key="circ_staff" map="" class="circ"/>
			<link field="fund_alloc_pcts" reltype="has_many" key="allocator" map="" class="acqfap"/>
			<link field="reservations" reltype="has_many" key="usr" map="" class="bresv"/>
			<link field="usr_activity" reltype="has_many" key="usr" map="" class="auact"/>
			<link field="usr_work_ou_map" reltype="has_many" key="usr" map="" class="puwoum"/>
			<link field="locale" reltype="has_a" key="code" map="" class="i18n_l"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER user_request.view" context_field="home_ou"/>
			</actions>
		</permacrud>
	</class>
	<class id="cuat" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::usr_activity_type" oils_persist:tablename="config.usr_activity_type" reporter:label="User Activity Type" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.usr_activity_type_id_seq">
			<field name="id" reporter:label="ID" reporter:datatype="id" reporter:selector="label"/>
			<field name="ewho" reporter:label="Event Caller" reporter:datatype="text"/>
			<field name="ewhat" reporter:label="Event Type" reporter:datatype="text"/>
			<field name="ehow" reporter:label="Event Mechanism" reporter:datatype="text"/>
			<field name="label" reporter:label="Label" reporter:datatype="text" oils_obj:required="true"/>
			<field name="egroup" reporter:label="Activity Group" reporter:datatype="text" oils_obj:required="true"/>
			<field name="enabled" reporter:label="Enabled" reporter:datatype="bool"/>
			<field name="transient" reporter:label="Transient" reporter:datatype="bool"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_USER_ACTIVITY_TYPE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_USER_ACTIVITY_TYPE" global_required="true"/>
				<delete permission="ADMIN_USER_ACTIVITY_TYPE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="auact" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::usr_activity" oils_persist:tablename="actor.usr_activity" reporter:label="User Activity">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.usr_activity_id_seq">
			<field name="id" reporter:label="ID" reporter:datatype="id"/>
			<field name="usr" reporter:label="User" reporter:datatype="link"/>
			<field name="etype" reporter:label="Activity Type" reporter:datatype="link" oils_obj:required="true"/>
			<field name="event_time" reporter:label="Event Time" reporter:datatype="timestamp"/>
			<field name="event_data" reporter:label="Event Data" reporter:datatype="text" suppress_controller="open-ils.pcrud open-ils.reporter-store"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="etype" reltype="has_a" key="id" map="" class="cuat"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="RUN_REPORTS">
					<context link="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="atb" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::toolbar" oils_persist:tablename="actor.toolbar" reporter:label="Custom Toolbar">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.toolbar_id_seq">
			<field name="id" reporter:label="ID" reporter:datatype="id"/>
			<field name="usr" reporter:label="Owning User" reporter:datatype="link"/>
			<field name="org" reporter:label="Owning Org Unit" reporter:datatype="link"/>
			<field name="ws" reporter:label="Owning Workstation" reporter:datatype="link"/>
			<field name="label" reporter:label="Label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field name="layout" reporter:label="Layout" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="org" reltype="has_a" key="id" map="" class="aou"/>
			<link field="ws" reltype="has_a" key="id" map="" class="aws"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_TOOLBAR" context_field="org"/>
				<retrieve permission="ADMIN_TOOLBAR STAFF_LOGIN" context_field="org">
					<context link="usr" field="home_ou"/>
					<context link="ws" field="owning_lib"/>
				</retrieve>
				<update permission="ADMIN_TOOLBAR" context_field="org"/>
				<delete permission="ADMIN_TOOLBAR" context_field="org"/>
			</actions>
		</permacrud>
	</class>
	<class id="csg" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::settings_group" oils_persist:tablename="config.settings_group" reporter:label="Settings Group">
		<fields oils_persist:primary="name">
			<field name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_USER_SETTING_GROUP" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_USER_SETTING_GROUP" global_required="true"/>
				<delete permission="ADMIN_USER_SETTING_GROUP" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="cust" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::usr_setting_type" oils_persist:tablename="config.usr_setting_type" reporter:label="User Setting Type">
		<fields oils_persist:primary="name">
			<field name="name" reporter:label="Name" reporter:datatype="text" oils_obj:required="true"/>
			<field name="label" reporter:label="Label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field name="description" reporter:label="Description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field name="datatype" reporter:label="Datatype" reporter:datatype="text"/>
			<field name="fm_class" reporter:label="Fieldmapper Class" reporter:datatype="text"/>
			<field name="grp" reporter:label="Settings Group" reporter:datatype="link"/>
			<field name="opac_visible" reporter:label="OPAC/Patron Visible" reporter:datatype="bool"/>
			<field name="reg_default" reporter:label="Registration Default" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="name" reltype="has_many" key="name" map="" class="aus"/>
			<link field="grp" reltype="has_a" key="name" map="" class="csg"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_USER_SETTING_TYPE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_USER_SETTING_TYPE" global_required="true"/>
				<delete permission="ADMIN_USER_SETTING_TYPE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="coust" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::org_unit_setting_type" oils_persist:tablename="config.org_unit_setting_type" reporter:label="Organizational Unit Setting Type">
		<fields oils_persist:primary="name">
			<field name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field name="datatype" reporter:datatype="text"/>
			<field name="view_perm" reporter:datatype="link"/>
			<field name="update_perm" reporter:datatype="link"/>
			<field name="fm_class" reporter:datatype="text"/>
			<field name="grp" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="name" reltype="has_many" key="name" map="" class="aous"/>
			<link field="view_perm" reltype="has_a" key="id" map="" class="ppl"/>
			<link field="update_perm" reltype="has_a" key="id" map="" class="ppl"/>
			<link field="grp" reltype="has_a" key="name" map="" class="csg"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ORG_UNIT_SETTING_TYPE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_ORG_UNIT_SETTING_TYPE" global_required="true"/>
				<delete permission="ADMIN_ORG_UNIT_SETTING_TYPE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="aous" controller="open-ils.cstore" oils_obj:fieldmapper="actor::org_unit_setting" oils_persist:cardinality="high" oils_persist:tablename="actor.org_unit_setting" reporter:label="Organizational Unit Setting">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.org_unit_setting_id_seq">
			<field name="id"/>
			<field name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field name="org_unit" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
			<link field="name" reltype="has_a" key="name" map="" class="coust"/>
		</links>
	</class>
	<class id="acpn" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::copy_note" oils_persist:tablename="asset.copy_note" reporter:label="Item Note">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.copy_note_id_seq">
			<field reporter:label="Note Creation Date/Time" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Note Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Note ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Item" name="owning_copy" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Is OPAC Visible?" name="pub" reporter:datatype="bool"/>
			<field reporter:label="Note Title" name="title" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Note Content" name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="owning_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_COPY_NOTE">
					<context link="owning_copy" field="circ_lib"/>
				</create>
				<retrieve permission="VIEW_COPY_NOTES">
					<context link="owning_copy" field="circ_lib"/>
				</retrieve>
				<update permission="UPDATE_COPY_NOTE">
					<context link="owning_copy" field="circ_lib"/>
				</update>
				<delete permission="DELETE_COPY_NOTE">
					<context link="owning_copy" field="circ_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="mfr" controller="open-ils.cstore" oils_obj:fieldmapper="metabib::full_rec" oils_persist:tablename="metabib.full_rec" reporter:label="Flattened MARC Fields">
		<fields oils_persist:primary="id" oils_persist:sequence="metabib.full_rec_id_seq">
			<field reporter:label="Field ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Indicator 1" name="ind1" oils_persist:primitive="string" reporter:datatype="text"/>
			<field reporter:label="Indicator 2" name="ind2" oils_persist:primitive="string" reporter:datatype="text"/>
			<field reporter:label="Bib Record Entry" name="record" reporter:datatype="link"/>
			<field reporter:label="Subfield" name="subfield" oils_persist:primitive="string" reporter:datatype="text"/>
			<field reporter:label="Tag" name="tag" reporter:datatype="text"/>
			<field reporter:label="Normalized Value" name="value" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="record" reltype="has_a" key="id" map="" class="bre"/>
		</links>
	</class>
	<class id="mmr" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="metabib::metarecord" oils_persist:tablename="metabib.metarecord" reporter:label="Metarecord">
		<fields oils_persist:primary="id" oils_persist:sequence="metabib.metarecord_id_seq">
			<field name="fingerprint" reporter:datatype="text" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id" reporter:selector="fingerprint"/>
			<field name="master_record" reporter:datatype="link"/>
			<field name="mods" reporter:datatype="text"/>
			<field name="source_records" oils_persist:virtual="true" reporter:datatype="link"/>
			<field name="source_maps" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="master_record" reltype="has_a" key="id" map="" class="bre"/>
			<link field="source_records" reltype="has_many" key="metarecord" map="source" class="mmrsm"/>
			<link field="source_maps" reltype="has_many" key="metarecord" map="" class="mmrsm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="cnal" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::net_access_level" oils_persist:tablename="config.net_access_level" reporter:label="Net Access Level" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.net_access_level_id_seq">
			<field name="id" reporter:selector="name" reporter:datatype="id"/>
			<field name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_NET_ACCESS_LEVEL" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_NET_ACCESS_LEVEL" global_required="true"/>
				<delete permission="DELETE_NET_ACCESS_LEVEL" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="ppl" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="permission::perm_list" oils_persist:tablename="permission.perm_list" reporter:label="Permission List">
		<fields oils_persist:primary="id" oils_persist:sequence="permission.perm_list_id_seq">
			<field name="code" reporter:datatype="text" oils_obj:required="true"/>
			<field name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field name="id" reporter:selector="code" reporter:datatype="id"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_PERM" global_required="true"/>
				<retrieve permission="VIEW_PERMISSION CREATE_PERM UPDATE_PERM DELETE_PERM" global_required="true"/>
				<update permission="UPDATE_PERM" global_required="true"/>
				<delete permission="DELETE_PERM" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="mmrsm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="metabib::metarecord_source_map" oils_persist:tablename="metabib.metarecord_source_map" oils_persist:field_safe="true" reporter:label="Metarecord Source Map">
		<fields oils_persist:primary="id" oils_persist:sequence="metabib.metarecord_source_map_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="metarecord" reporter:datatype="link" oils_obj:required="true"/>
			<field name="source" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="source" reltype="has_a" key="id" map="" class="bre"/>
			<link field="metarecord" reltype="has_a" key="id" map="" class="mmr"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="mde" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="metabib::display_entry" oils_persist:tablename="metabib.display_entry" oils_persist:field_safe="true" reporter:label="Display Field Entry" oils_persist:readonly="true">
		<fields oils_persist:primary="id" oils_persist:sequence="metabib.display_entry_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="field" reporter:datatype="link"/>
			<field name="source" reporter:datatype="link"/>
			<field name="value" reporter:datatype="text"/>
			<field name="highlight" oils_persist:virtual="true" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="source" reltype="has_a" key="id" map="" class="bre"/>
			<link field="field" reltype="has_a" key="id" map="" class="cmf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="mfde" controller="open-ils.cstore open-ils.pcrud" oils_persist:tablename="metabib.flat_display_entry" oils_obj:fieldmapper="metabib::flat_display_entry" oils_persist:field_safe="true" reporter:label="Flat Display Entry" oils_persist:readonly="true">
		<fields>
			<field name="source" reporter:datatype="id"/>
			<field name="name" reporter:datatype="text"/>
			<field name="multi" reporter:datatype="bool"/>
			<field name="label" reporter:datatype="text"/>
			<field name="field" reporter:datatype="link"/>
			<field name="value" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="source" reltype="has_a" key="id" map="" class="bre"/>
			<link field="field" reltype="has_a" key="id" map="" class="cmf"/>
			<link field="name" reltype="has_a" key="name" map="" class="cdfm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="mcde" controller="open-ils.cstore open-ils.pcrud" oils_persist:tablename="metabib.compressed_display_entry" oils_obj:fieldmapper="metabib::compressed_display_entry" oils_persist:field_safe="true" reporter:label="Compressed Display Entry" oils_persist:readonly="true">
		<fields>
			<field name="source" reporter:datatype="id"/>
			<field name="name" reporter:datatype="text"/>
			<field name="multi" reporter:datatype="bool"/>
			<field name="label" reporter:datatype="text"/>
			<field name="field" reporter:datatype="link"/>
			<field name="value" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="source" reltype="has_a" key="id" map="" class="bre"/>
			<link field="field" reltype="has_a" key="id" map="" class="cmf"/>
			<link field="name" reltype="has_a" key="name" map="" class="cdfm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="mwde" controller="open-ils.cstore open-ils.pcrud" oils_persist:tablename="metabib.wide_display_entry" oils_obj:fieldmapper="metabib::wide_display_entry" oils_persist:field_safe="true" reporter:label="Wide Display Entry" oils_persist:readonly="true">
		<fields oils_persist:primary="source">
			<field name="source" reporter:label="Record ID" reporter:datatype="id"/>
			<field name="title" reporter:label="Title" reporter:datatype="text"/>
			<field name="author" reporter:label="Author" reporter:datatype="text"/>
			<field name="creators" reporter:label="Creators" reporter:datatype="text"/>
			<field name="isbn" reporter:label="ISBN" reporter:datatype="text"/>
			<field name="issn" reporter:label="ISSN" reporter:datatype="text"/>
			<field name="upc" reporter:label="UPC" reporter:datatype="text"/>
			<field name="tcn" reporter:label="TCN" reporter:datatype="text"/>
			<field name="edition" reporter:label="Edition" reporter:datatype="text"/>
			<field name="physical_description" reporter:label="Physical Description" reporter:datatype="text"/>
			<field name="publisher" reporter:label="Publisher" reporter:datatype="text"/>
			<field name="series_title" reporter:label="Series Title" reporter:datatype="text"/>
			<field name="subject_geographic" reporter:label="Geographic Subject" reporter:datatype="text"/>
			<field name="subject_name" reporter:label="Name Subject" reporter:datatype="text"/>
			<field name="subject_temporal" reporter:label="Temporal Subject" reporter:datatype="text"/>
			<field name="subject_topic" reporter:label="Topic Subject" reporter:datatype="text"/>
			<field name="abstract" reporter:label="Abstract" reporter:datatype="text"/>
			<field name="toc" reporter:label="Table of Contents" reporter:datatype="text"/>
			<field name="pubdate" reporter:label="Publication Date" reporter:datatype="text"/>
			<field name="type_of_resource" reporter:label="Type of Resource" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="source" reltype="has_a" key="id" map="" class="bre"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="cdfm" controller="open-ils.cstore open-ils.pcrud" oils_persist:tablename="config.display_field_map" oils_obj:fieldmapper="config::display_field_map" oils_persist:field_safe="true" reporter:label="Display Field Map">
		<fields oils_persist:primary="name">
			<field name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field name="field" reporter:datatype="link"/>
			<field name="multi" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="field" reltype="has_a" key="id" map="" class="cmf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_METABIB_FIELD" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_METABIB_FIELD" global_required="true"/>
				<delete permission="DELETE_METABIB_FIELD" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="mfae" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="metabib::facet_entry" oils_persist:tablename="metabib.facet_entry" reporter:label="Combined Facet Entry" oils_persist:readonly="true">
		<fields oils_persist:primary="id" oils_persist:sequence="metabib.facet_entry_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="field" reporter:datatype="link"/>
			<field name="source" reporter:datatype="link"/>
			<field name="value" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="source" reltype="has_a" key="id" map="" class="bre"/>
			<link field="field" reltype="has_a" key="id" map="" class="cmf"/>
		</links>
	</class>
	<class id="mbe" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="metabib::browse_entry" oils_persist:tablename="metabib.browse_entry" reporter:label="Combined Browse Entry" oils_persist:readonly="true">
		<fields oils_persist:primary="id" oils_persist:sequence="metabib.browse_entry_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="value" reporter:datatype="text"/>
			<field name="def_maps" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="def_maps" reltype="has_many" key="entry" map="" class="mbedm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="mbedm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="metabib::browse_entry_def_map" oils_persist:tablename="metabib.browse_entry_def_map" reporter:label="Combined Browse Entry Definition Map" oils_persist:readonly="true">
		<fields oils_persist:primary="id" oils_persist:sequence="metabib.browse_entry_def_map_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="entry" reporter:datatype="link"/>
			<field name="def" reporter:datatype="link"/>
			<field name="source" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="entry" reltype="has_a" key="id" map="" class="mbe"/>
			<link field="def" reltype="has_a" key="id" map="" class="cmf"/>
			<link field="source" reltype="has_a" key="id" map="" class="bre"/>
		</links>
	</class>
	<class id="mbeshm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="metabib::browse_entry_simple_heading_map" oils_persist:tablename="metabib.browse_entry_simple_heading_map" reporter:label="Combined Browse Entry Simple Authority Heading Map" oils_persist:readonly="true">
		<fields oils_persist:primary="id" oils_persist:sequence="metabib.browse_entry_simple_heading_map_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="entry" reporter:datatype="link"/>
			<field name="simple_heading" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="entry" reltype="has_a" key="id" map="" class="mbe"/>
			<link field="simple_heading" reltype="has_a" key="id" map="" class="ash"/>
		</links>
	</class>
	<class id="mfe" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="metabib::field_entry" reporter:label="Combined Field Entry View" oils_persist:readonly="true">
		<oils_persist:source_definition><![CDATA[
			SELECT * FROM metabib.author_field_entry
						UNION ALL
			SELECT * FROM metabib.keyword_field_entry
						UNION ALL
			SELECT * FROM metabib.identifier_field_entry
						UNION ALL
			SELECT * FROM metabib.title_field_entry
						UNION ALL
			SELECT * FROM metabib.subject_field_entry
						UNION ALL
			SELECT * FROM metabib.series_field_entry
		]]></oils_persist:source_definition>
		<fields>
			<field name="field" reporter:datatype="link"/>
			<field name="id" reporter:datatype="id"/>
			<field name="source" reporter:datatype="link"/>
			<field name="value" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="source" reltype="has_a" key="id" map="" class="bre"/>
			<link field="field" reltype="has_a" key="id" map="" class="cmf"/>
		</links>
	</class>
	<class id="mkfe" controller="open-ils.cstore" oils_obj:fieldmapper="metabib::keyword_field_entry" oils_persist:tablename="metabib.keyword_field_entry" reporter:label="Keyword Field Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="metabib.keyword_field_entry_id_seq">
			<field name="field" reporter:datatype="link" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id"/>
			<field name="source" reporter:datatype="link" oils_obj:required="true"/>
			<field name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="source" reltype="has_a" key="id" map="" class="bre"/>
			<link field="field" reltype="has_a" key="id" map="" class="cmf"/>
		</links>
	</class>
	<class id="mcp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::cash_payment" oils_persist:tablename="money.cash_payment" reporter:label="Cash Payment">
		<fields oils_persist:primary="id" oils_persist:sequence="money.payment_id_seq">
			<field name="accepting_usr" reporter:datatype="link" oils_obj:required="true"/>
			<field name="amount" reporter:datatype="money" oils_obj:required="true"/>
			<field name="amount_collected" reporter:datatype="money" oils_obj:required="true"/>
			<field name="cash_drawer" reporter:datatype="link"/>
			<field name="id" reporter:datatype="id"/>
			<field name="note" reporter:datatype="text"/>
			<field name="payment_ts" reporter:datatype="timestamp"/>
			<field name="xact" reporter:datatype="link" oils_obj:required="true"/>
			<field name="payment_type" oils_persist:virtual="true" reporter:datatype="text"/>
			<field name="payment" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="payment" reltype="might_have" key="id" map="" class="mp"/>
			<link field="accepting_usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="cash_drawer" reltype="has_a" key="id" map="" class="aws"/>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER_TRANSACTIONS">
					<context link="xact" jump="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="mfp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::forgive_payment" oils_persist:tablename="money.forgive_payment" reporter:label="Forgive Payment">
		<fields oils_persist:primary="id" oils_persist:sequence="money.payment_id_seq">
			<field name="accepting_usr" reporter:datatype="link" oils_obj:required="true"/>
			<field name="amount" reporter:datatype="money" oils_obj:required="true"/>
			<field name="amount_collected" reporter:datatype="money" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id"/>
			<field name="note" reporter:datatype="text"/>
			<field name="payment_ts" reporter:datatype="timestamp"/>
			<field name="xact" reporter:datatype="link" oils_obj:required="true"/>
			<field name="payment_type" oils_persist:virtual="true" reporter:datatype="text"/>
			<field name="payment" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="payment" reltype="might_have" key="id" map="" class="mp"/>
			<link field="accepting_usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER_TRANSACTIONS">
					<context link="xact" jump="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="maa" controller="open-ils.cstore" oils_obj:fieldmapper="money::account_adjustment" oils_persist:tablename="money.account_adjustment" reporter:label="Account Adjustment">
		<fields oils_persist:primary="id" oils_persist:sequence="money.payment_id_seq">
			<field name="accepting_usr" reporter:datatype="link" oils_obj:required="true"/>
			<field name="amount" reporter:datatype="money" oils_obj:required="true"/>
			<field name="amount_collected" reporter:datatype="money" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id"/>
			<field name="note" reporter:datatype="text"/>
			<field name="payment_ts" reporter:datatype="timestamp"/>
			<field name="xact" reporter:datatype="link" oils_obj:required="true"/>
			<field name="billing" reporter:datatype="link"/>
			<field name="payment_type" oils_persist:virtual="true" reporter:datatype="text"/>
			<field name="payment" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="payment" reltype="might_have" key="id" map="" class="mp"/>
			<link field="accepting_usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
			<link field="billing" reltype="has_a" key="id" map="" class="mb"/>
		</links>
	</class>
	<class id="mrd" controller="open-ils.cstore" oils_obj:fieldmapper="metabib::record_descriptor" oils_persist:tablename="metabib.rec_descriptor" reporter:label="Basic Record Descriptor">
		<fields oils_persist:primary="id" oils_persist:sequence="metabib.rec_descriptor_id_seq">
			<field reporter:label="Audn" name="audience" oils_persist:primitive="string" reporter:datatype="text"/>
			<field reporter:label="BLvl" name="bib_level" oils_persist:primitive="string" reporter:datatype="text"/>
			<field reporter:label="Cat Form" name="cat_form" oils_persist:primitive="string" reporter:datatype="text"/>
			<field reporter:label="Character Encoding" name="char_encoding" oils_persist:primitive="string" reporter:datatype="text"/>
			<field reporter:label="Ctrl" name="control_type" oils_persist:primitive="string" reporter:datatype="text"/>
			<field reporter:label="ELvl" name="enc_level" oils_persist:primitive="string" reporter:datatype="text"/>
			<field reporter:label="Descriptor ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Form" name="item_form" oils_persist:primitive="string" reporter:datatype="text"/>
			<field reporter:label="Lang" name="item_lang" oils_persist:primitive="string" reporter:datatype="text"/>
			<field reporter:label="Type" name="item_type" oils_persist:primitive="string" reporter:datatype="text"/>
			<field reporter:label="LitF" name="lit_form" oils_persist:primitive="string" reporter:datatype="text"/>
			<field reporter:label="Pub Status" name="pub_status" oils_persist:primitive="string" reporter:datatype="text"/>
			<field reporter:label="Bib Record Entry" name="record" reporter:datatype="link"/>
			<field reporter:label="TMat" name="type_mat" oils_persist:primitive="string" reporter:datatype="text"/>
			<field reporter:label="Video Recording Format" name="vr_format" oils_persist:primitive="string" reporter:datatype="text"/>
			<field reporter:label="Date1" name="date1" oils_persist:primitive="string" reporter:datatype="text"/>
			<field reporter:label="Date2" name="date2" oils_persist:primitive="string" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="record" reltype="has_a" key="id" map="" class="bre"/>
			<link field="item_lang" reltype="has_a" key="code" map="" class="clm"/>
			<link field="item_type" reltype="has_a" key="code" map="" class="citm"/>
			<link field="bib_level" reltype="has_a" key="code" map="" class="cblvl"/>
			<link field="item_form" reltype="has_a" key="code" map="" class="cifm"/>
			<link field="audience" reltype="has_a" key="code" map="" class="cam"/>
			<link field="lit_form" reltype="has_a" key="code" map="" class="clfm"/>
		</links>
	</class>

	<class id="csp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::standing_penalty" oils_persist:tablename="config.standing_penalty" reporter:label="Standing Penalty">
		<fields oils_persist:primary="id" oils_persist:sequence="config.standing_penalty_id_seq">
			<field reporter:label="Penalty ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Block List" name="block_list" reporter:datatype="text"/>
			<field reporter:label="Staff Alert" name="staff_alert" reporter:datatype="bool"/>
			<field reporter:label="Org Depth" name="org_depth" reporter:datatype="int"/>
			<field reporter:label="Ignore Proximity" name="ignore_proximity" reporter:datatype="int"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_STANDING_PENALTY" global_required="true"/>
				<retrieve permission="STAFF_LOGIN" global_required="true"/>
				<update permission="ADMIN_STANDING_PENALTY" global_required="true"/>
				<delete permission="ADMIN_STANDING_PENALTY" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="pgpt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="permission::grp_penalty_threshold" oils_persist:tablename="permission.grp_penalty_threshold" reporter:label="Group Penalty Threshold">
		<fields oils_persist:primary="id" oils_persist:sequence="permission.grp_penalty_threshold_id_seq">
			<field name="id" reporter:selector="name" reporter:datatype="id" reporter:label="ID"/>
			<field name="grp" reporter:datatype="link" reporter:label="Group" oils_obj:required="true"/>
			<field name="penalty" reporter:datatype="link" reporter:label="Penalty" oils_obj:required="true"/>
			<field name="threshold" reporter:datatype="float" reporter:label="Threshold" oils_obj:required="true"/>
			<field name="org_unit" reporter:datatype="org_unit" reporter:label="Org Unit" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="penalty" reltype="has_a" key="id" map="" class="csp"/>
			<link field="grp" reltype="has_a" key="id" map="" class="pgt"/>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_GROUP_PENALTY_THRESHOLD" context_field="org_unit"/>
				<retrieve permission="VIEW_GROUP_PENALTY_THRESHOLD ADMIN_GROUP_PENALTY_THRESHOLD" context_field="org_unit"/>
				<update permission="ADMIN_GROUP_PENALTY_THRESHOLD" context_field="org_unit"/>
				<delete permission="ADMIN_GROUP_PENALTY_THRESHOLD" context_field="org_unit"/>
			</actions>
		</permacrud>
	</class>
	<class id="ccs" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::copy_status" oils_persist:cardinality="low" oils_persist:tablename="config.copy_status" oils_persist:restrict_primary="100" reporter:label="Item Status" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="config.copy_status_id_seq">
			<field name="holdable" reporter:datatype="bool" reporter:label="Holdable"/>
			<field name="id" reporter:selector="name" reporter:datatype="id" reporter:label="ID"/>
			<field name="name" reporter:datatype="text" oils_persist:i18n="true" reporter:label="Name" oils_obj:required="true"/>
			<field name="opac_visible" reporter:datatype="bool" reporter:label="OPAC Visible"/>
			<field name="copy_active" reporter:datatype="bool" reporter:label="Sets Item Active"/>
			<field name="restrict_copy_delete" reporter:datatype="bool" reporter:label="Restrict Deletion"/>
			<field name="is_available" reporter:datatype="bool" reporter:label="Available"/>
			<field name="hopeless_prone" reporter:datatype="bool" reporter:label="Prone to Hopeless Holds?"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_COPY_STATUS" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_COPY_STATUS" global_required="true"/>
				<delete permission="DELETE_COPY_STATUS" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="ausp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::user_standing_penalty" oils_persist:tablename="actor.usr_standing_penalty" oils_persist:restrict_primary="100" reporter:label="User Standing Penalty">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.usr_message_id_seq">
			<field name="id" reporter:datatype="id" reporter:label="ID"/>
			<field name="set_date" reporter:datatype="timestamp" reporter:label="Set Date"/>
			<field name="usr" reporter:datatype="link" reporter:label="User" oils_obj:required="true"/>
			<field name="staff" reporter:datatype="link" reporter:label="Staff"/>
			<field name="standing_penalty" reporter:datatype="link" reporter:label="Standing Penalty" oils_obj:required="true"/>
			<field name="org_unit" reporter:datatype="link" reporter:label="Org Unit" oils_obj:required="true"/>
			<field name="stop_date" reporter:datatype="timestamp" reporter:label="Stop Date"/>
			<field name="usr_message" reporter:datatype="link" reporter:label="User Message"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
			<link field="staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="standing_penalty" reltype="has_a" key="id" map="" class="csp"/>
			<link field="usr_message" reltype="has_a" key="id" map="" class="aum"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="UPDATE_USER"><context link="usr" field="home_ou"/></create>
				<retrieve permission="VIEW_USER"><context link="usr" field="home_ou"/></retrieve>
				<update permission="UPDATE_USER"><context link="usr" field="home_ou"/></update>
				<delete permission="UPDATE_USER"><context link="usr" field="home_ou"/></delete>
			</actions>
		</permacrud>
	</class>
	<class id="aua" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::user_address" oils_persist:tablename="actor.usr_address" reporter:label="User Address">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.usr_address_id_seq">
			<field reporter:label="Type" name="address_type" reporter:datatype="text"/>
			<field reporter:label="City" name="city" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Country" name="country" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="County" name="county" reporter:datatype="text"/>
			<field reporter:label="Address ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Postal Code" name="post_code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="State" name="state" reporter:datatype="text"/>
			<field reporter:label="Street (1)" name="street1" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Street (2)" name="street2" reporter:datatype="text"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Valid Address?" name="valid" reporter:datatype="bool"/>
			<field reporter:label="Within City Limits?" name="within_city_limits" reporter:datatype="bool"/>
			<field reporter:label="Replaces" name="replaces" reporter:datatype="link"/>
			<field reporter:label="Pending" name="pending" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="replaces" reltype="has_a" key="id" map="" class="aua"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="UPDATE_USER"><context link="usr" field="home_ou"/></create>
				<retrieve permission="VIEW_USER"><context link="usr" field="home_ou"/></retrieve>
				<update permission="UPDATE_USER"><context link="usr" field="home_ou"/></update>
				<delete permission="UPDATE_USER"><context link="usr" field="home_ou"/></delete>
			</actions>
		</permacrud>
	</class>
	<class id="aal" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::address_alert" oils_persist:tablename="actor.address_alert" reporter:label="Address Alert">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.address_alert_id_seq">
			<field reporter:label="Address Alert ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Active" name="active" reporter:datatype="bool"/>
			<field reporter:label="Match All Fields" name="match_all" reporter:datatype="bool"/>
			<field reporter:label="Alert Message" name="alert_message" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Street (1)" name="street1" reporter:datatype="text"/>
			<field reporter:label="Street (2)" name="street2" reporter:datatype="text"/>
			<field reporter:label="City" name="city" reporter:datatype="text"/>
			<field reporter:label="County" name="county" reporter:datatype="text"/>
			<field reporter:label="State" name="state" reporter:datatype="text"/>
			<field reporter:label="Country" name="country" reporter:datatype="text"/>
			<field reporter:label="Postal Code" name="post_code" reporter:datatype="text"/>
			<field reporter:label="Mailing Address" name="mailing_address" reporter:datatype="bool"/>
			<field reporter:label="Billing Address" name="billing_address" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create context_field="owner" permission="ADMIN_ADDRESS_ALERT"/>
				<retrieve context_field="owner" permission="ADMIN_ADDRESS_ALERT VIEW_ADDRESS_ALERT CREATE_USER"/>
				<update context_field="owner" permission="ADMIN_ADDRESS_ALERT"/>
				<delete context_field="owner" permission="ADMIN_ADDRESS_ALERT"/>
			</actions>
		</permacrud>
	</class>


	<class id="auss" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::usr_saved_search" oils_persist:tablename="actor.usr_saved_search" reporter:label="User Saved Search">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.usr_saved_search_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Create Date" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Query Text" name="query_text" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Query Type" name="query_type" reporter:datatype="text"/>
			<field reporter:label="Target" name="target" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="au"/>
		</links>
	</class>

	<class id="acnn" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::call_number_note" oils_persist:tablename="asset.call_number_note" reporter:label="Call Number Note">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.call_number_note_id_seq">
			<field name="call_number" oils_obj:required="true"/>
			<field name="create_date" reporter:datatype="timestamp"/>
			<field name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id"/>
			<field name="pub" reporter:datatype="bool"/>
			<field name="title" reporter:datatype="text" oils_obj:required="true"/>
			<field name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="call_number" reltype="has_a" key="id" map="" class="acn"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_VOLUME_NOTE">
					<context link="call_number" field="owning_lib"/>
				</create>
				<retrieve permission="VIEW_VOLUME_NOTES">
					<context link="call_number" field="owning_lib"/>
				</retrieve>
				<update permission="UPDATE_VOLUME_NOTE">
					<context link="call_number" field="owning_lib"/>
				</update>
				<delete permission="DELETE_VOLUME_NOTE">
					<context link="call_number" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="arn" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="authority::record_note" oils_persist:tablename="authority.record_note" reporter:label="Authority Record Note">
		<fields oils_persist:primary="id" oils_persist:sequence="authority.record_note_id_seq">
			<field name="create_date" reporter:datatype="timestamp"/>
			<field name="creator" reporter:datatype="link"/>
			<field name="edit_date" reporter:datatype="timestamp"/>
			<field name="editor" reporter:datatype="link"/>
			<field name="id" reporter:datatype="id"/>
			<field name="record" reporter:datatype="link" oils_obj:required="true"/>
			<field name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="record" reltype="has_a" key="id" map="" class="are"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_AUTHORITY_RECORD_NOTE" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_AUTHORITY_RECORD_NOTE" global_required="true"/>
				<delete permission="DELETE_AUTHORITY_RECORD_NOTE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="ocirccount" controller="open-ils.cstore" oils_obj:fieldmapper="action::open_circ_count" reporter:label="Open Circulation Count" oils_persist:readonly="true">
		<oils_persist:source_definition><![CDATA[
SELECT  usr,
		SUM(
			CASE
				WHEN (
					((fine_interval >= '1 day' AND due_date >= 'today') OR (fine_interval < '1 day'  AND due_date > 'now'))
					AND (stop_fines IS NULL OR stop_fines NOT IN ('LOST','CLAIMSRETURNED','LONGOVERDUE'))
				) THEN 1
				ELSE 0
			END
		) AS out,

		SUM(
			CASE
				WHEN (
					((fine_interval >= '1 day' AND due_date < 'today') OR (fine_interval < '1 day'  AND due_date < 'now'))
					AND (stop_fines IS NULL OR stop_fines NOT IN ('LOST','CLAIMSRETURNED','LONGOVERDUE'))
				) THEN 1
				ELSE 0
			END
		) AS overdue,

		SUM( CASE WHEN (xact_finish IS NULL AND stop_fines = 'LOST') THEN 1 ELSE 0 END) AS lost,
		SUM( CASE WHEN stop_fines = 'CLAIMSRETURNED' THEN 1 ELSE 0 END) AS claims_returned,
		SUM( CASE WHEN (xact_finish IS NULL AND stop_fines = 'LONGOVERDUE') THEN 1 ELSE 0 END) AS long_overdue
  FROM  action.circulation
  WHERE checkin_time IS NULL
  GROUP BY 1
		]]></oils_persist:source_definition>
		<fields oils_persist:primary="usr">
			<field reporter:label="User ID" name="usr" reporter:datatype="link"/>
			<field reporter:label="Out" name="out" reporter:datatype="text"/>
			<field reporter:label="Overdue" name="overdue" reporter:datatype="text"/>
			<field reporter:label="Lost" name="lost" reporter:datatype="text"/>
			<field reporter:label="Claims Returned" name="claims_returned" reporter:datatype="text"/>
			<field reporter:label="Long Overdue" name="long_overdue" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
	</class>
	<class id="ocirclist" controller="open-ils.cstore" oils_obj:fieldmapper="action::open_circ_list" reporter:label="Open Circulation List" oils_persist:readonly="true">
		<oils_persist:source_definition><![CDATA[
SELECT  usr,
		STRING_AGG(
			CASE
				WHEN (
					((fine_interval >= '1 day' AND due_date >= 'today') OR (fine_interval < '1 day'  AND due_date > 'now'))
					AND (stop_fines IS NULL OR stop_fines NOT IN ('LOST','CLAIMSRETURNED','LONGOVERDUE'))
				) THEN id::TEXT
				ELSE '0'
			END
		,',') AS out,

		STRING_AGG(
			CASE
				WHEN (
					((fine_interval >= '1 day' AND due_date < 'today') OR (fine_interval < '1 day'  AND due_date < 'now'))
					AND (stop_fines IS NULL OR stop_fines NOT IN ('LOST','CLAIMSRETURNED','LONGOVERDUE'))
				) THEN id::TEXT
				ELSE '0'
			END
		,',') AS overdue,

		STRING_AGG( CASE WHEN (xact_finish IS NULL AND stop_fines = 'LOST') THEN id::TEXT ELSE '0' END,',') AS lost,
		STRING_AGG( CASE WHEN stop_fines = 'CLAIMSRETURNED' THEN id::TEXT ELSE '0' END,',') AS claims_returned,
		STRING_AGG( CASE WHEN (xact_finish IS NULL AND stop_fines = 'LONGOVERDUE') THEN id::TEXT ELSE '0' END,',') AS long_overdue
  FROM  action.circulation
  WHERE checkin_time IS NULL
  GROUP BY 1
		]]></oils_persist:source_definition>
		<fields oils_persist:primary="usr">
			<field reporter:label="User ID" name="usr" reporter:datatype="link"/>
			<field reporter:label="Out" name="out" reporter:datatype="text"/>
			<field reporter:label="Overdue" name="overdue" reporter:datatype="text"/>
			<field reporter:label="Lost" name="lost" reporter:datatype="text"/>
			<field reporter:label="Claims Returned" name="claims_returned" reporter:datatype="text"/>
			<field reporter:label="Long Overdue" name="long_overdue" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
	</class>
	<class id="acsp" controller="open-ils.cstore" oils_obj:fieldmapper="action::curbside" oils_persist:tablename="action.curbside" reporter:label="Curbside Appointment Slot">
		<fields oils_persist:primary="id" oils_persist:sequence="action.curbside_id_seq">
			<field reporter:label="Appointment ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Patron" name="patron" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Pickup Library" name="org" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Appointment Date/Time" name="slot" reporter:datatype="timestamp"/>
			<field reporter:label="Staged" name="staged" reporter:datatype="timestamp"/>
			<field reporter:label="Staging Staff" name="stage_staff" reporter:datatype="link"/>
			<field reporter:label="Arrival Date/Time" name="arrival" reporter:datatype="timestamp"/>
			<field reporter:label="Delivery Date/Time" name="delivered" reporter:datatype="timestamp"/>
			<field reporter:label="Delivery Staff" name="delivery_staff" reporter:datatype="link"/>
			<field reporter:label="Notes" name="notes" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="org" reltype="has_a" key="id" map="" class="aou"/>
			<link field="patron" reltype="has_a" key="id" map="" class="au"/>
			<link field="stage_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="delivery_staff" reltype="has_a" key="id" map="" class="au"/>
		</links>
	</class>
	<class id="circ" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::circulation" oils_persist:tablename="action.circulation" reporter:core="true" reporter:label="Circulation">
		<fields oils_persist:primary="id" oils_persist:sequence="money.billable_xact_id_seq">
			<field reporter:label="Check In Library" name="checkin_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Check In Staff" name="checkin_staff" reporter:datatype="link"/>
			<field reporter:label="Check In Date/Time" name="checkin_time" reporter:datatype="timestamp"/>
			<field reporter:label="Checkout / Renewal Library" name="circ_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Circulating Staff" name="circ_staff" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Desk Renewal" name="desk_renewal" reporter:datatype="bool"/>
			<field reporter:label="Due Date/Time" name="due_date" reporter:datatype="timestamp"/>
			<field reporter:label="Circulation Duration" name="duration" reporter:datatype="interval"/>
			<field reporter:label="Circ Duration Rule" name="duration_rule" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Fine Interval" name="fine_interval" reporter:datatype="interval"/>
			<field reporter:label="Circ ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Max Fine Amount" name="max_fine" reporter:datatype="money"/>
			<field reporter:label="Max Fine Rule" name="max_fine_rule" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="OPAC Renewal" name="opac_renewal" reporter:datatype="bool"/>
			<field reporter:label="Phone Renewal" name="phone_renewal" reporter:datatype="bool"/>
			<field reporter:label="Recurring Fine Amount" name="recurring_fine" reporter:datatype="money"/>
			<field reporter:label="Recurring Fine Rule" name="recurring_fine_rule" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Remaining Renewals" name="renewal_remaining" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Grace Period" name="grace_period" reporter:datatype="interval" oils_obj:required="true"/>
			<field reporter:label="Fine Stop Reason" name="stop_fines" reporter:datatype="text"/>
			<field reporter:label="Fine Stop Date/Time" name="stop_fines_time" reporter:datatype="timestamp"/>
			<field reporter:label="Circulating Item" name="target_copy" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Patron" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Transaction Finish Date/Time" name="xact_finish" reporter:datatype="timestamp"/>
			<field reporter:label="Checkout Date/Time" name="xact_start" reporter:datatype="timestamp"/>
			<field reporter:label="Record Creation Date/Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Workstation" name="workstation" reporter:datatype="link"/>
			<field reporter:label="Checkin Workstation" name="checkin_workstation" reporter:datatype="link"/>
			<field reporter:label="Checkin Scan Date/Time" name="checkin_scan_time" reporter:datatype="timestamp"/>
			<field reporter:label="Parent Circulation" name="parent_circ" reporter:datatype="link"/>
			<field reporter:label="Transaction Billings" name="billings" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Transaction Payments" name="payments" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Base Transaction" name="billable_transaction" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Circulation Type" name="circ_type" oils_persist:virtual="true" reporter:datatype="text"/>
			<field reporter:label="Billing Totals" name="billing_total" oils_persist:virtual="true" reporter:datatype="money"/>
			<field reporter:label="Payment Totals" name="payment_total" oils_persist:virtual="true" reporter:datatype="money"/>
			<field reporter:label="Unrecovered Debt" name="unrecovered" reporter:datatype="bool"/>
			<field reporter:label="Shelving Location" name="copy_location" reporter:datatype="link"/>
			<field reporter:label="Archived Patron Stat-Cat Entries" name="aaactsc_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Archived Item Stat-Cat Entries" name="aaasc_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Auto Renewal" name="auto_renewal" reporter:datatype="bool"/>
			<field reporter:label="Remaining Auto Renewals" name="auto_renewal_remaining" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="billable_transaction" reltype="might_have" key="id" map="" class="mbt"/>
			<link field="circ_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="checkin_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="target_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="checkin_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="payments" reltype="has_many" key="xact" map="" class="mp"/>
			<link field="billings" reltype="has_many" key="xact" map="" class="mb"/>
			<link field="duration_rule" reltype="has_a" key="name" map="" class="crcd"/>
			<link field="max_fine_rule" reltype="has_a" key="name" map="" class="crmf"/>
			<link field="recurring_fine_rule" reltype="has_a" key="name" map="" class="crrf"/>
			<link field="circ_type" reltype="might_have" key="id" map="" class="rcirct"/>
			<link field="billing_total" reltype="might_have" key="xact" map="" class="rxbt"/>
			<link field="payment_total" reltype="might_have" key="xact" map="" class="rxpt"/>
			<link field="workstation" reltype="has_a" key="id" map="" class="aws"/>
			<link field="checkin_workstation" reltype="has_a" key="id" map="" class="aws"/>
			<link field="parent_circ" reltype="has_a" key="id" map="" class="circ"/>
			<link field="renewals" reltype="has_many" key="parent_circ" map="" class="circ"/>
			<link field="copy_location" reltype="has_a" key="id" map="" class="acpl"/>
			<link field="aaactsc_entries" reltype="has_many" key="xact" map="" class="aaactsc"/>
			<link field="aaasc_entries" reltype="has_many" key="xact" map="" class="aaasc"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_CIRCULATIONS" context_field="circ_lib"/>
			</actions>
		</permacrud>
	</class>
	<class id="aacct" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::all_circulation_combined_types" oils_persist:tablename="action.all_circulation_combined_types" reporter:core="true" reporter:label="All Circulation Combined Types" oils_persist:readonly="true">
		<fields>
			<field reporter:label="Checkout / Renewal Library" name="circ_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Circulating Staff" name="circ_staff" reporter:datatype="link"/>
			<field reporter:label="Circ ID" name="id" reporter:datatype="int"/>
			<field reporter:label="Checkout Date/Time" name="xact_start" reporter:datatype="timestamp"/>
			<field reporter:label="Create Date/Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Circulation Type" name="circ_type" reporter:datatype="text"/>
			<field reporter:label="Item Type" name="item_type" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="circ_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_CIRCULATIONS" context_field="circ_lib"/>
			</actions>
		</permacrud>
	</class>
	<class id="aacs" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::all_circulation_slim" oils_persist:tablename="action.all_circulation_slim" reporter:core="false" reporter:label="Combined Aged and Active Circulations (Slim Version)" oils_persist:readonly="true">
		<fields oils_persist:primary="id" oils_persist:sequence="money.billable_xact_id_seq">
			<field reporter:label="Check In Library" name="checkin_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Check In Staff" name="checkin_staff" reporter:datatype="link"/>
			<field reporter:label="Check In Date/Time" name="checkin_time" reporter:datatype="timestamp"/>
			<field reporter:label="Checkout / Renewal Library" name="circ_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Circulating Staff" name="circ_staff" reporter:datatype="link"/>
			<field reporter:label="Desk Renewal" name="desk_renewal" reporter:datatype="bool"/>
			<field reporter:label="Due Date/Time" name="due_date" reporter:datatype="timestamp"/>
			<field reporter:label="Circulation Duration" name="duration" reporter:datatype="interval"/>
			<field reporter:label="Circ Duration Rule" name="duration_rule" reporter:datatype="link"/>
			<field reporter:label="Fine Interval" name="fine_interval" reporter:datatype="interval"/>
			<field reporter:label="Circ ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Max Fine Amount" name="max_fine" reporter:datatype="money"/>
			<field reporter:label="Max Fine Rule" name="max_fine_rule" reporter:datatype="link"/>
			<field reporter:label="OPAC Renewal" name="opac_renewal" reporter:datatype="bool"/>
			<field reporter:label="Phone Renewal" name="phone_renewal" reporter:datatype="bool"/>
			<field reporter:label="Recurring Fine Amount" name="recurring_fine" reporter:datatype="money"/>
			<field reporter:label="Recurring Fine Rule" name="recurring_fine_rule" reporter:datatype="link"/>
			<field reporter:label="Remaining Renewals" name="renewal_remaining" reporter:datatype="int"/>
			<field reporter:label="Grace Period" name="grace_period" reporter:datatype="interval"/>
			<field reporter:label="Fine Stop Reason" name="stop_fines" reporter:datatype="text"/>
			<field reporter:label="Fine Stop Date/Time" name="stop_fines_time" reporter:datatype="timestamp"/>
			<field reporter:label="Circulating Item" name="target_copy" reporter:datatype="link"/>
			<field reporter:label="Transaction Finish Date/Time" name="xact_finish" reporter:datatype="timestamp"/>
			<field reporter:label="Checkout Date/Time" name="xact_start" reporter:datatype="timestamp"/>
			<field reporter:label="Record Creation Date/Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Parent Circulation" name="parent_circ" reporter:datatype="link"/>
			<field reporter:label="Checkin Scan Time" name="checkin_scan_time" reporter:datatype="timestamp"/>
			<field reporter:label="Checkin Workstation" name="checkin_workstation" reporter:datatype="link"/>
			<field reporter:label="Patron" name="usr" reporter:datatype="link"/>
			<field reporter:label="Transaction Billings" name="billings" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Transaction Payments" name="payments" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Base Transaction" name="billable_transaction" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Workstation" name="workstation" reporter:datatype="link"/>
			<field reporter:label="Circulation Type" name="circ_type" oils_persist:virtual="true" reporter:datatype="text"/>
			<field reporter:label="Billing Totals" name="billing_total" oils_persist:virtual="true" reporter:datatype="money"/>
			<field reporter:label="Payment Totals" name="payment_total" oils_persist:virtual="true" reporter:datatype="money"/>
			<field reporter:label="Archived Patron Stat-Cat Entries" name="aaactsc_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Archived Item Stat-Cat Entries" name="aaasc_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Linked Active Circulation" name="active_circ" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Linked Aged Circulation" name="aged_circ" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Auto Renewal" name="auto_renewal" reporter:datatype="bool"/>
			<field reporter:label="Remaining Auto Renewals" name="auto_renewal_remaining" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="billable_transaction" reltype="might_have" key="id" map="" class="mbt"/>
			<link field="circ_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="checkin_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="target_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="checkin_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="payments" reltype="has_many" key="xact" map="" class="mallp"/>
			<link field="billings" reltype="has_many" key="xact" map="" class="mallb"/>
			<link field="duration_rule" reltype="has_a" key="name" map="" class="crcd"/>
			<link field="max_fine_rule" reltype="has_a" key="name" map="" class="crmf"/>
			<link field="recurring_fine_rule" reltype="has_a" key="name" map="" class="crrf"/>
			<link field="circ_type" reltype="might_have" key="id" map="" class="rcirct"/>
			<link field="billing_total" reltype="might_have" key="xact" map="" class="rxbt"/>
			<link field="payment_total" reltype="might_have" key="xact" map="" class="rxpt"/>
			<link field="workstation" reltype="has_a" key="id" map="" class="aws"/>
			<link field="checkin_workstation" reltype="has_a" key="id" map="" class="aws"/>
			<link field="aaactsc_entries" reltype="has_many" key="xact" map="" class="aaactsc"/>
			<link field="aaasc_entries" reltype="has_many" key="xact" map="" class="aaasc"/>
			<link field="active_circ" reltype="might_have" key="id" map="" class="circ"/>
			<link field="aged_circ" reltype="might_have" key="id" map="" class="acirc"/>
			<link field="parent_circ" reltype="might_have" key="id" map="" class="acirc"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_CIRCULATIONS" context_field="circ_lib"/>
			</actions>
		</permacrud>
	</class>

	<class id="combcirc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::all_circulation" oils_persist:tablename="action.all_circulation" reporter:core="true" reporter:label="Combined Aged and Active Circulations" oils_persist:readonly="true">
		<fields oils_persist:primary="id" oils_persist:sequence="money.billable_xact_id_seq">
			<field reporter:label="Check In Library" name="checkin_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Check In Staff" name="checkin_staff" reporter:datatype="link"/>
			<field reporter:label="Check In Date/Time" name="checkin_time" reporter:datatype="timestamp"/>
			<field reporter:label="Checkout / Renewal Library" name="circ_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Circulating Staff" name="circ_staff" reporter:datatype="link"/>
			<field reporter:label="Desk Renewal" name="desk_renewal" reporter:datatype="bool"/>
			<field reporter:label="Due Date/Time" name="due_date" reporter:datatype="timestamp"/>
			<field reporter:label="Circulation Duration" name="duration" reporter:datatype="interval"/>
			<field reporter:label="Circ Duration Rule" name="duration_rule" reporter:datatype="link"/>
			<field reporter:label="Fine Interval" name="fine_interval" reporter:datatype="interval"/>
			<field reporter:label="Circ ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Max Fine Amount" name="max_fine" reporter:datatype="money"/>
			<field reporter:label="Max Fine Rule" name="max_fine_rule" reporter:datatype="link"/>
			<field reporter:label="OPAC Renewal" name="opac_renewal" reporter:datatype="bool"/>
			<field reporter:label="Phone Renewal" name="phone_renewal" reporter:datatype="bool"/>
			<field reporter:label="Recurring Fine Amount" name="recurring_fine" reporter:datatype="money"/>
			<field reporter:label="Recurring Fine Rule" name="recurring_fine_rule" reporter:datatype="link"/>
			<field reporter:label="Remaining Renewals" name="renewal_remaining" reporter:datatype="int"/>
			<field reporter:label="Grace Period" name="grace_period" reporter:datatype="interval"/>
			<field reporter:label="Fine Stop Reason" name="stop_fines" reporter:datatype="text"/>
			<field reporter:label="Fine Stop Date/Time" name="stop_fines_time" reporter:datatype="timestamp"/>
			<field reporter:label="Circulating Item" name="target_copy" reporter:datatype="link"/>
			<field reporter:label="Patron ZIP" name="usr_post_code" reporter:datatype="text"/>
			<field reporter:label="Transaction Finish Date/Time" name="xact_finish" reporter:datatype="timestamp"/>
			<field reporter:label="Checkout Date/Time" name="xact_start" reporter:datatype="timestamp"/>
			<field reporter:label="Record Creation Date/Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Parent Circulation" name="parent_circ" reporter:datatype="link"/>
			<field reporter:label="Checkin Scan Time" name="checkin_scan_time" reporter:datatype="timestamp"/>
			<field reporter:label="Checkin Workstation" name="checkin_workstation" reporter:datatype="link"/>
			<field reporter:label="Patron" name="usr" reporter:datatype="link"/>
			<field reporter:label="Transaction Billings" name="billings" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Transaction Payments" name="payments" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Base Transaction" name="billable_transaction" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Workstation" name="workstation" reporter:datatype="link"/>
			<field reporter:label="Circulation Type" name="circ_type" oils_persist:virtual="true" reporter:datatype="text"/>
			<field reporter:label="Billing Totals" name="billing_total" oils_persist:virtual="true" reporter:datatype="money"/>
			<field reporter:label="Payment Totals" name="payment_total" oils_persist:virtual="true" reporter:datatype="money"/>
			<field reporter:label="Patron Home Library" name="usr_home_ou" reporter:datatype="link"/>
			<field reporter:label="Patron Profile Group" name="usr_profile" reporter:datatype="link"/>
			<field reporter:label="Patron Birth Year" name="usr_birth_year" reporter:datatype="int"/>
			<field reporter:label="Call Number" name="copy_call_number" reporter:datatype="link"/>
			<field reporter:label="Shelving Location" name="copy_location" reporter:datatype="link"/>
			<field reporter:label="Item Owning Library" name="copy_owning_lib" reporter:datatype="link"/>
			<field reporter:label="Item Circulating Library" name="copy_circ_lib" reporter:datatype="link"/>
			<field reporter:label="Bib Record" name="copy_bib_record" reporter:datatype="link"/>
			<field reporter:label="Archived Patron Stat-Cat Entries" name="aaactsc_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Archived Item Stat-Cat Entries" name="aaasc_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Linked Active Circulation" name="active_circ" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Linked Aged Circulation" name="aged_circ" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Auto Renewal" name="auto_renewal" reporter:datatype="bool"/>
			<field reporter:label="Remaining Auto Renewals" name="auto_renewal_remaining" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="billable_transaction" reltype="might_have" key="id" map="" class="mbt"/>
			<link field="circ_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="checkin_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="target_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="checkin_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="payments" reltype="has_many" key="xact" map="" class="mallp"/>
			<link field="billings" reltype="has_many" key="xact" map="" class="mallb"/>
			<link field="duration_rule" reltype="has_a" key="name" map="" class="crcd"/>
			<link field="max_fine_rule" reltype="has_a" key="name" map="" class="crmf"/>
			<link field="recurring_fine_rule" reltype="has_a" key="name" map="" class="crrf"/>
			<link field="circ_type" reltype="might_have" key="id" map="" class="rcirct"/>
			<link field="billing_total" reltype="might_have" key="xact" map="" class="rxbt"/>
			<link field="payment_total" reltype="might_have" key="xact" map="" class="rxpt"/>
			<link field="copy_call_number" reltype="has_a" key="id" map="" class="acn"/>
			<link field="copy_location" reltype="has_a" key="id" map="" class="acpl"/>
			<link field="copy_owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="copy_circ_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="workstation" reltype="has_a" key="id" map="" class="aws"/>
			<link field="checkin_workstation" reltype="has_a" key="id" map="" class="aws"/>
			<link field="copy_bib_record" reltype="has_a" key="id" map="" class="bre"/>
			<link field="aaactsc_entries" reltype="has_many" key="xact" map="" class="aaactsc"/>
			<link field="aaasc_entries" reltype="has_many" key="xact" map="" class="aaasc"/>
			<link field="usr_home_ou" reltype="has_a" key="id" map="" class="aou"/>
			<link field="usr_profile" reltype="has_a" key="id" map="" class="pgt"/>
			<link field="active_circ" reltype="might_have" key="id" map="" class="circ"/>
			<link field="aged_circ" reltype="might_have" key="id" map="" class="acirc"/>
			<link field="parent_circ" reltype="might_have" key="id" map="" class="acirc"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_CIRCULATIONS" context_field="circ_lib"/>
			</actions>
		</permacrud>
	</class>
	<class id="acirc" controller="open-ils.cstore" oils_obj:fieldmapper="action::aged_circulation" oils_persist:tablename="action.aged_circulation" reporter:core="true" reporter:label="Aged (patronless) Circulation">
		<fields oils_persist:primary="id" oils_persist:sequence="money.billable_xact_id_seq">
			<field reporter:label="Check In Library" name="checkin_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Check In Staff" name="checkin_staff" reporter:datatype="link"/>
			<field reporter:label="Check In Date/Time" name="checkin_time" reporter:datatype="timestamp"/>
			<field reporter:label="Checkout / Renewal Library" name="circ_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Circulating Staff" name="circ_staff" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Desk Renewal" name="desk_renewal" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Due Date/Time" name="due_date" reporter:datatype="timestamp"/>
			<field reporter:label="Circulation Duration" name="duration" reporter:datatype="interval"/>
			<field reporter:label="Circ Duration Rule" name="duration_rule" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Fine Interval" name="fine_interval" reporter:datatype="interval" oils_obj:required="true"/>
			<field reporter:label="Circ ID" name="id" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Max Fine Amount" name="max_fine" reporter:datatype="money"/>
			<field reporter:label="Max Fine Rule" name="max_fine_rule" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="OPAC Renewal" name="opac_renewal" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Phone Renewal" name="phone_renewal" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Recurring Fine Amount" name="recurring_fine" reporter:datatype="money"/>
			<field reporter:label="Recurring Fine Rule" name="recurring_fine_rule" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Remaining Renewals" name="renewal_remaining" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Grace Period" name="grace_period" reporter:datatype="interval" oils_obj:required="true"/>
			<field reporter:label="Fine Stop Reason" name="stop_fines" reporter:datatype="text"/>
			<field reporter:label="Fine Stop Date/Time" name="stop_fines_time" reporter:datatype="timestamp"/>
			<field reporter:label="Circulating Item" name="target_copy" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Patron ZIP" name="usr_post_code" reporter:datatype="text"/>
			<field reporter:label="Transaction Finish Date/Time" name="xact_finish" reporter:datatype="timestamp"/>
			<field reporter:label="Checkout Date/Time" name="xact_start" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Record Creation Date/Time" name="create_time" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Workstation" name="workstation" reporter:datatype="link"/>
			<field reporter:label="Checkin Workstation" name="checkin_workstation" reporter:datatype="link"/>
			<field reporter:label="Checkin Scan Date/Time" name="checkin_scan_time" reporter:datatype="timestamp"/>
			<field reporter:label="Parent Circulation" name="parent_circ" reporter:datatype="link"/>
			<field reporter:label="Transaction Billings" name="billings" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Transaction Payments" name="payments" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Base Transaction" name="billable_transaction" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Circulation Type" name="circ_type" oils_persist:virtual="true" reporter:datatype="text"/>
			<field reporter:label="Billing Totals" name="billing_total" oils_persist:virtual="true" reporter:datatype="money"/>
			<field reporter:label="Payment Totals" name="payment_total" oils_persist:virtual="true" reporter:datatype="money"/>
			<field reporter:label="Patron Home Library" name="usr_home_ou" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Patron Profile Group" name="usr_profile" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Patron Birth Year" name="usr_birth_year" reporter:datatype="int"/>
			<field reporter:label="Call Number" name="copy_call_number" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Shelving Location" name="copy_location" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Item Owning Library" name="copy_owning_lib" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Item Circulating Library" name="copy_circ_lib" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Bib Record" name="copy_bib_record" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Archived Patron Stat-Cat Entries" name="aaactsc_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Archived Item Stat-Cat Entries" name="aaasc_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Auto Renewal" name="auto_renewal" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Remaining Auto Renewals" name="auto_renewal_remaining" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="billable_transaction" reltype="might_have" key="id" map="" class="mbt"/>
			<link field="circ_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="checkin_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="target_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="checkin_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="payments" reltype="has_many" key="xact" map="" class="mallp"/>
			<link field="billings" reltype="has_many" key="xact" map="" class="mallb"/>
			<link field="duration_rule" reltype="has_a" key="name" map="" class="crcd"/>
			<link field="max_fine_rule" reltype="has_a" key="name" map="" class="crmf"/>
			<link field="recurring_fine_rule" reltype="has_a" key="name" map="" class="crrf"/>
			<link field="circ_type" reltype="might_have" key="id" map="" class="rcirct"/>
			<link field="billing_total" reltype="might_have" key="xact" map="" class="rxbt"/>
			<link field="payment_total" reltype="might_have" key="xact" map="" class="rxpt"/>
			<link field="copy_call_number" reltype="has_a" key="id" map="" class="acn"/>
			<link field="copy_location" reltype="has_a" key="id" map="" class="acpl"/>
			<link field="copy_owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="copy_circ_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="copy_bib_record" reltype="has_a" key="id" map="" class="bre"/>
			<link field="workstation" reltype="has_a" key="id" map="" class="aws"/>
			<link field="checkin_workstation" reltype="has_a" key="id" map="" class="aws"/>
			<link field="parent_circ" reltype="might_have" key="id" map="" class="circ"/>
			<link field="renewals" reltype="has_many" key="parent_circ" map="" class="circ"/>
			<link field="aaactsc_entries" reltype="has_many" key="xact" map="" class="aaactsc"/>
			<link field="aaasc_entries" reltype="has_many" key="xact" map="" class="aaasc"/>
		</links>
	</class>
	<class id="auch" controller="open-ils.cstore" oils_obj:fieldmapper="action::user_circ_history" oils_persist:tablename="action.usr_circ_history" reporter:label="User Checkout History">
		<fields oils_persist:primary="id" oils_persist:sequence="action.usr_circ_history_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<!-- prevent reporting on the user that owns the checkout history -->
			<field reporter:label="User" name="usr" reporter:datatype="link" suppress_controller="open-ils.reporter-store" oils_obj:required="true"/>
			<field reporter:label="Circulating Item" name="target_copy" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Checkin Time" name="checkin_time" reporter:datatype="timestamp"/>
			<field reporter:label="Due Date" name="due_date" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Checkout Time" name="xact_start" reporter:datatype="timestamp"/>
			<field reporter:label="Source Circulation" name="source_circ" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="target_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="source_circ" reltype="has_a" key="id" map="" class="circ"/>
		</links>
	</class>
	<class id="brt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="booking::resource_type" oils_persist:tablename="booking.resource_type" reporter:label="Resource Type">
		<fields oils_persist:primary="id" oils_persist:sequence="booking.resource_type_id_seq">
			<field reporter:label="Resource Type ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Resource Type Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Fine Interval" name="fine_interval" reporter:datatype="interval"/>
			<field reporter:label="Fine Amount" name="fine_amount" reporter:datatype="money"/>
			<field reporter:label="Max Fine Amount" name="max_fine" reporter:datatype="money"/>
			<field reporter:label="Owning Library" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Catalog Item" name="catalog_item" reporter:datatype="bool"/>
			<field reporter:label="Bibliographic Record" name="record" reporter:datatype="link"/>
			<field reporter:label="Transferable" name="transferable" reporter:datatype="bool"/>
			<field reporter:label="Inter-booking and Inter-circulation Interval" name="elbow_room" reporter:datatype="interval"/>
			<field reporter:label="Resources" name="resources" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Resource Attributes" name="resource_attrs" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Target Resource Types" name="tgt_rsrc_types" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="record" reltype="has_a" key="id" map="" class="bre"/>
			<link field="resources" reltype="has_many" key="type" map="" class="brsrc"/>
			<link field="resource_attrs" reltype="has_many" key="type" map="" class="bra"/>
			<link field="tgt_rsrc_types" reltype="has_many" key="type" map="" class="bresv"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_BOOKING_RESOURCE_TYPE" context_field="owner"/>
				<retrieve permission="VIEW_BOOKING_RESOURCE_TYPE" context_field="owner"/>
				<update permission="ADMIN_BOOKING_RESOURCE_TYPE" context_field="owner"/>
				<delete permission="ADMIN_BOOKING_RESOURCE_TYPE" context_field="owner"/>
			</actions>
		</permacrud>
	</class>

	<class id="brsrc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="booking::resource" oils_persist:tablename="booking.resource" reporter:label="Resource">
		<fields oils_persist:primary="id" oils_persist:sequence="booking.resource_id_seq">
			<field reporter:label="Resource ID" name="id" reporter:datatype="id" reporter:selector="barcode"/>
			<field reporter:label="Owning Library" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Resource Type" name="type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Overbook" name="overbook" reporter:datatype="bool"/>
			<field reporter:label="Barcode" name="barcode" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Is Deposit Required" name="deposit" reporter:datatype="bool"/>
			<field reporter:label="Deposit Amount" name="deposit_amount" reporter:datatype="money"/>
			<field reporter:label="User Fee" name="user_fee" reporter:datatype="money"/>
			<field reporter:label="Resource Attribute Maps" name="attr_maps" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Reservation Target Resources" name="tgt_rsrcs" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Reservation Current Resources" name="curr_rsrcs" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Catalog Item" name="catalog_item" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="type" reltype="has_a" key="id" map="" class="brt"/>
			<link field="attr_maps" reltype="has_many" key="resource" map="" class="bram"/>
			<link field="tgt_rsrcs" reltype="has_many" key="targeted_resource" map="" class="bresv"/>
			<link field="curr_rsrcs" reltype="has_many" key="current_resource" map="" class="bresv"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_BOOKING_RESOURCE" context_field="owner"/>
				<retrieve permission="VIEW_BOOKING_RESOURCE" context_field="owner"/>
				<update permission="ADMIN_BOOKING_RESOURCE" context_field="owner"/>
				<delete permission="ADMIN_BOOKING_RESOURCE" context_field="owner"/>
			</actions>
		</permacrud>
	</class>
	
	<class id="bra" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="booking::resource_attr" oils_persist:tablename="booking.resource_attr" reporter:label="Resource Attribute">
		<fields oils_persist:primary="id" oils_persist:sequence="booking.resource_attr_id_seq">
			<field reporter:label="Resource Attribute ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Owning Library" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Resource Attribute Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Resource Type" name="resource_type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Is Required" name="required" reporter:datatype="bool"/>
			<field reporter:label="Valid Values" name="valid_values" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Resource Attribute Maps" name="attr_maps" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="resource_type" reltype="has_a" key="id" map="" class="brt"/>
			<link field="valid_values" reltype="has_many" key="attr" map="" class="brav"/>
			<link field="attr_maps" reltype="has_many" key="attr" map="" class="bram"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_BOOKING_RESOURCE_ATTR" context_field="owner"/>
				<retrieve permission="ADMIN_BOOKING_RESOURCE_ATTR" context_field="owner"/>
				<update permission="ADMIN_BOOKING_RESOURCE_ATTR" context_field="owner"/>
				<delete permission="ADMIN_BOOKING_RESOURCE_ATTR" context_field="owner"/>
			</actions>
		</permacrud>
	</class>
	
	<class id="brav" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="booking::resource_attr_value" oils_persist:tablename="booking.resource_attr_value" reporter:label="Resource Attribute Value">
		<fields oils_persist:primary="id" oils_persist:sequence="booking.resource_attr_value_id_seq">
			<field reporter:label="Resource Attribute Value ID" name="id" reporter:datatype="id" reporter:selector="valid_value"/>
			<field reporter:label="Owning Library" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Resource Attribute" name="attr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Valid Value" name="valid_value" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Resource Attribute Maps" name="attr_maps" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Resource Attribute Value Maps" name="attr_val_maps" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="attr" reltype="has_a" key="id" map="" class="bra"/>
			<link field="attr_maps" reltype="has_many" key="id" map="" class="bram"/>
			<link field="attr_val_maps" reltype="has_many" key="attr_value" map="" class="bravm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_BOOKING_RESOURCE_ATTR_VALUE" context_field="owner"/>
				<retrieve permission="ADMIN_BOOKING_RESOURCE_ATTR_VALUE" context_field="owner"/>
				<update permission="ADMIN_BOOKING_RESOURCE_ATTR_VALUE" context_field="owner"/>
				<delete permission="ADMIN_BOOKING_RESOURCE_ATTR_VALUE" context_field="owner"/>
			</actions>
		</permacrud>
	</class>
	
	<class id="bram" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="booking::resource_attr_map" oils_persist:tablename="booking.resource_attr_map" reporter:label="Resource Attribute Map">
		<fields oils_persist:primary="id" oils_persist:sequence="booking.resource_attr_map_id_seq">
			<field reporter:label="Resource Attribute Map ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Resource" name="resource" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Resource Attribute" name="resource_attr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Attribute Value" name="value" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="resource" reltype="has_a" key="id" map="" class="brsrc"/>
			<link field="resource_attr" reltype="has_a" key="id" map="" class="bra"/>
			<link field="value" reltype="has_a" key="id" map="" class="brav"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_BOOKING_RESOURCE_ATTR_MAP">
					<context link="resource" field="owner"/>
				</create>
				<retrieve permission="ADMIN_BOOKING_RESOURCE_ATTR_MAP">
					<context link="resource" field="owner"/>
				</retrieve>
				<update permission="ADMIN_BOOKING_RESOURCE_ATTR_MAP">
					<context link="resource" field="owner"/>
				</update>
				<delete permission="ADMIN_BOOKING_RESOURCE_ATTR_MAP">
					<context link="resource" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	
	<class id="bresv" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="booking::reservation" oils_persist:tablename="booking.reservation" reporter:label="Reservation">
		<fields oils_persist:primary="id" oils_persist:sequence="money.billable_xact_id_seq">
			<field reporter:label="Transaction ID" name="id" reporter:datatype="id"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Transaction Finish Date/Time" name="xact_finish" reporter:datatype="timestamp"/>
			<field reporter:label="Transaction Start Date/Time" name="xact_start" reporter:datatype="timestamp"/>
			<field reporter:label="Unrecovered Debt" name="unrecovered" reporter:datatype="bool"/>
			<field reporter:label="Billing Line Items" name="billings" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Payment Line Items" name="payments" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Billing Totals" name="billing_total" oils_persist:virtual="true" reporter:datatype="money"/>
			<field reporter:label="Payment Totals" name="payment_total" oils_persist:virtual="true" reporter:datatype="money"/>
			<field reporter:label="Payment Summary" name="summary" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Request Time" name="request_time" reporter:datatype="timestamp"/>
			<field reporter:label="Start Time" name="start_time" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="End Time" name="end_time" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Capture Time" name="capture_time" reporter:datatype="timestamp"/>
			<field reporter:label="Cancel Time" name="cancel_time" reporter:datatype="timestamp"/>
			<field reporter:label="Pickup Time" name="pickup_time" reporter:datatype="timestamp"/>
			<field reporter:label="Return Time" name="return_time" reporter:datatype="timestamp"/>
			<field reporter:label="Booking Interval" name="booking_interval" reporter:datatype="interval"/>
			<field reporter:label="Fine Interval" name="fine_interval" reporter:datatype="interval"/>
			<field reporter:label="Fine Amount" name="fine_amount" reporter:datatype="money"/>
			<field reporter:label="Max Fine Amount" name="max_fine" reporter:datatype="money"/>
			<field reporter:label="Target Resource Type" name="target_resource_type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Target Resource" name="target_resource" reporter:datatype="link"/>
			<field reporter:label="Current Resource" name="current_resource" reporter:datatype="link"/>
			<field reporter:label="Request Library" name="request_lib" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Pickup Library" name="pickup_lib" reporter:datatype="link"/>
			<field reporter:label="Capture Staff" name="capture_staff" reporter:datatype="link"/>
			<field reporter:label="Notify by Email?" name="email_notify" reporter:datatype="bool"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Attribute Value Maps" name="attr_val_maps" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="payments" reltype="has_many" key="xact" map="" class="mp"/>
			<link field="billings" reltype="has_many" key="xact" map="" class="mb"/>
			<link field="billing_total" reltype="might_have" key="xact" map="" class="rxbt"/>
			<link field="payment_total" reltype="might_have" key="xact" map="" class="rxpt"/>
			<link field="summary" reltype="might_have" key="id" map="" class="mbts"/>
			<link field="target_resource_type" reltype="has_a" key="id" map="" class="brt"/>
			<link field="target_resource" reltype="has_a" key="id" map="" class="brsrc"/>
			<link field="current_resource" reltype="has_a" key="id" map="" class="brsrc"/>
			<link field="request_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="pickup_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="capture_staff" reltype="might_have" key="id" map="" class="au"/>
			<link field="attr_val_maps" reltype="has_many" key="reservation" map="" class="bravm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_BOOKING_RESERVATION" context_field="pickup_lib"/>
				<retrieve permission="VIEW_BOOKING_RESERVATION" context_field="pickup_lib"/>
				<update permission="ADMIN_BOOKING_RESERVATION" context_field="pickup_lib"/>
				<delete permission="ADMIN_BOOKING_RESERVATION" context_field="pickup_lib"/>
			</actions>
		</permacrud>
	</class>
	
	<class id="bravm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="booking::reservation_attr_value_map" oils_persist:tablename="booking.reservation_attr_value_map" reporter:label="Reservation Attribute Value Map">
		<fields oils_persist:primary="id" oils_persist:sequence="booking.reservation_attr_value_map_id_seq">
			<field reporter:label="Reservation Attribute Value Map" name="id" reporter:datatype="id"/>
			<field reporter:label="Reservation" name="reservation" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Attribute Map" name="attr_value" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="reservation" reltype="has_a" key="id" map="" class="bresv"/>
			<link field="attr_value" reltype="has_a" key="id" map="" class="brav"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_BOOKING_RESERVATION_ATTR_MAP">
					<context link="reservation" field="pickup_lib"/>
				</create>
				<retrieve permission="VIEW_BOOKING_RESERVATION_ATTR_MAP">
					<context link="reservation" field="pickup_lib"/>
				</retrieve>
				<update permission="ADMIN_BOOKING_RESERVATION_ATTR_MAP">
					<context link="reservation" field="pickup_lib"/>
				</update>
				<delete permission="ADMIN_BOOKING_RESERVATION_ATTR_MAP">
					<context link="reservation" field="pickup_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="ccnbi" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="container::call_number_bucket_item" oils_persist:tablename="container.call_number_bucket_item" reporter:label="Call Number Bucket Item">
		<fields oils_persist:primary="id" oils_persist:sequence="container.call_number_bucket_item_id_seq">
			<field name="bucket" reporter:datatype="link" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id"/>
			<field name="target_call_number" reporter:datatype="link" oils_obj:required="true"/>
			<field name="create_time" reporter:datatype="timestamp"/>
			<field name="pos" reporter:datatype="int"/>
			<field name="notes" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="target_call_number" reltype="has_a" key="id" map="" class="acn"/>
			<link field="bucket" reltype="has_a" key="id" map="" class="ccnb"/>
			<link field="notes" reltype="has_many" map="" key="item" class="ccnbin"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="ADMIN_CALLNUMBER_BUCKET">
					<context link="bucket" field="owning_lib"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="ccnbin" controller="open-ils.cstore" oils_obj:fieldmapper="container::call_number_bucket_item_note" oils_persist:tablename="container.call_number_bucket_item_note" reporter:label="Call Number Bucket Item Note">
		<fields oils_persist:primary="id" oils_persist:sequence="container.call_number_bucket_item_note_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="item" reporter:datatype="link" oils_obj:required="true"/>
			<field name="note" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="item" reltype="has_a" key="id" map="" class="ccnbi"/>
		</links>
	</class>
	<class id="cbreb" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="container::biblio_record_entry_bucket" oils_persist:tablename="container.biblio_record_entry_bucket" reporter:label="Bibliographic Record Entry Bucket">
		<fields oils_persist:primary="id" oils_persist:sequence="container.biblio_record_entry_bucket_id_seq">
			<field reporter:label="Contents" name="items" oils_persist:virtual="true" reporter:datatype="link" config_field="true"/>
			<field reporter:label="Bucket Type" name="btype" reporter:datatype="text"/>
			<field reporter:label="Bucket ID" name="id" reporter:datatype="id" reporter:selector="id"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text"/>
			<field reporter:label="Owning User" name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Public?" name="pub" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Created On" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit"/>
			<field name="share_maps" reporter:datatype="link" oils_persist:virtual="true"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="owner" reltype="has_a" key="id" map="" class="au"/>
			<link field="items" reltype="has_many" key="bucket" map="" class="cbrebi"/>
			<link field="share_maps" reltype="has_many" key="bucket" map="" class="cbrebs"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_BIB_BUCKET ADMIN_BIB_BUCKET" context_field="owning_lib" owning_user="owner"/>
				<retrieve permission="CREATE_BIB_BUCKET ADMIN_BIB_BUCKET VIEW_CONTAINER" context_field="owning_lib" owning_user="owner" permit_field="pub" permit_field_value="t">
					<context link="share_maps" field="share_org"/>
				</retrieve>
				<update permission="CREATE_BIB_BUCKET ADMIN_BIB_BUCKET UPDATE_CONTAINER" context_field="owning_lib" owning_user="owner">
					<context link="share_maps" field="share_org"/>
				</update>
				<delete permission="CREATE_BIB_BUCKET ADMIN_BIB_BUCKET" context_field="owning_lib" owning_user="owner"/>
			</actions>
		</permacrud>
	</class>
	<class id="cbrebs" controller="open-ils.cstore" oils_obj:fieldmapper="container::biblio_record_entry_bucket_shares" oils_persist:tablename="container.biblio_record_entry_bucket_shares" reporter:label="Bibliographic Record Entry Bucket Share Mapping">
		<fields oils_persist:primary="id" oils_persist:sequence="container.biblio_record_entry_bucket_shares_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="bucket" reporter:datatype="link" oils_obj:required="true"/>
			<field name="share_org" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="bucket" reltype="has_a" key="id" map="" class="cbreb"/>
			<link field="share_org" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>
	<class id="cbrebuf" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="container::biblio_record_entry_bucket_usr_flags" oils_persist:tablename="container.biblio_record_entry_bucket_usr_flags" reporter:label="Bibliographic Record Entry Bucket User Flag Mapping">
		<fields oils_persist:primary="id" oils_persist:sequence="container.biblio_record_entry_bucket_usr_flags_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="bucket" reporter:datatype="link" oils_obj:required="true"/>
			<field name="usr" reporter:datatype="link" oils_obj:required="true"/>
            <field name="flag" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="bucket" reltype="has_a" key="id" map="" class="cbreb"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="STAFF_LOGIN" global_required="true" owning_user="usr" />
				<retrieve permission="STAFF_LOGIN" owning_user="usr">
					<context link="bucket" field="owning_lib"/>
                </retrieve>
				<update permission="STAFF_LOGIN" owning_user="usr">
					<context link="bucket" field="owning_lib"/>
				</update>
				<delete permission="STAFF_LOGIN" owning_user="usr">
					<context link="bucket" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="cbrebn" controller="open-ils.cstore" oils_obj:fieldmapper="container::biblio_record_entry_bucket_note" oils_persist:tablename="container.biblio_record_entry_bucket_note" reporter:label="Bibliographic Record Entry Bucket Note">
		<fields oils_persist:primary="id" oils_persist:sequence="container.biblio_record_entry_bucket_note_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="bucket" reporter:datatype="link" oils_obj:required="true"/>
			<field name="note" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="bucket" reltype="has_a" key="id" map="" class="cbreb"/>
		</links>
	</class>
	<class id="ahcm" controller="open-ils.cstore" oils_obj:fieldmapper="action::hold_copy_map" oils_persist:tablename="action.hold_copy_map" reporter:label="Hold Item Map">
		<fields oils_persist:primary="id" oils_persist:sequence="action.hold_copy_map_id_seq">
			<field name="hold" reporter:datatype="link" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id"/>
			<field name="target_copy" reporter:datatype="link" oils_obj:required="true"/>
			<field name="proximity" reporter:datatype="number"/>
		</fields>
		<links>
			<link field="hold" reltype="has_a" key="id" map="" class="ahr"/>
			<link field="target_copy" reltype="has_a" key="id" map="" class="acp"/>
		</links>
	</class>
	<class id="ahn" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::hold_notification" oils_persist:tablename="action.hold_notification" reporter:label="Hold Notification">
		<fields oils_persist:primary="id" oils_persist:sequence="action.hold_notification_id_seq">
			<field reporter:label="Hold" name="hold" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Notification ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Notification Method" name="method" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Notification Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Notifying Staff" name="notify_staff" reporter:datatype="link"/>
			<field reporter:label="Notification Date/Time" name="notify_time" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="hold" reltype="has_a" key="id" map="" class="ahr"/>
			<link field="notify_staff" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_HOLD_NOTIFICATION">
					<context link="hold" jump="usr" field="home_ou"/>
				</create>
				<retrieve permission="VIEW_HOLD_NOTIFICATION">
					<context link="hold" jump="usr" field="home_ou"/>
				</retrieve>
				<update permission="CREATE_HOLD_NOTIFICATION">
					<context link="hold" jump="usr" field="home_ou"/>
				</update>
				<delete permission="CREATE_HOLD_NOTIFICATION">
					<context link="hold" jump="usr" field="home_ou"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="acpl" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::copy_location" oils_persist:cardinality="low" oils_persist:tablename="asset.copy_location" reporter:label="Shelving Location" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.copy_location_id_seq">
			<field reporter:label="Can Circulate?" name="circulate" reporter:datatype="bool"/>
			<field reporter:label="Is Holdable?" name="holdable" reporter:datatype="bool"/>
			<field reporter:label="Hold Capture Requires Verification" name="hold_verify" reporter:datatype="bool"/>
			<field reporter:label="Location ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Is OPAC Visible?" name="opac_visible" reporter:datatype="bool"/>
			<field reporter:label="Owning Org Unit" name="owning_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Shelving Location Orders" name="orders" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Items" name="copies" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Label Prefix" name="label_prefix" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Label Suffix" name="label_suffix" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Checkin Alert" name="checkin_alert" reporter:datatype="bool"/>
			<field reporter:label="Is Deleted?" name="deleted" reporter:datatype="bool"/>
			<field reporter:label="URL" name="url" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="distribution_formula_entries" reltype="has_many" key="location" map="" class="acqdfe"/>
			<link field="orders" reltype="has_many" key="location" map="" class="acplo"/>
			<link field="copies" reltype="has_many" key="location" map="" class="acp"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_COPY_LOCATION" context_field="owning_lib"/>
				<retrieve/>
				<update permission="UPDATE_COPY_LOCATION" context_field="owning_lib"/>
				<delete permission="DELETE_COPY_LOCATION" context_field="owning_lib"/>
			</actions>
		</permacrud>
	</class>
	<class id="acplg" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::copy_location_group" oils_persist:tablename="asset.copy_location_group" reporter:label="Item/Shelving Location Group">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.copy_location_group_id_seq">
			<field reporter:label="ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Is OPAC Visible?" name="opac_visible" reporter:datatype="bool"/>
			<field reporter:label="Owning Library" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Position" name="pos" reporter:datatype="int"/>
			<field reporter:label="Display Above Orgs" name="top" reporter:datatype="bool"/>
			<field reporter:label="Shelving Location Mappings" name="location_maps" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="location_maps" reltype="has_many" key="lgroup" map="" class="acplgm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_COPY_LOCATION_GROUP" context_field="owner"/>
				<retrieve/>
				<update permission="ADMIN_COPY_LOCATION_GROUP" context_field="owner"/>
				<delete permission="ADMIN_COPY_LOCATION_GROUP" context_field="owner"/>
			</actions>
		</permacrud>
	</class>
	<class id="acplgm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::copy_location_group_map" oils_persist:tablename="asset.copy_location_group_map" reporter:label="Item/Shelving Location Group Map">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.copy_location_group_map_id_seq">
			<field reporter:label="ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Group" name="lgroup" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Shelving Location" name="location" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="lgroup" reltype="has_a" key="id" map="" class="acplg"/>
			<link field="location" reltype="has_a" key="id" map="" class="acpl"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_COPY_LOCATION_GROUP">
					<context link="lgroup" field="owner"/>
				</create>
				<retrieve/>
				<update permission="ADMIN_COPY_LOCATION_GROUP">
					<context link="lgroup" field="owner"/>
				</update>
				<delete permission="ADMIN_COPY_LOCATION_GROUP">
					<context link="lgroup" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="acplo" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::copy_location_order" oils_persist:tablename="asset.copy_location_order" reporter:label="Item/Shelving Location Order">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.copy_location_order_id_seq">
			<field reporter:label="Location Order ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Location ID" name="location" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Org Unit" name="org" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Position" name="position" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="location" reltype="has_a" key="id" map="" class="acpl"/>
			<link field="org" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_COPY_LOCATION_ORDER" context_field="org"/>
				<retrieve/>
				<update permission="ADMIN_COPY_LOCATION_ORDER" context_field="org"/>
				<delete permission="ADMIN_COPY_LOCATION_ORDER" context_field="org"/>
			</actions>
		</permacrud>
	</class>

	<class id="svr" controller="open-ils.cstore" oils_obj:fieldmapper="serial::virtual_record" oils_persist:virtual="true" reporter:label="Serial Virtual Record">
		<fields>
			<field name="sre_id" oils_persist:virtual="true"/>
			<field name="location" oils_persist:virtual="true"/>
			<field name="owning_lib" oils_persist:virtual="true"/>
			<field name="basic_holdings" oils_persist:virtual="true"/>
			<field name="basic_holdings_add" oils_persist:virtual="true"/>
			<field name="supplement_holdings" oils_persist:virtual="true"/>
			<field name="supplement_holdings_add" oils_persist:virtual="true"/>
			<field name="index_holdings" oils_persist:virtual="true"/>
			<field name="index_holdings_add" oils_persist:virtual="true"/>
			<field name="online" oils_persist:virtual="true"/>
			<field name="missing" oils_persist:virtual="true"/>
			<field name="incomplete" oils_persist:virtual="true"/>
		</fields>
	</class>

	<class id="sre" controller="open-ils.pcrud open-ils.cstore" oils_obj:fieldmapper="serial::record_entry" oils_persist:tablename="serial.record_entry" reporter:label="Serial Record Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="serial.record_entry_id_seq">
			<field reporter:label="Is Active" name="active" reporter:datatype="bool"/>
			<field reporter:label="Bib Record" name="record" reporter:datatype="link"/>
			<field reporter:label="Create Date" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link"/>
			<field reporter:label="Is Deleted" name="deleted" reporter:datatype="bool"/>
			<field reporter:label="Edit date" name="edit_date" reporter:datatype="timestamp"/>
			<field reporter:label="Editor" name="editor" reporter:datatype="link"/>
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Last Transaction ID" name="last_xact_id" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="MARC" name="marc" reporter:datatype="text"/>
			<field reporter:label="Source" name="source" reporter:datatype="int"/>
			<field reporter:label="Owning Org Unit" name="owning_lib" reporter:datatype="org_unit"/>
		</fields>
		<links>
			<link field="record" reltype="has_a" key="id" map="" class="bre"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_MFHD_RECORD" context_field="owning_lib"/>
				<retrieve/>
				<update permission="UPDATE_MFHD_RECORD" context_field="owning_lib"/>
				<delete permission="DELETE_MFHD_RECORD" context_field="owning_lib"/>
			</actions>
		</permacrud>
	</class>

	<class id="scap" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="serial::caption_and_pattern" oils_persist:tablename="serial.caption_and_pattern" reporter:label="Caption and Pattern">
		<fields oils_persist:primary="id" oils_persist:sequence="serial.caption_and_pattern_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Subscription" name="subscription" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Type" name="type" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Create Date" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Start Date" name="start_date" reporter:datatype="timestamp"/>
			<field reporter:label="End Date" name="end_date" reporter:datatype="timestamp"/>
			<field reporter:label="Active?" name="active" reporter:datatype="bool"/>
			<field reporter:label="Pattern Code" name="pattern_code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Enum 1" name="enum_1" reporter:datatype="text"/>
			<field reporter:label="Enum 2" name="enum_2" reporter:datatype="text"/>
			<field reporter:label="Enum 3" name="enum_3" reporter:datatype="text"/>
			<field reporter:label="Enum 4" name="enum_4" reporter:datatype="text"/>
			<field reporter:label="Enum 5" name="enum_5" reporter:datatype="text"/>
			<field reporter:label="Enum 6" name="enum_6" reporter:datatype="text"/>
			<field reporter:label="Chron 1" name="chron_1" reporter:datatype="text"/>
			<field reporter:label="Chron 2" name="chron_2" reporter:datatype="text"/>
			<field reporter:label="Chron 3" name="chron_3" reporter:datatype="text"/>
			<field reporter:label="Chron 4" name="chron_4" reporter:datatype="text"/>
			<field reporter:label="Chron 5" name="chron_5" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="subscription" reltype="has_a" key="id" map="" class="ssub"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SERIAL_CAPTION_PATTERN">
					<context link="subscription" field="owning_lib"/>
				</create>
				<retrieve/>
				<update permission="ADMIN_SERIAL_CAPTION_PATTERN">
					<context link="subscription" field="owning_lib"/>
				</update>
				<delete permission="ADMIN_SERIAL_CAPTION_PATTERN">
					<context link="subscription" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="ssub" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="serial::subscription" oils_persist:tablename="serial.subscription" reporter:label="Subscription">
		<fields oils_persist:primary="id" oils_persist:sequence="serial.subscription_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Start Date" name="start_date" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="End Date" name="end_date" reporter:datatype="timestamp"/>
			<field reporter:label="Bibliographic Record Entry" name="record_entry" reporter:datatype="link"/>
			<field reporter:label="Expected Date Offset" name="expected_date_offset" reporter:datatype="interval"/>
			<field reporter:label="Distributions" name="distributions" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Issuances" name="issuances" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Captions and Patterns" name="scaps" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Notes" name="notes" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="record_entry" reltype="has_a" key="id" map="" class="bre"/>
			<link field="distributions" reltype="has_many" key="subscription" map="" class="sdist"/>
			<link field="issuances" reltype="has_many" key="subscription" map="" class="siss"/>
			<link field="scaps" reltype="has_many" key="subscription" map="" class="scap"/>
			<link field="notes" reltype="has_many" key="subscription" map="" class="ssubn"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SERIAL_SUBSCRIPTION" context_field="owning_lib"/>
				<retrieve/>
				<update permission="ADMIN_SERIAL_SUBSCRIPTION" context_field="owning_lib"/>
				<delete permission="ADMIN_SERIAL_SUBSCRIPTION" context_field="owning_lib"/>
			</actions>
		</permacrud>
	</class>

	<class id="ssubn" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="serial::subscription_note" oils_persist:tablename="serial.subscription_note" reporter:label="Subscription Note">
		<fields oils_persist:primary="id" oils_persist:sequence="serial.subscription_note_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Subscription" name="subscription" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Create Date" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Public?" name="pub" reporter:datatype="bool"/>
			<field reporter:label="Alert?" name="alert" reporter:datatype="bool"/>
			<field reporter:label="Title" name="title" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="subscription" reltype="has_a" key="id" map="" class="ssub"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SERIAL_SUBSCRIPTION" context_field="owning_lib">
					<context link="subscription" field="owning_lib"/>
				</create>
				<retrieve/>
				<update permission="ADMIN_SERIAL_SUBSCRIPTION" context_field="owning_lib">
					<context link="subscription" field="owning_lib"/>
				</update>
				<delete permission="ADMIN_SERIAL_SUBSCRIPTION" context_field="owning_lib">
					<context link="subscription" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="sdist" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="serial::distribution" oils_persist:tablename="serial.distribution" reporter:label="Distribution">
		<fields oils_persist:primary="id" oils_persist:sequence="serial.distribution_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Legacy Record Entry" name="record_entry" reporter:datatype="link"/>
			<field reporter:label="Summary Method" name="summary_method" reporter:datatype="text"/>
			<field reporter:label="Subscription" name="subscription" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Holding Library" name="holding_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Receive Call Number" name="receive_call_number" reporter:datatype="link"/>
			<field reporter:label="Receive Unit Template" name="receive_unit_template" reporter:datatype="link"/>
			<field reporter:label="Bind Call Number" name="bind_call_number" reporter:datatype="link"/>
			<field reporter:label="Bind Unit Template" name="bind_unit_template" reporter:datatype="link"/>
			<field reporter:label="Unit Label Prefix" name="unit_label_prefix" reporter:datatype="text"/>
			<field reporter:label="Unit Label Suffix" name="unit_label_suffix" reporter:datatype="text"/>
			<field reporter:label="Display Grouping" name="display_grouping" reporter:datatype="text"/>
			<field reporter:label="Streams" name="streams" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Notes" name="notes" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Basic Issue Summary" name="basic_summary" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Supplemental Issue Summary" name="supplement_summary" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Index Issue Summary" name="index_summary" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="record_entry" reltype="has_a" key="id" map="" class="sre"/>
			<link field="subscription" reltype="has_a" key="id" map="" class="ssub"/>
			<link field="holding_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="receive_call_number" reltype="has_a" key="id" map="" class="acn"/>
			<link field="receive_unit_template" reltype="has_a" key="id" map="" class="act"/>
			<link field="bind_call_number" reltype="has_a" key="id" map="" class="acn"/>
			<link field="bind_unit_template" reltype="has_a" key="id" map="" class="act"/>
			<link field="streams" reltype="has_many" key="distribution" map="" class="sstr"/>
			<link field="notes" reltype="has_many" key="distribution" map="" class="sdistn"/>
			<link field="basic_summary" reltype="might_have" key="distribution" map="" class="sbsum"/>
			<link field="supplement_summary" reltype="might_have" key="distribution" map="" class="sssum"/>
			<link field="index_summary" reltype="might_have" key="distribution" map="" class="sisum"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SERIAL_DISTRIBUTION" context_field="holding_lib"/>
				<retrieve/>
				<update permission="ADMIN_SERIAL_DISTRIBUTION" context_field="holding_lib"/>
				<delete permission="ADMIN_SERIAL_DISTRIBUTION" context_field="holding_lib"/>
			</actions>
		</permacrud>
	</class>

	<class id="sdistn" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="serial::distribution_note" oils_persist:tablename="serial.distribution_note" reporter:label="Distribution Note">
		<fields oils_persist:primary="id" oils_persist:sequence="serial.distribution_note_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Distribution" name="distribution" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Create Date" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Public?" name="pub" reporter:datatype="bool"/>
			<field reporter:label="Alert?" name="alert" reporter:datatype="bool"/>
			<field reporter:label="Title" name="title" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="distribution" reltype="has_a" key="id" map="" class="sdist"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SERIAL_DISTRIBUTION">
					<context link="distribution" field="holding_lib"/>
				</create>
				<retrieve permission="ADMIN_SERIAL_DISTRIBUTION">
					<context link="distribution" field="holding_lib"/>
				</retrieve>
				<update permission="ADMIN_SERIAL_DISTRIBUTION">
					<context link="distribution" field="holding_lib"/>
				</update>
				<delete permission="ADMIN_SERIAL_DISTRIBUTION">
					<context link="distribution" field="holding_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="sstr" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="serial::stream" oils_persist:tablename="serial.stream" reporter:label="Stream">
		<fields oils_persist:primary="id" oils_persist:sequence="serial.stream_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Distribution" name="distribution" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Routing Label" name="routing_label" reporter:datatype="text"/>
			<field reporter:label="Items" name="items" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Routing List Users" name="routing_list_users" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="distribution" reltype="has_a" key="id" map="" class="sdist"/>
			<link field="items" reltype="has_many" key="stream" map="" class="sitem"/>
			<link field="routing_list_users" reltype="has_many" key="stream" map="" class="srlu"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SERIAL_STREAM">
					<context link="distribution" field="holding_lib"/>
				</create>
				<retrieve/>
				<update permission="ADMIN_SERIAL_STREAM">
					<context link="distribution" field="holding_lib"/>
				</update>
				<delete permission="ADMIN_SERIAL_STREAM">
					<context link="distribution" field="holding_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="srlu" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="serial::routing_list_user" oils_persist:tablename="serial.routing_list_user" reporter:label="Routing List User">
		<fields oils_persist:primary="id" oils_persist:sequence="serial.routing_list_user_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Stream" name="stream" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Position" name="pos" reporter:datatype="int"/>
			<field reporter:label="Reader" name="reader" reporter:datatype="link"/>
			<field reporter:label="Department" name="department" reporter:datatype="text"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="stream" reltype="has_a" key="id" map="" class="sstr"/>
			<link field="reader" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SERIAL_STREAM">
					<context link="stream" jump="distribution" field="holding_lib"/>
				</create>
				<retrieve permission="RECEIVE_SERIAL">
					<context link="stream" jump="distribution" field="holding_lib"/>
				</retrieve>
				<update permission="ADMIN_SERIAL_STREAM">
					<context link="stream" jump="distribution" field="holding_lib"/>
				</update>
				<delete permission="ADMIN_SERIAL_STREAM">
					<context link="stream" jump="distribution" field="holding_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="siss" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="serial::issuance" oils_persist:tablename="serial.issuance" reporter:label="Issuance">
		<fields oils_persist:primary="id" oils_persist:sequence="serial.issuance_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Editor" name="editor" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Create Date" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Edit Date" name="edit_date" reporter:datatype="timestamp"/>
			<field reporter:label="Subscription" name="subscription" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Caption/Pattern" name="caption_and_pattern" reporter:datatype="link"/>
			<field reporter:label="Label" name="label" reporter:datatype="text"/>
			<field reporter:label="Date Published" name="date_published" reporter:datatype="timestamp"/>
			<field reporter:label="Holding Code" name="holding_code" reporter:datatype="text"/>
			<field reporter:label="Holding Type" name="holding_type" reporter:datatype="text"/>
			<field reporter:label="Holding Link ID" name="holding_link_id" reporter:datatype="int"/>
			<field reporter:label="Items" name="items" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="subscription" reltype="has_a" key="id" map="" class="ssub"/>
			<link field="caption_and_pattern" reltype="has_a" key="id" map="" class="scap"/>
			<link field="items" reltype="has_many" key="issuance" map="" class="sitem"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SERIAL_SUBSCRIPTION">
					<context link="subscription" field="owning_lib"/>
				</create>
				<retrieve/>
				<update permission="ADMIN_SERIAL_SUBSCRIPTION">
					<context link="subscription" field="owning_lib"/>
				</update>
				<delete permission="ADMIN_SERIAL_SUBSCRIPTION">
					<context link="subscription" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="sunit" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="serial::unit" oils_persist:tablename="serial.unit" reporter:label="Unit">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.copy_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Age Hold Protection" name="age_protect" reporter:datatype="link"/>
			<field reporter:label="Alert Message" name="alert_message" reporter:datatype="text"/>
			<field reporter:label="Barcode" name="barcode" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Call Number/Volume" name="call_number" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Circulation Type (MARC)" name="circ_as_type" reporter:datatype="text"/>
			<field reporter:label="Circulating Library" name="circ_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Circulation Modifier" name="circ_modifier" reporter:datatype="link"/>
			<field reporter:label="Can Circulate" name="circulate" reporter:datatype="bool"/>
			<field reporter:label="Item Number on Volume" name="copy_number" reporter:datatype="text"/>
			<field reporter:label="Creation Date/Time" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Active Date/Time" name="active_date" reporter:datatype="timestamp"/>
			<field reporter:label="Creating User" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Is Deleted" name="deleted" reporter:datatype="bool"/>
			<field reporter:label="Dummy ISBN" name="dummy_isbn" reporter:datatype="text"/>
			<field reporter:label="Is Deposit Required" name="deposit" reporter:datatype="bool"/>
			<field reporter:label="Deposit Amount" name="deposit_amount" reporter:datatype="money"/>
			<field reporter:label="Precat Dummy Author" name="dummy_author" reporter:datatype="text"/>
			<field reporter:label="Precat Dummy Title" name="dummy_title" reporter:datatype="text"/>
			<field reporter:label="Last Edit Date/Time" name="edit_date" reporter:datatype="timestamp"/>
			<field reporter:label="Last Editing User" name="editor" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Fine Level" name="fine_level" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Is Holdable" name="holdable" reporter:datatype="bool"/>
			<field reporter:label="Loan Duration" name="loan_duration" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Shelving Location" name="location" reporter:datatype="link"/>
			<field reporter:label="OPAC Visible" name="opac_visible" reporter:datatype="bool"/>
			<field reporter:label="Price" name="price" reporter:datatype="money"/>
			<field reporter:label="Is Reference" name="ref" reporter:datatype="bool"/>
			<field reporter:label="Item Status" name="status" reporter:datatype="link"/>
			<field reporter:label="Item Status Changed Time" name="status_changed_time" reporter:datatype="timestamp"/>
			<field reporter:label="Is Mint Condition" name="mint_condition" reporter:datatype="bool"/>
			<field reporter:label="Floating Group" name="floating" reporter:datatype="link"/>
			<field reporter:label="Cost" name="cost" reporter:datatype="money"/>
			<field reporter:label="Sort Key" name="sort_key" reporter:datatype="text"/>
			<field reporter:label="Summary Contents" name="summary_contents" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Detailed Contents" name="detailed_contents" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Item Notes" name="notes" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Stat-Cat entry maps" name="stat_cat_entry_copy_maps" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Circulations" name="circulations" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Total Circulations" name="total_circ_count" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Holds" name="holds" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Statistical Category Entries" name="stat_cat_entries" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="age_protect" reltype="has_a" key="id" map="" class="crahp"/>
			<link field="call_number" reltype="has_a" key="id" map="" class="acn"/>
			<link field="location" reltype="has_a" key="id" map="" class="acpl"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="status" reltype="has_a" key="id" map="" class="ccs"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="holds" reltype="has_many" key="target_copy" map="hold" class="ahcm"/>
			<link field="stat_cat_entry_copy_maps" reltype="has_many" key="owning_copy" map="" class="ascecm"/>
			<link field="notes" reltype="has_many" key="owning_copy" map="" class="acpn"/>
			<link field="stat_cat_entries" reltype="has_many" key="owning_copy" map="stat_cat_entry" class="ascecm"/>
			<link field="circulations" reltype="has_many" key="target_copy" map="" class="circ"/>
			<link field="total_circ_count" reltype="might_have" key="id" map="" class="erfcc"/>
			<link field="circ_modifier" reltype="has_a" key="code" map="" class="ccm"/>
			<link field="floating" reltype="has_a" key="id" map="" class="cfg"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="RECEIVE_SERIAL ADMIN_SERIAL_SUBSCRIPTION" context_field="circ_lib"/>
				<retrieve/>
				<update permission="RECEIVE_SERIAL ADMIN_SERIAL_SUBSCRIPTION" context_field="circ_lib"/>
				<delete permission="RECEIVE_SERIAL ADMIN_SERIAL_SUBSCRIPTION" context_field="circ_lib"/>
			</actions>
		</permacrud>
	</class>

	<class id="sitem" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="serial::item" oils_persist:tablename="serial.item" reporter:label="Item">
		<fields oils_persist:primary="id" oils_persist:sequence="serial.item_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Editor" name="editor" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Create Date" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Edit Date" name="edit_date" reporter:datatype="timestamp"/>
			<field reporter:label="Issuance" name="issuance" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Stream" name="stream" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Unit" name="unit" reporter:datatype="link"/>
			<field reporter:label="URI" name="uri" reporter:datatype="link"/>
			<field reporter:label="Date Expected" name="date_expected" reporter:datatype="timestamp"/>
			<field reporter:label="Date Received" name="date_received" reporter:datatype="timestamp"/>
			<field reporter:label="Status" name="status" reporter:datatype="text"/>
			<field reporter:label="Notes" name="notes" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Shadowed?" name="shadowed" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="issuance" reltype="has_a" key="id" map="" class="siss"/>
			<link field="stream" reltype="has_a" key="id" map="" class="sstr"/>
			<link field="unit" reltype="has_a" key="id" map="" class="sunit"/>
			<link field="uri" reltype="has_a" key="id" map="" class="auri"/>
			<link field="notes" reltype="has_many" key="item" map="" class="sin"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SERIAL_ITEM">
					<context link="stream" jump="distribution" field="holding_lib"/>
				</create>
				<retrieve permission="ADMIN_SERIAL_ITEM">
					<context link="stream" jump="distribution" field="holding_lib"/>
				</retrieve>
				<update permission="ADMIN_SERIAL_ITEM">
					<context link="stream" jump="distribution" field="holding_lib"/>
				</update>
				<delete permission="ADMIN_SERIAL_ITEM">
					<context link="stream" jump="distribution" field="holding_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="sin" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="serial::item_note" oils_persist:tablename="serial.item_note" reporter:label="Item Note">
		<fields oils_persist:primary="id" oils_persist:sequence="serial.item_note_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Item" name="item" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Create Date" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Public?" name="pub" reporter:datatype="bool"/>
			<field reporter:label="Alert?" name="alert" reporter:datatype="bool"/>
			<field reporter:label="Title" name="title" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="item" reltype="has_a" key="id" map="" class="sitem"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SERIAL_ITEM">
					<context link="item" jump="stream.distribution" field="holding_lib"/>
				</create>
				<retrieve permission="ADMIN_SERIAL_ITEM">
					<context link="item" jump="stream.distribution" field="holding_lib"/>
				</retrieve>
				<update permission="ADMIN_SERIAL_ITEM">
					<context link="item" jump="stream.distribution" field="holding_lib"/>
				</update>
				<delete permission="ADMIN_SERIAL_ITEM">
					<context link="item" jump="stream.distribution" field="holding_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="sasum" controller="open-ils.cstore" oils_obj:fieldmapper="serial::any_summary" oils_persist:tablename="serial.any_summary" reporter:label="All Issues' Summaries" oils_persist:readonly="true">
		<fields>
			<field name="summary_type" reporter:label="Summary Type" reporter:datatype="text"/>
			<field name="id" reporter:label="Native ID" reporter:datatype="int"/><!-- not datatype="id", because id is not unique in this view -->
			<field name="distribution" reporter:label="Distribution" reporter:datatype="link"/>
			<field name="generated_coverage" reporter:label="Generated Coverage" reporter:datatype="text"/>
			<field name="show_generated" reporter:label="Show Generated?" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="distribution" reltype="has_a" key="id" map="" class="sdist"/>
		</links>
	</class>
	<class id="smhc" controller="open-ils.cstore" oils_obj:fieldmapper="serial::materialized_holding_code" oils_persist:tablename="serial.materialized_holding_code" reporter:label="Materialized Holding Code" oils_persist:readonly="true">
		<fields oils_persist:primary="id" oils_persist:sequence="serial.materialized_holding_code_id_seq">
			<field name="id" reporter:label="ID" reporter:datatype="id"/>
			<field name="issuance" reporter:label="Issuance" reporter:datatype="link"/>
			<field name="holding_type" reporter:label="Holding Type" reporter:datatype="text"/>
			<field name="ind1" reporter:label="First Indicator" reporter:datatype="text"/>
			<field name="ind2" reporter:label="Second Indicator" reporter:datatype="text"/>
			<field name="subfield" reporter:label="Subfield" reporter:datatype="text"/>
			<field name="value" reporter:label="Value" reporter:datatype="text" oils_obj:validate="^\w$"/>
		</fields>
		<links>
			<link field="issuance" reltype="has_a" key="id" map="" class="siss"/>
		</links>
	</class>
	<class id="sbsum" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="serial::basic_summary" oils_persist:tablename="serial.basic_summary" reporter:label="Basic Issue Summary">
		<fields oils_persist:primary="id" oils_persist:sequence="serial.basic_summary_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Distribution" name="distribution" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Generated Coverage" name="generated_coverage" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Textual Holdings" name="textual_holdings" reporter:datatype="text"/>
			<field reporter:label="Show Generated?" name="show_generated" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="distribution" reltype="has_a" key="id" map="" class="sdist"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SERIAL_DISTRIBUTION">
					<context link="distribution" field="holding_lib"/>
				</create>
				<retrieve/>
				<update permission="ADMIN_SERIAL_DISTRIBUTION">
					<context link="distribution" field="holding_lib"/>
				</update>
				<delete permission="ADMIN_SERIAL_DISTRIBUTION">
					<context link="distribution" field="holding_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="sssum" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="serial::supplement_summary" oils_persist:tablename="serial.supplement_summary" reporter:label="Supplemental Issue Summary">
		<fields oils_persist:primary="id" oils_persist:sequence="serial.supplement_summary_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Distribution" name="distribution" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Generated Coverage" name="generated_coverage" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Textual Holdings" name="textual_holdings" reporter:datatype="text"/>
			<field reporter:label="Show Generated?" name="show_generated" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="distribution" reltype="has_a" key="id" map="" class="sdist"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SERIAL_DISTRIBUTION">
					<context link="distribution" field="holding_lib"/>
				</create>
				<retrieve/>
				<update permission="ADMIN_SERIAL_DISTRIBUTION">
					<context link="distribution" field="holding_lib"/>
				</update>
				<delete permission="ADMIN_SERIAL_DISTRIBUTION">
					<context link="distribution" field="holding_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="sisum" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="serial::index_summary" oils_persist:tablename="serial.index_summary" reporter:label="Index Issue Summary">
		<fields oils_persist:primary="id" oils_persist:sequence="serial.index_summary_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Distribution" name="distribution" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Generated Coverage" name="generated_coverage" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Textual Holdings" name="textual_holdings" reporter:datatype="text"/>
			<field reporter:label="Show Generated?" name="show_generated" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="distribution" reltype="has_a" key="id" map="" class="sdist"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SERIAL_DISTRIBUTION">
					<context link="distribution" field="holding_lib"/>
				</create>
				<retrieve/>
				<update permission="ADMIN_SERIAL_DISTRIBUTION">
					<context link="distribution" field="holding_lib"/>
				</update>
				<delete permission="ADMIN_SERIAL_DISTRIBUTION">
					<context link="distribution" field="holding_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="spt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="serial::pattern_template" oils_persist:tablename="serial.pattern_template" reporter:label="Prediction Pattern Template">
		<fields oils_persist:primary="id" oils_persist:sequence="serial.pattern_template_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Pattern Code" name="pattern_code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Share Depth" name="share_depth" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SERIAL_PATTERN_TEMPLATE" context_field="owning_lib"/>
				<retrieve/>
				<update permission="ADMIN_SERIAL_PATTERN_TEMPLATE" context_field="owning_lib"/>
				<delete permission="ADMIN_SERIAL_PATTERN_TEMPLATE" context_field="owning_lib"/>
			</actions>
		</permacrud>
	</class>

	<class id="ascecm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::stat_cat_entry_copy_map" oils_persist:tablename="asset.stat_cat_entry_copy_map" reporter:label="Statistical Category Entry Item Map">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.stat_cat_entry_copy_map_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="owning_copy" reporter:datatype="link" oils_obj:required="true"/>
			<field name="stat_cat" reporter:datatype="link" oils_obj:required="true"/>
			<field name="stat_cat_entry" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="owning_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="stat_cat_entry" reltype="has_a" key="id" map="" class="asce"/>
			<link field="stat_cat" reltype="has_a" key="id" map="" class="asc"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="citm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::item_type_map" oils_persist:tablename="config.item_type_map" reporter:label="Item Type Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="code">
			<field reporter:label="Item Type Code" name="code" reporter:selector="value" reporter:datatype="text"/>
			<field reporter:label="Item Type" name="value" reporter:datatype="text" oils_persist:i18n="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_MARC_CODE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_MARC_CODE" global_required="true"/>
				<delete permission="ADMIN_MARC_CODE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="cblvl" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::bib_level_map" oils_persist:tablename="config.bib_level_map" reporter:label="Bib Level Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="code">
			<field reporter:label="Bib Level Code" name="code" reporter:datatype="text"/>
			<field reporter:label="Bib Level" name="value" reporter:datatype="text" oils_persist:i18n="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_MARC_CODE" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_MARC_CODE" global_required="true"/>
				<delete permission="DELETE_MARC_CODE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="sra" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="search::relevance_adjustment" oils_persist:tablename="search.relevance_adjustment" reporter:label="Relevance Adjustment">
		<fields oils_persist:primary="id" oils_persist:sequence="search.relevance_adjustment_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Active" name="active" reporter:datatype="bool"/>
			<field reporter:label="Index Field" name="field" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Bump Type" name="bump_type" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Multiplier" name="multiplier" reporter:datatype="number"/>
		</fields>
		<links>
			<link field="field" reltype="has_a" key="id" map="" class="cmf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_RELEVANCE_ADJUSTMENT" global_required="true"/>
				<retrieve permission="CREATE_RELEVANCE_ADJUSTMENT UPDATE_RELEVANCE_ADJUSTMENT DELETE_RELEVANCE_ADJUSTMENT" global_required="true"/>
				<update permission="UPDATE_RELEVANCE_ADJUSTMENT" global_required="true"/>
				<delete permission="DELETE_RELEVANCE_ADJUSTMENT" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="lasso" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::org_lasso" oils_persist:tablename="actor.org_lasso" reporter:label="Library Group">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.org_lasso_id_seq">
			<field reporter:label="Library Group ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Name" name="name" reporter:datatype="text"/>
			<field reporter:label="Global?" name="global" reporter:datatype="bool"/>
			<field reporter:label="Maps" name="maps" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="maps" reltype="has_many" key="lasso" map="" class="lmap"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_LIBRARY_GROUPS" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_LIBRARY_GROUPS" global_required="true"/>
				<delete permission="ADMIN_LIBRARY_GROUPS" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="lmap" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::org_lasso_map" oils_persist:tablename="actor.org_lasso_map" reporter:label="Library Group Map">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.org_lasso_map_id_seq">
			<field reporter:label="Library Group Map ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Library Group" name="lasso" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Organizational Unit" name="org_unit" reporter:datatype="org_unit" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="lasso" reltype="has_a" key="id" map="" class="lasso"/>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_LIBRARY_GROUPS" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_LIBRARY_GROUPS" global_required="true"/>
				<delete permission="ADMIN_LIBRARY_GROUPS" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="aoupa" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::org_unit_proximity_adjustment" oils_persist:tablename="actor.org_unit_proximity_adjustment" reporter:label="Org Unit Proximity Adjustment">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.org_unit_proximity_adjustment_id_seq">
			<field name="id" reporter:label="ID" reporter:datatype="id"/>
			<field name="item_circ_lib" reporter:label="Item Circ Library" reporter:datatype="org_unit"/>
			<field name="item_owning_lib" reporter:label="Item Owning Library" reporter:datatype="org_unit"/>
			<field name="hold_pickup_lib" reporter:label="Hold Pickup Library" reporter:datatype="org_unit"/>
			<field name="hold_request_lib" reporter:label="Hold Request Library" reporter:datatype="org_unit"/>
			<field name="copy_location" reporter:label="Shelving Location" reporter:datatype="link"/>
			<field name="circ_mod" reporter:label="Circ Modifier" reporter:datatype="link"/>
			<field name="pos" reporter:label="Position" reporter:datatype="int" oils_obj:required="true"/>
			<field name="absolute_adjustment" reporter:label="Absolute adjustment?" reporter:datatype="bool"/>
			<field name="prox_adjustment" reporter:label="Proximity Adjustment" reporter:datatype="number"/>
		</fields>
		<links>
			<link field="item_circ_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="item_owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="hold_pickup_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="hold_request_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="circ_mod" reltype="has_a" key="code" map="" class="ccm"/>
			<link field="copy_location" reltype="has_a" key="id" map="" class="acpl"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_PROXIMITY_ADJUSTMENT" global_required="true"/>
				<retrieve permission="ADMIN_PROXIMITY_ADJUSTMENT" global_required="true"/>
				<update permission="ADMIN_PROXIMITY_ADJUSTMENT" global_required="true"/>
				<delete permission="ADMIN_PROXIMITY_ADJUSTMENT" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="aoup" controller="open-ils.cstore" oils_obj:fieldmapper="actor::org_unit_proximity" oils_persist:tablename="actor.org_unit_proximity" reporter:label="Org Unit Proximity">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.org_unit_proximity_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="from_org" reporter:datatype="org_unit"/>
			<field name="to_org" reporter:datatype="org_unit"/>
			<field name="prox" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="from_org" reltype="has_a" key="id" map="" class="aou"/>
			<link field="to_org" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>
	<class id="ssr" controller="open-ils.cstore" oils_obj:fieldmapper="search::search_result" oils_persist:tablename="search.search_result" oils_persist:readonly="true" reporter:label="Search Result">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.org_unit_proximity_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Relevance" name="rel" reporter:datatype="float"/>
			<field reporter:label="Record" name="record" reporter:datatype="link"/>
			<field reporter:label="Total Results" name="total" reporter:datatype="int"/>
			<field reporter:label="Checked" name="checked" reporter:datatype="int"/>
			<field reporter:label="Visible" name="visible" reporter:datatype="int"/>
			<field reporter:label="Deleted" name="deleted" reporter:datatype="int"/>
			<field reporter:label="Excluded" name="excluded" reporter:datatype="int"/>
		</fields>
		<links/>
	</class>
	<class id="asv" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::survey" oils_persist:tablename="action.survey" reporter:label="Survey">
		<fields oils_persist:primary="id" oils_persist:sequence="action.survey_id_seq">
			<field reporter:label="Questions" name="questions" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Responses" name="responses" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Survey End Date/Time" name="end_date" reporter:datatype="timestamp"/>
			<field reporter:label="Survey ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="OPAC Survey?" name="opac" reporter:datatype="bool"/>
			<field reporter:label="Owning Library" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Poll Style?" name="poll" reporter:datatype="bool"/>
			<field reporter:label="Is Required?" name="required" reporter:datatype="bool"/>
			<field reporter:label="Survey Start Date/Time" name="start_date" reporter:datatype="timestamp"/>
			<field reporter:label="Display in User Summary" name="usr_summary" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="responses" reltype="has_many" key="survey" map="" class="asvr"/>
			<link field="questions" reltype="has_many" key="survey" map="" class="asvq"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SURVEY CREATE_SURVEY" context_field="owner"/>
				<retrieve/>
				<update permission="ADMIN_SURVEY UPDATE_SURVEY" context_field="owner"/>
				<delete permission="ADMIN_SURVEY DELETE_SURVEY" context_field="owner"/>
			</actions>
		</permacrud>
	</class>
	<class id="aoa" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::org_address" oils_persist:tablename="actor.org_address" reporter:label="Org Address">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.org_address_id_seq">
			<field name="address_type" reporter:label="Address Type" reporter:datatype="text" oils_obj:required="true"/>
			<field name="city" reporter:label="City" reporter:datatype="text" oils_obj:required="true"/>
			<field name="country" reporter:label="Country" reporter:datatype="text" oils_obj:required="true"/>
			<field name="county" reporter:label="County" reporter:datatype="text"/>
			<field name="id" reporter:label="ID" reporter:datatype="id"/>
			<field name="org_unit" reporter:label="Org Unit" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field name="post_code" reporter:label="Post Code" reporter:datatype="text" oils_obj:required="true"/>
			<field name="state" reporter:label="State" reporter:datatype="text"/>
			<field name="street1" reporter:label="Street1" reporter:datatype="text" oils_obj:required="true"/>
			<field name="street2" reporter:label="Street2" reporter:datatype="text"/>
			<field name="valid" reporter:label="Is Valid?" reporter:datatype="bool" oils_obj:required="true"/>
			<field name="san" reporter:label="SAN" reporter:datatype="text"/>
			<field name="latitude" reporter:label="Latitude" reporter:datatype="float"/>
			<field name="longitude" reporter:label="Longitude" reporter:datatype="float"/>
		</fields>
		<links>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_ORG_ADDRESS" context_field="org_unit"/>
				<retrieve/>
				<update permission="UPDATE_ORG_ADDRESS" context_field="org_unit"/>
				<delete permission="DELETE_ORG_ADDRESS" context_field="org_unit"/>
			</actions>
		</permacrud>
	</class>
	<class id="asq" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::search_query" oils_persist:tablename="actor.search_query" reporter:label="Search Query" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.search_query_id_seq">
			<field name="id" reporter:datatype="id" reporter:selector="label"/>
			<field name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field name="query_text" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="asfg" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::search_filter_group" oils_persist:tablename="actor.search_filter_group" reporter:label="Search Filter Group" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.search_filter_group_id_seq">
			<field name="id" reporter:datatype="id" reporter:selector="label" reporter:label="ID" oils_obj:required="true"/>
			<field name="owner" reporter:datatype="org_unit" reporter:label="Owning Org Unit" oils_obj:required="true"/>
			<field name="code" reporter:datatype="text" reporter:label="Code" oils_obj:required="true"/>
			<field name="label" reporter:datatype="text" oils_persist:i18n="true" reporter:label="Label" oils_obj:required="true"/>
			<field name="create_date" reporter:datatype="timestamp" reporter:label="Create Date"/>
			<field name="entries" oils_persist:virtual="true" reporter:datatype="link" reporter:label="Group Entries"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="entries" reltype="has_many" key="grp" map="" class="asfge"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SEARCH_FILTER_GROUP" context_field="owner"/>
				<retrieve/>
				<update permission="ADMIN_SEARCH_FILTER_GROUP" context_field="owner"/>
				<delete permission="ADMIN_SEARCH_FILTER_GROUP" context_field="owner"/>
			</actions>
		</permacrud>
	</class>
	<class id="asfge" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::search_filter_group_entry" oils_persist:tablename="actor.search_filter_group_entry" reporter:label="Search Filter Group Entry" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.search_filter_group_entry_id_seq">
			<field name="id" reporter:datatype="id" reporter:label="ID" oils_obj:required="true"/>
			<field name="grp" reporter:datatype="link" reporter:label="Search Filter Group" oils_obj:required="true"/>
			<field name="pos" reporter:datatype="int" reporter:label="Position" oils_obj:required="true"/>
			<field name="query" reporter:datatype="link" reporter:label="Query" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="grp" reltype="has_a" key="id" map="" class="asfg"/>
			<link field="query" reltype="has_a" key="id" map="" class="asq"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SEARCH_FILTER_GROUP">
					<context link="grp" field="owner"/>
				</create>
				<retrieve/>
				<update permission="ADMIN_SEARCH_FILTER_GROUP">
					<context link="grp" field="owner"/>
				</update>
				<delete permission="ADMIN_SEARCH_FILTER_GROUP">
					<context link="grp" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<!-- A note: Please update alhr and ahopl when updating ahr -->
	<class id="ahr" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::hold_request" oils_persist:tablename="action.hold_request" reporter:core="true" reporter:label="Hold Request">
		<fields oils_persist:primary="id" oils_persist:sequence="action.hold_request_id_seq">
			<field reporter:label="Status" name="status" oils_persist:virtual="true"/>
			<field reporter:label="Transit" name="transit" oils_persist:virtual="true"/>
			<field reporter:label="Capture Date/Time" name="capture_time" reporter:datatype="timestamp"/>
			<field reporter:label="Currently Targeted Item" name="current_copy" reporter:datatype="link"/>
			<field reporter:label="Notify by Email?" name="email_notify" reporter:datatype="bool"/>
			<field reporter:label="Hold Expire Date/Time" name="expire_time" reporter:datatype="timestamp"/>
			<field reporter:label="Fulfilling Library" name="fulfillment_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Fulfilling Staff" name="fulfillment_staff"/>
			<field reporter:label="Fulfillment Date/Time" name="fulfillment_time" reporter:datatype="timestamp"/>
			<field reporter:label="Hold Type" name="hold_type" reporter:datatype="text"/>
			<field reporter:label="Holdable Formats (for M-type hold)" name="holdable_formats" reporter:datatype="text"/>
			<field reporter:label="Hold ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Notifications Phone Number" name="phone_notify" reporter:datatype="text"/>
			<field reporter:label="Notifications SMS Number" name="sms_notify" reporter:datatype="text"/>
			<field reporter:label="Notifications SMS Carrier" name="sms_carrier" reporter:datatype="link"/>
			<field reporter:label="Pickup Library" name="pickup_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Last Targeting Date/Time" name="prev_check_time" reporter:datatype="timestamp"/>
			<field reporter:label="Requesting Library" name="request_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Request Date/Time" name="request_time" reporter:datatype="timestamp"/>
			<field reporter:label="Requesting User" name="requestor" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Reset Entries" name="reset_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Item Selection Depth" name="selection_depth"/>
			<field reporter:label="Selection Locus" name="selection_ou" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Target Object ID" name="target" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Hold User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Hold Cancel Date/Time" name="cancel_time" reporter:datatype="timestamp"/>
			<field reporter:label="Hold Canceling Staff" name="canceled_by" reporter:datatype="link"/>
			<field reporter:label="Hold Canceling Workstation" name="canceling_ws" reporter:datatype="link"/>
			<field reporter:label="Notify Time" name="notify_time" oils_persist:virtual="true" reporter:datatype="timestamp"/>
			<field reporter:label="Notify Count" name="notify_count" oils_persist:virtual="true" reporter:datatype="int"/>
			<field reporter:label="Notifications" name="notifications" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Bib Record link" name="bib_rec" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Eligible Items" name="eligible_copies" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Currently Frozen" name="frozen" reporter:datatype="bool"/>
			<field reporter:label="Activation Date" name="thaw_date" reporter:datatype="timestamp"/>
			<field reporter:label="Shelf Time" name="shelf_time" reporter:datatype="timestamp"/>
			<field reporter:label="Cancelation cause" name="cancel_cause" reporter:datatype="link"/>
			<field reporter:label="Cancelation note" name="cancel_note" reporter:datatype="text"/>
			<field reporter:label="Top of Queue" name="cut_in_line" reporter:datatype="bool"/>
			<field reporter:label="Is Mint Condition" name="mint_condition" reporter:datatype="bool"/>
			<field reporter:label="Shelf Expire Time" name="shelf_expire_time" reporter:datatype="timestamp"/>
			<field reporter:label="Notes" name="notes" reporter:datatype="link" oils_persist:virtual="true"/>
			<field reporter:label="Current Shelf Library" name="current_shelf_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Behind Desk" name="behind_desk" reporter:datatype="bool"/>
			<field reporter:label="Acquisition Request" name="acq_request" reporter:datatype="link"/>
			<field reporter:label="Hopeless Date" name="hopeless_date" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="fulfillment_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="fulfillment_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="pickup_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="selection_ou" reltype="has_a" key="id" map="" class="aou"/>
			<link field="requestor" reltype="has_a" key="id" map="" class="au"/>
			<link field="current_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="request_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="transit" reltype="might_have" key="hold" map="" class="ahtc"/>
			<link field="notifications" reltype="has_many" key="hold" map="" class="ahn"/>
			<link field="reset_entries" reltype="has_many" key="hold" map="" class="ahrrre"/>
			<link field="eligible_copies" reltype="has_many" key="hold" map="target_copy" class="ahcm"/>
			<link field="bib_rec" reltype="might_have" key="id" map="" class="rhrr"/>
			<link field="cancel_cause" reltype="has_a" key="id" map="" class="ahrcc"/>
			<link field="canceled_by" reltype="has_a" key="id" map="" class="au"/>
			<link field="canceling_ws" reltype="has_a" key="id" map="" class="aws"/>
			<link field="notes" reltype="has_many" key="hold" map="" class="ahrn"/>
			<link field="current_shelf_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="sms_carrier" reltype="has_a" key="id" map="" class="csc"/>
			<link field="acq_request" reltype="has_a" key="id" map="" class="aur"/>
			<link field="hold_type" reltype="has_a" key="hold_type" map="" class="cht"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_HOLD" context_field="pickup_lib"/>
			</actions>
		</permacrud>
	</class>
	<class id="ahopl" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::hold_on_pull_list" reporter:label="Hold On Pull List" oils_persist:readonly="true">
		<oils_persist:source_definition><![CDATA[
		SELECT DISTINCT
			ahr.*,
			COALESCE(acplo.position, acpl_ordered.fallback_position) AS
				copy_location_order_position,
			CASE WHEN au.alias IS NOT NULL THEN
				au.alias
			ELSE
				au.first_given_name
			END AS usr_alias_or_first_given_name,
			au.first_given_name AS usr_first_given_name,
			au.second_given_name AS usr_second_given_name,
			au.family_name AS usr_family_name,
			au.prefix AS usr_prefix,
			au.suffix AS usr_suffix,
			au.alias AS usr_alias,
			CASE WHEN au.alias IS NOT NULL THEN
				au.alias
			ELSE
				REGEXP_REPLACE(ARRAY_TO_STRING(ARRAY[
					COALESCE(au.family_name, ''),
					COALESCE(au.suffix, ''),
					', ',
					COALESCE(au.prefix, ''),
					COALESCE(au.first_given_name, ''),
					COALESCE(au.second_given_name, '')
				], ' '), E'\\s+,', ',')
			END AS usr_alias_or_display_name,
			REGEXP_REPLACE(ARRAY_TO_STRING(ARRAY[
				COALESCE(au.family_name, ''),
				COALESCE(au.suffix, ''),
				', ',
				COALESCE(au.prefix, ''),
				COALESCE(au.first_given_name, ''),
				COALESCE(au.second_given_name, '')
			], ' '), E'\\s+,', ',') AS usr_display_name,
			TRIM(acnp.label || ' ' || acn.label || ' ' || acns.label)
				AS call_number_label,
			siss.label AS issuance_label,
			(ahr.usr <> ahr.requestor) AS is_staff_hold,
			ahcm_1.copy_count AS potential_copies
		FROM action.hold_request ahr
		JOIN asset.copy acp ON (acp.id = ahr.current_copy)
		JOIN asset.call_number acn ON (acp.call_number = acn.id)
		JOIN asset.call_number_prefix acnp ON (acn.prefix = acnp.id)
		JOIN asset.call_number_suffix acns ON (acn.suffix = acns.id)
		JOIN actor.usr au ON (au.id = ahr.usr)
		JOIN (
			SELECT *, (ROW_NUMBER() OVER (ORDER BY name) + 1000000) AS fallback_position
			FROM asset.copy_location
		) acpl_ordered ON (acpl_ordered.id = acp.location)
		LEFT JOIN actor.usr_standing_penalty ausp 
			ON (ahr.usr = ausp.usr AND (ausp.stop_date IS NULL OR ausp.stop_date > NOW()))
		LEFT JOIN config.standing_penalty csp
			ON (
				csp.id = ausp.standing_penalty AND 
				csp.block_list LIKE '%CAPTURE%' AND (
					(csp.org_depth IS NULL AND ahr.pickup_lib = ausp.org_unit) OR
					(csp.org_depth IS NOT NULL AND ahr.pickup_lib IN (
						SELECT id FROM actor.org_unit_descendants(ausp.org_unit, csp.org_depth))
					)
				)
			)
		JOIN (
			SELECT COUNT(target_copy) AS copy_count, hold
			FROM action.hold_copy_map
			GROUP BY 2
		) ahcm_1 ON (ahcm_1.hold = ahr.id)
		LEFT JOIN serial.issuance siss
			ON (ahr.hold_type = 'I' AND siss.id = ahr.target)
		LEFT JOIN asset.copy_location_order acplo
			ON (acp.location = acplo.location AND
				acp.circ_lib = acplo.org)
		WHERE
			ahr.capture_time IS NULL AND
			ahr.cancel_time IS NULL AND
			csp.id IS NULL AND
			(ahr.expire_time is NULL OR ahr.expire_time > NOW()) AND
			acp.deleted IS FALSE AND
			acp.status IN (SELECT id FROM config.copy_status WHERE holdable IS TRUE AND is_available IS TRUE)
		]]></oils_persist:source_definition>
		<fields oils_persist:primary="id">
			<field reporter:label="Status" name="status" oils_persist:virtual="true"/>
			<field reporter:label="Transit" name="transit" oils_persist:virtual="true"/>
			<field reporter:label="Capture Date/Time" name="capture_time" reporter:datatype="timestamp"/>
			<field reporter:label="Currently Targeted Item" name="current_copy" reporter:datatype="link"/>
			<field reporter:label="Notify by Email?" name="email_notify" reporter:datatype="bool"/>
			<field reporter:label="Hold Expire Date/Time" name="expire_time" reporter:datatype="timestamp"/>
			<field reporter:label="Fulfilling Library" name="fulfillment_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Fulfilling Staff" name="fulfillment_staff"/>
			<field reporter:label="Fulfillment Date/Time" name="fulfillment_time" reporter:datatype="timestamp"/>
			<field reporter:label="Hold Type" name="hold_type" reporter:datatype="text"/>
			<field reporter:label="Holdable Formats (for M-type hold)" name="holdable_formats" reporter:datatype="text"/>
			<field reporter:label="Hold ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Notifications Phone Number" name="phone_notify" reporter:datatype="text"/>
			<field reporter:label="Notifications SMS Number" name="sms_notify" reporter:datatype="text"/>
			<field reporter:label="Notifications SMS Carrier" name="sms_carrier" reporter:datatype="link"/>
			<field reporter:label="Pickup Library" name="pickup_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Last Targeting Date/Time" name="prev_check_time" reporter:datatype="timestamp"/>
			<field reporter:label="Requesting Library" name="request_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Request Date/Time" name="request_time" reporter:datatype="timestamp"/>
			<field reporter:label="Requesting User" name="requestor" reporter:datatype="link"/>
			<field reporter:label="Item Selection Depth" name="selection_depth"/>
			<field reporter:label="Selection Locus" name="selection_ou" reporter:datatype="org_unit"/>
			<field reporter:label="Target Object ID" name="target" reporter:datatype="link"/>
			<field reporter:label="Hold User" name="usr" reporter:datatype="link"/>
			<field reporter:label="Hold Cancel Date/Time" name="cancel_time" reporter:datatype="timestamp"/>
			<field reporter:label="Notify Time" name="notify_time" oils_persist:virtual="true" reporter:datatype="timestamp"/>
			<field reporter:label="Notify Count" name="notify_count" oils_persist:virtual="true" reporter:datatype="int"/>
			<field reporter:label="Notifications" name="notifications" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Bib Record link" name="bib_rec" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Eligible Items" name="eligible_copies" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Currently Frozen" name="frozen" reporter:datatype="bool"/>
			<field reporter:label="Activation Date" name="thaw_date" reporter:datatype="timestamp"/>
			<field reporter:label="Shelf Time" name="shelf_time" reporter:datatype="timestamp"/>
			<field reporter:label="Cancelation cause" name="cancel_cause" reporter:datatype="link"/>
			<field reporter:label="Cancelation note" name="cancel_note" reporter:datatype="text"/>
			<field reporter:label="Top of Queue" name="cut_in_line" reporter:datatype="bool"/>
			<field reporter:label="Is Mint Condition" name="mint_condition" reporter:datatype="bool"/>
			<field reporter:label="Shelf Expire Time" name="shelf_expire_time" reporter:datatype="timestamp"/>
			<field reporter:label="Notes" name="notes" reporter:datatype="link" oils_persist:virtual="true"/>
			<field reporter:label="Current Shelf Library" name="current_shelf_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Acquisition Request" name="acq_request" reporter:datatype="link"/>
			<field reporter:label="Shelving Location Sort Order" name="copy_location_order_position" reporter:datatype="int"/>
			<field reporter:label="User First Given Name" name="usr_first_given_name" reporter:datatype="text"/>
			<field reporter:label="User Second Given Name" name="usr_second_given_name" reporter:datatype="text"/>
			<field reporter:label="User Family Name" name="usr_family_name" reporter:datatype="text"/>
			<field reporter:label="User Prefix" name="usr_prefix" reporter:datatype="text"/>
			<field reporter:label="User Suffix" name="usr_suffix" reporter:datatype="text"/>
			<field reporter:label="User Alias or First Given Name" name="usr_alias_or_first_given_name" reporter:datatype="text"/>
			<field reporter:label="User Display Name" name="usr_display_name" reporter:datatype="text"/>
			<field reporter:label="User Alias or Display Name" name="usr_alias_or_display_name" reporter:datatype="text"/>
			<field reporter:label="User Alias" name="usr_alias" reporter:datatype="text"/>
			<field reporter:label="Call Number Label" name="call_number_label" reporter:datatype="text"/>
			<field reporter:label="Issuance Label" name="issuance_label" reporter:datatype="text"/>
			<field reporter:label="Is Staff Hold?" name="is_staff_hold" reporter:datatype="bool"/>
			<field reporter:label="Potential Items" name="potential_copies" reporter:datatype="int"/>
			<field reporter:label="Behind Desk" name="behind_desk" reporter:datatype="bool"/>
			<field reporter:label="Hopeless Date" name="hopeless_date" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="fulfillment_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="fulfillment_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="pickup_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="selection_ou" reltype="has_a" key="id" map="" class="aou"/>
			<link field="requestor" reltype="has_a" key="id" map="" class="au"/>
			<link field="current_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="request_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="transit" reltype="might_have" key="hold" map="" class="ahtc"/>
			<link field="notifications" reltype="has_many" key="hold" map="" class="ahn"/>
			<link field="eligible_copies" reltype="has_many" key="hold" map="target_copy" class="ahcm"/>
			<link field="bib_rec" reltype="might_have" key="id" map="" class="rhrr"/>
			<link field="cancel_cause" reltype="has_a" key="id" map="" class="ahrcc"/>
			<link field="notes" reltype="has_many" key="hold" map="" class="ahrn"/>
			<link field="current_shelf_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="sms_carrier" reltype="has_a" key="id" map="" class="csc"/>
			<link field="acq_request" reltype="has_a" key="id" map="" class="aur"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_HOLD" context_field="pickup_lib"/>
			</actions>
		</permacrud>
	</class>
	<class id="alhr" controller="open-ils.cstore" oils_obj:fieldmapper="action::last_hold_request" reporter:label="Last Captured Hold Request" oils_persist:readonly="true">
		<oils_persist:source_definition><![CDATA[
			SELECT ahr.* FROM action.hold_request ahr JOIN (SELECT current_copy, MAX(capture_time) AS capture_time FROM action.hold_request WHERE capture_time IS NOT NULL AND current_copy IS NOT NULL AND fulfillment_time IS NULL GROUP BY current_copy)x USING (current_copy, capture_time)
		]]></oils_persist:source_definition>
		<fields oils_persist:primary="id">
			<field reporter:label="Status" name="status" oils_persist:virtual="true"/>
			<field reporter:label="Transit" name="transit" oils_persist:virtual="true"/>
			<field reporter:label="Capture Date/Time" name="capture_time" reporter:datatype="timestamp"/>
			<field reporter:label="Currently Targeted Item" name="current_copy" reporter:datatype="link"/>
			<field reporter:label="Notify by Email?" name="email_notify" reporter:datatype="bool"/>
			<field reporter:label="Hold Expire Date/Time" name="expire_time" reporter:datatype="timestamp"/>
			<field reporter:label="Fulfilling Library" name="fulfillment_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Fulfilling Staff" name="fulfillment_staff"/>
			<field reporter:label="Fulfillment Date/Time" name="fulfillment_time" reporter:datatype="timestamp"/>
			<field reporter:label="Hold Type" name="hold_type" reporter:datatype="text"/>
			<field reporter:label="Holdable Formats (for M-type hold)" name="holdable_formats" reporter:datatype="text"/>
			<field reporter:label="Hold ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Notifications Phone Number" name="phone_notify" reporter:datatype="text"/>
			<field reporter:label="Pickup Library" name="pickup_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Last Targeting Date/Time" name="prev_check_time" reporter:datatype="timestamp"/>
			<field reporter:label="Requesting Library" name="request_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Request Date/Time" name="request_time" reporter:datatype="timestamp"/>
			<field reporter:label="Requesting User" name="requestor" reporter:datatype="link"/>
			<field reporter:label="Item Selection Depth" name="selection_depth"/>
			<field reporter:label="Selection Locus" name="selection_ou" reporter:datatype="org_unit"/>
			<field reporter:label="Target Object ID" name="target" reporter:datatype="link"/>
			<field reporter:label="Hold User" name="usr" reporter:datatype="link"/>
			<field reporter:label="Hold Cancel Date/Time" name="cancel_time" reporter:datatype="timestamp"/>
			<field reporter:label="Notify Time" name="notify_time" oils_persist:virtual="true" reporter:datatype="timestamp"/>
			<field reporter:label="Notify Count" name="notify_count" oils_persist:virtual="true" reporter:datatype="int"/>
			<field reporter:label="Notifications" name="notifications" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Bib Record link" name="bib_rec" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Eligible Items" name="eligible_copies" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Currently Frozen" name="frozen" reporter:datatype="bool"/>
			<field reporter:label="Activation Date" name="thaw_date" reporter:datatype="timestamp"/>
			<field reporter:label="Shelf Time" name="shelf_time" reporter:datatype="timestamp"/>
			<field reporter:label="Cancelation cause" name="cancel_cause" reporter:datatype="link"/>
			<field reporter:label="Cancelation note" name="cancel_note" reporter:datatype="text"/>
			<field reporter:label="Top of Queue" name="cut_in_line" reporter:datatype="bool"/>
			<field reporter:label="Is Mint Condition" name="mint_condition" reporter:datatype="bool"/>
			<field reporter:label="Shelf Expire Time" name="shelf_expire_time" reporter:datatype="timestamp"/>
			<field reporter:label="Notes" name="notes" reporter:datatype="link" oils_persist:virtual="true"/>
			<field reporter:label="Current Shelf Library" name="current_shelf_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Behind Desk" name="behind_desk" reporter:datatype="bool"/>
			<field reporter:label="Acquisition Request" name="acq_request" reporter:datatype="link"/>
			<field reporter:label="Hopeless Date" name="hopeless_date" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="fulfillment_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="fulfillment_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="pickup_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="selection_ou" reltype="has_a" key="id" map="" class="aou"/>
			<link field="requestor" reltype="has_a" key="id" map="" class="au"/>
			<link field="current_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="request_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="transit" reltype="might_have" key="hold" map="" class="ahtc"/>
			<link field="notifications" reltype="has_many" key="hold" map="" class="ahn"/>
			<link field="eligible_copies" reltype="has_many" key="hold" map="target_copy" class="ahcm"/>
			<link field="bib_rec" reltype="might_have" key="id" map="" class="rhrr"/>
			<link field="cancel_cause" reltype="has_a" key="id" map="" class="ahrcc"/>
			<link field="notes" reltype="has_many" key="hold" map="" class="ahrn"/>
			<link field="current_shelf_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="acq_request" reltype="has_a" key="id" map="" class="aur"/>
		</links>
	</class>

	<class id="ahrn" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::hold_request_note" oils_persist:tablename="action.hold_request_note" reporter:label="Hold Request Note">
		<fields oils_persist:primary="id" oils_persist:sequence="action.hold_request_note_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Hold ID" name="hold" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Title" name="title" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Body" name="body" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Slip?" name="slip" reporter:datatype="bool"/>
			<field reporter:label="Pub?" name="pub" reporter:datatype="bool"/>
			<field reporter:label="Staff?" name="staff" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="hold" reltype="has_a" key="id" map="" class="ahr"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="UPDATE_HOLD"><context link="hold" field="request_lib"/></create>
				<retrieve permission="VIEW_USER"><context link="hold" field="request_lib"/></retrieve>
				<update permission="UPDATE_HOLD"><context link="hold" field="request_lib"/></update>
				<delete permission="UPDATE_HOLD"><context link="hold" field="request_lib"/></delete>
			</actions>
		</permacrud>
	</class>
	<class id="combahr" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::all_hold_request" oils_persist:tablename="action.all_hold_request" reporter:core="true" reporter:label="Combined (Active &amp; Aged) Hold Request">
		<fields oils_persist:primary="id" oils_persist:sequence="action.hold_request_id_seq">
			<field reporter:label="Status" name="status" oils_persist:virtual="true"/>
			<field reporter:label="Capture Date/Time" name="capture_time" reporter:datatype="timestamp"/>
			<field reporter:label="Currently Targeted Item" name="current_copy" reporter:datatype="link"/>
			<field reporter:label="Notify by Email?" name="email_notify" reporter:datatype="bool"/>
			<field reporter:label="Hold Expire Date/Time" name="expire_time" reporter:datatype="timestamp"/>
			<field reporter:label="Fulfilling Library" name="fulfillment_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Fulfilling Staff" name="fulfillment_staff"/>
			<field reporter:label="Fulfillment Date/Time" name="fulfillment_time" reporter:datatype="timestamp"/>
			<field reporter:label="Hold Type" name="hold_type" reporter:datatype="text"/>
			<field reporter:label="Holdable Formats (for M-type hold)" name="holdable_formats" reporter:datatype="text"/>
			<field reporter:label="Hold ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Notify by Phone?" name="phone_notify" reporter:datatype="bool"/>
			<field reporter:label="Notify by SMS?" name="sms_notify" reporter:datatype="bool"/>
			<field reporter:label="Pickup Library" name="pickup_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Last Targeting Date/Time" name="prev_check_time" reporter:datatype="timestamp"/>
			<field reporter:label="Requesting Library" name="request_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Request Date/Time" name="request_time" reporter:datatype="timestamp"/>
			<field reporter:label="Patron ZIP" name="usr_post_code" reporter:datatype="text"/>
			<field reporter:label="Patron Home Library" name="usr_home_ou" reporter:datatype="link"/>
			<field reporter:label="Patron Profile Group" name="usr_profile" reporter:datatype="link"/>
			<field reporter:label="Patron Birth Year" name="usr_birth_year" reporter:datatype="int"/>
			<field reporter:label="Staff Placed?" name="staff_placed" reporter:datatype="bool"/>
			<field reporter:label="Item Selection Depth" name="selection_depth"/>
			<field reporter:label="Selection Locus" name="selection_ou" reporter:datatype="org_unit"/>
			<field reporter:label="Target Object ID" name="target" reporter:datatype="link"/>
			<field reporter:label="Hold Cancel Date/Time" name="cancel_time" reporter:datatype="timestamp"/>
			<field reporter:label="Bib Record link" name="bib_rec" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Currently Frozen" name="frozen" reporter:datatype="bool"/>
			<field reporter:label="Activation Date" name="thaw_date" reporter:datatype="timestamp"/>
			<field reporter:label="Shelf Time" name="shelf_time" reporter:datatype="timestamp"/>
			<field reporter:label="Cancelation cause" name="cancel_cause" reporter:datatype="link"/>
			<field reporter:label="Cancelation note" name="cancel_note" reporter:datatype="text"/>
			<field reporter:label="Top of Queue" name="cut_in_line" reporter:datatype="bool"/>
			<field reporter:label="Is Mint Condition" name="mint_condition" reporter:datatype="bool"/>
			<field reporter:label="Shelf Expire Time" name="shelf_expire_time" reporter:datatype="timestamp"/>
			<field reporter:label="Current Shelf Library" name="current_shelf_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Behind Desk" name="behind_desk" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="fulfillment_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="fulfillment_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="pickup_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="selection_ou" reltype="has_a" key="id" map="" class="aou"/>
			<link field="current_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="request_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="usr_home_ou" reltype="has_a" key="id" map="" class="aou"/>
			<link field="bib_rec" reltype="might_have" key="id" map="" class="rhrr"/>
			<link field="cancel_cause" reltype="has_a" key="id" map="" class="ahrcc"/>
			<link field="current_shelf_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="usr_profile" reltype="has_a" key="id" map="" class="pgt"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_HOLD" context_field="pickup_lib"/>
			</actions>
		</permacrud>
	</class>
	<class id="aahr" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::aged_hold_request" oils_persist:tablename="action.aged_hold_request" reporter:core="true" reporter:label="Aged Hold Request">
		<fields oils_persist:primary="id" oils_persist:sequence="action.hold_request_id_seq">
			<field reporter:label="Status" name="status" oils_persist:virtual="true"/>
			<field reporter:label="Capture Date/Time" name="capture_time" reporter:datatype="timestamp"/>
			<field reporter:label="Currently Targeted Item" name="current_copy" reporter:datatype="link"/>
			<field reporter:label="Notify by Email?" name="email_notify" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Hold Expire Date/Time" name="expire_time" reporter:datatype="timestamp"/>
			<field reporter:label="Fulfilling Library" name="fulfillment_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Fulfilling Staff" name="fulfillment_staff"/>
			<field reporter:label="Fulfillment Date/Time" name="fulfillment_time" reporter:datatype="timestamp"/>
			<field reporter:label="Hold Type" name="hold_type" reporter:datatype="text"/>
			<field reporter:label="Holdable Formats (for M-type hold)" name="holdable_formats" reporter:datatype="text"/>
			<field reporter:label="Hold ID" name="id" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Notify by Phone?" name="phone_notify" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Notify by SMS?" name="sms_notify" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Pickup Library" name="pickup_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Last Targeting Date/Time" name="prev_check_time" reporter:datatype="timestamp"/>
			<field reporter:label="Requesting Library" name="request_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Request Date/Time" name="request_time" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Patron ZIP" name="usr_post_code" reporter:datatype="text"/>
			<field reporter:label="Patron Home Library" name="usr_home_ou" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Patron Profile Group" name="usr_profile" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Patron Birth Year" name="usr_birth_year" reporter:datatype="int"/>
			<field reporter:label="Staff Placed?" name="staff_placed" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Item Selection Depth" name="selection_depth" oils_obj:required="true"/>
			<field reporter:label="Selection Locus" name="selection_ou" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Target Object ID" name="target" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Hold Cancel Date/Time" name="cancel_time" reporter:datatype="timestamp"/>
			<field reporter:label="Bib Record link" name="bib_rec" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Currently Frozen" name="frozen" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Activation Date" name="thaw_date" reporter:datatype="timestamp"/>
			<field reporter:label="Shelf Time" name="shelf_time" reporter:datatype="timestamp"/>
			<field reporter:label="Cancelation cause" name="cancel_cause" reporter:datatype="link"/>
			<field reporter:label="Cancelation note" name="cancel_note" reporter:datatype="text"/>
			<field reporter:label="Top of Queue" name="cut_in_line" reporter:datatype="bool"/>
			<field reporter:label="Is Mint Condition" name="mint_condition" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Shelf Expire Time" name="shelf_expire_time" reporter:datatype="timestamp"/>
			<field reporter:label="Current Shelf Library" name="current_shelf_lib" reporter:datatype="org_unit"/>
		</fields>
		<links>
			<link field="fulfillment_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="fulfillment_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="pickup_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="selection_ou" reltype="has_a" key="id" map="" class="aou"/>
			<link field="current_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="request_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="usr_home_ou" reltype="has_a" key="id" map="" class="aou"/>
			<link field="bib_rec" reltype="might_have" key="id" map="" class="rhrr"/>
			<link field="cancel_cause" reltype="has_a" key="id" map="" class="ahrcc"/>
			<link field="current_shelf_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="usr_profile" reltype="has_a" key="id" map="" class="pgt"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_HOLD" context_field="pickup_lib"/>
			</actions>
		</permacrud>
	</class>

	<class id="aou" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::org_unit" oils_persist:tablename="actor.org_unit" reporter:label="Organizational Unit" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.org_unit_id_seq">
			<field reporter:label="Subordinate Organizational Units" name="children" oils_persist:virtual="true" reporter:datatype="org_unit"/>
			<field reporter:label="Billing Address" name="billing_address" reporter:datatype="link"/>
			<field reporter:label="Holds Receiving Address" name="holds_address" reporter:datatype="link"/>
			<!-- @reporter:datatype="org_unit" is correct for the "id" field, and necessary for the reporter as implied by
				 the XML namespace of the attr. Instead, @name == parent::fields/@oils_persist:primary is the proper test
				 for "this field is the identifier column" -->
			<field reporter:label="Organizational Unit ID" name="id" reporter:datatype="org_unit" reporter:selector="shortname"/>
			<field reporter:label="ILL Receiving Address" name="ill_address" reporter:datatype="link"/>
			<field reporter:label="Mailing Address" name="mailing_address" reporter:datatype="link"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Organizational Unit Type" name="ou_type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Parent Organizational Unit" name="parent_ou" reporter:datatype="link"/>
			<field reporter:label="Short (Policy) Name" name="shortname" reporter:datatype="text" oils_obj:required="true" oils_obj:validate="^.+$"/>
			<field reporter:label="Email Address" name="email" reporter:datatype="text"/>
			<field reporter:label="Phone Number" name="phone" reporter:datatype="text"/>
			<field reporter:label="OPAC Visible" name="opac_visible" reporter:datatype="bool"/>
			<field reporter:label="Fiscal Calendar" name="fiscal_calendar" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Users" name="users" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Closed Dates" name="closed_dates" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Circulations" name="circulations" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Settings" name="settings" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Addresses" name="addresses" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Checkins" name="checkins" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Workstations" name="workstations" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Fund Allocation Percentages" name="fund_alloc_pcts" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Shelving Location Orders" name="copy_location_orders" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Transit Item Prev Destinations" name="atc_prev_dests" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Reservation Requests" name="resv_requests" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Reservation Pickups" name="resv_pickups" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Resource Types" name="rsrc_types" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Resources" name="resources" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Resource Attributes" name="rsrc_attrs" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Attribute Values" name="attr_vals" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Hours of Operation" name="hours_of_operation" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="billing_address" reltype="has_a" key="id" map="" class="aoa"/>
			<link field="holds_address" reltype="has_a" key="id" map="" class="aoa"/>
			<link field="ou_type" reltype="has_a" key="id" map="" class="aout"/>
			<link field="mailing_address" reltype="has_a" key="id" map="" class="aoa"/>
			<link field="parent_ou" reltype="has_a" key="id" map="" class="aou"/>
			<link field="ill_address" reltype="has_a" key="id" map="" class="aoa"/>
			<link field="fiscal_calendar" reltype="has_a" key="id" map="" class="acqfc"/>
			<link field="users" reltype="has_many" key="home_ou" map="" class="au"/>
			<link field="closed_dates" reltype="has_many" key="org_unit" map="" class="aoucd"/>
			<link field="children" reltype="has_many" key="parent_ou" map="" class="aou"/>
			<link field="circulations" reltype="has_many" key="circ_lib" map="" class="circ"/>
			<link field="settings" reltype="has_many" key="org_unit" map="" class="aous"/>
			<link field="addresses" reltype="has_many" key="org_unit" map="" class="aoa"/>
			<link field="checkins" reltype="has_many" key="checkin_lib" map="" class="circ"/>
			<link field="workstations" reltype="has_many" key="owning_lib" map="" class="aws"/>
			<link field="fund_alloc_pcts" reltype="has_many" key="org" map="" class="acqfap"/>
			<link field="copy_location_orders" reltype="has_many" key="org" map="" class="acplo"/>
			<link field="atc_prev_dests" reltype="has_many" key="prev_dest" map="" class="atc"/>
			<link field="resv_requests" reltype="has_many" key="request_lib" map="" class="bresv"/>
			<link field="resv_pickups" reltype="has_many" key="pickup_lib" map="" class="bresv"/>
			<link field="rsrc_types" reltype="has_many" key="owner" map="" class="brt"/>
			<link field="resources" reltype="has_many" key="owner" map="" class="brsrc"/>
			<link field="rsrc_attrs" reltype="has_many" key="owner" map="" class="bra"/>
			<link field="attr_vals" reltype="has_many" key="owner" map="" class="brav"/>
			<link field="hours_of_operation" reltype="might_have" key="id" map="" class="aouhoo"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_ORG_UNIT" context_field="parent_ou"/>
				<retrieve/>
				<update permission="UPDATE_ORG_UNIT" context_field="id"/>
				<delete permission="DELETE_ORG_UNIT" context_field="parent_ou"/>
			</actions>
		</permacrud>
	</class>
	<class id="aouct" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::org_unit_custom_tree" oils_persist:tablename="actor.org_unit_custom_tree" reporter:label="Org Unit Custom Tree">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.org_unit_custom_tree_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Active" name="active" reporter:datatype="bool"/>
			<field reporter:label="Purpose" name="purpose" reporter:datatype="text"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ORG_UNIT_CUSTOM_TREE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_ORG_UNIT_CUSTOM_TREE" global_required="true"/>
				<delete permission="ADMIN_ORG_UNIT_CUSTOM_TREE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="aouctn" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::org_unit_custom_tree_node" oils_persist:tablename="actor.org_unit_custom_tree_node" reporter:label="Org Unit Custom Tree Node">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.org_unit_custom_tree_node_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Tree" name="tree" reporter:datatype="link"/>
			<field reporter:label="Org Unit" name="org_unit" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Parent" name="parent_node" reporter:datatype="link"/>
			<field reporter:label="Sibling Sort Order" name="sibling_order" reporter:datatype="int"/>
			<field reporter:label="Children" name="children" reporter:datatype="link" oils_persist:virtual="true"/>
		</fields>
		<links>
			<link field="tree" reltype="has_a" key="id" map="" class="aouct"/>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
			<link field="parent_node" reltype="has_a" key="id" map="" class="aouctn"/>
			<link field="children" reltype="has_many" key="parent_node" map="" class="aouctn"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ORG_UNIT_CUSTOM_TREE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_ORG_UNIT_CUSTOM_TREE" global_required="true"/>
				<delete permission="ADMIN_ORG_UNIT_CUSTOM_TREE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="ccnb" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="container::call_number_bucket" oils_persist:tablename="container.call_number_bucket" reporter:label="Call Number Bucket">
		<fields oils_persist:primary="id" oils_persist:sequence="container.call_number_bucket_id_seq">
			<field name="items" oils_persist:virtual="true" reporter:datatype="link"/>
			<field name="btype" reporter:datatype="text"/>
			<field name="id" reporter:datatype="id"/>
			<field name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field name="description" reporter:datatype="text"/>
			<field name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field name="pub" reporter:datatype="bool"/>
			<field name="create_time" reporter:datatype="timestamp"/>
			<field name="owning_lib" reporter:datatype="org_unit"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="owner" reltype="has_a" key="id" map="" class="au"/>
			<link field="items" reltype="has_many" key="bucket" map="" class="ccnbi"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_CALLNUMBER_BUCKET ADMIN_CALLNUMBER_BUCKET" context_field="owning_lib" owning_user="owner"/>
				<retrieve permission="CREATE_CALLNUMBER_BUCKET ADMIN_CALLNUMBER_BUCKET" context_field="owning_lib" owning_user="owner"/>
				<update permission="CREATE_CALLNUMBER_BUCKET ADMIN_CALLNUMBER_BUCKET" context_field="owning_lib" owning_user="owner"/>
				<delete permission="CREATE_CALLNUMBER_BUCKET ADMIN_CALLNUMBER_BUCKET" context_field="owning_lib" owning_user="owner"/>
			</actions>
		</permacrud>
	</class>
	<class id="ccnbn" controller="open-ils.cstore" oils_obj:fieldmapper="container::call_number_bucket_note" oils_persist:tablename="container.call_number_bucket_note" reporter:label="Call Number Bucket Note">
		<fields oils_persist:primary="id" oils_persist:sequence="container.call_number_bucket_note_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="bucket" reporter:datatype="link" oils_obj:required="true"/>
			<field name="note" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="bucket" reltype="has_a" key="id" map="" class="ccnb"/>
		</links>
	</class>
	<class id="asc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::stat_cat" oils_persist:tablename="asset.stat_cat" reporter:label="Asset Statistical Category">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.stat_cat_id_seq">
			<field reporter:label="Entries" name="entries" oils_persist:virtual="true" reporter:datatype="link" config_field="true"/>
			<field reporter:label="Stat Cat ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="OPAC Visible" name="opac_visible" reporter:datatype="bool"/>
			<field reporter:label="Owning Library" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="SIP Field" name="sip_field" reporter:datatype="link"/>
			<field reporter:label="SIP Format" name="sip_format" reporter:datatype="text"/>
			<field reporter:label="Required" name="required" reporter:datatype="bool"/>
			<field reporter:label="Checkout Archive" name="checkout_archive" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="sip_field" reltype="has_a" key="field" map="" class="ascsf"/>
			<link field="entries" reltype="has_many" key="stat_cat" map="" class="asce"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_COPY_STAT_CAT" context_field="owner"/>
				<retrieve permission="STAFF_LOGIN" global_required="true"/>
				<update permission="UPDATE_COPY_STAT_CAT" context_field="owner"/>
				<delete permission="DELETE_COPY_STAT_CAT" context_field="owner"/>
			</actions>
		</permacrud>
	</class>
	<class id="mfaf" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::mfa_factor" oils_persist:tablename="config.mfa_factor" reporter:label="MFA Factor" oils_persist:readonly="true">
		<fields oils_persist:primary="name">
			<field reporter:label="Name" name="name" reporter:datatype="text" reporter:selector="label" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_obj:required="true" oils_persist:i18n="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_obj:required="true" oils_persist:i18n="true"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="STAFF_LOGIN" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="aumx" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::usr_mfa_exception" oils_persist:tablename="actor.usr_mfa_exception" reporter:label="MFA User Exception">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.usr_mfa_exception_id_seq">
			<field reporter:label="Exception ID" name="id" reporter:datatype="id"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Ingress" name="ingress" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_MFA">
					<context link="usr" field="home_ou"/>
				</create>
				<retrieve permission="STAFF_LOGIN">
					<context link="usr" field="home_ou"/>
				</retrieve>
				<update permission="ADMIN_MFA">
					<context link="usr" field="home_ou"/>
				</update>
				<delete permission="ADMIN_MFA">
					<context link="usr" field="home_ou"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="aumfm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::usr_mfa_factor_map" oils_persist:tablename="actor.usr_mfa_factor_map" reporter:label="MFA User Factor Map">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.usr_mfa_factor_map_id_seq">
			<field reporter:label="Mapping ID" name="id" reporter:datatype="id"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Factor" name="factor" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Purpose" name="purpose" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Time Added" name="add_time" reporter:datatype="timestamp" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="factor" reltype="has_a" key="name" map="" class="mfaf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1" ignore_object_perms="true">
			<actions>
				<retrieve permission="STAFF_LOGIN">
					<context link="usr" field="home_ou"/>
				</retrieve>
				<delete permission="REMOVE_USER_MFA">
					<context link="usr" field="home_ou"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="pgmfm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="permission::group_mfa_factor_map" oils_persist:tablename="permission.group_mfa_factor_map" reporter:label="MFA Group Factor Map">
		<fields oils_persist:primary="id" oils_persist:sequence="permission.group_mfa_factor_map_id_seq">
			<field reporter:label="Mapping ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Group" name="grp" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Factor" name="factor" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="grp" reltype="has_a" key="id" map="" class="pgt"/>
			<link field="factor" reltype="has_a" key="name" map="" class="mfaf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create   permission="ADMIN_MFA" global_required="true"/>
				<retrieve permission="STAFF_LOGIN" global_required="true"/>
				<update   permission="ADMIN_MFA" global_required="true"/>
				<delete   permission="ADMIN_MFA" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="ac" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::card" oils_persist:tablename="actor.card" reporter:label="Library Card">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.card_id_seq">
			<field reporter:label="IsActive?" name="active" reporter:datatype="bool"/>
			<field reporter:label="Barcode" name="barcode" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Card ID" name="id" reporter:datatype="id"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER user_request.view">
					<context link="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="actscsf" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::stat_cat_sip_fields" oils_persist:tablename="actor.stat_cat_sip_fields" reporter:label="SIP Statistical Category Field Identifier">
		<fields oils_persist:primary="field">
			<field reporter:label="Field Identifier" name="field" reporter:datatype="text" reporter:selector="name" oils_obj:required="true"/>
			<field reporter:label="Field Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Exclusive?" name="one_only" reporter:datatype="bool"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_PATRON_STAT_CAT" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_PATRON_STAT_CAT" global_required="true"/>
				<delete permission="DELETE_PATRON_STAT_CAT" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="actsc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::stat_cat" oils_persist:tablename="actor.stat_cat" reporter:label="User Statistical Category">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.stat_cat_id_seq">
			<field reporter:label="Entries" name="entries" oils_persist:virtual="true" reporter:datatype="link" config_field="true"/>
			<field reporter:label="Default Entries" name="default_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Stat Cat ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="OPAC Visible" name="opac_visible" reporter:datatype="bool"/>
			<field reporter:label="Owning Library" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="User Summary" name="usr_summary" reporter:datatype="bool"/>
			<field reporter:label="SIP Field" name="sip_field" reporter:datatype="link"/>
			<field reporter:label="SIP Format" name="sip_format" reporter:datatype="text"/>
			<field reporter:label="Checkout Archive" name="checkout_archive" reporter:datatype="bool"/>
			<field reporter:label="Required" name="required" reporter:datatype="bool"/>
			<field reporter:label="Free Text" name="allow_freetext" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="sip_field" reltype="has_a" key="field" map="" class="actscsf"/>
			<link field="entries" reltype="has_many" key="stat_cat" map="" class="actsce"/>
			<link field="default_entries" reltype="has_many" key="stat_cat" map="" class="actsced"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_PATRON_STAT_CAT" context_field="owner"/>
				<retrieve/>
				<update permission="UPDATE_PATRON_STAT_CAT" context_field="owner"/>
				<delete permission="DELETE_PATRON_STAT_CAT" context_field="owner"/>
			</actions>
		</permacrud>
	</class>
	<class id="msefe" controller="open-ils.cstore" oils_obj:fieldmapper="metabib::series_field_entry" oils_persist:tablename="metabib.series_field_entry" reporter:label="Series Field Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="metabib.series_field_entry_id_seq">
			<field name="field" reporter:datatype="link" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id"/>
			<field name="source" reporter:datatype="link" oils_obj:required="true"/>
			<field name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="source" reltype="has_a" key="id" map="" class="bre"/>
			<link field="field" reltype="has_a" key="id" map="" class="cmf"/>
		</links>
	</class>
	<class id="cub" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="container::user_bucket" oils_persist:tablename="container.user_bucket" reporter:label="User Bucket">
		<fields oils_persist:primary="id" oils_persist:sequence="container.user_bucket_id_seq">
			<field name="items" oils_persist:virtual="true" reporter:datatype="link"/>
			<field name="btype" reporter:datatype="text"/>
			<field name="id" reporter:datatype="id"/>
			<field name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field name="description" reporter:datatype="text"/>
			<field name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field name="pub" reporter:datatype="bool"/>
			<field name="create_time" reporter:datatype="timestamp"/>
			<field name="owning_lib" reporter:datatype="org_unit"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="owner" reltype="has_a" key="id" map="" class="au"/>
			<link field="items" reltype="has_many" key="bucket" map="" class="cubi"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_USER_BUCKET ADMIN_USER_BUCKET" context_field="owning_lib" owning_user="owner"/>
				<retrieve permission="CREATE_USER_BUCKET ADMIN_USER_BUCKET" context_field="owning_lib" owning_user="owner"/>
				<update permission="CREATE_USER_BUCKET ADMIN_USER_BUCKET" context_field="owning_lib" owning_user="owner"/>
				<delete permission="CREATE_USER_BUCKET ADMIN_USER_BUCKET" context_field="owning_lib" owning_user="owner"/>
			</actions>
		</permacrud>
	</class>
	<class id="cubn" controller="open-ils.cstore" oils_obj:fieldmapper="container::user_bucket_note" oils_persist:tablename="container.user_bucket_note" reporter:label="User Bucket Note">
		<fields oils_persist:primary="id" oils_persist:sequence="container.user_bucket_note_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="bucket" reporter:datatype="link" oils_obj:required="true"/>
			<field name="note" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="bucket" reltype="has_a" key="id" map="" class="cub"/>
		</links>
	</class>
	<class id="mcrp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::credit_payment" oils_persist:tablename="money.credit_payment" reporter:label="House Credit Payment">
		<fields oils_persist:primary="id" oils_persist:sequence="money.payment_id_seq">
			<field reporter:label="Accepting Staff Member" name="accepting_usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Amount" name="amount" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Amount Collected" name="amount_collected" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Payment ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Payment Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Payment Timestamp" name="payment_ts" reporter:datatype="timestamp"/>
			<field reporter:label="Transaction" name="xact" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Payment Type" name="payment_type" oils_persist:virtual="true" reporter:datatype="text"/>
			<field reporter:label="Payment link" name="payment" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="payment" reltype="might_have" key="id" map="" class="mp"/>
			<link field="accepting_usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER_TRANSACTIONS">
					<context link="xact" jump="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="afr" controller="open-ils.cstore" oils_obj:fieldmapper="authority::full_rec" oils_persist:tablename="authority.full_rec" reporter:label="Full Authority Record">
		<fields oils_persist:primary="id" oils_persist:sequence="authority.full_rec_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="ind1"/>
			<field name="ind2"/>
			<field name="record" oils_obj:required="true"/>
			<field name="subfield"/>
			<field name="tag" oils_obj:required="true"/>
			<field name="value" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="record" reltype="has_a" key="id" map="" class="are"/>
		</links>
	</class>
	<class id="aalink" controller="open-ils.cstore" oils_obj:fieldmapper="authority::authority_linking" oils_persist:tablename="authority.authority_linking" reporter:label="Authority to Authority Linking">
		<fields oils_persist:primary="id" oils_persist:sequence="authority.authority_linking_id_seq">
			<field name="id" reporter:label="ID" reporter:datatype="id"/>
			<field name="source" reporter:label="Source Record" reporter:datatype="link" oils_obj:required="true"/>
			<field name="target" reporter:label="Target Record" reporter:datatype="link" oils_obj:required="true"/>
			<field name="field" reporter:label="Authority Field" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="source" reltype="has_a" key="id" map="" class="are"/>
			<link field="target" reltype="has_a" key="id" map="" class="are"/>
			<link field="field" reltype="has_a" key="id" map="" class="acsaf"/>
		</links>
	</class>
	<class id="cnct" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::non_cataloged_type" oils_persist:tablename="config.non_cataloged_type" reporter:label="Non-cataloged Type">
		<fields oils_persist:primary="id" oils_persist:sequence="config.non_cataloged_type_id_seq">
			<field reporter:label="Circulation Duration" name="circ_duration" reporter:datatype="interval"/>
			<field reporter:label="Non-cat Type ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="In House?" name="in_house" reporter:datatype="bool"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_NON_CAT_TYPE" context_field="owning_lib"/>
				<retrieve/>
				<update permission="CREATE_NON_CAT_TYPE" context_field="owning_lib"/>
				<delete permission="CREATE_NON_CAT_TYPE" context_field="owning_lib"/>
			</actions>
		</permacrud>

	</class>
	<class id="aout" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::org_unit_type" oils_persist:tablename="actor.org_unit_type" reporter:label="Organizational Unit Type" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.org_unit_type_id_seq">
			<field reporter:label="Subordinate Types" name="children" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Can Have Users?" name="can_have_users" reporter:datatype="bool"/>
			<field reporter:label="Can Have Volumes?" name="can_have_vols" reporter:datatype="bool"/>
			<field reporter:label="Type Depth" name="depth" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Type ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Type Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="OPAC Label" name="opac_label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Parent Type" name="parent" reporter:datatype="link"/>
			<field reporter:label="Org Units" name="org_units" oils_persist:virtual="true" reporter:datatype="org_unit"/>
		</fields>
		<links>
			<link field="parent" reltype="has_a" key="id" map="" class="aout"/>
			<link field="children" reltype="has_many" key="parent" map="" class="aout"/>
			<link field="org_units" reltype="has_many" key="ou_type" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_ORG_TYPE" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_ORG_TYPE" global_required="true"/>
				<delete permission="DELETE_ORG_TYPE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="bren" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="biblio::record_note" oils_persist:tablename="biblio.record_note" reporter:label="Bib Record Note" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="biblio.record_note_id_seq">
			<field reporter:label="Creation Date" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link"/>
			<field reporter:label="Last Edit Date" name="edit_date" reporter:datatype="timestamp"/>
			<field reporter:label="Editor" name="editor" reporter:datatype="link"/>
			<field reporter:label="Note ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Bib Record" name="record" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Note" name="value" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Deleted" name="deleted" reporter:datatype="bool"/> 
		</fields>
		<links>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="record" reltype="has_a" key="id" map="" class="bre"/>
		</links>
			<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
				<actions>
					<create permission="CREATE_RECORD_NOTE" global_required="true"/>
					<retrieve/>
					<update permission="UPDATE_RECORD_NOTE" global_required="true"/>
					<delete permission="DELETE_RECORD_NOTE" global_required="true"/>
				</actions>
			 </permacrud>
	</class>
	<class id="mucs" controller="open-ils.cstore" oils_obj:fieldmapper="money::user_circulation_summary" oils_persist:tablename="money.usr_circulation_summary" reporter:label="User Circulation Summary">
		<fields oils_persist:primary="usr" oils_persist:sequence="">
			<field name="balance_owed" reporter:datatype="money"/>
			<field name="total_owed" reporter:datatype="money"/>
			<field name="total_paid" reporter:datatype="money"/>
			<field name="usr" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
	</class>
	<class id="mg" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::grocery" oils_persist:tablename="money.grocery" reporter:label="Grocery Transaction">
		<fields oils_persist:primary="id" oils_persist:sequence="money.billable_xact_id_seq">
			<field reporter:label="Billing Location" name="billing_location" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Transaction ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Transaction Finish Timestamp" name="xact_finish" reporter:datatype="timestamp"/>
			<field reporter:label="Transaction Start Timestamp" name="xact_start" reporter:datatype="timestamp"/>
			<field reporter:label="Billings" name="billings" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Payments" name="payments" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Billable Transaction link" name="billable_transaction" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Billing Totals" name="billing_total" oils_persist:virtual="true" reporter:datatype="money"/>
			<field reporter:label="Payment Totals" name="payment_total" oils_persist:virtual="true" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="billable_transaction" reltype="might_have" key="id" map="" class="mbt"/>
			<link field="payments" reltype="has_many" key="xact" map="" class="mp"/>
			<link field="billings" reltype="has_many" key="xact" map="" class="mb"/>
			<link field="billing_location" reltype="has_a" key="id" map="" class="aou"/>
			<link field="billing_total" reltype="might_have" key="xact" map="" class="rxbt"/>
			<link field="payment_total" reltype="might_have" key="xact" map="" class="rxpt"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER_TRANSACTIONS" context_field="billing_location"/>
			</actions>
		</permacrud>
	</class>
	<class id="cbs" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::bib_source" oils_persist:tablename="config.bib_source" reporter:label="Bib Source" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.bib_source_id_seq">
			<field name="id" reporter:selector="source" reporter:datatype="id"/>
			<field name="quality" reporter:datatype="int"/>
			<field name="source" reporter:datatype="text" oils_obj:required="true"/>
			<field name="transcendant" reporter:datatype="bool"/>
			<field name="can_have_copies" reporter:datatype="bool"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_BIB_SOURCE" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_BIB_SOURCE" global_required="true"/>
				<delete permission="DELETE_BIB_SOURCE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="mbt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::billable_transaction" oils_persist:tablename="money.billable_xact" reporter:label="Billable Transaction">
		<fields oils_persist:primary="id" oils_persist:sequence="money.billable_xact_id_seq">
			<field reporter:label="Transaction ID" name="id" reporter:datatype="id"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Transaction Finish Date/Time" name="xact_finish" reporter:datatype="timestamp"/>
			<field reporter:label="Transaction Start Date/Time" name="xact_start" reporter:datatype="timestamp"/>
			<field reporter:label="Unrecovered Debt" name="unrecovered" reporter:datatype="bool"/>
			<field reporter:label="Grocery Billing link" name="grocery" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Circulation Billing link" name="circulation" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Billing Line Items" name="billings" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Payment Line Items" name="payments" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Billing Totals" name="billing_total" oils_persist:virtual="true" reporter:datatype="money"/>
			<field reporter:label="Payment Totals" name="payment_total" oils_persist:virtual="true" reporter:datatype="money"/>
			<field reporter:label="Payment Summary" name="summary" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="grocery" reltype="might_have" key="id" map="" class="mg"/>
			<link field="circulation" reltype="might_have" key="id" map="" class="circ"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="payments" reltype="has_many" key="xact" map="" class="mp"/>
			<link field="billings" reltype="has_many" key="xact" map="" class="mb"/>
			<link field="billing_total" reltype="might_have" key="xact" map="" class="rxbt"/>
			<link field="payment_total" reltype="might_have" key="xact" map="" class="rxpt"/>
			<link field="summary" reltype="might_have" key="id" map="" class="mbts"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER_TRANSACTIONS">
					<context link="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="actsce" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::stat_cat_entry" oils_persist:tablename="actor.stat_cat_entry" reporter:label="User Stat Cat Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.stat_cat_entry_id_seq">
			<field reporter:label="Entry ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Entry Owner" name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Stat Cat" name="stat_cat" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Entry Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Default Entries" name="default_entries" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="stat_cat" reltype="has_a" key="id" map="" class="actsc"/>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="default_entries" reltype="has_many" key="stat_cat_entry" map="" class="actsced"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_PATRON_STAT_CAT_ENTRY">
					<context link="stat_cat" field="owner"/>
				</create>
				<retrieve permission="STAFF_LOGIN" global_required="true"/>
				<update permission="UPDATE_PATRON_STAT_CAT_ENTRY">
					<context link="stat_cat" field="owner"/>
				</update>
				<delete permission="DELETE_PATRON_STAT_CAT_ENTRY">
					<context link="stat_cat" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="actsced" controller="open-ils.cstore" oils_obj:fieldmapper="actor::stat_cat_entry_default" oils_persist:tablename="actor.stat_cat_entry_default" reporter:label="User Stat Cat Default Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.stat_cat_entry_default_id_seq">
			<field reporter:label="Default Entry ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Default Entry Value" name="stat_cat_entry" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Stat Cat" name="stat_cat" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Default for Owner" name="owner" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="stat_cat" reltype="has_a" key="id" map="" class="actsc"/>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="stat_cat_entry" reltype="has_a" key="id" map="" class="actsce"/>
		</links>
	</class>
	<class id="cubi" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="container::user_bucket_item" oils_persist:tablename="container.user_bucket_item" reporter:label="User Bucket Item">
		<fields oils_persist:primary="id" oils_persist:sequence="container.user_bucket_item_id_seq">
			<field name="bucket" reporter:datatype="link" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id"/>
			<field name="target_user" reporter:datatype="link" oils_obj:required="true"/>
			<field name="create_time" reporter:datatype="timestamp"/>
			<field name="pos" reporter:datatype="int"/>
			<field name="notes" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="target_user" reltype="has_a" key="id" map="" class="au"/>
			<link field="bucket" reltype="has_a" key="id" map="" class="cub"/>
			<link field="notes" reltype="has_many" map="" key="item" class="cubin"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="ADMIN_USER_BUCKET">
					<context link="bucket" field="owning_lib"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="abhe" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::batch_hold_event" oils_persist:tablename="action.batch_hold_event" reporter:label="Hold Group Event">
		<fields oils_persist:primary="id" oils_persist:sequence="action.batch_hold_event_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="staff" reporter:datatype="link" oils_obj:required="true"/>
			<field name="bucket" reporter:datatype="link" oils_obj:required="true"/>
			<field name="target" reporter:datatype="int" oils_obj:required="true"/>
			<field name="hold_type" reporter:datatype="text"/>
			<field name="run_date" reporter:datatype="timestamp"/>
			<field name="cancelled" reporter:datatype="timestamp"/>
			<field name="mappings" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="bucket" reltype="has_a" key="id" map="" class="cub"/>
			<link field="mappings" reltype="has_many" key="batch_hold_event" map="" class="abhem"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="MANAGE_HOLD_GROUPS" global_required="true"/>
				<retrieve/>
				<update permission="MANAGE_HOLD_GROUPS" global_required="true"/>
				<delete permission="MANAGE_HOLD_GROUPS" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="abhem" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::batch_hold_event_map" oils_persist:tablename="action.batch_hold_event_map" reporter:label="Hold Group Event Map">
		<fields oils_persist:primary="id" oils_persist:sequence="action.batch_hold_event_map_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="batch_hold_event" reporter:datatype="link" oils_obj:required="true"/>
			<field name="hold" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="batch_hold_event" reltype="has_a" key="id" map="" class="abhe"/>
			<link field="hold" reltype="has_a" key="id" map="" class="ahr"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="cubin" controller="open-ils.cstore" oils_obj:fieldmapper="container::user_bucket_item_note" oils_persist:tablename="container.user_bucket_item_note" reporter:label="User Bucket Item Note">
		<fields oils_persist:primary="id" oils_persist:sequence="container.user_bucket_item_note_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="item" reporter:datatype="link" oils_obj:required="true"/>
			<field name="note" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="item" reltype="has_a" key="id" map="" class="cubi"/>
		</links>
	</class>
	<class id="mus" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::user_summary" oils_persist:tablename="money.usr_summary" reporter:label="User Summary">
		<fields oils_persist:primary="usr" oils_persist:sequence="">
			<field name="balance_owed" reporter:datatype="money"/>
			<field name="total_owed" reporter:datatype="money"/>
			<field name="total_paid" reporter:datatype="money"/>
			<field name="usr" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER">
					<context link="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="clfm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::lit_form_map" oils_persist:tablename="config.lit_form_map" reporter:label="Literary Form" oils_persist:field_safe="true">
		<fields oils_persist:primary="code" oils_persist:sequence="">
			<field reporter:label="LitF Code" name="code" reporter:datatype="text"/>
			<field reporter:label="LitF Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="LitF Name" name="value" reporter:datatype="text" oils_persist:i18n="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_MARC_CODE" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_MARC_CODE" global_required="true"/>
				<delete permission="DELETE_MARC_CODE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="mwp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::work_payment" oils_persist:tablename="money.work_payment" reporter:label="Work Payment">
		<fields oils_persist:primary="id" oils_persist:sequence="money.payment_id_seq">
			<field reporter:label="Accepting Staff Member" name="accepting_usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Amount" name="amount" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Amount Collected" name="amount_collected" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Payment ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Payment Timestamp" name="payment_ts" reporter:datatype="timestamp"/>
			<field reporter:label="Transaction ID" name="xact" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Payment link" name="payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Payment Type" name="payment_type" oils_persist:virtual="true" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="payment" reltype="might_have" key="id" map="" class="mp"/>
			<link field="accepting_usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER_TRANSACTIONS">
					<context link="xact" jump="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="mgp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::goods_payment" oils_persist:tablename="money.goods_payment" reporter:label="Goods Payment">
		<fields oils_persist:primary="id" oils_persist:sequence="money.payment_id_seq">
			<field reporter:label="Accepting Staff Member" name="accepting_usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Amount" name="amount" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Amount Collected" name="amount_collected" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Payment ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Payment Timestamp" name="payment_ts" reporter:datatype="timestamp"/>
			<field reporter:label="Transaction ID" name="xact" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Payment link" name="payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Payment Type" name="payment_type" oils_persist:virtual="true" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="payment" reltype="might_have" key="id" map="" class="mp"/>
			<link field="accepting_usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER_TRANSACTIONS">
					<context link="xact" jump="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="aoc" controller="open-ils.cstore" oils_obj:fieldmapper="action::open_circulation" oils_persist:tablename="action.open_circulation" reporter:label="Open Circulation">
		<fields oils_persist:primary="id" oils_persist:sequence="">
			<field name="checkin_lib" reporter:datatype="link"/>
			<field name="checkin_staff" reporter:datatype="link"/>
			<field name="checkin_time" reporter:datatype="timestamp"/>
			<field name="circ_lib" reporter:datatype="org_unit"/>
			<field name="circ_staff" reporter:datatype="link"/>
			<field name="desk_renewal" reporter:datatype="bool"/>
			<field name="due_date" reporter:datatype="timestamp"/>
			<field name="duration" reporter:datatype="interval"/>
			<field name="duration_rule" reporter:datatype="link"/>
			<field name="fine_interval" reporter:datatype="interval"/>
			<field name="id" reporter:datatype="id"/>
			<field name="max_fine" reporter:datatype="money"/>
			<field name="max_fine_rule" reporter:datatype="link"/>
			<field name="opac_renewal" reporter:datatype="bool"/>
			<field name="phone_renewal" reporter:datatype="bool"/>
			<field name="recurring_fine" reporter:datatype="money"/>
			<field name="recurring_fine_rule" reporter:datatype="link"/>
			<field name="renewal_remaining" reporter:datatype="int"/>
			<field name="grace_period" reporter:datatype="interval"/>
			<field name="stop_fines" reporter:datatype="text"/>
			<field name="stop_fines_time" reporter:datatype="timestamp"/>
			<field name="target_copy" reporter:datatype="link"/>
			<field name="usr" reporter:datatype="link"/>
			<field name="xact_finish" reporter:datatype="timestamp"/>
			<field name="xact_start" reporter:datatype="timestamp"/>
			<field name="circulation" oils_persist:virtual="true" reporter:datatype="link"/>
			<field name="auto_renewal" reporter:datatype="bool"/>
			<field name="auto_renewal_remaining" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="circulation" reltype="might_have" key="id" map="" class="circ"/>
			<link field="duration_rule" reltype="has_a" key="name" map="" class="crcd"/>
			<link field="max_fine_rule" reltype="has_a" key="name" map="" class="crmf"/>
			<link field="recurring_fine_rule" reltype="has_a" key="name" map="" class="crrf"/>
		</links>
	</class>
	<class id="msfe" controller="open-ils.cstore" oils_obj:fieldmapper="metabib::subject_field_entry" oils_persist:tablename="metabib.subject_field_entry" reporter:label="Subject Field Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="metabib.subject_field_entry_id_seq">
			<field name="field" reporter:datatype="link" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id"/>
			<field name="source" reporter:datatype="link" oils_obj:required="true"/>
			<field name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="source" reltype="has_a" key="id" map="" class="bre"/>
			<link field="field" reltype="has_a" key="id" map="" class="cmf"/>
		</links>
	</class>
	<class id="crrf" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::rules::recurring_fine" oils_persist:tablename="config.rule_recurring_fine" reporter:label="Recurring Fine Rule" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.rule_recurring_fine_id_seq">
			<field name="high" reporter:datatype="money" oils_obj:required="true"/>
			<field name="id" reporter:selector="name" reporter:datatype="id"/>
			<field name="low" reporter:datatype="money" oils_obj:required="true"/>
			<field name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field name="normal" reporter:datatype="money" oils_obj:required="true"/>
			<field name="recurrence_interval" reporter:datatype="interval"/>
			<field name="grace_period" reporter:datatype="interval"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_RECURRING_FINE_RULE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_RECURRING_FINE_RULE" global_required="true"/>
				<delete permission="ADMIN_RECURRING_FINE_RULE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="mckp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::check_payment" oils_persist:tablename="money.check_payment" reporter:label="Check Payment">
		<fields oils_persist:primary="id" oils_persist:sequence="money.payment_id_seq">
			<field reporter:label="Accepting Staff Member" name="accepting_usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Amount" name="amount" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Amount Collected" name="amount_collected" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Workstation link" name="cash_drawer" reporter:datatype="link"/>
			<field reporter:label="Check Number" name="check_number" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Payment ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Payment Timestamp" name="payment_ts" reporter:datatype="timestamp"/>
			<field reporter:label="Transaction link" name="xact" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Payment link" name="payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Payment Type" name="payment_type" oils_persist:virtual="true" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="payment" reltype="might_have" key="id" map="" class="mp"/>
			<link field="accepting_usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="cash_drawer" reltype="has_a" key="id" map="" class="aws"/>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER_TRANSACTIONS">
					<context link="xact" jump="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="mdcp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::debit_card_payment" oils_persist:tablename="money.debit_card_payment" reporter:label="Debit Card Payment">
		<fields oils_persist:primary="id" oils_persist:sequence="money.payment_id_seq">
			<field reporter:label="Accepting Staff Member" name="accepting_usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Amount" name="amount" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Amount Collected" name="amount_collected" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Workstation link" name="cash_drawer" reporter:datatype="link"/>
			<field reporter:label="Payment ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Payment Timestamp" name="payment_ts" reporter:datatype="timestamp"/>
			<field reporter:label="Transaction link" name="xact" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Payment link" name="payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Payment Type" name="payment_type" oils_persist:virtual="true" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="payment" reltype="might_have" key="id" map="" class="mp"/>
			<link field="accepting_usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="cash_drawer" reltype="has_a" key="id" map="" class="aws"/>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER_TRANSACTIONS">
					<context link="xact" jump="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="acp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::copy" oils_persist:tablename="asset.copy" reporter:core="true" reporter:label="Item">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.copy_id_seq">
			<field reporter:label="Age Hold Protection" name="age_protect" reporter:datatype="link"/>
			<field reporter:label="Alert Message" name="alert_message" reporter:datatype="text"/>
			<field reporter:label="Barcode" name="barcode" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Call Number/Volume" name="call_number" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Circulation Type (MARC)" name="circ_as_type" reporter:datatype="link"/>
			<field reporter:label="Circulating Library" name="circ_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Circulation Modifier" name="circ_modifier" reporter:datatype="link"/>
			<field reporter:label="Can Circulate" name="circulate" reporter:datatype="bool"/>
			<field reporter:label="Item Number on Volume" name="copy_number" reporter:datatype="text"/>
			<field reporter:label="Creation Date/Time" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Active Date/Time" name="active_date" reporter:datatype="timestamp"/>
			<field reporter:label="Creating User" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Is Deleted" name="deleted" reporter:datatype="bool"/>
			<field reporter:label="Dummy ISBN" name="dummy_isbn" reporter:datatype="text"/>
			<field reporter:label="Is Deposit Required" name="deposit" reporter:datatype="bool"/>
			<field reporter:label="Deposit Amount" name="deposit_amount" reporter:datatype="money"/>
			<field reporter:label="Precat Dummy Author" name="dummy_author" reporter:datatype="text"/>
			<field reporter:label="Precat Dummy Title" name="dummy_title" reporter:datatype="text"/>
			<field reporter:label="Last Edit Date/Time" name="edit_date" reporter:datatype="timestamp"/>
			<field reporter:label="Last Editing User" name="editor" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Fine Level" name="fine_level" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Is Holdable" name="holdable" reporter:datatype="bool"/>
			<field reporter:label="Item ID" name="id" reporter:selector="barcode" reporter:datatype="id"/>
			<field reporter:label="Loan Duration" name="loan_duration" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Shelving Location" name="location" reporter:datatype="link"/>
			<field reporter:label="OPAC Visible" name="opac_visible" reporter:datatype="bool"/>
			<field reporter:label="Price" name="price" reporter:datatype="money"/>
			<field reporter:label="Is Reference" name="ref" reporter:datatype="bool"/>
			<field reporter:label="Item Status" name="status" reporter:datatype="link"/>
			<field reporter:label="Item Status Changed Time" name="status_changed_time" reporter:datatype="timestamp"/>
			<field reporter:label="Is Mint Condition" name="mint_condition" reporter:datatype="bool"/>
			<field reporter:label="Floating Group" name="floating" reporter:datatype="link"/>
			<field reporter:label="Cost" name="cost" reporter:datatype="money"/>
			<field reporter:label="Item Notes" name="notes" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Stat-Cat entry maps" name="stat_cat_entry_copy_maps" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Circulations" name="circulations" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Aged (patronless) Circulations" name="aged_circulations" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Combined Aged and Active Circulations" name="all_circulations" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Total Circulations" name="total_circ_count" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Last Circulation Date" name="last_circ" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Holds" name="holds" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Statistical Category Entries" name="stat_cat_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Monograph Parts" name="parts" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Peer Record Maps" name="peer_record_maps" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Peer Records" name="peer_records" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Last Captured Hold" name="last_captured_hold" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Latest Inventory" name="latest_inventory" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Item Inventory" name="copy_inventory" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Has Holds" name="holds_count" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Item Tags" name="tags" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Item Alerts" name="copy_alerts" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="age_protect" reltype="has_a" key="id" map="" class="crahp"/>
			<link field="call_number" reltype="has_a" key="id" map="" class="acn"/>
			<link field="location" reltype="has_a" key="id" map="" class="acpl"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="status" reltype="has_a" key="id" map="" class="ccs"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="holds" reltype="has_many" key="target_copy" map="hold" class="ahcm"/>
			<link field="stat_cat_entry_copy_maps" reltype="has_many" key="owning_copy" map="" class="ascecm"/>
			<link field="notes" reltype="has_many" key="owning_copy" map="" class="acpn"/>
			<link field="stat_cat_entries" reltype="has_many" key="owning_copy" map="stat_cat_entry" class="ascecm"/>
			<link field="circulations" reltype="has_many" key="target_copy" map="" class="circ"/>
			<link field="aged_circulations" reltype="has_many" key="target_copy" map="" class="acirc"/>
			<link field="all_circulations" reltype="has_many" key="target_copy" map="" class="combcirc"/>
			<link field="total_circ_count" reltype="might_have" key="id" map="" class="erfcc"/>
			<link field="last_circ" reltype="might_have" key="id" map="" class="rlc"/>
			<link field="circ_modifier" reltype="has_a" key="code" map="" class="ccm"/>
			<link field="parts" reltype="has_many" key="target_copy" map="part" class="acpm"/>
			<link field="peer_record_maps" reltype="has_many" key="target_copy" map="" class="bpbcm"/>
			<link field="peer_records" reltype="has_many" key="target_copy" map="peer_record" class="bpbcm"/>
			<link field="last_captured_hold" reltype="might_have" key="current_copy" map="" class="alhr"/>
			<link field="latest_inventory" reltype="might_have" key="copy" map="" class="alci"/>
			<link field="copy_inventory" reltype="might_have" key="copy" map="" class="aci"/>
			<link field="floating" reltype="has_a" key="id" map="" class="cfg"/>
			<link field="holds_count" reltype="might_have" key="id" map="" class="hasholdscount"/>
			<link field="tags" reltype="has_many" key="copy" map="" class="acptcm"/>
			<link field="copy_alerts" reltype="has_many" key="copy" map="" class="aca"/>
			<link field="circ_as_type" reltype="has_a" key="code" map="" class="citm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_COPY">
					<context link="call_number" field="owning_lib"/>
				</create>
				<retrieve/>
				<update permission="UPDATE_COPY">
					<context link="call_number" field="owning_lib"/>
				</update>
				<delete permission="DELETE_COPY">
					<context link="call_number" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="aci" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::copy_inventory" oils_persist:tablename="asset.copy_inventory" reporter:core="true" reporter:label="Item Inventory">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.copy_inventory_id_seq">
			<field reporter:label="Item Inventory ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Item Inventory Date" name="inventory_date" reporter:datatype="timestamp"/>
			<field reporter:label="Item Inventory Workstation" name="inventory_workstation" reporter:datatype="link"/>
			<field reporter:label="Item" name="copy" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="inventory_workstation" reltype="has_a" key="id" map="" class="aws"/>
			<link field="copy" reltype="has_a" key="id" map="" class="acp"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="STAFF_LOGIN"/>
				<retrieve/>
				<update permission="STAFF_LOGIN"/>
				<delete permission="STAFF_LOGIN"/>
			</actions>
		</permacrud>
	</class>

	<class id="alci" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::latest_inventory" oils_persist:tablename="asset.latest_inventory" reporter:core="true" reporter:label="Latest Inventory" oils_persist:readonly="true">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.copy_inventory_id_seq">
			<field reporter:label="Latest Inventory ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Latest Inventory Date" name="inventory_date" reporter:datatype="timestamp"/>
			<field reporter:label="Latest Inventory Workstation" name="inventory_workstation" reporter:datatype="link"/>
			<field reporter:label="Item" name="copy" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="inventory_workstation" reltype="has_a" key="id" map="" class="aws"/>
			<link field="copy" reltype="has_a" key="id" map="" class="acp"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="ccat" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::copy_alert_type" oils_persist:tablename="config.copy_alert_type" reporter:label="Item Alert Type" oils_persist:restrict_primary="100" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.copy_alert_type_id_seq">
			<field reporter:label="Id" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Scope Org Unit" name="scope_org" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Active" name="active" reporter:datatype="bool"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="State" name="state" reporter:datatype="text"/>
			<field reporter:label="Event" name="event" reporter:datatype="text"/>
			<field reporter:label="During Renewal" name="in_renew" reporter:datatype="bool"/>
			<field reporter:label="Allow At Item Circ Library" name="at_circ" reporter:datatype="bool"/>
			<field reporter:label="Allow At Item Owning Library" name="at_owning" reporter:datatype="bool"/>
			<field reporter:label="Invert allowed locations" name="invert_location" reporter:datatype="bool"/>
			<field reporter:label="Next Statuses" name="next_status" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="scope_org" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_COPY_ALERT_TYPE CREATE_COPY_ALERT_TYPE" context_field="scope_org"/>
				<retrieve/>
				<update permission="ADMIN_COPY_ALERT_TYPE UPDATE_COPY_ALERT_TYPE" context_field="scope_org"/>
				<delete permission="ADMIN_COPY_ALERT_TYPE DELETE_COPY_ALERT_TYPE" context_field="scope_org"/>
			</actions>
		</permacrud>
	</class>

	<class id="acas" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="actor::copy_alert_suppress" oils_persist:tablename="actor.copy_alert_suppress" reporter:label="Item Alert Suppression">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.copy_alert_suppress_id_seq">
			<field reporter:label="Id" name="id" reporter:datatype="id"/>
			<field reporter:label="Org Unit" name="org" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Alert Type" name="alert_type" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="org" reltype="has_a" key="id" map="" class="aou"/>
			<link field="alert_type" reltype="has_a" key="id" map="" class="ccat"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_COPY_ALERT_SUPPRESS CREATE_COPY_ALERT_SUPPRESS" context_field="org"/>
				<retrieve/>
				<update permission="ADMIN_COPY_ALERT_SUPPRESS UPDATE_COPY_ALERT_SUPPRESS" context_field="org"/>
				<delete permission="ADMIN_COPY_ALERT_SUPPRESS DELETE_COPY_ALERT_SUPPRESS" context_field="org"/>
			</actions>
		</permacrud>
	</class>

	<class id="aca" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::copy_alert" oils_persist:tablename="asset.copy_alert" reporter:label="Item Alert">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.copy_alert_id_seq">
			<field reporter:label="Id" name="id" reporter:datatype="id"/>
			<field reporter:label="Alert Type" name="alert_type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Item" name="copy" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Temporary" name="temp" reporter:datatype="bool"/>
			<field reporter:label="Create Date/Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Creator" name="create_staff" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Acknowledge Date/Time" name="ack_time" reporter:datatype="timestamp"/>
			<field reporter:label="Acknowledger" name="ack_staff" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="alert_type" reltype="has_a" key="id" map="" class="ccat"/>
			<link field="copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="create_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="ack_staff" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_COPY_ALERT CREATE_COPY_ALERT">
					<context link="copy" field="circ_lib"/>
				</create>
				<retrieve permission="ADMIN_COPY_ALERT VIEW_COPY_ALERT">
					<context link="copy" field="circ_lib"/>
				</retrieve>
				<update permission="ADMIN_COPY_ALERT UPDATE_COPY_ALERT">
					<context link="copy" field="circ_lib"/>
				</update>
				<delete permission="ADMIN_COPY_ALERT DELETE_COPY_ALERT">
					<context link="copy" field="circ_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="aaca" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::active_copy_alert" oils_persist:tablename="asset.active_copy_alert" reporter:label="Active Item Alert" oils_persist:readonly="true">
		<fields oils_persist:primary="id">
			<field reporter:label="Id" name="id" reporter:datatype="id"/>
			<field reporter:label="Alert Type" name="alert_type" reporter:datatype="link"/>
			<field reporter:label="Item" name="copy" reporter:datatype="link"/>
			<field reporter:label="Temporary" name="temp" reporter:datatype="bool"/>
			<field reporter:label="Create Date/Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Creator" name="create_staff" reporter:datatype="link"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Acknowledge Date/Time" name="ack_time" reporter:datatype="timestamp"/>
			<field reporter:label="Acknowledger" name="ack_staff" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="alert_type" reltype="has_a" key="id" map="" class="ccat"/>
			<link field="copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="create_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="ack_staff" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_COPY_ALERT CREATE_COPY_ALERT">
					<context link="copy" field="circ_lib"/>
				</create>
				<retrieve permission="ADMIN_COPY_ALERT VIEW_COPY_ALERT">
					<context link="copy" field="circ_lib"/>
				</retrieve>
				<update permission="ADMIN_COPY_ALERT UPDATE_COPY_ALERT">
					<context link="copy" field="circ_lib"/>
				</update>
				<delete permission="ADMIN_COPY_ALERT DELETE_COPY_ALERT">
					<context link="copy" field="circ_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="act" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::copy_template" oils_persist:tablename="asset.copy_template" reporter:label="Asset Item Template">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.copy_template_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Editor" name="editor" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Create Date" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Edit Date" name="edit_date" reporter:datatype="timestamp"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Circ Library" name="circ_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Status" name="status" reporter:datatype="link"/>
			<field reporter:label="Location" name="location" reporter:datatype="link"/>
			<field reporter:label="Loan Duration" name="loan_duration" reporter:datatype="int"/>
			<field reporter:label="Fine Level" name="fine_level" reporter:datatype="int"/>
			<field reporter:label="Age Protect" name="age_protect" reporter:datatype="link"/>
			<field reporter:label="Circulate?" name="circulate" reporter:datatype="bool"/>
			<field reporter:label="Deposit?" name="deposit" reporter:datatype="bool"/>
			<field reporter:label="Reference?" name="ref" reporter:datatype="bool"/>
			<field reporter:label="Holdable?" name="holdable" reporter:datatype="bool"/>
			<field reporter:label="Deposit Amount" name="deposit_amount" reporter:datatype="money"/>
			<field reporter:label="Price" name="price" reporter:datatype="money"/>
			<field reporter:label="Circ Modifier" name="circ_modifier" reporter:datatype="link"/>
			<field reporter:label="Circ As Type" name="circ_as_type" reporter:datatype="link"/>
			<field reporter:label="Alert Message" name="alert_message" reporter:datatype="text"/>
			<field reporter:label="OPAC Visible?" name="opac_visible" reporter:datatype="bool"/>
			<field reporter:label="Floating Group" name="floating" reporter:datatype="link"/>
			<field reporter:label="Mint Condition?" name="mint_condition" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="status" reltype="has_a" key="id" map="" class="ccs"/>
			<link field="circ_modifier" reltype="has_a" key="code" map="" class="ccm"/>
			<link field="location" reltype="has_a" key="id" map="" class="acpl"/>
			<link field="floating" reltype="has_a" key="id" map="" class="cfg"/>
			<link field="age_protect" reltype="has_a" key="id" map="" class="crahp"/>
			<link field="circ_as_type" reltype="has_a" key="code" map="" class="citm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ASSET_COPY_TEMPLATE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_ASSET_COPY_TEMPLATE" global_required="true"/>
				<delete permission="ADMIN_ASSET_COPY_TEMPLATE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="crahp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::rules::age_hold_protect" oils_persist:tablename="config.rule_age_hold_protect" reporter:label="Age Hold Protection Rule" oils_persist:field_safe="true" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.rule_age_hold_protect_id_seq">
			<field reporter:label="Item Age" name="age" reporter:datatype="interval" oils_obj:required="true"/>
			<field reporter:label="Rule ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Rule Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Allowed Proximity" name="prox" reporter:datatype="int" oils_obj:required="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_AGE_PROTECT_RULE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_AGE_PROTECT_RULE" global_required="true"/>
				<delete permission="ADMIN_AGE_PROTECT_RULE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="crmf" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::rules::max_fine" oils_persist:tablename="config.rule_max_fine" reporter:label="Max Fine Rule" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.rule_max_fine_id_seq">
			<field reporter:label="Max Fine Amount" name="amount" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Rule ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Rule Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Is Percent" name="is_percent" reporter:datatype="bool"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_MAX_FINE_RULE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_MAX_FINE_RULE" global_required="true"/>
				<delete permission="ADMIN_MAX_FINE_RULE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="pgt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="permission::grp_tree" oils_persist:tablename="permission.grp_tree" reporter:label="Permission Group" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="permission.grp_tree_id_seq">
			<field reporter:label="Child Groups" name="children" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Group ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Group Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Parent Group" name="parent" reporter:datatype="link"/>
			<field reporter:label="User Expiration Interval" name="perm_interval" reporter:datatype="interval"/>
			<field reporter:label="Required Permission" name="application_perm" reporter:datatype="text"/>
			<field reporter:label="Is User Group" name="usergroup" reporter:datatype="bool"/>
			<field reporter:label="Hold Priority" name="hold_priority" reporter:datatype="int"/>
			<field reporter:label="MFA Allowed?" name="mfa_allowed" reporter:datatype="bool"/>
			<field reporter:label="MFA Required?" name="mfa_required" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="parent" reltype="has_a" key="id" map="" class="pgt"/>
			<link field="children" reltype="has_many" key="parent" map="" class="pgt"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_PERM" global_required="true"/>
				<retrieve permission="STAFF_LOGIN" global_required="true"/>
				<update permission="UPDATE_PERM" global_required="true"/>
				<delete permission="DELETE_PERM" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="pgtde" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="permission::grp_tree_display_entry" oils_persist:tablename="permission.grp_tree_display_entry" reporter:label="Permission Group Tree Display Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="permission.grp_tree_display_entry_id_seq">
			<field reporter:label="Entry ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Group ID" name="grp" reporter:datatype="link" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Parent Group" name="parent" reporter:datatype="link"/>
			<field reporter:label="Org Unit" name="org" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Position" name="position" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Child Entries" name="children" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="parent" reltype="has_a" key="id" map="" class="pgtde"/>
			<link field="grp" reltype="has_a" key="id" map="" class="pgt"/>
			<link field="org" reltype="has_a" key="id" map="" class="aou"/>
			<link field="children" reltype="has_many" key="parent" map="" class="pgtde"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="MANAGE_CUSTOM_PERM_GRP_TREE" global_required="true"/>
				<retrieve permission="STAFF_LOGIN" global_required="true"/>
				<update permission="MANAGE_CUSTOM_PERM_GRP_TREE" global_required="true"/>
				<delete permission="MANAGE_CUSTOM_PERM_GRP_TREE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="asva" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::survey_answer" oils_persist:tablename="action.survey_answer" reporter:label="Survey Answer">
		<fields oils_persist:primary="id" oils_persist:sequence="action.survey_answer_id_seq">
			<field reporter:label="Responses using this Answer" name="responses" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Answer Text" name="answer" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Answer ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Question" name="question" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="question" reltype="has_a" key="id" map="" class="asvq"/>
			<link field="responses" reltype="has_many" key="answer" map="" class="asvr"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_SURVEY UPDATE_SURVEY">
					<context link="question" jump="survey" field="owner"/>
				</create>
				<retrieve/>
				<update permission="ADMIN_SURVEY UPDATE_SURVEY">
					<context link="question" jump="survey" field="owner"/>
				</update>
				<delete permission="ADMIN_SURVEY UPDATE_SURVEY">
					<context link="question" jump="survey" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="ancc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::non_cataloged_circulation" oils_persist:tablename="action.non_cataloged_circulation" reporter:core="true" reporter:label="Non-cataloged Circulation">
		<fields oils_persist:primary="id" oils_persist:sequence="action.non_cataloged_circulation_id_seq">
			<field reporter:label="Circulating Library" name="circ_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Circulation Date/Time" name="circ_time" reporter:datatype="timestamp"/>
			<field reporter:label="Non-cat Circulation ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Non-cat Item Type" name="item_type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Patron" name="patron" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Circulating Staff" name="staff" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Virtual Due Date/Time" name="duedate" reporter:datatype="timestamp" oils_persist:virtual="true"/>
		</fields>
		<links>
			<link field="item_type" reltype="has_a" key="id" map="" class="cnct"/>
			<link field="staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="patron" reltype="has_a" key="id" map="" class="au"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_CIRCULATIONS" context_field="circ_lib"/>
			</actions>
		</permacrud>
	</class>
	<class id="aoncc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::open_non_cataloged_circulation" oils_persist:tablename="action.open_non_cataloged_circulation" oils_persist:readonly="true" reporter:core="true" reporter:label="Open Non-cataloged Circulation">
		<fields oils_persist:primary="id" oils_persist:sequence="action.non_cataloged_circulation_id_seq">
			<field reporter:label="Circulating Library" name="circ_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Circulation Date/Time" name="circ_time" reporter:datatype="timestamp"/>
			<field reporter:label="Non-cat Circulation ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Non-cat Item Type" name="item_type" reporter:datatype="link"/>
			<field reporter:label="Patron" name="patron" reporter:datatype="link"/>
			<field reporter:label="Circulating Staff" name="staff" reporter:datatype="link"/>
			<field reporter:label="Virtual Due Date/Time" name="duedate" reporter:datatype="timestamp" oils_persist:virtual="true"/>
		</fields>
		<links>
			<link field="item_type" reltype="has_a" key="id" map="" class="cnct"/>
			<link field="staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="patron" reltype="has_a" key="id" map="" class="au"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_CIRCULATIONS" context_field="circ_lib"/>
			</actions>
		</permacrud>
	</class>
	<class id="moucs" controller="open-ils.cstore" oils_obj:fieldmapper="money::open_user_circulation_summary" oils_persist:tablename="money.open_usr_circulation_summary" reporter:label="Open User Circulation Summary">
		<fields oils_persist:primary="usr" oils_persist:sequence="">
			<field name="balance_owed" reporter:datatype="money"/>
			<field name="total_owed" reporter:datatype="money"/>
			<field name="total_paid" reporter:datatype="money"/>
			<field name="usr" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
	</class>
	<class id="aufh" controller="open-ils.cstore" oils_obj:fieldmapper="action::unfulfilled_hold_list" oils_persist:tablename="action.unfulfilled_hold_list" reporter:label="Unfulfilled Hold Targets">
		<fields oils_persist:primary="id" oils_persist:sequence="action.unfulfilled_hold_list_id_seq">
			<field reporter:label="Non-fulfilling Library" name="circ_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Non-fulfilling Item" name="current_copy" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Retargeting Date/Time" name="fail_time" reporter:datatype="timestamp"/>
			<field reporter:label="Hold" name="hold" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Record ID" name="id" reporter:datatype="id"/>
		</fields>
		<links>
			<link field="hold" reltype="has_a" key="id" map="" class="ahr"/>
			<link field="current_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>
	<class id="mife" controller="open-ils.cstore" oils_obj:fieldmapper="metabib::identifier_field_entry" oils_persist:tablename="metabib.identifier_field_entry" reporter:label="Identifier Field Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="metabib.identifier_field_entry_id_seq">
			<field name="field" reporter:datatype="link" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id"/>
			<field name="source" reporter:datatype="link" oils_obj:required="true"/>
			<field name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="source" reltype="has_a" key="id" map="" class="bre"/>
			<link field="field" reltype="has_a" key="id" map="" class="cmf"/>
		</links>
	</class>
	<class id="mtfe" controller="open-ils.cstore" oils_obj:fieldmapper="metabib::title_field_entry" oils_persist:tablename="metabib.title_field_entry" reporter:label="Title Field Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="metabib.title_field_entry_id_seq">
			<field name="field" reporter:datatype="link" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id"/>
			<field name="source" reporter:datatype="link" oils_obj:required="true"/>
			<field name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="source" reltype="has_a" key="id" map="" class="bre"/>
			<link field="field" reltype="has_a" key="id" map="" class="cmf"/>
		</links>
	</class>
	<class id="actscecm" controller="open-ils.cstore" oils_obj:fieldmapper="actor::stat_cat_entry_user_map" oils_persist:tablename="actor.stat_cat_entry_usr_map" reporter:label="User Statistical Category Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.stat_cat_entry_usr_map_id_seq">
			<field reporter:label="Entry ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Statistical Category" name="stat_cat" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Entry Text" name="stat_cat_entry" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="User" name="target_usr" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="target_usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="stat_cat" reltype="has_a" key="id" map="" class="actsc"/>
		</links>
	</class>
	<class id="pgpm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="permission::grp_perm_map" oils_persist:tablename="permission.grp_perm_map" reporter:label="Group Permission Map">
		<fields oils_persist:primary="id" oils_persist:sequence="permission.grp_perm_map_id_seq">
			<field name="depth" reporter:datatype="int" oils_obj:required="true"/>
			<field name="grantable" reporter:datatype="bool"/>
			<field name="grp" reporter:datatype="link" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id"/>
			<field name="perm" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="grp" reltype="has_a" key="id" map="" class="pgt"/>
			<link field="perm" reltype="has_a" key="id" map="" class="ppl"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ASSIGN_GROUP_PERM" global_required="true"/>
				<retrieve permission="ASSIGN_GROUP_PERM UPDATE_GROUP_PERM REMOVE_GROUP_PERM" global_required="true"/>
				<update permission="UPDATE_GROUP_PERM" global_required="true"/>
				<delete permission="REMOVE_GROUP_PERM" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="ccb" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="container::copy_bucket" oils_persist:tablename="container.copy_bucket" reporter:label="Item Bucket">
		<fields oils_persist:primary="id" oils_persist:sequence="container.copy_bucket_id_seq">
			<field name="items" oils_persist:virtual="true"/>
			<field name="btype" reporter:datatype="text"/>
			<field name="id" reporter:datatype="id"/>
			<field name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field name="description" reporter:datatype="text"/>
			<field name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field name="pub" reporter:datatype="bool"/>
			<field name="create_time" reporter:datatype="timestamp"/>
			<field name="owning_lib" reporter:datatype="org_unit"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="owner" reltype="has_a" key="id" map="" class="au"/>
			<link field="items" reltype="has_many" key="bucket" map="" class="ccbi"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_COPY_BUCKET ADMIN_COPY_BUCKET" context_field="owning_lib" owning_user="owner"/>
				<retrieve permission="CREATE_COPY_BUCKET ADMIN_COPY_BUCKET" context_field="owning_lib" owning_user="owner"/>
				<update permission="CREATE_COPY_BUCKET ADMIN_COPY_BUCKET" context_field="owning_lib" owning_user="owner"/>
				<delete permission="CREATE_COPY_BUCKET ADMIN_COPY_BUCKET" context_field="owning_lib" owning_user="owner"/>
			</actions>
		</permacrud>
	</class>
	<class id="ccbn" controller="open-ils.cstore" oils_obj:fieldmapper="container::copy_bucket_note" oils_persist:tablename="container.copy_bucket_note" reporter:label="Item Bucket Note">
		<fields oils_persist:primary="id" oils_persist:sequence="container.copy_bucket_note_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="bucket" reporter:datatype="link" oils_obj:required="true"/>
			<field name="note" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="bucket" reltype="has_a" key="id" map="" class="ccb"/>
		</links>
	</class>
	<class id="puwoum" controller="open-ils.cstore" oils_obj:fieldmapper="permission::usr_work_ou_map" oils_persist:tablename="permission.usr_work_ou_map" reporter:label="User Work Org Unit Map">
		<fields oils_persist:primary="id" oils_persist:sequence="permission.usr_work_ou_map_id_seq">
			<field reporter:label="User/Working Location Map ID" name="id" reporter:datatype="int"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Working Location" name="work_ou" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="work_ou" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>
	<class id="pupm" controller="open-ils.cstore" oils_obj:fieldmapper="permission::usr_perm_map" oils_persist:tablename="permission.usr_perm_map" reporter:label="User Permission Map">
		<fields oils_persist:primary="id" oils_persist:sequence="permission.usr_perm_map_id_seq">
			<field name="depth" reporter:datatype="int" oils_obj:required="true"/>
			<field name="grantable" reporter:datatype="bool"/>
			<field name="id" reporter:datatype="id"/>
			<field name="perm" reporter:datatype="link" oils_obj:required="true"/>
			<field name="usr" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="perm" reltype="has_a" key="id" map="" class="ppl"/>
		</links>
	</class>
	<class id="puopm" controller="open-ils.cstore" oils_obj:fieldmapper="permission::usr_object_perm_map" oils_persist:tablename="permission.usr_object_perm_map" reporter:label="User Object Permission Map">
		<fields oils_persist:primary="id" oils_persist:sequence="permission.usr_object_perm_map_id_seq">
			<field name="object_id" reporter:datatype="text" oils_obj:required="true"/>
			<field name="grantable" reporter:datatype="bool"/>
			<field name="id" reporter:datatype="id"/>
			<field name="perm" reporter:datatype="link" oils_obj:required="true"/>
			<field name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field name="object_type" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="perm" reltype="has_a" key="id" map="" class="ppl"/>
		</links>
	</class>
	<class id="mp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::payment" oils_persist:tablename="money.payment_view" reporter:label="Payments">
		<fields oils_persist:primary="id" oils_persist:sequence="">
			<field reporter:label="Amount" name="amount" reporter:datatype="money"/>
			<field reporter:label="Payment ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Payment Date/Time" name="payment_ts" reporter:datatype="timestamp"/>
			<field reporter:label="Payment Type" name="payment_type" reporter:datatype="text"/>
			<field reporter:label="Billable Transaction" name="xact" reporter:datatype="link"/>
			<field reporter:label="Voided?" name="voided" reporter:datatype="bool"/>
			<field reporter:label="Cash Payment Detail" name="cash_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Credit Card Payment Detail" name="credit_card_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Credit Payment Detail" name="credit_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Check Payment Detail" name="check_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Work Payment Detail" name="work_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Forgive Payment Detail" name="forgive_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Goods Payment Detail" name="goods_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Account Adjustment Detail" name="account_adjustment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Debit Card Payment Detail" name="debit_card_payment" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="cash_payment" reltype="might_have" key="id" map="" class="mcp"/>
			<link field="credit_card_payment" reltype="might_have" key="id" map="" class="mccp"/>
			<link field="credit_payment" reltype="might_have" key="id" map="" class="mcrp"/>
			<link field="check_payment" reltype="might_have" key="id" map="" class="mckp"/>
			<link field="work_payment" reltype="might_have" key="id" map="" class="mwp"/>
			<link field="forgive_payment" reltype="might_have" key="id" map="" class="mfp"/>
			<link field="goods_payment" reltype="might_have" key="id" map="" class="mgp"/>
			<link field="account_adjustment" reltype="might_have" key="id" map="" class="maa"/>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
			<link field="debit_card_payment" reltype="might_have" key="id" map="" class="mdcp"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER_TRANSACTIONS">
					<context link="xact" jump="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="map" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::aged_payment" oils_persist:tablename="money.aged_payment" reporter:label="Payments: Aged">
		<fields oils_persist:primary="id" oils_persist:sequence="money.payment_id_seq">
			<field reporter:label="Amount" name="amount" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Payment ID" name="id" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Payment Date/Time" name="payment_ts" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Payment Type" name="payment_type" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Transaction" name="xact" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Voided?" name="voided" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Accepting User" name="accepting_usr" reporter:datatype="link"/>
			<field reporter:label="Cash Drawer" name="cash_drawer" reporter:datatype="link"/>
			<field name="billing" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
			<link field="accepting_usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="cash_drawer" reltype="has_a" key="id" map="" class="aws"/>
			<link field="billing" reltype="has_a" key="id" map="" class="mab"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER_TRANSACTIONS">
					<context link="xact" field="usr_home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="mallp" controller="open-ils.cstore" oils_obj:fieldmapper="money::all_payments" oils_persist:tablename="money.all_payments" oils_persist:readonly="true" reporter:core="true" reporter:label="Payments: All">
		<fields oils_persist:primary="id" oils_persist:sequence="money.payment_id_seq">
			<field reporter:label="Amount" name="amount" reporter:datatype="money"/>
			<field reporter:label="Payment ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Payment Date/Time" name="payment_ts" reporter:datatype="timestamp"/>
			<field reporter:label="Payment Type" name="payment_type" reporter:datatype="text"/>
			<field reporter:label="Billable Transaction" name="xact" reporter:datatype="link"/>
			<field reporter:label="Voided?" name="voided" reporter:datatype="bool"/>
			<field reporter:label="Accepting User" name="accepting_usr" reporter:datatype="link"/>
			<field reporter:label="Cash Drawer" name="cash_drawer" reporter:datatype="link"/>
			<field name="billing" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
			<link field="accepting_usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="cash_drawer" reltype="has_a" key="id" map="" class="aws"/>
			<link field="billing" reltype="has_a" key="id" map="" class="mallb"/>
		</links>
	</class>

	<class id="mbp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::bnm_payment" oils_persist:tablename="money.bnm_payment_view" reporter:core="true" reporter:label="Payments: Brick-and-mortar">
		<fields oils_persist:primary="id" oils_persist:sequence="">
			<field reporter:label="Amount" name="amount" reporter:datatype="money"/>
			<field reporter:label="Payment ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Payment Date/Time" name="payment_ts" reporter:datatype="timestamp"/>
			<field reporter:label="Payment Type" name="payment_type" reporter:datatype="text"/>
			<field reporter:label="Billable Transaction" name="xact" reporter:datatype="link"/>
			<field reporter:label="Accepting User" name="accepting_usr" reporter:datatype="link"/>
			<field reporter:label="Voided?" name="voided" reporter:datatype="bool"/>
			<field reporter:label="Cash Payment Detail" name="cash_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Credit Card Payment Detail" name="credit_card_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Credit Payment Detail" name="credit_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Check Payment Detail" name="check_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Work Payment Detail" name="work_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Forgive Payment Detail" name="forgive_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Goods Payment Detail" name="goods_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Account Adjustment Detail" name="account_adjustment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Debit Card Payment Detail" name="debit_card_payment" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="cash_payment" reltype="might_have" key="id" map="" class="mcp"/>
			<link field="credit_card_payment" reltype="might_have" key="id" map="" class="mccp"/>
			<link field="credit_payment" reltype="might_have" key="id" map="" class="mcrp"/>
			<link field="check_payment" reltype="might_have" key="id" map="" class="mckp"/>
			<link field="work_payment" reltype="might_have" key="id" map="" class="mwp"/>
			<link field="forgive_payment" reltype="might_have" key="id" map="" class="mfp"/>
			<link field="goods_payment" reltype="might_have" key="id" map="" class="mgp"/>
			<link field="account_adjustment" reltype="might_have" key="id" map="" class="maa"/>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
			<link field="accepting_usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="debit_card_payment" reltype="might_have" key="id" map="" class="mdcp"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER_TRANSACTIONS">
					<context link="xact" jump="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="mndp" controller="open-ils.reporter" oils_obj:fieldmapper="money::non_drawer_payment" oils_persist:tablename="money.non_drawer_payment_view" reporter:core="true" reporter:label="Payments: Non-drawer Staff">
		<fields oils_persist:primary="id" oils_persist:sequence="">
			<field reporter:label="Amount" name="amount" reporter:datatype="money"/>
			<field reporter:label="Payment ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Payment Date/Time" name="payment_ts" reporter:datatype="timestamp"/>
			<field reporter:label="Payment Type" name="payment_type" reporter:datatype="text"/>
			<field reporter:label="Billable Transaction" name="xact" reporter:datatype="link"/>
			<field reporter:label="Voided?" name="voided" reporter:datatype="bool"/>
			<field reporter:label="Work Payment Detail" name="work_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Forgive Payment Detail" name="forgive_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Goods Payment Detail" name="goods_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Credit Payment Detail" name="credit_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Account Adjustment Detail" name="account_adjustment" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="work_payment" reltype="might_have" key="id" map="" class="mwp"/>
			<link field="forgive_payment" reltype="might_have" key="id" map="" class="mfp"/>
			<link field="goods_payment" reltype="might_have" key="id" map="" class="mgp"/>
			<link field="credit_payment" reltype="might_have" key="id" map="" class="mcrp"/>
			<link field="account_adjustment" reltype="might_have" key="id" map="" class="maa"/>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
		</links>
	</class>
	<class id="mdp" controller="open-ils.cstore" oils_obj:fieldmapper="money::desk_payment" oils_persist:tablename="money.desk_payment_view" reporter:core="true" reporter:label="Payments: Desk">
		<fields oils_persist:primary="id" oils_persist:sequence="">
			<field reporter:label="Amount" name="amount" reporter:datatype="money"/>
			<field reporter:label="Payment ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Payment Date/Time" name="payment_ts" reporter:datatype="timestamp"/>
			<field reporter:label="Payment Type" name="payment_type" reporter:datatype="text"/>
			<field reporter:label="Billable Transaction" name="xact" reporter:datatype="link"/>
			<field reporter:label="Accepting User" name="accepting_usr" reporter:datatype="link"/>
			<field reporter:label="Cash Drawer" name="cash_drawer" reporter:datatype="link"/>
			<field reporter:label="Voided?" name="voided" reporter:datatype="bool"/>
			<field reporter:label="Cash Payment" name="cash_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Credit Card Payment" name="credit_card_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Check Payment" name="check_payment" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Debit Card Payment" name="debit_card_payment" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="cash_payment" reltype="might_have" key="id" map="" class="mcp"/>
			<link field="credit_card_payment" reltype="might_have" key="id" map="" class="mccp"/>
			<link field="check_payment" reltype="might_have" key="id" map="" class="mckp"/>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
			<link field="accepting_usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="cash_drawer" reltype="has_a" key="id" map="" class="aws"/>
			<link field="debit_card_payment" reltype="might_have" key="id" map="" class="mdcp"/>
		</links>
	</class>
	<class id="cbrebi" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="container::biblio_record_entry_bucket_item" oils_persist:tablename="container.biblio_record_entry_bucket_item" reporter:label="Biblio Record Entry Bucket Item">
		<fields oils_persist:primary="id" oils_persist:sequence="container.biblio_record_entry_bucket_item_id_seq">
			<field reporter:label="Bucket ID" name="bucket" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Bucket Entry ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Bibliographic Record ID" name="target_biblio_record_entry" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Created On" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Relative Position" name="pos" reporter:datatype="int"/>
			<field reporter:label="Notes" name="notes" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="target_biblio_record_entry" reltype="has_a" key="id" map="" class="bre"/>
			<link field="bucket" reltype="has_a" key="id" map="" class="cbreb"/>
			<link field="notes" reltype="has_many" map="" key="item" class="cbrebin"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="STAFF_LOGIN" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="cbrebin" controller="open-ils.cstore" oils_obj:fieldmapper="container::biblio_record_entry_bucket_item_note" oils_persist:tablename="container.biblio_record_entry_bucket_item_note" reporter:label="Biblio Record Entry Bucket Item Note">
		<fields oils_persist:primary="id" oils_persist:sequence="container.biblio_record_entry_bucket_item_note_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="item" reporter:datatype="link" oils_obj:required="true"/>
			<field name="note" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="item" reltype="has_a" key="id" map="" class="cbrebi"/>
		</links>
	</class>
	<class id="asce" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::stat_cat_entry" oils_persist:tablename="asset.stat_cat_entry" reporter:label="Item Stat Cat Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.stat_cat_entry_id_seq">
			<field reporter:label="Entry ID" name="id" reporter:datatype="int"/>
			<field reporter:label="Entry Owner" name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Stat Cat" name="stat_cat" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Value" name="value" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="stat_cat" reltype="has_a" key="id" map="" class="asc"/>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_COPY_STAT_CAT_ENTRY">
					<context link="stat_cat" field="owner"/>
				</create>
				<retrieve permission="STAFF_LOGIN" global_required="true"/>
				<update permission="UPDATE_COPY_STAT_CAT_ENTRY">
					<context link="stat_cat" field="owner"/>
				</update>
				<delete permission="DELETE_COPY_STAT_CAT_ENTRY">
					<context link="stat_cat" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="ascsf" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::stat_cat_sip_fields" oils_persist:tablename="asset.stat_cat_sip_fields" reporter:label="SIP Statistical Category Field Identifier">
		<fields oils_persist:primary="field">
			<field reporter:label="Field Identifier" name="field" reporter:datatype="text" reporter:selector="name" oils_obj:required="true"/>
			<field reporter:label="Field Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Exclusive?" name="one_only" reporter:datatype="bool"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_COPY_STAT_CAT" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_COPY_STAT_CAT" global_required="true"/>
				<delete permission="DELETE_COPY_STAT_CAT" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="ahrcc" controller="open-ils.cstore open-ils.reporter-store open-ils.pcrud" oils_obj:fieldmapper="action::hold_request_cancel_cause" oils_persist:tablename="action.hold_request_cancel_cause" oils_persist:restrict_primary="100" reporter:label="Hold Request Cancel Cause">
		<fields oils_persist:primary="id" oils_persist:sequence="action.hold_request_cancel_cause_id_seq">
			<field reporter:label="Cause ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Cause Label" name="label" reporter:datatype="text" oils_persist:i18n="true"/>
			<field reporter:label="Manual Use?" name="manual" reporter:datatype="bool"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_HOLD_CANCEL_CAUSE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_HOLD_CANCEL_CAUSE" global_required="true"/>
				<delete permission="ADMIN_HOLD_CANCEL_CAUSE" global_required="true"/>
			</actions>
		</permacrud>
	</class>


	<class id="artc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::reservation_transit_copy" oils_persist:tablename="action.reservation_transit_copy" reporter:core="true" reporter:label="Reservation Transit">
		<fields oils_persist:primary="id" oils_persist:sequence="action.transit_copy_id_seq">
			<field reporter:label="Item Status at Transit" name="copy_status" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Destination Library" name="dest" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Receive Date/Time" name="dest_recv_time" reporter:datatype="timestamp"/>
			<field reporter:label="Reservation requiring Transit" name="reservation" reporter:datatype="link"/>
			<field reporter:label="Transit ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Persistent?" name="persistant_transfer" reporter:datatype="bool"/>
			<field reporter:label="Previous Stop" name="prev_hop" reporter:datatype="link"/>
			<field reporter:label="Sending Library" name="source" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Send Date/Time" name="source_send_time" reporter:datatype="timestamp"/>
			<field reporter:label="Transited Item" name="target_copy" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Base Transit" name="transit_copy" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Prev Destination Library" name="prev_dest" reporter:datatype="org_unit"/>
			<field reporter:label="Cancel Date/Time" name="cancel_time" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="transit_copy" reltype="might_have" key="id" map="" class="atc"/>
			<link field="target_copy" reltype="has_a" key="id" map="" class="brsrc"/>
			<link field="source" reltype="has_a" key="id" map="" class="aou"/>
			<link field="copy_status" reltype="has_a" key="id" map="" class="ccs"/>
			<link field="dest" reltype="has_a" key="id" map="" class="aou"/>
			<link field="prev_dest" reltype="has_a" key="id" map="" class="aou"/>
			<link field="reservation" reltype="has_a" key="id" map="" class="bresv"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="TRANSIT_COPY">
					<context link="target_copy" field="owner"/>
				</create>
				<retrieve/>
				<update permission="UPDATE_TRANSIT" context_field="dest source"/>
				<delete permission="DELETE_TRANSIT" context_field="dest source"/>
			</actions>
		</permacrud>
	</class>
	<class id="ahtc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::hold_transit_copy" oils_persist:tablename="action.hold_transit_copy" reporter:core="true" reporter:label="Hold Transit">
		<fields oils_persist:primary="id" oils_persist:sequence="action.transit_copy_id_seq">
			<field reporter:label="Item Status at Transit" name="copy_status" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Destination Library" name="dest" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Receive Date/Time" name="dest_recv_time" reporter:datatype="timestamp"/>
			<field reporter:label="Hold requiring Transit" name="hold" reporter:datatype="link"/>
			<field reporter:label="Transit ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Persistent?" name="persistant_transfer" reporter:datatype="bool"/>
			<field reporter:label="Previous Stop" name="prev_hop" reporter:datatype="link"/>
			<field reporter:label="Sending Library" name="source" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Send Date/Time" name="source_send_time" reporter:datatype="timestamp"/>
			<field reporter:label="Transited Item" name="target_copy" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Base Transit" name="transit_copy" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Prev Destination Library" name="prev_dest" reporter:datatype="org_unit"/>
			<field reporter:label="Cancel Date/Time" name="cancel_time" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="transit_copy" reltype="might_have" key="id" map="" class="atc"/>
			<link field="target_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="source" reltype="has_a" key="id" map="" class="aou"/>
			<link field="copy_status" reltype="has_a" key="id" map="" class="ccs"/>
			<link field="dest" reltype="has_a" key="id" map="" class="aou"/>
			<link field="prev_dest" reltype="has_a" key="id" map="" class="aou"/>
			<link field="hold" reltype="has_a" key="id" map="" class="ahr"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="TRANSIT_COPY" context_field="owner">
					<context link="target_copy" field="circ_lib"/>
				</create>
				<retrieve/>
				<update permission="UPDATE_TRANSIT" context_field="dest source"/>
				<delete permission="DELETE_TRANSIT" context_field="dest source"/>
			</actions>
		</permacrud>
	</class>
	<class id="mb" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::billing" oils_persist:tablename="money.billing" reporter:label="Billing Line Item">
		<fields oils_persist:primary="id" oils_persist:sequence="money.billing_id_seq">
			<field reporter:label="Amount" name="amount" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Create Date" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Billing Period Start" name="period_start" reporter:datatype="timestamp"/>
			<field reporter:label="Billing Period End" name="period_end" reporter:datatype="timestamp"/>
			<field reporter:label="Legacy Billing Timestamp" name="billing_ts" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Legacy Billing Type" name="billing_type" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Billing ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Void Timestamp" name="void_time" reporter:datatype="timestamp"/>
			<field reporter:label="Voided?" name="voided" reporter:datatype="bool"/>
			<field reporter:label="Voiding Staff Member" name="voider" reporter:datatype="link"/>
			<field reporter:label="Transaction" name="xact" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Type" name="btype" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Adjustments" name="adjustments" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
			<link field="voider" reltype="has_a" key="id" map="" class="au"/>
			<link field="btype" reltype="has_a" key="id" map="" class="cbt"/>
			<link field="adjustments" reltype="has_many" key="billing" map="" class="maa"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER_TRANSACTIONS">
					<context link="xact" jump="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="mab" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="money::aged_billing" oils_persist:tablename="money.aged_billing" reporter:label="Aged Billing Line Item">
		<fields oils_persist:primary="id" oils_persist:sequence="money.billing_id_seq">
			<field reporter:label="Amount" name="amount" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Create Date" name="create_date" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Billing Period Start" name="period_start" reporter:datatype="timestamp"/>
			<field reporter:label="Billing Period End" name="period_end" reporter:datatype="timestamp"/>
			<field reporter:label="Legacy Billing Timestamp" name="billing_ts" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Legacy Billing Type" name="billing_type" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Billing ID" name="id" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Void Timestamp" name="void_time" reporter:datatype="timestamp"/>
			<field reporter:label="Voided?" name="voided" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Voiding Staff Member" name="voider" reporter:datatype="link"/>
			<field reporter:label="Transaction" name="xact" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Type" name="btype" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
			<link field="voider" reltype="has_a" key="id" map="" class="au"/>
			<link field="btype" reltype="has_a" key="id" map="" class="cbt"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_USER_TRANSACTIONS">
					<context link="xact" field="usr_home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="mallb" controller="open-ils.cstore" oils_obj:fieldmapper="money::all_billings" oils_persist:tablename="money.all_billings" oils_persist:readonly="true" reporter:label="All Billing Line Items">
		<fields oils_persist:primary="id" oils_persist:sequence="">
			<field reporter:label="Amount" name="amount" reporter:datatype="money"/>
			<field reporter:label="Create Date" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Billing Period Start" name="period_start" reporter:datatype="timestamp"/>
			<field reporter:label="Billing Period End" name="period_end" reporter:datatype="timestamp"/>
			<field reporter:label="Legacy Billing Timestamp" name="billing_ts" reporter:datatype="timestamp"/>
			<field reporter:label="Legacy Billing Type" name="billing_type" reporter:datatype="text"/>
			<field reporter:label="Billing ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Void Timestamp" name="void_time" reporter:datatype="timestamp"/>
			<field reporter:label="Voided?" name="voided" reporter:datatype="bool"/>
			<field reporter:label="Voiding Staff Member" name="voider" reporter:datatype="link"/>
			<field reporter:label="Transaction" name="xact" reporter:datatype="link"/>
			<field reporter:label="Type" name="btype" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="voider" reltype="has_a" key="id" map="" class="au"/>
			<link field="btype" reltype="has_a" key="id" map="" class="cbt"/>
			<link field="xact" reltype="has_a" key="id" map="" class="mbt"/>
		</links>
	</class>
	<class id="pugm" controller="open-ils.cstore" oils_obj:fieldmapper="permission::usr_grp_map" oils_persist:tablename="permission.usr_grp_map" reporter:label="User Group Map">
		<fields oils_persist:primary="id" oils_persist:sequence="permission.usr_grp_map_id_seq">
			<field name="grp" oils_obj:required="true"/>
			<field name="id" reporter:datatype="id"/>
			<field name="usr" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="grp" reltype="has_a" key="id" map="" class="pgt"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
	</class>
	<class id="i18n" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::i18n_core" oils_persist:tablename="config.i18n_core" oils_persist:field_safe="true" reporter:label="i18n Core">
		<fields oils_persist:primary="id" oils_persist:sequence="config.i18n_core_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="fq_field" reporter:datatype="text" oils_obj:required="true"/>
			<field name="identity_value" reporter:datatype="text" oils_obj:required="true"/>
			<field name="translation" reporter:datatype="text" oils_obj:required="true"/>
			<field name="string" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="translation" reltype="has_a" key="code" map="" class="i18n_l"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_TRANSLATION" global_required="true"/>
				<retrieve permission="CREATE_TRANSLATION UPDATE_TRANSLATION DELETE_TRANSLATION" global_required="true"/>
				<update permission="UPDATE_TRANSLATION" global_required="true"/>
				<delete permission="DELETE_TRANSLATION" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="i18ns" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::i18n_string" oils_persist:tablename="config.i18n_string" oils_persist:field_safe="true" reporter:label="i18n String">
		<fields oils_persist:primary="id" oils_persist:sequence="config.i18n_string_id_seq">
			<field name="id" reporter:datatype="id" />
			<field name="context" reporter:datatype="text"/>
			<field name="string" reporter:datatype="text" oils_persist:i18n="true"/>
		</fields>
        <permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
            <actions>
                <retrieve />
                <update permission="UPDATE_TRANSLATION" global_required="true"/>
            </actions>
        </permacrud>
	</class>
	<class id="fdoc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::idl_field_doc" oils_persist:tablename="config.idl_field_doc" oils_persist:field_safe="true" reporter:label="IDL Field Doc">
		<fields oils_persist:primary="id" oils_persist:sequence="config.idl_field_doc_id_seq">
			<field name="id" reporter:label="ID" reporter:datatype="id"/>
			<field name="fm_class" reporter:label="Class" reporter:datatype="text" oils_obj:required="true"/>
			<field name="field" reporter:label="Field" reporter:datatype="text" oils_obj:required="true"/>
			<field name="owner" reporter:label="Field Documentation Owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field name="string" reporter:label="Field Documentation" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_FIELD_DOC" context_field="owner"/>
				<retrieve/>
				<update permission="ADMIN_FIELD_DOC" context_field="owner"/>
				<delete permission="ADMIN_FIELD_DOC" context_field="owner"/>
			</actions>
		</permacrud>
	</class>
	<class id="i18n_l" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::i18n_locale" oils_persist:tablename="config.i18n_locale" oils_persist:field_safe="true" reporter:label="Locale" oils_persist:cardinality="low">
		<fields oils_persist:primary="code">
			<field name="code" reporter:datatype="id" oils_obj:required="true"/>
			<field name="marc_code" reporter:datatype="text" oils_obj:required="true"/>
			<field name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field name="rtl" reporter:datatype="bool"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_LOCALE" global_required="true"/>
				<retrieve/>
				<update permission="UPDATE_LOCALE" global_required="true"/>
				<delete permission="DELETE_LOCALE" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="cbt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::billing_type" oils_persist:tablename="config.billing_type" oils_persist:restrict_primary="100" reporter:label="Billing Type" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.billing_type_id_seq">
			<field name="id" reporter:datatype="id" reporter:label="ID" reporter:selector="name" oils_obj:required="true"/>
			<field name="name" reporter:datatype="text" reporter:label="Name" oils_persist:i18n="true" oils_obj:required="true"/>
			<field name="owner" reporter:datatype="org_unit" reporter:label="Org Unit" oils_obj:required="true"/>
			<field name="default_price" reporter:datatype="money" reporter:label="Default Price"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_BILLING_TYPE" context_field="owner"/>
				<retrieve permission="VIEW_BILLING_TYPE CREATE_BILLING_TYPE UPDATE_BILLING_TYPE DELETE_BILLING_TYPE" context_field="owner"/>
				<update permission="UPDATE_BILLING_TYPE" context_field="owner"/>
				<delete permission="DELETE_BILLING_TYPE" context_field="owner"/>
			</actions>
		</permacrud>
	</class>

	<class id="aurt" controller="open-ils.cstore open-ils.reporter-store open-ils.pcrud" oils_obj:fieldmapper="acq::user_request_type" oils_persist:tablename="acq.user_request_type" reporter:label="User Purchase Request Type">
		<fields oils_persist:primary="id">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="label"/>
			<field reporter:label="Type Label" name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_USER_REQUEST_TYPE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_USER_REQUEST_TYPE" global_required="true"/>
				<delete permission="ADMIN_USER_REQUEST_TYPE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="aur" controller="open-ils.cstore open-ils.reporter-store open-ils.pcrud" oils_obj:fieldmapper="acq::user_request" oils_persist:tablename="acq.user_request" reporter:label="User Purchase Request">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.user_request_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="label"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Request Type" name="request_type" oils_obj:required="true" reporter:datatype="link"/>
			<field reporter:label="Place Hold" name="hold" reporter:datatype="bool"/>
			<field reporter:label="Pickup Library" name="pickup_lib" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Holdable Formats" name="holdable_formats" reporter:datatype="text"/>
			<field reporter:label="Phone Notify" name="phone_notify" reporter:datatype="text"/>
			<field reporter:label="Email Notify" name="email_notify" reporter:datatype="bool"/>
			<field reporter:label="PO Line Item" name="lineitem" reporter:datatype="link"/>
			<field reporter:label="Bib Record" name="eg_bib" reporter:datatype="link"/>
			<field reporter:label="Request Date/Time" name="request_date" reporter:datatype="timestamp"/>
			<field reporter:label="Need Before Date/Time" name="need_before" reporter:datatype="timestamp"/>
			<field reporter:label="Max Acceptable Fee" name="max_fee" reporter:datatype="text"/>
			<field reporter:label="ISxN" name="isxn" reporter:datatype="text"/>
			<field reporter:label="UPC" name="upc" reporter:datatype="text"/>
			<field reporter:label="Title" name="title" reporter:datatype="text"/>
			<field reporter:label="Volume" name="volume" reporter:datatype="text"/>
			<field reporter:label="Author" name="author" reporter:datatype="text"/>
			<field reporter:label="Article Title" name="article_title" reporter:datatype="text"/>
			<field reporter:label="Article Pages" name="article_pages" reporter:datatype="text"/>
			<field reporter:label="Publisher" name="publisher" reporter:datatype="text"/>
			<field reporter:label="Publication Location" name="location" reporter:datatype="text"/>
			<field reporter:label="Publication Date" name="pubdate" reporter:datatype="text"/>
			<field reporter:label="Mentioned In" name="mentioned" reporter:datatype="text"/>
			<field reporter:label="Other Info" name="other_info" reporter:datatype="text"/>
			<field reporter:label="Cancel Reason" name="cancel_reason" reporter:datatype="link"/>
			<field reporter:label="Cancel Date/Time" name="cancel_time" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="pickup_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="lineitem" reltype="has_a" key="id" map="" class="jub"/>
			<link field="eg_bib" reltype="has_a" key="id" map="" class="bre"/>
			<link field="request_type" reltype="has_a" key="id" map="" class="aurt"/>
			<link field="cancel_reason" reltype="has_a" key="id" map="" class="acqcr"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="user_request.create">
					<context link="usr" field="home_ou"/>
				</create>
				<retrieve permission="user_request.view">
					<context link="usr" field="home_ou"/>
				</retrieve>
				<update permission="user_request.update">
					<context link="usr" field="home_ou"/>
				</update>
				<delete permission="user_request.delete">
					<context link="usr" field="home_ou"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="aurs" controller="open-ils.cstore open-ils.reporter-store open-ils.pcrud" oils_obj:fieldmapper="acq::user_request_status" reporter:label="User Purchase Request with Status" oils_persist:readonly="true">
		<oils_persist:source_definition><![CDATA[
			SELECT r.*, CASE
						WHEN r.cancel_reason IS NOT NULL THEN 7 -- Canceled
						WHEN h.fulfillment_time IS NOT NULL THEN 6 -- Fulfilled
						WHEN l.state = 'received' THEN 5 -- Received
						WHEN p.state = 'on-order' AND h.id IS NOT NULL THEN 4 -- Ordered, Hold Placed
						WHEN p.state = 'on-order' AND h.id IS NULL THEN 3 -- Ordered, Hold Not Placed
						WHEN l.id IS NOT NULL THEN 2 -- Pending
						WHEN l.id IS NULL THEN 1 -- New
						ELSE 0 -- Error
					END AS request_status
					,u.home_ou
			FROM	  acq.user_request r
			JOIN actor.usr u ON (r.usr = u.id)
			LEFT JOIN acq.lineitem l ON (r.lineitem = l.id)
			LEFT JOIN acq.purchase_order p ON (l.purchase_order = p.id)
			LEFT JOIN action.hold_request h ON (h.acq_request = r.id)
		]]></oils_persist:source_definition>
		<fields oils_persist:primary="id">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="label"/>
			<field reporter:label="User" name="usr" reporter:datatype="link"/>
			<field reporter:label="Request Type" name="request_type" oils_obj:required="true" reporter:datatype="link"/>
			<field reporter:label="Place Hold" name="hold" reporter:datatype="bool"/>
			<field reporter:label="Pickup Library" name="pickup_lib" reporter:datatype="link"/>
			<field reporter:label="Holdable Formats" name="holdable_formats" reporter:datatype="text"/>
			<field reporter:label="Phone Notify" name="phone_notify" reporter:datatype="text"/>
			<field reporter:label="Email Notify" name="email_notify" reporter:datatype="bool"/>
			<field reporter:label="PO Line Item" name="lineitem" reporter:datatype="link"/>
			<field reporter:label="Bib Record" name="eg_bib" reporter:datatype="link"/>
			<field reporter:label="Request Date/Time" name="request_date" reporter:datatype="timestamp"/>
			<field reporter:label="Need Before Date/Time" name="need_before" reporter:datatype="timestamp"/>
			<field reporter:label="Max Acceptable Fee" name="max_fee" reporter:datatype="text"/>
			<field reporter:label="ISxN" name="isxn" reporter:datatype="text"/>
			<field reporter:label="UPC" name="upc" reporter:datatype="text"/>
			<field reporter:label="Title" name="title" reporter:datatype="text"/>
			<field reporter:label="Volume" name="volume" reporter:datatype="text"/>
			<field reporter:label="Author" name="author" reporter:datatype="text"/>
			<field reporter:label="Article Title" name="article_title" reporter:datatype="text"/>
			<field reporter:label="Article Pages" name="article_pages" reporter:datatype="text"/>
			<field reporter:label="Publisher" name="publisher" reporter:datatype="text"/>
			<field reporter:label="Publication Location" name="location" reporter:datatype="text"/>
			<field reporter:label="Publication Date" name="pubdate" reporter:datatype="text"/>
			<field reporter:label="Mentioned In" name="mentioned" reporter:datatype="text"/>
			<field reporter:label="Other Info" name="other_info" reporter:datatype="text"/>
			<field reporter:label="Cancel Reason" name="cancel_reason" reporter:datatype="link"/>
			<field reporter:label="Cancel Date/Time" name="cancel_time" reporter:datatype="timestamp"/>
			<field reporter:label="Request Status" name="request_status" reporter:datatype="link"/>
			<field reporter:label="Home Library" name="home_ou" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="pickup_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="lineitem" reltype="has_a" key="id" map="" class="jub"/>
			<link field="eg_bib" reltype="has_a" key="id" map="" class="bre"/>
			<link field="request_type" reltype="has_a" key="id" map="" class="aurt"/>
			<link field="cancel_reason" reltype="has_a" key="id" map="" class="acqcr"/>
			<link field="request_status" reltype="has_a" key="id" map="" class="aurst"/>
			<link field="home_ou" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="user_request.view">
					<context link="usr" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>

	<class id="aurst" controller="open-ils.cstore open-ils.reporter-store open-ils.pcrud" oils_obj:fieldmapper="acq::user_request_status_type" oils_persist:tablename="acq.user_request_status_type" reporter:label="Acquisition Patron Request Status Type">
		<fields oils_persist:primary="id">
			<field reporter:label="Status ID" name="id" reporter:datatype="id" reporter:selector="label"/>
			<field reporter:label="Status" name="label" reporter:datatype="text" oils_persist:i18n="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="acqct" controller="open-ils.cstore open-ils.reporter-store open-ils.pcrud" oils_obj:fieldmapper="acq::currency_type" oils_persist:tablename="acq.currency_type" reporter:label="Currency Type" oils_persist:cardinality="low">
		<fields oils_persist:primary="code">
			<field reporter:label="Currency Code" name="code" reporter:datatype="text" reporter:selector="label" oils_obj:required="true"/>
			<field reporter:label="Currency Label" name="label" reporter:datatype="text" oils_persist:i18n="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CURRENCY_TYPE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_CURRENCY_TYPE" global_required="true"/>
				<delete permission="ADMIN_CURRENCY_TYPE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqexr" controller="open-ils.cstore open-ils.pcrud open-ils.reporter-store" oils_obj:fieldmapper="acq::exchange_rate" oils_persist:tablename="acq.exchange_rate" reporter:label="Exchange Rate">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.exchange_rate_id_seq">
			<field reporter:label="Exchange Rate ID" name="id" reporter:datatype="id"/>
			<field reporter:label="From Currency" name="from_currency" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="To Currency" name="to_currency" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Ratio" name="ratio" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="from_currency" reltype="has_a" key="code" map="" class="acqct"/>
			<link field="to_currency" reltype="has_a" key="code" map="" class="acqct"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CURRENCY_TYPE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_CURRENCY_TYPE" global_required="true"/>
				<delete permission="ADMIN_CURRENCY_TYPE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqpro" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::provider" oils_persist:tablename="acq.provider" reporter:label="Provider">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.provider_id_seq">
			<field reporter:label="Provider ID" name="id" reporter:datatype="id" reporter:selector="code"/>
			<field reporter:label="Provider Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Currency" name="currency_type" oils_persist:primitive="string" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Code" name="code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Holdings Tag" name="holding_tag" reporter:datatype="text"/>
			<field reporter:label="Addresses" name="addresses" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="SAN" name="san" reporter:datatype="text"/>
			<field reporter:label="EDI Default" name="edi_default" reporter:datatype="link"/>
			<field reporter:label="Active" name="active" reporter:datatype="bool"/>
			<field reporter:label="Prepayment Required" name="prepayment_required" reporter:datatype="bool"/>
			<field reporter:label="URL" name="url" reporter:datatype="text"/>
			<field reporter:label="Email" name="email" reporter:datatype="text"/>
			<field reporter:label="Phone" name="phone" reporter:datatype="text"/>
			<field reporter:label="Fax Phone" name="fax_phone" reporter:datatype="text"/>
			<field reporter:label="Default Claim Policy" name="default_claim_policy" reporter:datatype="link"/>
			<field reporter:label="Default # Items" name="default_copy_count" reporter:datatype="int"/>
			<field reporter:label="Primary Contact" name="primary_contact" reporter:datatype="link"/>
			<field reporter:label="Contacts" name="contacts" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Notes" name="provider_notes" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Holdings Subfields" name="holdings_subfields" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Attribute Definitions" name="attributes" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="EDI Accounts" name="edi_accounts" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Buyer SAN" name="buyer_san" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="currency_type" reltype="has_a" key="code" map="" class="acqct"/>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="addresses" reltype="has_many" map="" key="provider" class="acqpa"/>
			<link field="contacts" reltype="has_many" map="" key="provider" class="acqpc"/>
			<link field="edi_default" reltype="has_a" map="" key="id" class="acqedi"/>
			<link field="primary_contact" reltype="has_a" map="" key="id" class="acqpc"/>
			<link field="default_claim_policy" reltype="has_a" map="" key="id" class="acqclp"/>
			<link field="provider_notes" reltype="has_many" map="" key="provider" class="acqpron"/>
			<link field="holdings_subfields" reltype="has_many" map="" key="provider" class="acqphsm"/>
			<link field="attributes" reltype="has_many" map="" key="provider" class="acqlipad"/>
			<link field="edi_accounts" reltype="has_many" map="" key="provider" class="acqedi"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_PROVIDER" context_field="owner"/>
				<retrieve permission="ADMIN_PROVIDER MANAGE_PROVIDER VIEW_PROVIDER" context_field="owner"/>
				<update permission="ADMIN_PROVIDER" context_field="owner"/>
				<delete permission="ADMIN_PROVIDER" context_field="owner"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqpron" controller="open-ils.cstore open-ils.reporter-store" oils_obj:fieldmapper="acq::provider_note" oils_persist:tablename="acq.provider_note" reporter:label="Provider Note">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.provider_note_id_seq">
			<field reporter:label="PO Note ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Provider" name="provider" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Creation Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Edit Time" name="edit_time" reporter:datatype="timestamp"/>
			<field reporter:label="Editor" name="editor" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Note Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="provider" reltype="has_a" key="id" map="" class="acqpro"/>
		</links>
	</class>

	<class id="acqipm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::invoice_payment_method" oils_persist:tablename="acq.invoice_payment_method" reporter:label="Invoice Payment Method">
		<fields oils_persist:primary="code">
			<field reporter:label="Code" name="code" reporter:datatype="id" reporter:selector="name" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_INVOICE_PAYMENT_METHOD" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_INVOICE_PAYMENT_METHOD" global_required="true"/>
				<delete permission="ADMIN_INVOICE_PAYMENT_METHOD" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqinv" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::invoice" oils_persist:tablename="acq.invoice" reporter:label="Invoice">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.invoice_id_seq">
			<field reporter:label="Internal Invoice ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Receiver" name="receiver" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Provider" name="provider" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Shipper" name="shipper" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Invoice Date" name="recv_date" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Receive Method" name="recv_method" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Invoice Type" name="inv_type" reporter:datatype="text"/>
			<field reporter:label="Vendor Invoice ID" name="inv_ident" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Payment Auth" name="payment_auth" reporter:datatype="text"/>
			<field reporter:label="Payment Method" name="payment_method" reporter:datatype="link"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Close Date" name="close_date" reporter:datatype="timestamp"/>
			<field reporter:label="Closed By" name="closed_by" reporter:datatype="link"/>
			<field reporter:label="Invoice Entries" name="entries" reporter:datatype="link" oils_persist:virtual="true"/>
			<field reporter:label="Invoice Items" name="items" reporter:datatype="link" oils_persist:virtual="true"/>
		</fields>
		<links>
			<link field="receiver" reltype="has_a" key="id" map="" class="aou"/>
			<link field="provider" reltype="has_a" key="id" map="" class="acqpro"/>
			<link field="shipper" reltype="has_a" key="id" map="" class="acqpro"/>
			<link field="recv_method" reltype="has_a" key="code" map="" class="acqim"/>
			<link field="payment_method" reltype="has_a" key="code" map="" class="acqipm"/>
			<link field="entries" reltype="has_many" key="invoice" map="" class="acqie"/>
			<link field="items" reltype="has_many" key="invoice" map="" class="acqii"/>
			<link field="closed_by" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_INVOICE" context_field="receiver"/>
				<retrieve permission="CREATE_INVOICE VIEW_INVOICE" context_field="receiver"/>
				<update permission="CREATE_INVOICE" context_field="receiver"/>
				<delete permission="CREATE_INVOICE" context_field="receiver"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqie" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::invoice_entry" oils_persist:tablename="acq.invoice_entry" reporter:label="Invoice Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.invoice_entry_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Invoice" name="invoice" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Purchase Order" name="purchase_order" reporter:datatype="link"/>
			<field reporter:label="PO Line Item" name="lineitem" reporter:datatype="link"/>
			<field reporter:label="Invoice Item Count" name="inv_item_count" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Physical Item Count" name="phys_item_count" reporter:datatype="int"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Billed Cost per Item" name="billed_per_item" reporter:datatype="bool"/>
			<field reporter:label="Cost Billed" name="cost_billed" reporter:datatype="money"/>
			<field reporter:label="Actual Cost" name="actual_cost" reporter:datatype="money"/>
			<field reporter:label="Amount Paid" name="amount_paid" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="invoice" reltype="has_a" key="id" map="" class="acqinv"/>
			<link field="purchase_order" reltype="has_a" key="id" map="" class="acqpo"/>
			<link field="lineitem" reltype="has_a" key="id" map="" class="jub"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_INVOICE">
					<context link="invoice" field="receiver"/>
				</create>
				<retrieve permission="ADMIN_INVOICE">
					<context link="invoice" field="receiver"/>
				</retrieve>
				<update permission="ADMIN_INVOICE">
   					<context link="invoice" field="receiver"/>
				</update>
				<delete permission="ADMIN_INVOICE">
					<context link="invoice" field="receiver"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="acqii" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::invoice_item" oils_persist:tablename="acq.invoice_item" reporter:label="Non-bibliographic Invoice Item">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.invoice_item_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Invoice" name="invoice" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Purchase Order" name="purchase_order" reporter:datatype="link"/>
			<field reporter:label="Fund Debit" name="fund_debit" reporter:datatype="link"/>
			<field reporter:label="Invoice Item Type" name="inv_item_type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Title or Item Name" name="title" reporter:datatype="text"/>
			<field reporter:label="Author" name="author" reporter:datatype="text"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Cost Billed" name="cost_billed" reporter:datatype="money"/>
			<field reporter:label="Actual Cost" name="actual_cost" reporter:datatype="money"/>
			<field reporter:label="Fund" name="fund" reporter:datatype="link"/>
			<field reporter:label="Amount Paid" name="amount_paid" reporter:datatype="money"/>
			<field reporter:label="Purchase Order Item" name="po_item" reporter:datatype="link"/>
			<field reporter:label="Target" name="target" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="invoice" reltype="has_a" key="id" map="" class="acqinv"/>
			<link field="purchase_order" reltype="has_a" key="id" map="" class="acqpo"/>
			<link field="fund_debit" reltype="has_a" key="id" map="" class="acqfdeb"/>
			<link field="inv_item_type" reltype="has_a" key="code" map="" class="aiit"/>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
			<link field="po_item" reltype="has_a" key="id" map="" class="acqpoi"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_INVOICE">
					<context link="invoice" field="receiver"/>
				</create>
				<retrieve permission="ADMIN_INVOICE">
					<context link="invoice" field="receiver"/>
				</retrieve>
				<update permission="ADMIN_INVOICE">
   					<context link="invoice" field="receiver"/>
				</update>
				<delete permission="ADMIN_INVOICE">
					<context link="invoice" field="receiver"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="acqsn" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::shipment_notification" oils_persist:tablename="acq.shipment_notification" reporter:label="Shipment Notification">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.shipment_notification_id_seq">
			<field reporter:label="Shipment Notification ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Receiver" name="receiver" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Provider" name="provider" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Shipper" name="shipper" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Receive Date" name="recv_date" reporter:datatype="timestamp"/>
			<field reporter:label="Receive Method" name="recv_method" reporter:datatype="link"/>
			<field reporter:label="Process Date" name="process_date" reporter:datatype="timestamp"/>
			<field reporter:label="Processed By" name="processed_by" reporter:datatype="link"/>
			<field reporter:label="Container Barcode" name="container_code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Lading Number" name="lading_number" reporter:datatype="text"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Shipment Notification Entries" name="entries" reporter:datatype="link" oils_persist:virtual="true"/>
		</fields>
		<links>
			<link field="processed_by" reltype="has_a" key="id" map="" class="au"/>
			<link field="receiver" reltype="has_a" key="id" map="" class="aou"/>
			<link field="provider" reltype="has_a" key="id" map="" class="acqpro"/>
			<link field="shipper" reltype="has_a" key="id" map="" class="acqpro"/>
			<link field="recv_method" reltype="has_a" key="code" map="" class="acqim"/>
			<link field="entries" reltype="has_many" key="shipment_notification" map="" class="acqsne"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="MANAGE_SHIPMENT_NOTIFICATION VIEW_SHIPMENT_NOTIFICATION" context_field="receiver"/>
				<update permission="MANAGE_SHIPMENT_NOTIFICATION" context_field="receiver"/>
				<delete permission="MANAGE_SHIPMENT_NOTIFICATION" context_field="receiver"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqsne" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::shipment_notification_entry" oils_persist:tablename="acq.shipment_notification_entry" reporter:label="Shipment Notification Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.shipment_notification_entry_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Shipment Notification" name="shipment_notification" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Line Item" name="lineitem" reporter:datatype="link"/>
			<field reporter:label="Item Count" name="item_count" reporter:datatype="int" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="shipment_notification" reltype="has_a" key="id" map="" class="acqsn"/>
			<link field="lineitem" reltype="has_a" key="id" map="" class="jub"/>
		</links>
			<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
				<actions>
					<retrieve permission="MANAGE_SHIPMENT_NOTIFICATION VIEW_SHIPMENT_NOTIFICATION">
						<context link="shipment_notification" field="receiver"/>
					</retrieve>
					<update permission="MANAGE_SHIPMENT_NOTIFICATION">
						<context link="shipment_notification" field="receiver"/>
					</update>
					<delete permission="MANAGE_SHIPMENT_NOTIFICATION">
						<context link="shipment_notification" field="receiver"/>
					</delete>
				</actions>
			</permacrud>
	</class>

	<class id="acqpa" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::provider_address" oils_persist:tablename="acq.provider_address" reporter:label="Provider Address">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.provider_address_id_seq">
			<field reporter:label="Address Type" name="address_type" reporter:datatype="text"/>
			<field reporter:label="City" name="city" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Country" name="country" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="County" name="county" reporter:datatype="text"/>
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Provider" name="provider" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Post Code" name="post_code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="State" name="state" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Street 1" name="street1" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Street 2" name="street2" reporter:datatype="text"/>
			<field reporter:label="Is Valid?" name="valid" reporter:datatype="bool"/>
			<field reporter:label="Fax Phone" name="fax_phone" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="provider" reltype="has_a" key="id" map="" class="acqpro"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_PROVIDER">
					<context link="provider" field="owner"/>
				</create>
				<retrieve permission="ADMIN_PROVIDER">
					<context link="provider" field="owner"/>
				</retrieve>
				<update permission="ADMIN_PROVIDER">
					<context link="provider" field="owner"/>
				</update>
				<delete permission="ADMIN_PROVIDER">
					<context link="provider" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="acqpc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::provider_contact" oils_persist:tablename="acq.provider_contact" reporter:label="Provider Contact">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.provider_contact_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Provider" name="provider" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Role" name="role" reporter:datatype="text"/>
			<field reporter:label="Email" name="email" reporter:datatype="text"/>
			<field reporter:label="Phone" name="phone" reporter:datatype="text"/>
			<field reporter:label="Addresses" name="addresses" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="addresses" reltype="has_many" key="contact" map="" class="acqpca"/>
			<link field="provider" reltype="has_a" key="id" map="" class="acqpro"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_PROVIDER">
					<context link="provider" field="owner"/>
				</create>
				<retrieve permission="ADMIN_PROVIDER">
					<context link="provider" field="owner"/>
				</retrieve>
				<update permission="ADMIN_PROVIDER">
					<context link="provider" field="owner"/>
				</update>
				<delete permission="ADMIN_PROVIDER">
					<context link="provider" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="acqpca" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::provider_contact_address" oils_persist:tablename="acq.provider_contact_address" reporter:label="Provider Contact Address">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.provider_contact_address_id_seq">
			<field reporter:label="Type" name="address_type" reporter:datatype="text"/>
			<field reporter:label="City" name="city" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Country" name="country" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="County" name="county" reporter:datatype="text"/>
			<field reporter:label="Address ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Postal Code" name="post_code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="State" name="state" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Street (1)" name="street1" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Street (2)" name="street2" reporter:datatype="text"/>
			<field reporter:label="Contact" name="contact" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Valid Address?" name="valid" reporter:datatype="bool"/>
			<field reporter:label="Fax Phone" name="fax_phone" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="contact" reltype="has_a" key="id" map="" class="acqpc"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_PROVIDER">
					<context link="contact" jump="provider" field="owner"/>
				</create>
				<retrieve permission="ADMIN_PROVIDER">
					<context link="contact" jump="provider" field="owner"/>
				</retrieve>
				<update permission="ADMIN_PROVIDER">
					<context link="contact" jump="provider" field="owner"/>
				</update>
				<delete permission="ADMIN_PROVIDER">
					<context link="contact" jump="provider" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="acqftr" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::fund_transfer" oils_persist:tablename="acq.fund_transfer" reporter:label="Fund Transfer">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.fund_transfer_id_seq">
			<field reporter:label="Fund Transfer ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Source Fund" name="src_fund" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Source Amount" name="src_amount" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Destination Fund" name="dest_fund" reporter:datatype="link"/>
			<field reporter:label="Destination Amount" name="dest_amount" reporter:datatype="money"/>
			<field reporter:label="Transfer Time" name="transfer_time" reporter:datatype="timestamp"/>
			<field reporter:label="Transfer User" name="transfer_user" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Funding Source Credit ID" name="funding_source_credit" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="src_fund" reltype="has_a" key="id" map="" class="acqf"/>
			<link field="dest_fund" reltype="has_a" key="id" map="" class="acqf"/>
			<link field="transfer_user" reltype="has_a" key="id" map="" class="au"/>
			<link field="funding_source_credit" reltype="has_a" key="id" map="" class="acqfscred"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ACQ_FUND">
					<context link="src_fund" field="org"/>
				</create>
				<retrieve permission="ADMIN_ACQ_FUND VIEW_FUND MANAGE_FUND">
					<context link="src_fund" field="org"/>
					<context link="dest_fund" field="org"/>
				</retrieve>
				<update permission="ADMIN_ACQ_FUND">
					<context link="src_fund" field="org"/>
				</update>
				<delete permission="ADMIN_ACQ_FUND">
					<context link="src_fund" field="org"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="acqfc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::fiscal_calendar" oils_persist:tablename="acq.fiscal_calendar" reporter:label="Fiscal Calendar" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.fiscal_calendar_id_seq">
			<field reporter:label="Fiscal Calendar ID" name="id" reporter:datatype="id" reporter:selector="name" oils_obj:required="true"/>
			<field reporter:label="Fiscal Calendar Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Years" name="years" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="years" reltype="has_many" map="" key="calendar" class="acqfy"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ACQ_FISCAL_YEAR" global_required="true"/>
				<retrieve permission="STAFF_LOGIN" global_required="true"/>
				<update permission="ADMIN_ACQ_FISCAL_YEAR" global_required="true"/>
				<delete permission="ADMIN_ACQ_FISCAL_YEAR" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqfy" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::fiscal_year" oils_persist:tablename="acq.fiscal_year" reporter:label="Fiscal Year" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.fiscal_year_id_seq">
			<field reporter:label="Fiscal Year ID" name="id" reporter:datatype="id" reporter:selector="year" oils_obj:required="true"/>
			<field reporter:label="Calendar" name="calendar" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Fiscal Year" name="year" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Year Begin" name="year_begin" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Year End" name="year_end" reporter:datatype="timestamp" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="calendar" reltype="has_a" key="id" map="" class="acqfc"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ACQ_FISCAL_YEAR" global_required="true"/>
				<retrieve permission="STAFF_LOGIN" global_required="true"/>
				<update permission="ADMIN_ACQ_FISCAL_YEAR" global_required="true"/>
				<delete permission="ADMIN_ACQ_FISCAL_YEAR" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqfs" controller="open-ils.cstore open-ils.reporter-store open-ils.pcrud" oils_obj:fieldmapper="acq::funding_source" oils_persist:tablename="acq.funding_source" reporter:label="Funding Source">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.funding_source_id_seq" oils_persist:cardinality="low">
			<field reporter:label="Funding Source ID" name="id" reporter:datatype="id" reporter:selector="code"/>
			<field reporter:label="Funding Source Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Currency" name="currency_type" oils_persist:primitive="string" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Code" name="code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Active" name="active" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Summary" name="summary" oils_persist:virtual="true"/>
			<field reporter:label="Allocations" name="allocations" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Credits" name="credits" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Fund Allocation Percentages" name="fund_alloc_pcts" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="currency_type" reltype="has_a" key="code" map="" class="acqct"/>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="allocations" reltype="has_many" map="" key="funding_source" class="acqfa"/>
			<link field="credits" reltype="has_many" key="funding_source" map="" class="acqfscred"/>
			<link field="fund_alloc_pcts" reltype="has_many" key="funding_source" map="" class="acqfap"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_FUNDING_SOURCE" context_field="owner"/>
				<retrieve permission="ADMIN_FUNDING_SOURCE MANAGE_FUNDING_SOURCE VIEW_FUNDING_SOURCE" context_field="owner"/>
				<update permission="ADMIN_FUNDING_SOURCE" context_field="owner"/>
				<delete permission="ADMIN_FUNDING_SOURCE" context_field="owner"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqfscred" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::funding_source_credit" oils_persist:tablename="acq.funding_source_credit" reporter:label="Credit to Funding Source">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.funding_source_credit_id_seq">
			<field reporter:label="Credit ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Funding Source ID" name="funding_source" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Amount" name="amount" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Deadline Date" name="deadline_date" reporter:datatype="timestamp"/>
			<field reporter:label="Effective Date" name="effective_date" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="funding_source" reltype="has_a" key="id" map="" class="acqfs"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_FUNDING_SOURCE">
					<context link="funding_source" field="owner"/>
				</create>
				<retrieve permission="ADMIN_FUNDING_SOURCE">
					<context link="funding_source" field="owner"/>
				</retrieve>
				<update permission="ADMIN_FUNDING_SOURCE">
					<context link="funding_source" field="owner"/>
				</update>
				<delete permission="ADMIN_FUNDING_SOURCE">
					<context link="funding_source" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="acqofscred" controller="open-ils.cstore" oils_obj:fieldmapper="acq::ordered_funding_source_credit" oils_persist:tablename="acq.ordered_funding_source_credit" reporter:label="Ordered Funding Source Credit">
		<fields oils_persist:primary="id">
			<field reporter:label="Ordered Fund Src ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Sort Priority" name="sort_priority" reporter:datatype="int"/>
			<field reporter:label="Sort Date" name="sort_date" reporter:datatype="timestamp"/>
			<field reporter:label="Funding Source ID" name="funding_source" reporter:datatype="link"/>
			<field reporter:label="Amount" name="amount" reporter:datatype="money"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="funding_source" reltype="has_a" key="id" map="" class="acqfs"/>
		</links>
	</class>

	<class id="acqfdeb" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::fund_debit" oils_persist:tablename="acq.fund_debit" reporter:label="Debit From Fund">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.fund_debit_id_seq">
			<field reporter:label="Debit ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Fund" name="fund" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Origin Amount" name="origin_amount" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Origin Currency" name="origin_currency_type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Amount" name="amount" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Encumbrance" name="encumbrance" reporter:datatype="bool"/>
			<field reporter:label="Debit Type" name="debit_type" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Debit Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Invoice Entry" name="invoice_entry" reporter:datatype="link"/>
			<field reporter:label="Invoice Items" name="invoice_items" reporter:datatype="link" oils_persist:virtual="true"/>
			<field reporter:label="PO Items" name="po_items" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Line Item Details" name="lineitem_details" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
			<link field="origin_currency_type" reltype="has_a" key="code" map="" class="acqct"/>
			<link field="invoice_entry" reltype="has_a" key="id" map="" class="acqie"/>
			<link field="invoice_items" reltype="has_many" key="fund_debit" map="" class="acqii"/>
			<link field="po_items" reltype="has_many" key="fund_debit" map="" class="acqpoi"/>
			<link field="lineitem_details" reltype="has_many" key="fund_debit" map="" class="acqlid"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ACQ_FUND">
					<context link="fund" field="org"/>
				</create>
				<retrieve permission="ADMIN_ACQ_FUND">
					<context link="fund" field="org"/>
				</retrieve>
				<update permission="ADMIN_ACQ_FUND">
					<context link="fund" field="org"/>
				</update>
				<delete permission="ADMIN_ACQ_FUND">
					<context link="fund" field="org"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="acqf" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::fund" oils_persist:tablename="acq.fund" reporter:label="Fund" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.fund_id_seq">
			<field reporter:label="Fund ID" name="id" reporter:datatype="id" reporter:selector="code"/>
			<field reporter:label="Owner" name="org" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Year" name="year" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Currency Type" name="currency_type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Code" name="code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Rollover" name="rollover" reporter:datatype="bool"/>
			<field reporter:label="Propagate" name="propagate" reporter:datatype="bool"/>
			<field reporter:label="Active" name="active" reporter:datatype="bool"/>
			<field reporter:label="Balance Warning Percent" name="balance_warning_percent" reporter:datatype="int"/>
			<field reporter:label="Balance Stop Percent" name="balance_stop_percent" reporter:datatype="int"/>
			<field reporter:label="Summary" name="summary" oils_persist:virtual="true"/>
			<field reporter:label="Allocations" name="allocations" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Debits" name="debits" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Tags" name="tags" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Allocation Total" name="allocation_total" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Debit Total" name="debit_total" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Encumbrance Total" name="encumbrance_total" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Spent Total" name="spent_total" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Combined Balance" name="combined_balance" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Spent Balance" name="spent_balance" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="org" reltype="has_a" key="id" map="" class="aou"/>
			<link field="currency_type" reltype="has_a" key="code" map="" class="acqct"/>
			<link field="allocations" reltype="has_many" key="fund" map="" class="acqfa"/>
			<link field="debits" reltype="has_many" key="fund" map="" class="acqfdeb"/>
			<link field="tags" reltype="has_many" key="fund" map="" class="acqftm"/>
			<link field="allocation_total" reltype="might_have" key="fund" map="" class="acqfat"/>
			<link field="debit_total" reltype="might_have" key="fund" map="" class="acqfdt"/>
			<link field="encumbrance_total" reltype="might_have" key="fund" map="" class="acqfet"/>
			<link field="spent_total" reltype="might_have" key="fund" map="" class="acqfst"/>
			<link field="combined_balance" reltype="might_have" key="fund" map="" class="acqfcb"/>
			<link field="spent_balance" reltype="might_have" key="fund" map="" class="acqfsb"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1" ignore_object_perms="true">
			<actions>
				<create permission="ADMIN_ACQ_FUND" context_field="org"/>
				<retrieve permission="ADMIN_ACQ_FUND VIEW_FUND MANAGE_FUND" context_field="org"/>
				<update permission="ADMIN_ACQ_FUND" context_field="org"/>
				<delete permission="ADMIN_ACQ_FUND" context_field="org"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqfat" controller="open-ils.cstore open-ils.pcrud open-ils.reporter-store" oils_obj:fieldmapper="acq::fund_allocation_total" oils_persist:readonly="true" oils_persist:tablename="acq.fund_allocation_total" reporter:label="Fund Allocation Total">
		<fields oils_persist:primary="fund">
			<field reporter:label="Fund ID" name="fund" reporter:datatype="link"/>
			<field reporter:label="Total Allocation Amount" name="amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="ADMIN_ACQ_FUND VIEW_FUND MANAGE_FUND">
					<context link="fund" field="org"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>

	<class id="acqfdt" controller="open-ils.cstore open-ils.pcrud open-ils.reporter-store" oils_obj:fieldmapper="acq::fund_debit_total" oils_persist:readonly="true" oils_persist:tablename="acq.fund_debit_total" reporter:label="Total Debit from Fund">
		<fields oils_persist:primary="fund">
			<field reporter:label="Fund ID" name="fund" reporter:datatype="link"/>
			<field reporter:label="Total Debit Amount" name="amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="ADMIN_ACQ_FUND VIEW_FUND MANAGE_FUND">
					<context link="fund" field="org"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>

	<class id="acqfet" controller="open-ils.cstore open-ils.pcrud open-ils.reporter-store" oils_obj:fieldmapper="acq::fund_encumbrance_total" oils_persist:readonly="true" oils_persist:tablename="acq.fund_encumbrance_total" reporter:label="Total Fund Encumbrance">
		<fields oils_persist:primary="fund">
			<field reporter:label="Fund ID" name="fund" reporter:datatype="link"/>
			<field reporter:label="Total Encumbrance Amount" name="amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="ADMIN_ACQ_FUND VIEW_FUND MANAGE_FUND">
					<context link="fund" field="org"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>

	<class id="acqfst" controller="open-ils.cstore open-ils.pcrud open-ils.reporter-store" oils_obj:fieldmapper="acq::fund_spent_total" oils_persist:readonly="true" oils_persist:tablename="acq.fund_spent_total" reporter:label="Total Spent from Fund">
		<fields oils_persist:primary="fund">
			<field reporter:label="Fund ID" name="fund" reporter:datatype="link"/>
			<field reporter:label="Total Spent Amount" name="amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="ADMIN_ACQ_FUND VIEW_FUND MANAGE_FUND">
					<context link="fund" field="org"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>

	<class id="acqfcb" controller="open-ils.cstore open-ils.pcrud open-ils.reporter-store" oils_obj:fieldmapper="acq::fund_combined_balance" oils_persist:readonly="true" oils_persist:tablename="acq.fund_combined_balance" reporter:label="Fund Combined Balance">
		<fields oils_persist:primary="fund">
			<field reporter:label="Fund ID" name="fund" reporter:datatype="link"/>
			<field reporter:label="Balance after Spent and Encumbered" name="amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="ADMIN_ACQ_FUND VIEW_FUND MANAGE_FUND">
					<context link="fund" field="org"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>

   <class id="acqafat" controller="open-ils.cstore open-ils.reporter-store" oils_obj:fieldmapper="acq::all_fund_allocation_total" oils_persist:readonly="true" oils_persist:tablename="acq.all_fund_allocation_total" reporter:label="All Fund Allocation Total">
		<fields oils_persist:primary="fund">
			<field reporter:label="Fund ID" name="fund" reporter:datatype="link"/>
			<field reporter:label="Total Allocation Amount" name="amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
		</links>
	</class>

   <class id="acqafet" controller="open-ils.cstore open-ils.reporter-store" oils_obj:fieldmapper="acq::all_fund_encumbrance_total" oils_persist:readonly="true" oils_persist:tablename="acq.all_fund_encumbrance_total" reporter:label="All Fund Encumbrance Total">
		<fields oils_persist:primary="fund">
			<field reporter:label="Fund ID" name="fund" reporter:datatype="link"/>
			<field reporter:label="Total Encumbered Amount" name="amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
		</links>
	</class>

   <class id="acqafst" controller="open-ils.cstore open-ils.reporter-store" oils_obj:fieldmapper="acq::all_fund_spent_total" oils_persist:readonly="true" oils_persist:tablename="acq.all_fund_spent_total" reporter:label="All Fund Spent Total">
		<fields oils_persist:primary="fund">
			<field reporter:label="Fund ID" name="fund" reporter:datatype="link"/>
			<field reporter:label="Total Spent Amount" name="amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
		</links>
	</class>

   <class id="acqafsb" controller="open-ils.cstore open-ils.reporter-store" oils_obj:fieldmapper="acq::all_fund_spent_balance" oils_persist:readonly="true" oils_persist:tablename="acq.all_fund_spent_balance" reporter:label="All Fund Spent Balance">
		<fields oils_persist:primary="fund">
			<field reporter:label="Fund ID" name="fund" reporter:datatype="link"/>
			<field reporter:label="Total Spent Balance" name="amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
		</links>
	</class>

   <class id="acqafcb" controller="open-ils.cstore open-ils.reporter-store" oils_obj:fieldmapper="acq::all_fund_combined_balance" oils_persist:readonly="true" oils_persist:tablename="acq.all_fund_combined_balance" reporter:label="All Fund Combined Total">
		<fields oils_persist:primary="fund">
			<field reporter:label="Fund ID" name="fund" reporter:datatype="link"/>
			<field reporter:label="Total Combined Balance" name="amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
		</links>
	</class>

	<class id="acqfsrcct" controller="open-ils.cstore open-ils.reporter-store" oils_obj:fieldmapper="acq::funding_source_credit_total" oils_persist:readonly="true" oils_persist:tablename="acq.funding_source_credit_total" reporter:label="Total Credit to Funding Source">
		<fields oils_persist:primary="funding_source">
			<field reporter:label="Funding Source" name="funding_source" reporter:datatype="link"/>
			<field reporter:label="Total Credits to Funding Source" name="amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="funding_source" reltype="has_a" key="id" map="" class="acqfs"/>
		</links>
	</class>

	<class id="acqfsrcat" controller="open-ils.cstore open-ils.reporter-store" oils_obj:fieldmapper="acq::funding_source_allocation_total" oils_persist:readonly="true" oils_persist:tablename="acq.funding_source_allocation_total" reporter:label="Total Allocation to Funding Source">
		<fields oils_persist:primary="funding_source">
			<field reporter:label="Funding Source" name="funding_source" reporter:datatype="link"/>
			<field reporter:label="Total Allocated from Funding Source" name="amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="funding_source" reltype="has_a" key="id" map="" class="acqfs"/>
		</links>
	</class>

	<class id="acqfsrcb" controller="open-ils.cstore open-ils.reporter-store" oils_obj:fieldmapper="acq::funding_source_balance" oils_persist:readonly="true" oils_persist:tablename="acq.funding_source_balance" reporter:label="Funding Source Balance">
		<fields oils_persist:primary="funding_source">
			<field reporter:label="Funding Source" name="funding_source" reporter:datatype="link"/>
			<field reporter:label="Balance Remaining" name="amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="funding_source" reltype="has_a" key="id" map="" class="acqfs"/>
		</links>
	</class>

	<class id="acqfsb" controller="open-ils.cstore open-ils.pcrud open-ils.reporter-store" oils_obj:fieldmapper="acq::fund_spent_balance" oils_persist:readonly="true" oils_persist:tablename="acq.fund_spent_balance" reporter:label="Fund Spent Balance">
		<fields oils_persist:primary="fund">
			<field reporter:label="Fund ID" name="fund" reporter:datatype="link"/>
			<field reporter:label="Balance after Spent" name="amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="ADMIN_ACQ_FUND VIEW_FUND MANAGE_FUND">
					<context link="fund" field="org"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="acqfsum" controller="open-ils.cstore open-ils.pcrud open-ils.reporter-store" oils_obj:fieldmapper="acq::fund_summary" reporter:label="Fund Summary" reporter:core="true" oils_persist:readonly="true">
		<oils_persist:source_definition><![CDATA[
			SELECT
				acqf.*,
				COALESCE(acqfat.amount, 0.00) AS allocated_total,
				COALESCE(acqfst.amount, 0.00) AS spent_total,
				COALESCE(acqfet.amount, 0.00) AS encumbrance_total,
				COALESCE(acqfcb.amount, 0.00) AS combined_balance
			FROM
				acq.fund acqf
				LEFT JOIN acq.fund_allocation_total acqfat ON (acqfat.fund = acqf.id)
				LEFT JOIN acq.fund_spent_total acqfst ON (acqfst.fund = acqf.id)
				LEFT JOIN acq.fund_encumbrance_total acqfet ON (acqfet.fund = acqf.id)
				LEFT JOIN acq.fund_combined_balance acqfcb ON (acqfcb.fund = acqf.id)
		]]></oils_persist:source_definition>
		<fields oils_persist:primary="id" oils_persist:sequence="acq.fund_id_seq">
			<field reporter:label="Fund ID" name="id" reporter:datatype="id" reporter:selector="code"/>
			<field reporter:label="Owner" name="org" reporter:datatype="org_unit"/>
			<field reporter:label="Name" name="name" reporter:datatype="text"/>
			<field reporter:label="Year" name="year" reporter:datatype="int"/>
			<field reporter:label="Currency Type" name="currency_type" reporter:datatype="link"/>
			<field reporter:label="Code" name="code" reporter:datatype="text"/>
			<field reporter:label="Rollover" name="rollover" reporter:datatype="bool"/>
			<field reporter:label="Propagate" name="propagate" reporter:datatype="bool"/>
			<field reporter:label="Active" name="active" reporter:datatype="bool"/>
			<field reporter:label="Balance Warning Percent" name="balance_warning_percent" reporter:datatype="int"/>
			<field reporter:label="Balance Stop Percent" name="balance_stop_percent" reporter:datatype="int"/>

			<!-- non fund-native fields -->
			<field reporter:label="Total Allocated" name="allocated_total" reporter:datatype="money"/>
			<field reporter:label="Total Spent" name="spent_total" reporter:datatype="money"/>
			<field reporter:label="Total Encumbered" name="encumbrance_total" reporter:datatype="money"/>
			<field reporter:label="Remaining Balance" name="combined_balance" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="acqf"/>
			<link field="org" reltype="has_a" key="id" map="" class="aou"/>
			<link field="currency_type" reltype="has_a" key="code" map="" class="acqct"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="ADMIN_ACQ_FUND VIEW_FUND MANAGE_FUND" context_field="org"/>
			</actions>
		</permacrud>
	</class>
	<class id="acqfa" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::fund_allocation" oils_persist:tablename="acq.fund_allocation" reporter:label="Fund Allocation">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.fund_allocation_id_seq">
			<field reporter:label="Allocation ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Fund" name="fund" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Funding Source" name="funding_source" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Amount" name="amount" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Allocating User" name="allocator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Allocation Time" name="create_time" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="allocator" reltype="has_a" key="id" map="" class="au"/>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
			<link field="funding_source" reltype="has_a" key="id" map="" class="acqfs"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ACQ_FUND">
					<context link="fund" field="org"/>
				</create>
				<retrieve permission="ADMIN_ACQ_FUND">
					<context link="fund" field="org"/>
				</retrieve>
				<update permission="ADMIN_ACQ_FUND">
					<context link="fund" field="org"/>
				</update>
				<delete permission="ADMIN_ACQ_FUND">
					<context link="fund" field="org"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="acqfap" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::fund_allocation_percent" oils_persist:tablename="acq.fund_allocation_percent" reporter:label="Fund Allocation Percent">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.fund_allocation_percent_id_seq">
			<field reporter:label="Allocation ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Funding Source" name="funding_source" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Owner" name="org" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Fund Code" name="fund_code" reporter:datatype="text"/>
			<field reporter:label="Percent" name="percent" reporter:datatype="float" oils_obj:required="true"/>
			<field reporter:label="Allocating User" name="allocator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Create Time" name="create_time" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="allocator" reltype="has_a" key="id" map="" class="au"/>
			<link field="org" reltype="has_a" key="id" map="" class="aou"/>
			<link field="funding_source" reltype="has_a" key="id" map="" class="acqfs"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ACQ_FUND_ALLOCATION_PERCENT" global_required="true"/>
				<retrieve permission="VIEW_ACQ_FUND_ALLOCATION_PERCENT" global_required="true"/>
				<update permission="ADMIN_ACQ_FUND_ALLOCATION_PERCENT" global_required="true"/>
				<delete permission="ADMIN_ACQ_FUND_ALLOCATION_PERCENT" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqpl" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::picklist" oils_persist:tablename="acq.picklist" reporter:label="Selection List">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.picklist_id_seq">
			<field reporter:label="Selection List ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Org Unit" name="org_unit" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Creation Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Edit Time" name="edit_time" reporter:datatype="timestamp"/>
			<field reporter:label="Entries" name="entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Entry Count" name="entry_count" oils_persist:virtual="true"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Editor" name="editor" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="au"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
			<link field="entries" reltype="has_many" key="picklist" map="" class="jub"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="CREATE_PICKLIST VIEW_PICKLIST" context_field="org_unit"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqcr" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::cancel_reason" oils_persist:tablename="acq.cancel_reason" reporter:label="Cancel Reason">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.cancel_reason_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="label"/>
			<field reporter:label="Using Library" name="org_unit" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Keep Debits?" name="keep_debits" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ACQ_CANCEL_CAUSE" context_field="org_unit"/>
				<retrieve permission="STAFF_LOGIN" context_field="org_unit"/>
				<update permission="ADMIN_ACQ_CANCEL_CAUSE" context_field="org_unit"/>
				<delete permission="ADMIN_ACQ_CANCEL_CAUSE" context_field="org_unit"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqpo" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::purchase_order" oils_persist:tablename="acq.purchase_order" reporter:label="Purchase Order">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.purchase_order_id_seq">
			<field reporter:label="Purchase Order ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Creation Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Edit Time" name="edit_time" reporter:datatype="timestamp"/>
			<field reporter:label="Provider" name="provider" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Status" name="state" reporter:datatype="link"/>
			<field reporter:label="Ordering Agency" name="ordering_agency" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Editor" name="editor" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Order Date" name="order_date" reporter:datatype="timestamp"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Cancel Reason" name="cancel_reason" reporter:datatype="link"/>
			<field reporter:label="Prepayment Required" name="prepayment_required" reporter:datatype="bool"/>
			<field reporter:label="Line Items" name="lineitems" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Notes" name="notes" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Line Item Count" name="lineitem_count" oils_persist:virtual="true" reporter:datatype="int"/>
			<field reporter:label="Amount Encumbered" name="amount_encumbered" oils_persist:virtual="true" reporter:datatype="float"/>
			<field reporter:label="Amount Spent" name="amount_spent" oils_persist:virtual="true" reporter:datatype="float"/>
			<field reporter:label="Amount Estimated" name="amount_estimated" oils_persist:virtual="true" reporter:datatype="float"/>
			<field reporter:label="PO Items" name="po_items" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="state" reltype="has_a" key="id" map="" class="acqpostlbl"/>
			<link field="owner" reltype="has_a" key="id" map="" class="au"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="default_fund" reltype="has_a" key="id" map="" class="acqf"/>
			<link field="provider" reltype="has_a" key="id" map="" class="acqpro"/>
			<link field="lineitems" reltype="has_many" key="purchase_order" map="" class="jub"/>
			<link field="po_items" reltype="has_many" key="purchase_order" map="" class="acqpoi"/>
			<link field="notes" reltype="has_many" key="purchase_order" map="" class="acqpon"/>
			<link field="ordering_agency" reltype="has_a" key="id" map="" class="aou"/>
			<link field="cancel_reason" reltype="has_a" key="id" map="" class="acqcr"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_PURCHASE_ORDER" context_field="ordering_agency"/>
				<retrieve permission="CREATE_PURCHASE_ORDER VIEW_PURCHASE_ORDER" context_field="ordering_agency"/>
				<update permission="CREATE_PURCHASE_ORDER" context_field="ordering_agency"/>
				<delete permission="CREATE_PURCHASE_ORDER" context_field="ordering_agency"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqpoh" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::acq_purchase_order_history" oils_persist:tablename="acq.acq_purchase_order_history" reporter:label="Purchase Order History">
		<fields oils_persist:primary="audit_id" oils_persist:sequence="acq.acq_purchase_order_pkey_seq">
			<field reporter:label="Audit ID" name="audit_id" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Audit Time" name="audit_time" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Audit Action" name="audit_action" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Purchase Order ID" name="id" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Editor" name="editor" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Ordering Agency" name="ordering_agency" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Create Time" name="create_time" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Edit Time" name="edit_time" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Provider" name="provider" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Status" name="state" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Order Date" name="order_date" reporter:datatype="timestamp"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Cancel Reason" name="cancel_reason" reporter:datatype="link"/>
			<field reporter:label="Prepayment Required" name="prepayment_required" reporter:datatype="bool" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="acqpo"/>
			<link field="owner" reltype="has_a" key="id" map="" class="au"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="ordering_agency" reltype="has_a" key="id" map="" class="aou"/>
			<link field="provider" reltype="has_a" key="id" map="" class="acqpro"/>
			<link field="cancel_reason" reltype="has_a" key="id" map="" class="acqcr"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="CREATE_PURCHASE_ORDER VIEW_PURCHASE_ORDER" context_field="ordering_agency"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqpon" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::po_note" oils_persist:tablename="acq.po_note" reporter:label="PO Note">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.po_note_id_seq">
			<field reporter:label="PO Note ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Purchase Order" name="purchase_order" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Creation Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Edit Time" name="edit_time" reporter:datatype="timestamp"/>
			<field reporter:label="Editor" name="editor" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Vote Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Vendor Public" name="vendor_public" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="purchase_order" reltype="has_a" key="id" map="" class="acqpo"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_PURCHASE_ORDER">
					<context link="purchase_order" field="ordering_agency"/>
				</create>
				<retrieve permission="CREATE_PURCHASE_ORDER VIEW_PURCHASE_ORDER">
					<context link="purchase_order" field="ordering_agency"/>
				</retrieve>
				<update permission="CREATE_PURCHASE_ORDER">
					<context link="purchase_order" field="ordering_agency"/>
				</update>
				<delete permission="CREATE_PURCHASE_ORDER">
					<context link="purchase_order" field="ordering_agency"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="acqpoi" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::po_item" oils_persist:tablename="acq.po_item" reporter:label="Purchase Order Item">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.po_item_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Purchase Order" name="purchase_order" reporter:datatype="link"/>
			<field reporter:label="Fund Debit" name="fund_debit" reporter:datatype="link"/>
			<field reporter:label="Invoice Item Type" name="inv_item_type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Title" name="title" reporter:datatype="text"/>
			<field reporter:label="Author" name="author" reporter:datatype="text"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Estimated Cost" name="estimated_cost" reporter:datatype="money"/>
			<field reporter:label="Fund" name="fund" reporter:datatype="link"/>
			<field reporter:label="Target" name="target" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="purchase_order" reltype="has_a" key="id" map="" class="acqpo"/>
			<link field="fund_debit" reltype="has_a" key="id" map="" class="acqfdeb"/>
			<link field="inv_item_type" reltype="has_a" key="code" map="" class="aiit"/>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_PURCHASE_ORDER">
					<context link="purchase_order" field="ordering_agency"/>
				</create>
				<retrieve permission="CREATE_PURCHASE_ORDER VIEW_PURCHASE_ORDER">
					<context link="purchase_order" field="ordering_agency"/>
				</retrieve>
				<update permission="CREATE_PURCHASE_ORDER">
					<context link="purchase_order" field="ordering_agency"/>
				</update>
				<delete permission="CREATE_PURCHASE_ORDER">
					<context link="purchase_order" field="ordering_agency"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="jub" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::lineitem" oils_persist:tablename="acq.lineitem" reporter:label="Line Item">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.lineitem_id_seq">
			<field reporter:label="Lineitem ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Selecting User" name="selector" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Selection List" name="picklist" reporter:datatype="link"/>
			<field reporter:label="Purchase Order" name="purchase_order" reporter:datatype="link"/>
			<field reporter:label="Provider" name="provider" reporter:datatype="link"/>
			<field reporter:label="Creation Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Edit Time" name="edit_time" reporter:datatype="timestamp"/>
			<field reporter:label="MARC" name="marc" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Evergreen Bib ID" name="eg_bib_id" reporter:datatype="link"/>
			<field reporter:label="Source Label" name="source_label" reporter:datatype="text"/>
			<field reporter:label="Expected Receive Date" name="expected_recv_time" reporter:datatype="timestamp"/>
			<field reporter:label="Status" name="state" reporter:datatype="link"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Editor" name="editor" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Claim Policy" name="claim_policy" reporter:datatype="link"/>
			<field reporter:label="Cancel Reason" name="cancel_reason" reporter:datatype="link"/>
			<field reporter:label="Estimated Unit Price" name="estimated_unit_price" reporter:datatype="money"/>
			<field reporter:label="Queued Vandelay Record" name="queued_record" reporter:datatype="link"/>
			<field reporter:label="Item Count" name="item_count" oils_persist:virtual="true" reporter:datatype="int"/>
			<field reporter:label="Descriptive Attributes" name="attributes" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Line Item Details" name="lineitem_details" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Line Item Notes" name="lineitem_notes" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Distribution Formulas" name="distribution_formulas" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Invoice Entries" name="invoice_entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Order Summary" name="order_summary" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="state" reltype="has_a" key="id" map="" class="jubstlbl"/>
			<link field="selector" reltype="has_a" key="id" map="" class="au"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="provider" reltype="has_a" key="id" map="" class="acqpro"/>
			<link field="purchase_order" reltype="has_a" key="id" map="" class="acqpo"/>
			<link field="picklist" reltype="has_a" key="id" map="" class="acqpl"/>
			<link field="eg_bib_id" reltype="has_a" key="id" map="" class="bre"/>
			<link field="attributes" reltype="has_many" key="lineitem" map="" class="acqlia"/>
			<link field="lineitem_details" reltype="has_many" key="lineitem" map="" class="acqlid"/>
			<link field="lineitem_notes" reltype="has_many" key="lineitem" map="" class="acqlin"/>
			<link field="cancel_reason" reltype="has_a" key="id" map="" class="acqcr"/>
			<link field="distribution_formulas" reltype="has_many" key="lineitem" map="" class="acqdfa"/>
			<link field="claim_policy" reltype="has_a" key="id" map="" class="acqclp"/>
			<link field="invoice_entries" reltype="has_many" key="lineitem" map="" class="acqie"/>
			<link field="order_summary" reltype="might_have" key="lineitem" map="" class="acqlisum"/>
			<link field="queued_record" reltype="has_a" key="id" map="" class="vqbr"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="CREATE_PURCHASE_ORDER VIEW_PURCHASE_ORDER CREATE_PICKLIST VIEW_PICKLIST">
					<context link="purchase_order" field="ordering_agency"/>
					<context link="picklist" field="org_unit"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>

	<class id="acqlih" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::acq_lineitem_history" oils_persist:tablename="acq.acq_lineitem_history" reporter:label="Line Item History">
		<fields oils_persist:primary="audit_id" oils_persist:sequence="acq.acq_lineitem_pkey_seq">
			<field reporter:label="Audit ID" name="audit_id" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Audit Time" name="audit_time" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Audit Action" name="audit_action" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Lineitem ID" name="id" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Editor" name="editor" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Selector" name="selector" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Provider" name="provider" reporter:datatype="link"/>
			<field reporter:label="Purchase Order" name="purchase_order" reporter:datatype="link"/>
			<field reporter:label="Selection List" name="picklist" reporter:datatype="link"/>
			<field reporter:label="Expected Receive Time" name="expected_recv_time" reporter:datatype="timestamp"/>
			<field reporter:label="Create Time" name="create_time" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="Edit Time" name="edit_time" reporter:datatype="timestamp" oils_obj:required="true"/>
			<field reporter:label="MARC" name="marc" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Evergreen Bib ID" name="eg_bib_id" reporter:datatype="link"/>
			<field reporter:label="Source Label" name="source_label" reporter:datatype="text"/>
			<field reporter:label="Status" name="state" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Claim Policy" name="claim_policy" reporter:datatype="link"/>
			<field reporter:label="Cancel Reason" name="cancel_reason" reporter:datatype="link"/>
			<field reporter:label="Estimated Unit Price" name="estimated_unit_price" reporter:datatype="money"/>
			<field reporter:label="Queued Vandelay Record" name="queued_record" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="jub"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="selector" reltype="has_a" key="id" map="" class="au"/>
			<link field="provider" reltype="has_a" key="id" map="" class="acqpro"/>
			<link field="purchase_order" reltype="has_a" key="id" map="" class="acqpo"/>
			<link field="picklist" reltype="has_a" key="id" map="" class="acqpl"/>
			<link field="eg_bib_id" reltype="has_a" key="id" map="" class="bre"/>
			<link field="cancel_reason" reltype="has_a" key="id" map="" class="acqcr"/>
			<link field="claim_policy" reltype="has_a" key="id" map="" class="acqclp"/>
			<link field="queued_record" reltype="has_a" key="id" map="" class="vqbr"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="CREATE_PURCHASE_ORDER VIEW_PURCHASE_ORDER">
					<context link="purchase_order" field="ordering_agency"/>
					<context link="picklist" field="org_unit"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>

	<class id="acqliat" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::lineitem_alert_text" oils_persist:tablename="acq.lineitem_alert_text" reporter:label="Line Item Alert Text">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.lineitem_alert_text_id_seq">
			<field reporter:label="Alert Text ID" name="id" reporter:datatype="id" reporter:selector="code"/>
			<field reporter:label="Code" name="code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ACQ_LINEITEM_ALERT_TEXT" context_field="owning_lib"/>
				<retrieve permission="STAFF_LOGIN" context_field="owning_lib"/>
				<update permission="ADMIN_ACQ_LINEITEM_ALERT_TEXT" context_field="owning_lib"/>
				<delete permission="ADMIN_ACQ_LINEITEM_ALERT_TEXT" context_field="owning_lib"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqlin" controller="open-ils.cstore open-ils.reporter-store" oils_obj:fieldmapper="acq::lineitem_note" oils_persist:tablename="acq.lineitem_note" reporter:label="Line Item Note">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.lineitem_note_id_seq">
			<field reporter:label="PO Line Item Note ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Line Item" name="lineitem" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Creation Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Edit Time" name="edit_time" reporter:datatype="timestamp"/>
			<field reporter:label="Editor" name="editor" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Note Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Alert Text" name="alert_text" reporter:datatype="link"/>
			<field reporter:label="Vendor Public" name="vendor_public" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
			<link field="lineitem" reltype="has_a" key="id" map="" class="jub"/>
			<link field="alert_text" reltype="has_a" key="id" map="" class="acqliat"/>
		</links>
	</class>

	<class id="acqlia" controller="open-ils.cstore open-ils.reporter-store" oils_obj:fieldmapper="acq::lineitem_attr" oils_persist:tablename="acq.lineitem_attr" reporter:label="Line Item Attribute">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.lineitem_attr_id_seq">
			<field reporter:label="Attribute Value ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Lineitem" name="lineitem" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Type" name="attr_type" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Name" name="attr_name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Value" name="attr_value" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Definition" name="definition" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Order Identifier" name="order_ident" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="lineitem" reltype="has_a" key="id" map="" class="jub"/>
			<link field="definition" reltype="has_a" key="id" map="" class="acqliad"/>
		</links>
	</class>

	<class id="acqlid" controller="open-ils.cstore open-ils.reporter-store open-ils.pcrud" oils_obj:fieldmapper="acq::lineitem_detail" oils_persist:tablename="acq.lineitem_detail" reporter:label="Line Item Detail">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.lineitem_detail_id_seq">
			<field reporter:label="Item Detail ID" name="id" reporter:datatype="id"/>
			<field reporter:label="PO Line Item" name="lineitem" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Evergreen Item ID" name="eg_copy_id" reporter:datatype="link"/>
			<field reporter:label="Barcode" name="barcode" reporter:datatype="text"/>
			<field reporter:label="Call Number Label" name="cn_label" reporter:datatype="text"/>
			<field reporter:label="Actual Receive Date" name="recv_time" reporter:datatype="timestamp"/>
			<field reporter:label="Receiving User" name="receiver" reporter:datatype="link"/>
			<field reporter:label="Fund" name="fund" reporter:datatype="link"/>
			<field reporter:label="Fund Debit" name="fund_debit" reporter:datatype="link"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Shelving Location" name="location" reporter:datatype="link"/>
			<field reporter:label="Circ Modifier" name="circ_modifier" reporter:datatype="link"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
			<field reporter:label="Collection Code" name="collection_code" reporter:datatype="text"/>
			<field reporter:label="Cancel Reason" name="cancel_reason" reporter:datatype="link"/>
			<field reporter:label="Claims" name="claims" reporter:datatype="link" oils_persist:virtual="true"/>
		</fields>
		<links>
			<link field="lineitem" reltype="has_a" key="id" map="" class="jub"/>
			<link field="eg_copy_id" reltype="has_a" key="id" map="" class="acp"/>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
			<link field="fund_debit" reltype="has_a" key="id" map="" class="acqfdeb"/>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="location" reltype="has_a" key="id" map="" class="acpl"/>
			<link field="circ_modifier" reltype="has_a" key="code" map="" class="ccm"/>
			<link field="cancel_reason" reltype="has_a" key="id" map="" class="acqcr"/>
			<link field="claims" reltype="has_many" key="lineitem_detail" map="" class="acqcl"/>
			<link field="receiver" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="CREATE_PURCHASE_ORDER VIEW_PURCHASE_ORDER CREATE_PICKLIST VIEW_PICKLIST">
					<context link="lineitem" jump="purchase_order" field="ordering_agency"/>
					<context link="lineitem" jump="picklist" field="org_unit"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>

	<class id="acqliad" controller="open-ils.cstore open-ils.reporter-store open-ils.pcrud" oils_obj:fieldmapper="acq::lineitem_attr_definition" oils_persist:tablename="acq.lineitem_attr_definition" reporter:label="Line Item Attribute Definition">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.lineitem_attr_definition_id_seq">
			<field reporter:label="Definition ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Code" name="code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Is Identifier?" name="ident" reporter:datatype="bool"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="acqlimad" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::lineitem_marc_attr_definition" oils_persist:tablename="acq.lineitem_marc_attr_definition" reporter:label="Line Item MARC Attribute Definition">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.lineitem_attr_definition_id_seq">
			<field reporter:label="Definition ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Code" name="code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="XPath" name="xpath" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Is Identifier?" name="ident" reporter:datatype="bool"/>
			<field reporter:label="Remove" name="remove" reporter:datatype="text"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_LINEITEM_MARC_ATTR_DEF" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_LINEITEM_MARC_ATTR_DEF" global_required="true"/>
				<delete permission="ADMIN_LINEITEM_MARC_ATTR_DEF" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqligad" controller="open-ils.cstore open-ils.reporter-store" oils_obj:fieldmapper="acq::lineitem_generated_attr_definition" oils_persist:tablename="acq.lineitem_generated_attr_definition" reporter:label="Line Item Generated Attribute Definition">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.lineitem_attr_definition_id_seq">
			<field reporter:label="Definition ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Code" name="code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="XPath" name="xpath" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Is Identifier?" name="ident" reporter:datatype="bool"/>
		</fields>
		<links/>
	</class>
	<class id="acqliuad" controller="open-ils.cstore open-ils.reporter-store" oils_obj:fieldmapper="acq::lineitem_usr_attr_definition" oils_persist:tablename="acq.lineitem_usr_attr_definition" reporter:label="Line Item User Attribute Definition">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.lineitem_attr_definition_id_seq">
			<field reporter:label="Definition ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Code" name="code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Is Identifier?" name="ident" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
	</class>

	<class id="acqlipad" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::lineitem_provider_attr_definition" oils_persist:tablename="acq.lineitem_provider_attr_definition" reporter:label="Line Item Provider Attribute Definition">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.lineitem_attr_definition_id_seq">
		<field reporter:label="Definition ID" name="id" reporter:datatype="id"/>
		<field reporter:label="Code" name="code" reporter:datatype="text" oils_obj:required="true"/>
		<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
		<field reporter:label="XPath" name="xpath" reporter:datatype="text" oils_obj:required="true"/>
		<field reporter:label="Provider" name="provider" reporter:datatype="link" oils_obj:required="true"/>
		<field reporter:label="Is Identifier?" name="ident" reporter:datatype="bool"/>
		<field reporter:label="Remove" name="remove" reporter:datatype="text"/>

		</fields>
		<links>
		<link field="provider" reltype="has_a" key="id" map="" class="acqpro"/>
		</links>
			<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
				<actions>
					<create permission="ADMIN_PROVIDER">
						<context link="provider" field="owner"/>
					</create>
					<retrieve permission="ADMIN_PROVIDER">
						<context link="provider" field="owner"/>
					</retrieve>
					<update permission="ADMIN_PROVIDER">
						<context link="provider" field="owner"/>
					</update>
					<delete permission="ADMIN_PROVIDER">
						<context link="provider" field="owner"/>
					</delete>
				</actions>
			</permacrud>
	</class>
		
	<class id="acqphsm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::provider_holding_subfield_map" oils_persist:tablename="acq.provider_holding_subfield_map" reporter:label="Provider Holding Subfield Map">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.provider_holding_subfield_map_id_seq">
		<field reporter:label="ID" name="id" reporter:datatype="id"/>
		<field reporter:label="Provider" name="provider" reporter:datatype="link" oils_obj:required="true"/>
		<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
		<field reporter:label="Subfield" name="subfield" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
		<link field="provider" reltype="has_a" key="id" map="" class="acqpro"/>
		</links>
			<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
				<actions>
					<create permission="ADMIN_PROVIDER">
						<context link="provider" field="owner"/>
					</create>
					<retrieve permission="ADMIN_PROVIDER">
						<context link="provider" field="owner"/>
					</retrieve>
					<update permission="ADMIN_PROVIDER">
						<context link="provider" field="owner"/>
					</update>
					<delete permission="ADMIN_PROVIDER">
						<context link="provider" field="owner"/>
					</delete>
				</actions>
			</permacrud>
	</class>
		
	<class id="acqlilad" controller="open-ils.cstore open-ils.reporter-store" oils_obj:fieldmapper="acq::lineitem_local_attr_definition" oils_persist:tablename="acq.lineitem_local_attr_definition" reporter:label="Line Item Local Attribute Definition">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.lineitem_attr_definition_id_seq">
			<field reporter:label="Definition ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Code" name="code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Is Identifier?" name="ident" reporter:datatype="bool"/>
		</fields>
		<links/>
	</class>

	<class id="acqedi" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::edi_account" oils_persist:tablename="acq.edi_account" reporter:label="EDI Account">
		<fields oils_persist:primary="id" oils_persist:sequence="config.remote_account_id_seq"><!-- edi_account inherits from config.remote_account, hence the seq -->
			<field name="id" reporter:datatype="id" reporter:label="EDI Account ID" reporter:selector="label"/>
			<field name="label" reporter:datatype="text" reporter:label="Label" oils_obj:required="true"/>
			<field name="host" reporter:datatype="text" reporter:label="Host" oils_obj:required="true"/>
			<field name="username" reporter:datatype="text" reporter:label="Username"/>
			<field name="password" reporter:datatype="text" reporter:label="Password"/>
			<field name="account" reporter:datatype="text" reporter:label="Account"/>
			<field name="path" reporter:datatype="text" reporter:label="Path"/>
			<field name="owner" reporter:datatype="link" reporter:label="Owner" oils_obj:required="true"/>
			<field name="last_activity" reporter:datatype="timestamp" reporter:label="Last Activity"/>
			<field name="provider" reporter:datatype="link" reporter:label="Provider" oils_obj:required="true"/>
			<field name="in_dir" reporter:datatype="text" reporter:label="Incoming Directory"/>
			<field name="vendacct" reporter:datatype="text" reporter:label="Vendor Account Number"/>
			<field name="vendcode" reporter:datatype="text" reporter:label="Vendor Assigned Code"/>
			<field name="attr_set" reporter:datatype="link" reporter:label="EDI Attribute Set"/>
			<field name="use_attrs" reporter:datatype="bool" reporter:label="Use EDI Attributes" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="provider" reltype="has_a" key="id" map="" class="acqpro"/>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="attr_set" reltype="has_a" key="id" map="" class="aeas"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_PROVIDER">
					<context link="provider" field="owner"/>
				</create>
				<retrieve permission="ADMIN_PROVIDER">
					<context link="provider" field="owner"/>
				</retrieve>
				<update permission="ADMIN_PROVIDER">
					<context link="provider" field="owner"/>
				</update>
				<delete permission="ADMIN_PROVIDER">
					<context link="provider" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="aea" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::edi_attr" oils_persist:tablename="acq.edi_attr" reporter:label="EDI Attribute">
		<fields oils_persist:primary="key">
			<field name="key" reporter:datatype="text" reporter:label="Key" reporter:selector="label" oils_obj:required="true"/>
			<field name="label" reporter:datatype="text" reporter:label="Label" oils_obj:required="true"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_PROVIDER" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_PROVIDER" global_required="true"/>
				<delete permission="ADMIN_PROVIDER" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="aeas" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::edi_attr_set" oils_persist:tablename="acq.edi_attr_set" reporter:label="EDI Attribute Set">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.edi_attr_set_id_seq">
			<field name="id" reporter:datatype="id" reporter:label="ID" reporter:selector="label"/>
			<field name="label" reporter:datatype="text" reporter:label="Label" oils_obj:required="true"/>
			<field name="attr_maps" reporter:datatype="link" oils_persist:virtual="true" reporter:label="Mapped EDI Attributes"/>
			<field name="edi_accounts" reporter:datatype="link" oils_persist:virtual="true" reporter:label="EDI Accounts"/>
		</fields>
		<links>
			<link field="attr_maps" reltype="has_many" key="attr_set" map="" class="aeasm"/>
			<link field="edi_accounts" reltype="has_many" key="attr_set" map="" class="acqedi"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_PROVIDER" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_PROVIDER" global_required="true"/>
				<delete permission="ADMIN_PROVIDER" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="aeasm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::edi_attr_set_map" oils_persist:tablename="acq.edi_attr_set_map" reporter:label="EDI Attribute Set Map">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.edi_attr_set_map_id_seq">
			<field name="id" reporter:datatype="id" reporter:label="ID" reporter:selector="label"/>
			<field name="attr_set" reporter:datatype="link" reporter:label="Attribute Set" oils_obj:required="true"/>
			<field name="attr" reporter:datatype="link" reporter:label="Attribute" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="attr_set" reltype="has_a" key="id" map="" class="aeas"/>
			<link field="attr" reltype="has_a" key="id" map="" class="aea"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_PROVIDER" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_PROVIDER" global_required="true"/>
				<delete permission="ADMIN_PROVIDER" global_required="true"/>
			</actions>
		</permacrud>
	</class>


	<class id="acqedim" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::edi_message" oils_persist:tablename="acq.edi_message" reporter:label="EDI Message">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.edi_message_id_seq">
			<field name="id" reporter:datatype="id" reporter:label="EDI Message ID"/>
			<field name="account" reporter:datatype="link" reporter:label="EDI Account"/>
			<field name="remote_file" reporter:datatype="text" reporter:label="Filename"/>
			<field name="create_time" reporter:datatype="timestamp" reporter:label="Time Created"/>
			<field name="translate_time" reporter:datatype="timestamp" reporter:label="Time Translated"/>
			<field name="process_time" reporter:datatype="timestamp" reporter:label="Time Processed"/>
			<field name="error_time" reporter:datatype="timestamp" reporter:label="Time of Error"/>
			<field name="status" reporter:datatype="text" reporter:label="Status"/>
			<field name="edi" reporter:datatype="text" reporter:label="EDI Message Body"/>
			<field name="jedi" reporter:datatype="text" reporter:label="JEDI Message Body"/>
			<field name="error" reporter:datatype="text" reporter:label="Error"/>
			<field name="purchase_order" reporter:datatype="link" reporter:label="Purchase Order"/>
			<field name="message_type" reporter:datatype="text" reporter:label="Message Type" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="account" reltype="has_a" key="id" map="" class="acqedi"/>
			<link field="purchase_order" reltype="has_a" key="id" map="" class="acqpo"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="ADMIN_PROVIDER MANAGE_PROVIDER VIEW_PROVIDER">
					<context link="account" jump="provider" field="owner"/>
				</retrieve>
				<update permission="ADMIN_PROVIDER MANAGE_PROVIDER VIEW_PROVIDER">
					<context link="account" jump="provider" field="owner"/>
				</update>
				<delete permission="ADMIN_PROVIDER MANAGE_PROVIDER VIEW_PROVIDER">
					<context link="account" jump="provider" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>


	<class id="rof" controller="open-ils.reporter-store open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="reporter::output_folder" oils_persist:tablename="reporter.output_folder" reporter:label="Output Folder">
		<fields oils_persist:primary="id" oils_persist:sequence="reporter.output_folder_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="parent" reporter:datatype="link"/>
			<field name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field name="create_time" reporter:datatype="timestamp"/>
			<field name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field name="shared" reporter:datatype="bool"/>
			<field name="share_with" reporter:datatype="link"/>
			<field name="simple_reporter" reporter:datatype="bool"/>
			<field name="children" oils_persist:virtual="true" reporter:datatype="link"/>
			<field name="outputs" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="au"/>
			<link field="parent" reltype="has_a" key="id" map="" class="rof"/>
			<link field="children" reltype="has_many" key="parent" map="" class="rof"/>
			<link field="share_with" reltype="has_a" key="id" map="" class="aou"/>
			<link field="outputs" reltype="has_many" key="folder" map="" class="rs"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</create>
				<retrieve permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</retrieve>
				<update permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</update>
				<delete permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="rtf" controller="open-ils.reporter-store open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="reporter::template_folder" oils_persist:tablename="reporter.template_folder" reporter:label="Template Folder">
		<fields oils_persist:primary="id" oils_persist:sequence="reporter.template_folder_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="parent" reporter:datatype="link"/>
			<field name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field name="create_time" reporter:datatype="timestamp"/>
			<field name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field name="shared" reporter:datatype="bool"/>
			<field name="share_with" reporter:datatype="link"/>
			<field name="simple_reporter" reporter:datatype="bool"/>
			<field name="children" oils_persist:virtual="true" reporter:datatype="link"/>
			<field name="templates" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="au"/>
			<link field="parent" reltype="has_a" key="id" map="" class="rtf"/>
			<link field="children" reltype="has_many" key="parent" map="" class="rtf"/>
			<link field="share_with" reltype="has_a" key="id" map="" class="aou"/>
			<link field="templates" reltype="has_many" key="folder" map="" class="rt"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</create>
				<retrieve permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</retrieve>
				<update permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</update>
				<delete permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="rrf" controller="open-ils.reporter-store open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="reporter::report_folder" oils_persist:tablename="reporter.report_folder" reporter:label="Report Folder">
		<fields oils_persist:primary="id" oils_persist:sequence="reporter.report_folder_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="parent" reporter:datatype="link"/>
			<field name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field name="create_time" reporter:datatype="timestamp"/>
			<field name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field name="shared" reporter:datatype="bool"/>
			<field name="share_with" reporter:datatype="link"/>
			<field name="simple_reporter" reporter:datatype="bool"/>
			<field name="children" oils_persist:virtual="true" reporter:datatype="link"/>
			<field name="reports" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="au"/>
			<link field="parent" reltype="has_a" key="id" map="" class="rrf"/>
			<link field="children" reltype="has_many" key="parent" map="" class="rrf"/>
			<link field="share_with" reltype="has_a" key="id" map="" class="aou"/>
			<link field="reports" reltype="has_many" key="folder" map="" class="rr"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</create>
				<retrieve permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</retrieve>
				<update permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</update>
				<delete permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="rt" controller="open-ils.reporter-store open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="reporter::template" oils_persist:tablename="reporter.template" reporter:label="Template">
		<fields oils_persist:primary="id" oils_persist:sequence="reporter.template_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field name="create_time" reporter:datatype="timestamp"/>
			<field name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field name="data" reporter:datatype="text" oils_obj:required="true"/>
			<field name="folder" reporter:datatype="link" oils_obj:required="true"/>
			<field name="description" reporter:datatype="text"/>
			<field name="reports" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="au"/>
			<link field="folder" reltype="has_a" key="id" map="" class="rtf"/>
			<link field="reports" reltype="has_many" key="template" map="" class="rr"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</create>
				<retrieve permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</retrieve>
				<update permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</update>
				<delete permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="rr" controller="open-ils.reporter-store open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="reporter::report" oils_persist:tablename="reporter.report" reporter:label="Report">
		<fields oils_persist:primary="id" oils_persist:sequence="reporter.report_id_seq">
			<field name="id" reporter:datatype="id"/>
			<field name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field name="create_time" reporter:datatype="timestamp"/>
			<field name="template" reporter:datatype="link" oils_obj:required="true"/>
			<field name="data" reporter:datatype="text" oils_obj:required="true"/>
			<field name="folder" reporter:datatype="link" oils_obj:required="true"/>
			<field name="recur" reporter:datatype="bool"/>
			<field name="recurrence" reporter:datatype="interval"/>
			<field name="name" reporter:datatype="text"/>
			<field name="description" reporter:datatype="text"/>
			<field name="runs" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="au"/>
			<link field="template" reltype="has_a" key="id" map="" class="rt"/>
			<link field="folder" reltype="has_a" key="id" map="" class="rrf"/>
			<link field="runs" reltype="has_many" key="report" map="" class="rs"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</create>
				<retrieve permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</retrieve>
				<update permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</update>
				<delete permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="owner" field="home_ou"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="rs" controller="open-ils.reporter-store open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="reporter::schedule" oils_persist:tablename="reporter.schedule" reporter:label="Schedule">
		<fields oils_persist:primary="id" oils_persist:sequence="reporter.schedule_id_seq">
			<field reporter:label="Id" name="id" reporter:datatype="id"/>
			<field reporter:label="Runner" name="runner" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Start Time" name="start_time" reporter:datatype="timestamp"/>
			<field reporter:label="Finish Time" name="complete_time" reporter:datatype="timestamp"/>
			<field reporter:label="Run Time" name="run_time" reporter:datatype="timestamp"/>
			<field reporter:label="Email" name="email" reporter:datatype="text"/>
			<field reporter:label="Excel" name="excel_format" reporter:datatype="bool"/>
			<field reporter:label="CSV" name="csv_format" reporter:datatype="bool"/>
			<field reporter:label="HTML" name="html_format" reporter:datatype="bool"/>
			<field reporter:label="Error Code" name="error_code" reporter:datatype="int"/>
			<field reporter:label="Error Text" name="error_text" reporter:datatype="text"/>
			<field reporter:label="Report" name="report" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Folder" name="folder" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Pie Chart" name="chart_pie" reporter:datatype="bool"/>
			<field reporter:label="Bar Chart" name="chart_bar" reporter:datatype="bool"/>
			<field reporter:label="Line Chart" name="chart_line" reporter:datatype="bool"/>
			<field reporter:label="New Record Bucket" name="new_record_bucket" reporter:datatype="bool"/>
			<field reporter:label="Existing Record Bucket" name="existing_record_bucket" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="runner" reltype="has_a" key="id" map="" class="au"/>
			<link field="report" reltype="has_a" key="id" map="" class="rr"/>
			<link field="folder" reltype="has_a" key="id" map="" class="rof"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="runner" field="home_ou"/>
				</create>
				<retrieve permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="runner" field="home_ou"/>
				</retrieve>
				<update permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="runner" field="home_ou"/>
				</update>
				<delete permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="runner" field="home_ou"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="rcr" controller="open-ils.reporter-store open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="reporter::completed_reports" oils_persist:tablename="reporter.completed_reports" reporter:label="Completed Report Runs" oils_persist:readonly="true">
		<fields oils_persist:primary="run">
			<field reporter:label="Run" name="run" reporter:datatype="link"/>
			<field reporter:label="Report" name="report" reporter:datatype="link"/>
			<field reporter:label="Template" name="template" reporter:datatype="link"/>
			<field reporter:label="Template Owner" name="template_owner" reporter:datatype="link"/>
			<field reporter:label="Report Owner" name="report_owner" reporter:datatype="link"/>
			<field reporter:label="Runner" name="runner" reporter:datatype="link"/>
			<field reporter:label="Template Folder" name="template_folder" reporter:datatype="link"/>
			<field reporter:label="Report Folder" name="report_folder" reporter:datatype="link"/>
			<field reporter:label="Output Folder" name="output_folder" reporter:datatype="link"/>
			<field reporter:label="Report Name" name="report_name" reporter:datatype="text"/>
			<field reporter:label="Template Name" name="template_name" reporter:datatype="text"/>
			<field reporter:label="Start Time" name="start_time" reporter:datatype="text"/>
			<field reporter:label="Run Time" name="run_time" reporter:datatype="text"/>
			<field reporter:label="Finish Time" name="complete_time" reporter:datatype="text"/>
			<field reporter:label="Error Code" name="error_code" reporter:datatype="text"/>
			<field reporter:label="Error Text" name="error_text" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="run" reltype="has_a" key="id" map="" class="rs"/>
			<link field="report" reltype="has_a" key="id" map="" class="rr"/>
			<link field="template" reltype="has_a" key="id" map="" class="rt"/>
			<link field="template_owner" reltype="has_a" key="id" map="" class="au"/>
			<link field="report_owner" reltype="has_a" key="id" map="" class="au"/>
			<link field="runner" reltype="has_a" key="id" map="" class="au"/>
			<link field="template_folder" reltype="has_a" key="id" map="" class="rtf"/>
			<link field="report_folder" reltype="has_a" key="id" map="" class="rrf"/>
			<link field="output_folder" reltype="has_a" key="id" map="" class="rof"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="RUN_REPORTS RUN_SIMPLE_REPORTS">
					<context link="runner" field="home_ou"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="rmsr" controller="open-ils.reporter-store open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="reporter::materialized_simple_record" oils_persist:tablename="reporter.materialized_simple_record" reporter:label="Fast Simple Record Extracts">
		<fields oils_persist:primary="id">
			<field reporter:label="Record ID" name="id" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Fingerprint" name="fingerprint" reporter:datatype="text"/>
			<field reporter:label="Overall Record Quality" name="quality" reporter:datatype="int"/>
			<field reporter:label="TCN Source" name="tcn_source" reporter:datatype="text"/>
			<field reporter:label="TCN Value" name="tcn_value" reporter:datatype="text"/>
			<field reporter:label="Title Proper (normalized)" name="title" reporter:datatype="text"/>
			<field reporter:label="Author (normalized)" name="author" reporter:datatype="text"/>
			<field reporter:label="Publisher (normalized)" name="publisher" reporter:datatype="text"/>
			<field reporter:label="Publication Year (normalized)" name="pubdate" reporter:datatype="int"/>
			<field reporter:label="ISBN" name="isbn" reporter:datatype="text"/>
			<field reporter:label="ISSN" name="issn" reporter:datatype="text"/>
			<field reporter:label="Full Bibliographic record" name="biblio_record" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="biblio_record" reltype="might_have" key="id" map="" class="bre"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>
	<class id="rssr" controller="open-ils.reporter-store" oils_obj:fieldmapper="reporter::super_simple_record" oils_persist:tablename="reporter.super_simple_record" reporter:label="Simple Record Extracts">
		<fields oils_persist:primary="id">
			<field reporter:label="Record ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Fingerprint" name="fingerprint" reporter:datatype="text"/>
			<field reporter:label="Overall Record Quality" name="quality" reporter:datatype="int"/>
			<field reporter:label="TCN Source" name="tcn_source" reporter:datatype="text"/>
			<field reporter:label="TCN Value" name="tcn_value" reporter:datatype="text"/>
			<field reporter:label="Title Proper (normalized)" name="title" reporter:datatype="text"/>
			<field reporter:label="Author (normalized)" name="author" reporter:datatype="text"/>
			<field reporter:label="Publisher (normalized)" name="publisher" reporter:datatype="text"/>
			<field reporter:label="Publication Year (normalized)" name="pubdate" reporter:datatype="int"/>
			<field reporter:label="ISBN" name="isbn" reporter:datatype="text"/>
			<field reporter:label="ISSN" name="issn" reporter:datatype="text"/>
			<field reporter:label="Full Bibliographic record" name="biblio_record" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="biblio_record" reltype="might_have" key="id" map="" class="bre"/>
		</links>
	</class>
	<class id="rsr" controller="open-ils.reporter-store" oils_obj:fieldmapper="reporter::simple_record" oils_persist:tablename="reporter.simple_record" reporter:label="Simple Record">
		<fields oils_persist:primary="id">
			<field reporter:label="Record ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Metarecord" name="metarecord" reporter:datatype="link"/>
			<field reporter:label="Fingerprint" name="fingerprint"/>
			<field reporter:label="Overall Record Quality" name="quality" reporter:datatype="int"/>
			<field reporter:label="TCN Source" name="tcn_source" reporter:datatype="text"/>
			<field reporter:label="TCN Value" name="tcn_value" reporter:datatype="text"/>
			<field reporter:label="Title Proper (normalized)" name="title" reporter:datatype="text"/>
			<field reporter:label="Uniform Title (normalized)" name="uniform_title" reporter:datatype="text"/>
			<field reporter:label="Author (normalized)" name="author" reporter:datatype="text"/>
			<field reporter:label="Publisher (normalized)" name="publisher" reporter:datatype="text"/>
			<field reporter:label="Publication Year (normalized)" name="pubdate" reporter:datatype="int"/>
			<field reporter:label="Series Title (normalized)" name="series_title" reporter:datatype="text"/>
			<field reporter:label="Series Statement (normalized)" name="series_statement" reporter:datatype="text"/>
			<field reporter:label="Summary (normalized)" name="summary" reporter:datatype="text"/>
			<field reporter:label="ISBN" name="isbn" reporter:datatype="text"/>
			<field reporter:label="ISSN" name="issn" reporter:datatype="text"/>
			<field reporter:label="Topic Subjects (normalized)" name="topic_subject" reporter:datatype="text"/>
			<field reporter:label="Geographic Subjects (normalized)" name="geographic_subject" reporter:datatype="text"/>
			<field reporter:label="Genres (normalized)" name="genre" reporter:datatype="text"/>
			<field reporter:label="Personal Name Subjects (normalized)" name="name_subject" reporter:datatype="text"/>
			<field reporter:label="Corporate Name Subjects (normalized)" name="corporate_subject" reporter:datatype="text"/>
			<field reporter:label="External URI List (normalized)" name="external_uri" reporter:datatype="text"/>
			<field reporter:label="Full Bibliographic record" name="biblio_record" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="metarecord" reltype="has_a" key="id" map="" class="mmr"/>
			<link field="biblio_record" reltype="might_have" key="id" map="" class="bre"/>
		</links>
	</class>
	<class id="rud" controller="open-ils.reporter-store open-ils.cstore" oils_obj:fieldmapper="reporter::user_demographic" oils_persist:tablename="reporter.demographic" reporter:label="User Demographics">
		<fields oils_persist:primary="id">
			<field reporter:label="User ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Date of Birth" name="dob" reporter:datatype="timestamp"/>
			<field reporter:label="General Demographic Division" name="general_division" reporter:datatype="text"/>
			<field reporter:label="Detailed Age Division" name="age_division" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="id" reltype="might_have" key="id" map="" class="au"/>
		</links>
	</class>
	<class id="rcirct" controller="open-ils.reporter-store open-ils.cstore" oils_obj:fieldmapper="reporter::circulation_type" oils_persist:tablename="reporter.circ_type" reporter:label="Circulation Type">
		<fields oils_persist:primary="id">
			<field reporter:label="Circulation ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Circulation Type" name="type" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="id" reltype="might_have" key="id" map="" class="circ"/>
		</links>
	</class>
	<class id="rhrr" controller="open-ils.reporter-store open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="reporter::hold_request_record" oils_persist:tablename="reporter.hold_request_record" reporter:label="Hold Request Record">
		<fields oils_persist:primary="id">
			<field reporter:label="Hold ID" name="id" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Hold Target" name="target" reporter:datatype="int"/>
			<field reporter:label="Hold Request Type" name="hold_type" reporter:datatype="text"/>
			<field reporter:label="Target Bib Record" name="bib_record" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="id" reltype="might_have" key="id" map="" class="ahr"/>
			<link field="bib_record" reltype="has_a" key="id" map="" class="bre"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_HOLD">
					<context link="id" field="pickup_lib"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="rxbt" controller="open-ils.reporter-store" oils_obj:fieldmapper="reporter::xact_billing_totals" oils_persist:tablename="reporter.xact_billing_totals" reporter:label="Transaction Billing Totals">
		<fields oils_persist:primary="xact">
			<field reporter:label="Transaction ID" name="xact" reporter:datatype="int"/>
			<field reporter:label="Unvoided Billing Amount" name="unvoided" reporter:datatype="money"/>
			<field reporter:label="Voided Billing Amount" name="voided" reporter:datatype="money"/>
			<field reporter:label="Total Billing Amount" name="total" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="xact" reltype="might_have" key="id" map="" class="mbt"/>
		</links>
	</class>
	<class id="rxpt" controller="open-ils.reporter-store" oils_obj:fieldmapper="reporter::xact_paid_totals" oils_persist:tablename="reporter.xact_paid_totals" reporter:label="Transaction Paid Totals">
		<fields oils_persist:primary="xact">
			<field reporter:label="Transaction ID" name="xact" reporter:datatype="int"/>
			<field reporter:label="Unvoided Paid Amount" name="unvoided" reporter:datatype="money"/>
			<field reporter:label="Voided (Returned) Paid Amount" name="voided" reporter:datatype="money"/>
			<field reporter:label="Total Paid Amount" name="total" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="xact" reltype="might_have" key="id" map="" class="mbt"/>
		</links>
	</class>
	<class id="ergbhu" controller="open-ils.reporter-store" oils_obj:fieldmapper="extend_reporter::global_bibs_by_holding_update" oils_persist:tablename="extend_reporter.global_bibs_by_holding_update" reporter:label="Bib IDs by Holding Add/Delete Time (OCLC batch update)">
		<fields oils_persist:primary="id">
			<field reporter:label="Bib ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Update Time" name="holding_update" reporter:datatype="timestamp"/>
			<field reporter:label="Update Type" name="update_type" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="bre"/>
		</links>
	</class>
	<class id="erfcc" controller="open-ils.reporter-store open-ils.pcrud" oils_obj:fieldmapper="extend_reporter::full_circ_count" oils_persist:tablename="extend_reporter.full_circ_count" reporter:label="Total Circulation Count, Including Legacy">
		<fields oils_persist:primary="id">
			<field reporter:label="Item ID" name="id" reporter:datatype="int"/>
			<field reporter:label="Total Circulation Count" name="circ_count" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="acp"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="STAFF_LOGIN">
					<context link="id" field="circ_lib"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>
	<class id="erccpo" controller="open-ils.reporter-store" oils_obj:fieldmapper="extend_reporter::copy_count_per_org" oils_persist:tablename="extend_reporter.copy_count_per_org" reporter:label="Library Holdings Count with Deleted">
		<fields oils_persist:primary="bibid">
			<field reporter:label="Bib Record" name="bibid" reporter:datatype="id"/>
			<field reporter:label="Circulation Library" name="circ_lib" reporter:datatype="link"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="link"/>
			<field reporter:label="Last Edit Date" name="last_edit_time" reporter:datatype="timestamp"/>
			<field reporter:label="Has Only Deleted Items 0/1" name="has_only_deleted_copies" reporter:datatype="int"/>
			<field reporter:label="Total deleted items" name="deleted_count" reporter:datatype="int"/>
			<field reporter:label="Total visible items" name="visible_count" reporter:datatype="int"/>
			<field reporter:label="Total items attached" name="total_count" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="bibid" reltype="has_a" key="id" map="" class="bre"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>
	<class id="rcsv" controller="open-ils.reporter-store" oils_obj:fieldmapper="reporter::copy_statistics_view" oils_persist:tablename="reporter.copy_statistics_view" reporter:label="Item Statistics View">
		<fields oils_persist:primary="copy_id">
			<field reporter:label="Item ID" name="copy_id" reporter:datatype="link"/>
			<field reporter:label="Owning Library Link" name="owning_lib_id" reporter:datatype="link"/>
			<field reporter:label="Consortium: Last Circulation Date" name="consortium_last_circ_date" reporter:datatype="timestamp"/>
			<field reporter:label="System: Last Circulation Date" name="system_last_circ_date" reporter:datatype="timestamp"/>
			<field reporter:label="Branch: Last Circulation Date" name="branch_last_circ_date" reporter:datatype="timestamp"/>
			<field reporter:label="Consortium: Last Checkin Date" name="consortium_last_checkin_date" reporter:datatype="timestamp"/>
			<field reporter:label="System: Last Checkin Date" name="system_last_checkin_date" reporter:datatype="timestamp"/>
			<field reporter:label="Branch: Last Checkin Date" name="branch_last_checkin_date" reporter:datatype="timestamp"/>
			<field reporter:label="Consortium: Last Due Date" name="consortium_last_due_date" reporter:datatype="timestamp"/>
			<field reporter:label="System: Last Due Date" name="system_last_due_date" reporter:datatype="timestamp"/>
			<field reporter:label="Branch: Last Due Date" name="branch_last_due_date" reporter:datatype="timestamp"/>
			<field reporter:label="Consortium: Month-to-Date Circulation" name="consortium_month_to_date_circ" reporter:datatype="int"/>
			<field reporter:label="System: Month-to-Date Circulation" name="system_month_to_date_circ" reporter:datatype="int"/>
			<field reporter:label="Branch: Month-to-Date Circulation" name="branch_month_to_date_circ" reporter:datatype="int"/>
			<field reporter:label="Consortium: Year-to-Date Circulation" name="consortium_year_to_date_circ" reporter:datatype="int"/>
			<field reporter:label="System: Year-to-Date Circulation" name="system_year_to_date_circ" reporter:datatype="int"/>
			<field reporter:label="Branch: Year-to-Date Circulation" name="branch_year_to_date_circ" reporter:datatype="int"/>
			<field reporter:label="Consortium: Lifetime Circulation" name="consortium_lifetime_circ" reporter:datatype="int"/>
			<field reporter:label="System: Lifetime Circulation" name="system_lifetime_circ" reporter:datatype="int"/>
			<field reporter:label="Branch: Lifetime Circulation" name="branch_lifetime_circ" reporter:datatype="int"/>
			<field reporter:label="Consortium: Current Title Hold Count" name="consortium_current_title_hold_count" reporter:datatype="int"/>
			<field reporter:label="System: Current Title Hold Count" name="system_current_title_hold_count" reporter:datatype="int"/>
			<field reporter:label="Branch: Current Title Hold Count" name="branch_current_title_hold_count" reporter:datatype="int"/>
			<field reporter:label="Consortium: Lifetime Title Hold Count" name="consortium_lifetime_holds" reporter:datatype="int"/>
			<field reporter:label="System: Lifetime Title Hold Count" name="system_lifetime_holds" reporter:datatype="int"/>
			<field reporter:label="Branch: Lifetime Title Hold Count" name="branch_lifetime_holds" reporter:datatype="int"/>
			<field reporter:label="Consortium: Lifetime Transits" name="consortium_lifetime_transits" reporter:datatype="int"/>
			<field reporter:label="System: Lifetime Outbound Transits" name="system_lifetime_transits" reporter:datatype="int"/>
			<field reporter:label="Branch: Lifetime Outbound Transits" name="branch_lifetime_transits" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="copy_id" reltype="has_a" key="id" map="" class="acp"/>
			<link field="owning_lib_id" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>
	<class id="acqdf" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::distribution_formula" oils_persist:tablename="acq.distribution_formula" reporter:label="Distribution Formula">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.distribution_formula_id_seq">
			<field reporter:label="Formula ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Formula Owner" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Formula Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Skip Count" name="skip_count" reporter:datatype="int"/>
			<field reporter:label="Entries" name="entries" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Use Count" name="use_count" oils_persist:virtual="true" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="entries" reltype="has_many" key="formula" map="" class="acqdfe"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ACQ_DISTRIB_FORMULA" context_field="owner"/>
				<retrieve permission="CREATE_PURCHASE_ORDER ADMIN_ACQ_DISTRIB_FORMULA" context_field="owner"/>
				<update permission="ADMIN_ACQ_DISTRIB_FORMULA" context_field="owner"/>
				<delete permission="ADMIN_ACQ_DISTRIB_FORMULA" context_field="owner"/>
			</actions>
		</permacrud>
	</class>
	<class id="acqdfe" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::distribution_formula_entry" oils_persist:tablename="acq.distribution_formula_entry" reporter:label="Distribution Formula Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.distribution_formula_entry_id_seq">
			<field reporter:label="Entry ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Formula ID" name="formula" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Position" name="position" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Item Count" name="item_count" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Location" name="location" reporter:datatype="link"/>
			<field reporter:label="Fund" name="fund" reporter:datatype="link"/>
			<field reporter:label="Circulation Modifier" name="circ_modifier" reporter:datatype="link"/>
			<field reporter:label="Collection Code" name="collection_code" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="formula" reltype="has_a" key="id" map="" class="acqdf"/>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="location" reltype="has_a" key="id" map="" class="acpl"/>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
			<link field="circ_modifier" reltype="has_a" key="code" map="" class="ccm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ACQ_DISTRIB_FORMULA">
					<context link="formula" field="owner"/>
				</create>
				<retrieve permission="ADMIN_ACQ_DISTRIB_FORMULA">
					<context link="formula" field="owner"/>
				</retrieve>
				<update permission="ADMIN_ACQ_DISTRIB_FORMULA">
					<context link="formula" field="owner"/>
				</update>
				<delete permission="ADMIN_ACQ_DISTRIB_FORMULA">
					<context link="formula" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="acqdfa" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::distribution_formula_application" oils_persist:tablename="acq.distribution_formula_application" reporter:label="Distribution Formula Application">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.distribution_formula_application_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Create Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Distribution Formula" name="formula" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Lineitem" name="lineitem" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="formula" reltype="has_a" key="id" map="" class="acqdf"/>
			<link field="lineitem" reltype="has_a" key="id" map="" class="jub"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_PURCHASE_ORDER">
					<context link="formula" field="owner"/>
				</create>
				<retrieve permission="CREATE_PURCHASE_ORDER">
					<context link="formula" field="owner"/>
				</retrieve>
				<update permission="CREATE_PURCHASE_ORDER">
					<context link="formula" field="owner"/>
				</update>
				<delete permission="CREATE_PURCHASE_ORDER">
					<context link="formula" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="acqda" controller="open-ils.cstore" oils_obj:fieldmapper="acq::debit_attribution" oils_persist:tablename="acq.debit_attribution" reporter:label="Debit Attribution">
		<fields oils_persist:primary="id">
			<field reporter:label="Debit Attribution ID" name="id" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Fund Debit" name="fund_debit" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Debit Amount" name="debit_amount" reporter:datatype="money" oils_obj:required="true"/>
			<field reporter:label="Funding Source Credit" name="funding_source_credit" reporter:datatype="link"/>
			<field reporter:label="Credit Amount" name="credit_amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="fund_debit" reltype="has_a" key="id" map="" class="acqfdeb"/>
			<link field="funding_source_credit" reltype="has_a" key="id" map="" class="acqfscred"/>
		</links>
	</class>

	<class id="acqclt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::claim_type" oils_persist:tablename="acq.claim_type" reporter:label="Claim Type">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.claim_type_id_seq">
			<field reporter:label="Claim Type ID" name="id" reporter:datatype="id" reporter:selector="code"/>
			<field reporter:label="Owner" name="org_unit" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Code" name="code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ACQ_CLAIM_TYPE" context_field="org_unit"/>
				<retrieve permission="ADMIN_ACQ_CLAIM_TYPE ADMIN_ACQ_CLAIM VIEW_CLAIM MANAGE_CLAIM" context_field="org_unit"/>
				<update permission="ADMIN_ACQ_CLAIM_TYPE" context_field="org_unit"/>
				<delete permission="ADMIN_ACQ_CLAIM_TYPE" context_field="org_unit"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqclet" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::claim_event_type" oils_persist:tablename="acq.claim_event_type" reporter:label="Claim Event Type" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.claim_event_type_id_seq">
			<field reporter:label="Claim Event Type ID" name="id" reporter:datatype="id" reporter:selector="code"/>
			<field reporter:label="Owner" name="org_unit" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Code" name="code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Library Initiated" name="library_initiated" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ACQ_CLAIM_EVENT_TYPE" context_field="org_unit"/>
				<retrieve permission="ADMIN_ACQ_CLAIM_EVENT_TYPE ADMIN_ACQ_CLAIM VIEW_CLAIM MANAGE_CLAIM" context_field="org_unit"/>
				<update permission="ADMIN_ACQ_CLAIM_EVENT_TYPE" context_field="org_unit"/>
				<delete permission="ADMIN_ACQ_CLAIM_EVENT_TYPE" context_field="org_unit"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqcl" controller="open-ils.cstore" oils_obj:fieldmapper="acq::claim" oils_persist:tablename="acq.claim" reporter:label="Claim">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.claim_id_seq">
			<field reporter:label="Claim ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Claim Type" name="type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Lineitem Detail" name="lineitem_detail" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="type" reltype="has_a" key="id" map="" class="acqclt"/>
			<link field="lineitem_detail" reltype="has_a" key="id" map="" class="acqlid"/>
		</links>
	</class>

	<class id="acqcle" controller="open-ils.cstore" oils_obj:fieldmapper="acq::claim_event" oils_persist:tablename="acq.claim_event" reporter:label="Claim Event">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.claim_event_id_seq">
			<field reporter:label="Claim Event ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Claim Event Type" name="type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Claim ID" name="claim" reporter:datatype="link"/>
			<field reporter:label="Event Date" name="event_date" reporter:datatype="timestamp"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="type" reltype="has_a" key="id" map="" class="acqclet"/>
			<link field="claim" reltype="has_a" key="id" map="" class="acqcl"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
		</links>
	</class>

	<class id="acqscl" controller="open-ils.cstore" oils_obj:fieldmapper="acq::serial_claim" oils_persist:tablename="acq.serial_claim" reporter:label="Serial Claim">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.serial_claim_id_seq">
			<field reporter:label="Claim ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Claim Type" name="type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Serial Item" name="item" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="type" reltype="has_a" key="id" map="" class="acqclt"/>
			<link field="item" reltype="has_a" key="id" map="" class="sitem"/>
		</links>
	</class>

	<class id="acqscle" controller="open-ils.cstore" oils_obj:fieldmapper="acq::serial_claim_event" oils_persist:tablename="acq.serial_claim_event" reporter:label="Serial Claim Event">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.serial_claim_event_id_seq">
			<field reporter:label="Claim Event ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Claim Event Type" name="type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Claim ID" name="claim" reporter:datatype="link"/>
			<field reporter:label="Event Date" name="event_date" reporter:datatype="timestamp"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Note" name="note" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="type" reltype="has_a" key="id" map="" class="acqclet"/>
			<link field="claim" reltype="has_a" key="id" map="" class="acqscl"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
		</links>
	</class>

	<class id="acqclp" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::claim_policy" oils_persist:tablename="acq.claim_policy" reporter:label="Claim Policy" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.claim_policy_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Owner" name="org_unit" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Claim Policy Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CLAIM_POLICY" context_field="org_unit"/>
				<retrieve permission="ADMIN_CLAIM_POLICY VIEW_PROVIDER" context_field="org_unit"/>
				<update permission="ADMIN_CLAIM_POLICY" context_field="org_unit"/>
				<delete permission="ADMIN_CLAIM_POLICY" context_field="org_unit"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqclpaouv" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::claim_policy_action_org_unit_view" oils_persist:readonly="true" reporter:label="Claim Policy Action Org Unit View">
		<oils_persist:source_definition><![CDATA[
			SELECT id, claim_policy, action_interval, action,
				(SELECT org_unit FROM acq.claim_policy cp WHERE cp.id = cpa.claim_policy) AS claim_policy_org_unit,
				(SELECT org_unit FROM acq.claim_event_type cet WHERE cet.id = cpa.action) AS action_org_unit
			FROM acq.claim_policy_action cpa
			]]></oils_persist:source_definition>
		<fields oils_persist:primary="id" oils_persist:sequence="acq.claim_policy_action_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="action"/>
			<field reporter:label="Claim Policy" name="claim_policy" reporter:datatype="link"/>
			<field reporter:label="Action Interval" name="action_interval" reporter:datatype="interval"/>
			<field reporter:label="Action (Event Type)" name="action" reporter:datatype="link"/>
			<field reporter:label="Claim Policy Org Unit" name="claim_policy_org_unit" reporter:datatype="org_unit"/>
			<field reporter:label="Claim Event Type Org Unit" name="action_org_unit" reporter:datatype="org_unit"/>
		</fields>
		<links>
			<link field="claim_policy" reltype="has_a" key="id" map="" class="acqclp"/>
			<link field="action" reltype="has_a" key="id" map="" class="acqclet"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="ADMIN_CLAIM_POLICY VIEW_PROVIDER">
					<context link="claim_policy" field="org_unit"/>
                </retrieve>
			</actions>
		</permacrud>
	</class>

	<class id="acqclpa" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::claim_policy_action" oils_persist:tablename="acq.claim_policy_action" reporter:label="Claim Policy Action">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.claim_policy_action_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="action"/>
			<field reporter:label="Claim Policy" name="claim_policy" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Action Interval" name="action_interval" reporter:datatype="interval" oils_obj:required="true"/>
			<field reporter:label="Action (Event Type)" name="action" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="claim_policy" reltype="has_a" key="id" map="" class="acqclp"/>
			<link field="action" reltype="has_a" key="id" map="" class="acqclet"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CLAIM_POLICY">
					<context link="claim_policy" field="org_unit"/>
				</create>
				<retrieve permission="ADMIN_CLAIM_POLICY VIEW_PROVIDER">
					<context link="claim_policy" field="org_unit"/>
				</retrieve>
				<update permission="ADMIN_CLAIM_POLICY">
					<context link="claim_policy" field="org_unit"/>
				</update>
				<delete permission="ADMIN_CLAIM_POLICY">
					<context link="claim_policy" field="org_unit"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="stgu" controller="open-ils.cstore" oils_obj:fieldmapper="staging::user_stage" oils_persist:tablename="staging.user_stage" reporter:label="User Stage">
		<fields oils_persist:primary="row_id" oils_persist:sequence="staging.user_stage_row_id_seq">
			<field reporter:label="Row ID" name="row_id" reporter:datatype="id"/>
			<field reporter:label="Create Date" name="row_date" reporter:datatype="timestamp"/>
			<field reporter:label="Username" name="usrname" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Main (Profile) Permission Group" name="profile" reporter:datatype="text"/>
			<field reporter:label="Email Address" name="email" reporter:datatype="text"/>
			<field reporter:label="Password" name="passwd" reporter:datatype="text"/>
			<field reporter:label="Primary Identification Type" name="ident_type" reporter:datatype="int"/>
			<field reporter:label="First Name" name="first_given_name" reporter:datatype="text"/>
			<field reporter:label="Middle Name" name="second_given_name" reporter:datatype="text"/>
			<field reporter:label="Last Name" name="family_name" reporter:datatype="text"/>
			<field reporter:label="Daytime Phone" name="day_phone" reporter:datatype="text"/>
			<field reporter:label="Evening Phone" name="evening_phone" reporter:datatype="text"/>
			<field reporter:label="Home Library" name="home_ou" reporter:datatype="int"/>
			<field reporter:label="Date of Birth" name="dob" reporter:datatype="text"/>
			<field reporter:label="Complete" name="complete" reporter:datatype="bool"/>
			<field reporter:label="Requesting User" name="requesting_usr" reporter:datatype="link"/>
						<field reporter:label="Preferred First Name" name="pref_first_given_name" reporter:datatype="text"/>
						<field reporter:label="Preferred Middle Name" name="pref_second_given_name" reporter:datatype="text"/>
						<field reporter:label="Preferred Last Name" name="pref_family_name" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="requesting_usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="home_ou" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>

	<class id="stgc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="staging::card_stage" oils_persist:tablename="staging.card_stage" reporter:label="Card Stage">
		<fields oils_persist:primary="row_id" oils_persist:sequence="staging.card_stage_row_id_seq">
			<field reporter:label="Row ID" name="row_id" reporter:datatype="id"/>
			<field reporter:label="Row Date" name="row_date" reporter:datatype="timestamp"/>
			<field reporter:label="Username" name="usrname" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Barcode" name="barcode" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Complete" name="complete" reporter:datatype="bool"/>
		</fields>
	</class>

	<class id="stgma" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="staging::mailing_address_stage" oils_persist:tablename="staging.mailing_address_stage" reporter:label="Mailing Address Stage">
		<fields oils_persist:primary="row_id" oils_persist:sequence="staging.mailing_address_stage_row_id_seq">
			<field reporter:label="Row ID" name="row_id" reporter:datatype="id"/>
			<field reporter:label="Row Date" name="row_date" reporter:datatype="timestamp"/>
			<field reporter:label="Username" name="usrname" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Street (1)" name="street1" reporter:datatype="text"/>
			<field reporter:label="Street (2)" name="street2" reporter:datatype="text"/>
			<field reporter:label="City" name="city" reporter:datatype="text"/>
			<field reporter:label="County" name="county" reporter:datatype="text"/>
			<field reporter:label="State" name="state" reporter:datatype="text"/>
			<field reporter:label="Country" name="country" reporter:datatype="text"/>
			<field reporter:label="Postal Code" name="post_code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Complete" name="complete" reporter:datatype="bool"/>
		</fields>
	</class>

	<class id="stgba" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="staging::billing_address_stage" oils_persist:tablename="staging.billing_address_stage" reporter:label="Billing Address Stage">
		<fields oils_persist:primary="row_id" oils_persist:sequence="staging.mailing_address_stage_row_id_seq">
			<field reporter:label="Row ID" name="row_id" reporter:datatype="id"/>
			<field reporter:label="Row Date" name="row_date" reporter:datatype="timestamp"/>
			<field reporter:label="Username" name="usrname" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Street (1)" name="street1" reporter:datatype="text"/>
			<field reporter:label="Street (2)" name="street2" reporter:datatype="text"/>
			<field reporter:label="City" name="city" reporter:datatype="text"/>
			<field reporter:label="County" name="county" reporter:datatype="text"/>
			<field reporter:label="State" name="state" reporter:datatype="text"/>
			<field reporter:label="Country" name="country" reporter:datatype="text"/>
			<field reporter:label="Postal Code" name="post_code" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Complete" name="complete" reporter:datatype="bool"/>
		</fields>
	</class>

	<class id="stgsc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="staging::statcat_stage" oils_persist:tablename="staging.statcat_stage" reporter:label="Statistical Category Stage">
		<fields oils_persist:primary="row_id" oils_persist:sequence="staging.statcat_stage_row_id_seq">
			<field reporter:label="Row ID" name="row_id" reporter:datatype="id"/>
			<field reporter:label="Row Date" name="row_date" reporter:datatype="timestamp"/>
			<field reporter:label="Username" name="usrname" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Stat Cat ID" name="statcat" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Stat Cat Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Complete" name="complete" reporter:datatype="bool"/>
		</fields>
	</class>

	<class id="stgs" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="staging::setting_stage" oils_persist:tablename="staging.setting_stage" reporter:label="User Setting Stage">
		<fields oils_persist:primary="row_id" oils_persist:sequence="staging.setting_stage_row_id_seq">
			<field reporter:label="Row ID" name="row_id" reporter:datatype="id"/>
			<field reporter:label="Row Date" name="row_date" reporter:datatype="timestamp"/>
			<field reporter:label="Username" name="usrname" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="User Setting Code" name="setting" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="User Setting Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Complete" name="complete" reporter:datatype="bool"/>
		</fields>
	</class>

	<class id="afsg" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::fieldset_group" oils_persist:tablename="action.fieldset_group" reporter:label="Fieldset Group">
		<fields oils_persist:primary="id" oils_persist:sequence="action.fieldset_group_id_seq">
			<field reporter:label="Fieldset Group ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Fieldset Group Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Creation Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Complete Time" name="complete_time" reporter:datatype="timestamp"/>
			<field reporter:label="Container ID" name="container" reporter:datatype="int" oils_obj:required="true"/> <!-- not an fkey because could be on multiple tables -->
			<field reporter:label="Container Type" name="container_type" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Rollback Group" name="rollback_group" reporter:datatype="link"/>
			<field reporter:label="Rollback Time" name="rollback_time" reporter:datatype="timestamp"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="rollback_group" reltype="has_a" key="id" map="" class="afsg"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_FIELDSET_GROUP ADMIN_FIELDSET_GROUP" context_field="owning_lib" owning_user="creator"/>
				<retrieve permission="RETRIEVE_FIELDSET_GROUP ADMIN_FIELDSET_GROUP" context_field="owning_lib" owning_user="creator"/>
				<update permission="UPDATE_FIELDSET_GROUP ADMIN_FIELDSET_GROUP" context_field="owning_lib" owning_user="creator"/>
				<delete permission="DELETE_FIELDSET_GROUP ADMIN_FIELDSET_GROUP" context_field="owning_lib" owning_user="creator"/>
			</actions>
		</permacrud>
	</class>

	<class id="afs" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::fieldset" oils_persist:tablename="action.fieldset" reporter:label="Fieldset">
		<fields oils_persist:primary="id" oils_persist:sequence="action.fieldset_id_seq">
			<field reporter:label="Fieldset ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Status" name="status" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Creation Time" name="creation_time" reporter:datatype="timestamp"/>
			<field reporter:label="Scheduled Time" name="scheduled_time" reporter:datatype="timestamp"/>
			<field reporter:label="Applied Time" name="applied_time" reporter:datatype="timestamp"/>
			<field reporter:label="Class Name" name="classname" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Fieldset Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Stored Query" name="stored_query" reporter:datatype="link"/>
			<field reporter:label="Primary Key Value" name="pkey_value" reporter:datatype="text"/>
			<field reporter:label="Fieldset Group" name="fieldset_group" reporter:datatype="link"/>
			<field reporter:label="Error Message" name="error_msg" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="au"/>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="stored_query" reltype="has_a" key="id" map="" class="qsq"/>
			<link field="fieldset_group" reltype="has_a" key="id" map="" class="afsg"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="CREATE_FIELDSET ADMIN_FIELDSET" context_field="owning_lib" owning_user="owner"/>
				<retrieve permission="RETRIEVE_FIELDSET ADMIN_FIELDSET" context_field="owning_lib" owning_user="owner"/>
				<update permission="UPDATE_FIELDSET ADMIN_FIELDSET" context_field="owning_lib" owning_user="owner"/>
				<delete permission="DELETE_FIELDSET ADMIN_FIELDSET" context_field="owning_lib" owning_user="owner"/>
			</actions>
		</permacrud>
	</class>

	<class id="afscv" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::fieldset_col_val" oils_persist:tablename="action.fieldset_col_val" reporter:label="Fieldset Column Value">
		<fields oils_persist:primary="id" oils_persist:sequence="action.fieldset_col_val_id_seq">
			<field reporter:label="Column Value ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Fieldset ID" name="fieldset" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Column Name" name="col" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Column Value" name="val" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="fieldset" reltype="has_a" key="id" map="" class="afs"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1"> <!-- NOTE: foreign context does not support owning_user today -->
			<actions>
				<create permission="CREATE_FIELDSET_ENTRY ADMIN_FIELDSET_ENTRY">
					<context link="fieldset" field="owning_lib"/>
				</create>
				<retrieve permission="RETRIEVE_FIELDSET_ENTRY ADMIN_FIELDSET_ENTRY">
					<context link="fieldset" field="owning_lib"/>
				</retrieve>
				<update permission="UPDATE_FIELDSET_ENTRY ADMIN_FIELDSET_ENTRY">
					<context link="fieldset" field="owning_lib"/>
				</update>
				<delete permission="DELETE_FIELDSET_ENTRY ADMIN_FIELDSET_ENTRY">
					<context link="fieldset" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="aufhl" controller="open-ils.cstore" oils_obj:fieldmapper="action::unfulfilled_hold_loops" oils_persist:tablename="action.unfulfilled_hold_loops" oils_persist:readonly="true">
		<fields>
			<field reporter:label="Hold ID" name="hold" reporter:datatype="link"/>
			<field reporter:label="Circulating Library" name="circ_lib" reporter:datatype="link"/>
			<field reporter:label="Loop Count" name="count" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="hold" reltype="has_a" key="id" map="" class="ahr"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>

	<class id="aufhml" controller="open-ils.cstore" oils_obj:fieldmapper="action::unfulfilled_hold_min_loop" oils_persist:tablename="action.unfulfilled_hold_min_loop" oils_persist:readonly="true">
		<fields>
			<field reporter:label="Hold ID" name="hold" reporter:datatype="link"/>
			<field reporter:label="Min Loop" name="min" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="hold" reltype="has_a" key="id" map="" class="ahr"/>
		</links>
	</class>

	<class id="aufhil" controller="open-ils.cstore" oils_obj:fieldmapper="action::unfulfilled_hold_innermost_loop" oils_persist:tablename="action.unfulfilled_hold_innermost_loop" oils_persist:readonly="true">
		<fields>
			<field reporter:label="Hold ID" name="hold" reporter:datatype="link"/>
			<field reporter:label="Circulating Library" name="circ_lib" reporter:datatype="link"/>
			<field reporter:label="Loop Count" name="count" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="hold" reltype="has_a" key="id" map="" class="ahr"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>

	<class id="aufhmxl" controller="open-ils.cstore" oils_obj:fieldmapper="action::unfulfilled_hold_max_loop" oils_persist:tablename="action.unfulfilled_hold_max_loop" oils_persist:readonly="true">
		<fields>
			<field reporter:label="Hold ID" name="hold" reporter:datatype="link"/>
			<field reporter:label="Max Loop" name="max" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="hold" reltype="has_a" key="id" map="" class="ahr"/>
		</links>
	</class>

	<class id="aufhol" controller="open-ils.cstore" oils_obj:fieldmapper="action::unfulfilled_hold_outermost_loop" oils_persist:readonly="true">
		<oils_persist:source_definition><![CDATA[

		SELECT  DISTINCT l.*
		  FROM  action.unfulfilled_hold_loops l
				JOIN action.unfulfilled_hold_max_loop m USING (hold)
		  WHERE l.count = m.max

		]]></oils_persist:source_definition>
		<fields>
			<field reporter:label="Hold ID" name="hold" reporter:datatype="link"/>
			<field reporter:label="Circulating Library" name="circ_lib" reporter:datatype="link"/>
			<field reporter:label="Loop Count" name="count" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="hold" reltype="has_a" key="id" map="" class="ahr"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>

	<class id="qsq" controller="open-ils.cstore" oils_obj:fieldmapper="query::stored_query" oils_persist:tablename="query.stored_query" reporter:label="Stored Query">
		<fields oils_persist:primary="id" oils_persist:sequence="query.stored_query_id_seq">
			<field reporter:label="Query ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Query type" name="type" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Use ALL" name="use_all" reporter:datatype="bool"/>
			<field reporter:label="Use DISTINCT" name="use_distinct" reporter:datatype="bool"/>
			<field reporter:label="FROM Clause" name="from_clause" reporter:datatype="link"/>
			<field reporter:label="WHERE Clause" name="where_clause" reporter:datatype="link"/>
			<field reporter:label="HAVING Clause" name="having_clause" reporter:datatype="link"/>
			<field reporter:label="LIMIT count" name="limit_count" reporter:datatype="link"/>
			<field reporter:label="OFFSET count" name="offset_count" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="from_clause" reltype="has_a" key="id" map="" class="qfr"/>
			<link field="having_clause" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="where_clause" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="limit_count" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="offset_count" reltype="has_a" key="id" map="" class="qxp"/>
		</links>
	</class>

	<class id="qseq" controller="open-ils.cstore" oils_obj:fieldmapper="query::query_sequence" oils_persist:tablename="query.query_sequence" reporter:label="Query Sequence">
		<fields oils_persist:primary="id" oils_persist:sequence="query.query_sequence_id_seq">
			<field reporter:label="Query Seq ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Parent Query" name="parent_query" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Child Query" name="child_query" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="parent_query" reltype="has_a" key="id" map="" class="qsq"/>
			<link field="child_query" reltype="has_a" key="id" map="" class="qsq"/>
		</links>
	</class>

	<class id="qdt" controller="open-ils.cstore" oils_obj:fieldmapper="query::datatype" oils_persist:tablename="query.datatype" reporter:label="Datatype">
		<fields oils_persist:primary="id" oils_persist:sequence="query.datatype_id_seq">
			<field reporter:label="Datatype ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Datatype Name" name="datatype_name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Is Numeric" name="is_numeric" reporter:datatype="bool"/>
			<field reporter:label="Is Composite" name="is_composite" reporter:datatype="bool"/>
		</fields>
		<links>
		</links>
	</class>

	<class id="qsf" controller="open-ils.cstore" oils_obj:fieldmapper="query::subfield" oils_persist:tablename="query.subfield" reporter:label="Subfield">
		<fields oils_persist:primary="id" oils_persist:sequence="query.subfield_id_seq">
			<field reporter:label="Subfield ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Composite Type" name="composite_type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Subfield Type" name="subfield_type" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="composite_type" reltype="has_a" key="id" map="" class="qdt"/>
			<link field="subfield_type" reltype="has_a" key="id" map="" class="qdt"/>
		</links>
	</class>
	
	<class id="qfs" controller="open-ils.cstore" oils_obj:fieldmapper="query::function_sig" oils_persist:tablename="query.function_sig" reporter:label="Function Signature">
		<fields oils_persist:primary="id" oils_persist:sequence="query.function_sig_id_seq">
			<field reporter:label="Function Signature ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Function Name" name="function_name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Return Type" name="return_type" reporter:datatype="link"/>
			<field reporter:label="Is Aggregate" name="is_aggregate" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="return_type" reltype="has_a" key="id" map="" class="qdt"/>
		</links>
	</class>
	
	<class id="qfpd" controller="open-ils.cstore" oils_obj:fieldmapper="query::function_param_def" oils_persist:tablename="query.function_param_def" reporter:label="Function Parameter Definition">
		<fields oils_persist:primary="id" oils_persist:sequence="query.function_param_def_id_seq">
			<field reporter:label="Function Param Def ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Function ID" name="function_id" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Datatype" name="datatype" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="function_id" reltype="has_a" key="id" map="" class="qfs"/>
			<link field="datatype" reltype="has_a" key="id" map="" class="qdt"/>
		</links>
	</class>

	<class id="qbv" controller="open-ils.cstore" oils_obj:fieldmapper="query::bind_variable" oils_persist:tablename="query.bind_variable" reporter:label="Bind Variable">
		<fields oils_persist:primary="name">
			<field reporter:label="Name" name="name" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field reporter:label="Type" name="type" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Default Value" name="default_value" reporter:datatype="text"/>
			<field reporter:label="Actual Value" name="actual_value" oils_persist:virtual="true" reporter:datatype="text"/>
		</fields>
		<links>
		</links>
	</class>

	<class id="qxp" controller="open-ils.cstore" oils_obj:fieldmapper="query::expression" oils_persist:tablename="query.expression" reporter:label="Expression">
		<fields oils_persist:primary="id" oils_persist:sequence="query.expression_id_seq">
			<field reporter:label="Expression ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Expression Type" name="type" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Is Parenthesized" name="parenthesize" reporter:datatype="bool"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Literal" name="literal" reporter:datatype="text"/>
			<field reporter:label="Table Alias" name="table_alias" reporter:datatype="text"/>
			<field reporter:label="Column Name" name="column_name" reporter:datatype="text"/>
			<field reporter:label="Left Operand" name="left_operand" reporter:datatype="link"/>
			<field reporter:label="Operator" name="operator" reporter:datatype="text"/>
			<field reporter:label="Right Operand" name="right_operand" reporter:datatype="link"/>
			<field reporter:label="Function ID" name="function_id" reporter:datatype="link"/>
			<field reporter:label="Subquery" name="subquery" reporter:datatype="link"/>
			<field reporter:label="Cast Type" name="cast_type" reporter:datatype="link"/>
			<field reporter:label="Negate?" name="negate" reporter:datatype="bool"/>
			<field reporter:label="Bind Variable" name="bind_variable" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="left_operand" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="right_operand" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="function_id" reltype="has_a" key="id" map="" class="qfs"/>
			<link field="subquery" reltype="has_a" key="id" map="" class="qsq"/>
			<link field="cast_type" reltype="has_a" key="id" map="" class="qdt"/>
			<link field="bind_variable" reltype="has_a" key="name" map="" class="qbv"/>
		</links>
	</class>

	<class id="qcb" controller="open-ils.cstore" oils_obj:fieldmapper="query::case_branch" oils_persist:tablename="query.case_branch" reporter:label="Case Branch">
		<fields oils_persist:primary="id" oils_persist:sequence="query.case_branch_id_seq">
			<field reporter:label="Case Branch ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Condition" name="condition" reporter:datatype="link"/>
			<field reporter:label="Result" name="result" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="condition" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="result" reltype="has_a" key="id" map="" class="qxp"/>
		</links>
	</class>

	<class id="qfr" controller="open-ils.cstore" oils_obj:fieldmapper="query::from_relation" oils_persist:tablename="query.from_relation" reporter:label="From Relation">
		<fields oils_persist:primary="id" oils_persist:sequence="query.from_relation_id_seq">
			<field reporter:label="From Relation ID" name="id" reporter:datatype="id"/>
			<field reporter:label="From Relation Type" name="type" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Table Name" name="table_name" reporter:datatype="text"/>
			<field reporter:label="Class Name" name="class_name" reporter:datatype="text"/>
			<field reporter:label="Subquery ID" name="subquery" reporter:datatype="link"/>
			<field reporter:label="Function Call ID" name="function_call" reporter:datatype="link"/>
			<field reporter:label="Table Alias" name="table_alias" reporter:datatype="text"/>
			<field reporter:label="Parent Relation ID" name="parent_relation" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Join Type" name="join_type" reporter:datatype="text"/>
			<field reporter:label="On Clause ID" name="on_clause" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="subquery" reltype="has_a" key="id" map="" class="qsq"/>
			<link field="function_call" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="parent_relation" reltype="has_a" key="id" map="" class="qfr"/>
			<link field="on_clause" reltype="has_a" key="id" map="" class="qxp"/>
		</links>
	</class>

	<class id="qrc" controller="open-ils.cstore" oils_obj:fieldmapper="query::record_column" oils_persist:tablename="query.record_column" reporter:label="Record Column">
		<fields oils_persist:primary="id" oils_persist:sequence="query.record_column_id_seq">
			<field reporter:label="Record Column ID" name="id" reporter:datatype="id"/>
			<field reporter:label="From Relation ID" name="from_relation" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Column Name" name="column_name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Column Type" name="column_type" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="from_relation" reltype="has_a" key="id" map="" class="qfr"/>
			<link field="column_type" reltype="has_a" key="id" map="" class="qdt"/>
		</links>
	</class>

	<class id="qsi" controller="open-ils.cstore" oils_obj:fieldmapper="query::select_item" oils_persist:tablename="query.select_item" reporter:label="Select Item">
		<fields oils_persist:primary="id" oils_persist:sequence="query.select_item_id_seq">
			<field reporter:label="Select Item ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Stored Query ID" name="stored_query" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Expression" name="expression" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Column Alias" name="column_alias" reporter:datatype="text"/>
			<field reporter:label="Is Grouped By" name="grouped_by" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="stored_query" reltype="has_a" key="id" map="" class="qsq"/>
			<link field="expression" reltype="has_a" key="id" map="" class="qxp"/>
		</links>
	</class>

	<class id="qobi" controller="open-ils.cstore" oils_obj:fieldmapper="query::order_by_item" oils_persist:tablename="query.order_by_item" reporter:label="Order By Item">
		<fields oils_persist:primary="id" oils_persist:sequence="query.order_by_item_id_seq">
			<field reporter:label="Order By Item ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Stored Query ID" name="stored_query" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Expression" name="expression" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="stored_query" reltype="has_a" key="id" map="" class="qsq"/>
			<link field="expression" reltype="has_a" key="id" map="" class="qxp"/>
		</links>
	</class>

	<class id="xbet" controller="open-ils.cstore" oils_obj:fieldmapper="query::expr_xbet" oils_persist:tablename="query.expr_xbet" reporter:label="Between Expression">
		<fields oils_persist:primary="id" oils_persist:sequence="query.expression_id_seq">
			<field reporter:label="Expression ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Parenthesized" name="parenthesize" reporter:datatype="bool"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Left Operand" name="left_operand" reporter:datatype="link"/>
			<field reporter:label="Negate?" name="negate" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="left_operand" reltype="has_a" key="id" map="" class="qxp"/>
		</links>
	</class>

	<class id="xbind" controller="open-ils.cstore" oils_obj:fieldmapper="query::expr_xbind" oils_persist:tablename="query.expr_xbind" reporter:label="Bind Variable Expression">
		<fields oils_persist:primary="id" oils_persist:sequence="query.expression_id_seq">
			<field reporter:label="Expression ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Parenthesized" name="parenthesize" reporter:datatype="bool"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Bind Variable" name="bind_variable" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="bind_variable" reltype="has_a" key="name" map="" class="qbv"/>
		</links>
	</class>

	<class id="xbool" controller="open-ils.cstore" oils_obj:fieldmapper="query::expr_xbool" oils_persist:tablename="query.expr_xbool" reporter:label="Boolean Expression">
		<fields oils_persist:primary="id" oils_persist:sequence="query.expression_id_seq">
			<field reporter:label="Expression ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Parenthesized" name="parenthesize" reporter:datatype="bool"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Literal" name="literal" reporter:datatype="text"/>
			<field reporter:label="Negate?" name="negate" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
		</links>
	</class>

	<class id="xcase" controller="open-ils.cstore" oils_obj:fieldmapper="query::expr_xcase" oils_persist:tablename="query.expr_xcase" reporter:label="Case Expression">
		<fields oils_persist:primary="id" oils_persist:sequence="query.expression_id_seq">
			<field reporter:label="Expression ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Parenthesized" name="parenthesize" reporter:datatype="bool"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Left Operand" name="left_operand" reporter:datatype="link"/>
			<field reporter:label="Negate?" name="negate" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="left_operand" reltype="has_a" key="id" map="" class="qxp"/>
		</links>
	</class>

	<class id="xcast" controller="open-ils.cstore" oils_obj:fieldmapper="query::expr_xcast" oils_persist:tablename="query.expr_xcast" reporter:label="Cast Expression">
		<fields oils_persist:primary="id" oils_persist:sequence="query.expression_id_seq">
			<field reporter:label="Expression ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Parenthesized" name="parenthesize" reporter:datatype="bool"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Left Operand" name="left_operand" reporter:datatype="link"/>
			<field reporter:label="Cast Type" name="cast_type" reporter:datatype="link"/>
			<field reporter:label="Negate?" name="negate" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="left_operand" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="cast_type" reltype="has_a" key="id" map="" class="qdt"/>
		</links>
	</class>

	<class id="xcol" controller="open-ils.cstore" oils_obj:fieldmapper="query::expr_xcol" oils_persist:tablename="query.expr_xcol" reporter:label="Column Expression">
		<fields oils_persist:primary="id" oils_persist:sequence="query.expression_id_seq">
			<field reporter:label="Expression ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Parenthesized" name="parenthesize" reporter:datatype="bool"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Table Alias" name="table_alias" reporter:datatype="text"/>
			<field reporter:label="Column Name" name="column_name" reporter:datatype="text"/>
			<field reporter:label="Negate?" name="negate" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
		</links>
	</class>

	<class id="xex" controller="open-ils.cstore" oils_obj:fieldmapper="query::expr_xex" oils_persist:tablename="query.expr_xex" reporter:label="Exists Expression">
		<fields oils_persist:primary="id" oils_persist:sequence="query.expression_id_seq">
			<field reporter:label="Expression ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Parenthesized" name="parenthesize" reporter:datatype="bool"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Subquery" name="subquery" reporter:datatype="link"/>
			<field reporter:label="Negate?" name="negate" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="subquery" reltype="has_a" key="id" map="" class="qsq"/>
		</links>
	</class>

	<class id="xfunc" controller="open-ils.cstore" oils_obj:fieldmapper="query::expr_xfunc" oils_persist:tablename="query.expr_xfunc" reporter:label="Function Expression">
		<fields oils_persist:primary="id" oils_persist:sequence="query.expression_id_seq">
			<field reporter:label="Expression ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Parenthesized" name="parenthesize" reporter:datatype="bool"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Column Name" name="column_name" reporter:datatype="text"/>
			<field reporter:label="Function ID" name="function_id" reporter:datatype="link"/>
			<field reporter:label="Negate?" name="negate" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="function_id" reltype="has_a" key="id" map="" class="qfs"/>
		</links>
	</class>

	<class id="xin" controller="open-ils.cstore" oils_obj:fieldmapper="query::expr_xin" oils_persist:tablename="query.expr_xin" reporter:label="In Expression">
		<fields oils_persist:primary="id" oils_persist:sequence="query.expression_id_seq">
			<field reporter:label="Expression ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Parenthesized" name="parenthesize" reporter:datatype="bool"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Left Operand" name="left_operand" reporter:datatype="link"/>
			<field reporter:label="Subquery" name="subquery" reporter:datatype="link"/>
			<field reporter:label="Negate?" name="negate" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="left_operand" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="subquery" reltype="has_a" key="id" map="" class="qsq"/>
		</links>
	</class>

	<class id="xisnull" controller="open-ils.cstore" oils_obj:fieldmapper="query::expr_xisnull" oils_persist:tablename="query.expr_xisnull" reporter:label="IS NULL Expression">
		<fields oils_persist:primary="id" oils_persist:sequence="query.expression_id_seq">
			<field reporter:label="Expression ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Parenthesized" name="parenthesize" reporter:datatype="bool"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Left Operand" name="left_operand" reporter:datatype="link"/>
			<field reporter:label="Negate?" name="negate" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="left_operand" reltype="has_a" key="id" map="" class="qxp"/>
		</links>
	</class>

	<class id="xnull" controller="open-ils.cstore" oils_obj:fieldmapper="query::expr_xnull" oils_persist:tablename="query.expr_xnull" reporter:label="Null Expression">
		<fields oils_persist:primary="id" oils_persist:sequence="query.expression_id_seq">
			<field reporter:label="Expression ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Parenthesized" name="parenthesize" reporter:datatype="bool"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Negate?" name="negate" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
		</links>
	</class>

	<class id="xnum" controller="open-ils.cstore" oils_obj:fieldmapper="query::expr_xnum" oils_persist:tablename="query.expr_xnum" reporter:label="Number Expression">
		<fields oils_persist:primary="id" oils_persist:sequence="query.expression_id_seq">
			<field reporter:label="Expression ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Parenthesized" name="parenthesize" reporter:datatype="bool"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Literal" name="literal" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
		</links>
	</class>

	<class id="xop" controller="open-ils.cstore" oils_obj:fieldmapper="query::expr_xop" oils_persist:tablename="query.expr_xop" reporter:label="Operator Expression">
		<fields oils_persist:primary="id" oils_persist:sequence="query.expression_id_seq">
			<field reporter:label="Expression ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Parenthesized" name="parenthesize" reporter:datatype="bool"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Left Operand" name="left_operand" reporter:datatype="link"/>
			<field reporter:label="Operator" name="operator" reporter:datatype="text"/>
			<field reporter:label="Right Operand" name="right_operand" reporter:datatype="link"/>
			<field reporter:label="Negate?" name="negate" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="left_operand" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="right_operand" reltype="has_a" key="id" map="" class="qxp"/>
		</links>
	</class>

	<class id="xser" controller="open-ils.cstore" oils_obj:fieldmapper="query::expr_xser" oils_persist:tablename="query.expr_xser" reporter:label="Operator Expression">
		<fields oils_persist:primary="id" oils_persist:sequence="query.expression_id_seq">
			<field reporter:label="Expression ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Parenthesized" name="parenthesize" reporter:datatype="bool"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Operator" name="operator" reporter:datatype="text"/>
			<field reporter:label="Negate?" name="negate" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
		</links>
	</class>

	<class id="xstr" controller="open-ils.cstore" oils_obj:fieldmapper="query::expr_xstr" oils_persist:tablename="query.expr_xstr" reporter:label="String Expression">
		<fields oils_persist:primary="id" oils_persist:sequence="query.expression_id_seq">
			<field reporter:label="Expression ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Parenthesized" name="parenthesize" reporter:datatype="bool"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Literal" name="literal" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
		</links>
	</class>

	<class id="xsubq" controller="open-ils.cstore" oils_obj:fieldmapper="query::expr_xsubq" oils_persist:tablename="query.expr_xsubq" reporter:label="Subquery Expression">
		<fields oils_persist:primary="id" oils_persist:sequence="query.expression_id_seq">
			<field reporter:label="Expression ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Parenthesized" name="parenthesize" reporter:datatype="bool"/>
			<field reporter:label="Parent Expression" name="parent_expr" reporter:datatype="link"/>
			<field reporter:label="Sequence Number" name="seq_no" reporter:datatype="int"/>
			<field reporter:label="Subquery" name="subquery" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="parent_expr" reltype="has_a" key="id" map="" class="qxp"/>
			<link field="subquery" reltype="has_a" key="id" map="" class="qsq"/>
		</links>
	</class>

	<class id="bmpc" controller="open-ils.cstore" oils_obj:fieldmapper="biblio::marc21_physical_characteristics" oils_persist:tablename="biblio.marc21_physical_characteristics" reporter:label="MARC21 Physical Characteristics" oils_persist:field_safe="true" oils_persist:readonly="true">
		<fields oils_persist:primary="id">
			<field reporter:label="Temp ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Type" name="ptype" reporter:datatype="link"/>
			<field reporter:label="Subfield" name="subfield" reporter:datatype="link"/>
			<field reporter:label="Value" name="value" reporter:datatype="link"/>
			<field reporter:label="Record" name="record" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="ptype" reltype="has_a" key="id" map="" class="cmpctm"/>
			<link field="subfield" reltype="has_a" key="id" map="" class="cmpcsm"/>
			<link field="value" reltype="has_a" key="id" map="" class="cmpcvm"/>
			<link field="record" reltype="has_a" key="id" map="" class="bre"/>
		</links>
	</class>

	<class id="cmfpm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::marc21_ff_pos_map" oils_persist:tablename="config.marc21_ff_pos_map" reporter:label="MARC21 Fixed Field Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="config.marc21_ff_pos_map_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Fixed Field" name="fixed_field" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Tag" name="tag" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Record Type" name="rec_type" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Start Postion" name="start_pos" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Length" name="length" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Default Value" name="default_val" reporter:datatype="text"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="cmpctm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::marc21_physical_characteristic_type_map" oils_persist:tablename="config.marc21_physical_characteristic_type_map" reporter:label="MARC21 Physical Characteristic Type Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="ptype_key">
			<field reporter:label="Type Key" name="ptype_key" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="cmpcsm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::marc21_physical_characteristic_subfield_map" oils_persist:tablename="config.marc21_physical_characteristic_subfield_map" reporter:label="MARC21 Physical Characteristic Subfield Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="config.marc21_physical_characteristic_subfield_map_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Type Key" name="ptype_key" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Subfield" name="subfield" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Start Postion" name="start_pos" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Length" name="length" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="ptype_key" reltype="has_a" key="id" map="" class="cmpctm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="cmpcvm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::marc21_physical_characteristic_value_map" oils_persist:tablename="config.marc21_physical_characteristic_value_map" reporter:label="MARC21 Physical Characteristic Value Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="config.marc21_physical_characteristic_value_map_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Subfield" name="ptype_subfield" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="ptype_subfield" reltype="has_a" key="id" map="" class="cmpcsm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<!-- This is what you see in Catalog -> Link Checker -->
	<class id="uvsa" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="url_verify::sessions_and_attempts" reporter:label="Combined URL Verify Sessions and Batches View" oils_persist:readonly="true">
		<oils_persist:source_definition><![CDATA[
			SELECT
				coalesce(uvva.id,-uvs.id) as id,
				uvs.id as session_id,
				uvs.name,
				uvs.owning_lib,
				uvs.creator,
				uvs.container,
				uvs.create_time,
				uvs.search,
				(select string_agg(xpath,',')
				 from url_verify.url_selector uvus
				 where uvus.session = uvs.id
				 group by session) as selectors,
				uvva.id as batch_id,
				uvva.usr,
				uvva.start_time,
				uvva.finish_time
			FROM
				url_verify.session uvs
			LEFT JOIN
				url_verify.verification_attempt uvva
			ON
				(uvs.id = uvva.session)
		]]></oils_persist:source_definition>
		<fields oils_persist:primary="id">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Session ID" name="session_id" reporter:datatype="link"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Record Container" name="container" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Create Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Search Constraints" name="search" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Selectors" name="selectors" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Batch ID" name="batch_id" reporter:datatype="link"/>
			<field reporter:label="User" name="usr" reporter:datatype="link"/>
			<field reporter:label="Start Time" name="start_time" reporter:datatype="timestamp"/>
			<field reporter:label="Finish Time" name="finish_time" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="session_id" reltype="has_a" key="id" map="" class="uvs"/>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="container" reltype="has_a" key="id" map="" class="cbreb"/>
			<link field="batch_id" reltype="has_a" key="id" map="" class="uvva"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="URL_VERIFY" context_field="owning_lib"/>
			</actions>
		</permacrud>
	</class>

	<!-- This is what gets created with Catalog -> Link Checker -> New Session -->
	<class id="uvs" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="url_verify::session" oils_persist:tablename="url_verify.session" reporter:label="URL Verification Session">
		<fields oils_persist:primary="id" oils_persist:sequence="url_verify.session_id_seq">
			<field reporter:label="Session ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Record Container" name="container" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Create Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Search Constraints" name="search" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="URL Selectors" name="selectors" reporter:datatype="link" oils_persist:virtual="true"/>
			<field reporter:label="Verification Attempts" name="attempts" reporter:datatype="link" oils_persist:virtual="true"/>
		</fields>

		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="container" reltype="has_a" key="id" map="" class="cbreb"/>
			<link field="selectors" reltype="has_many" key="session" map="" class="uvus"/>
			<link field="attempts" reltype="has_many" key="session" map="" class="uvva"/>
		</links>

		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="URL_VERIFY" context_field="owning_lib"/>
				<retrieve permission="URL_VERIFY" context_field="owning_lib"/>
				<update permission="URL_VERIFY" context_field="owning_lib"/>
				<delete permission="URL_VERIFY" context_field="owning_lib"/>
			</actions>
		</permacrud>

	</class>

	<!-- A biblio bucket gets populated with search results from Catalog -> Link Checker -> New Session -->
	<class id="uvsbrem" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="url_verify::session_biblio_record_entry_map" oils_persist:readonly="true" reporter:label="URL Verify Session Biblio Record Entry Map">
		<oils_persist:source_definition><![CDATA[
			SELECT
				cbrebi.id AS id,  -- so we can have a pkey in our view
				uvs.id AS session,
				uvs.owning_lib,
				cbrebi.target_biblio_record_entry
			FROM url_verify.session uvs
			JOIN container.biblio_record_entry_bucket cbreb
				ON (uvs.container = cbreb.id)
			JOIN container.biblio_record_entry_bucket_item cbrebi
				ON (cbrebi.bucket = cbreb.id)
		]]></oils_persist:source_definition>
		<fields oils_persist:primary="id" oils_persist:sequence="container.biblio_record_entry_bucket_item_id_seq">
			<field reporter:label="Bucket Item ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Session" name="session" reporter:datatype="link"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Target Biblio Record Entry" name="target_biblio_record_entry" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="target_biblio_record_entry" reltype="has_a" key="id" map="" class="bre"/>
			<link field="session" reltype="has_a" key="id" map="" class="uvs"/>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="URL_VERIFY" context_field="owning_lib"/>
			</actions>
		</permacrud>
	</class>

	<!-- Also created with Catalog -> Link Checker -> New Session -->
	<class id="uvus" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="url_verify::url_selector" oils_persist:tablename="url_verify.url_selector" reporter:label="URL Verification URL Selector">
		<fields oils_persist:primary="id" oils_persist:sequence="url_verify.url_selector_id_seq">
			<field reporter:label="URL Selector ID" name="id" reporter:datatype="id" reporter:selector="xpath"/>
			<field reporter:label="XPath" name="xpath" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Session" name="session" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="URLs" name="urls" reporter:datatype="link" oils_persist:virtual="true"/>
		</fields>

		<links>
			<link field="session" reltype="has_a" key="id" map="" class="uvs"/>
			<link field="urls" reltype="has_many" key="id" map="" class="uvu"/>
		</links>

		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="URL_VERIFY">
					<context link="session" field="owning_lib"/>
				</create>
				<retrieve permission="URL_VERIFY">
					<context link="session" field="owning_lib"/>
				</retrieve>
				<update permission="URL_VERIFY">
					<context link="session" field="owning_lib"/>
				</update>
				<delete permission="URL_VERIFY">
					<context link="session" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>

	</class>

	<!-- URLs extracted by URL selectors -->
	<class id="uvu" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="url_verify::url" oils_persist:tablename="url_verify.url" reporter:label="URL Verification URL">
		<fields oils_persist:primary="id" oils_persist:sequence="url_verify.url_id_seq">
			<field reporter:label="URL ID" name="id" reporter:datatype="id" reporter:selector="full_url"/>
			<field reporter:label="Redirected From" name="redirect_from" reporter:datatype="link"/>
			<field reporter:label="Container Item" name="item" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Session" name="session" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="URL Selector" name="url_selector" reporter:datatype="link"/>
			<field reporter:label="Tag" name="tag" reporter:datatype="text"/>
			<field reporter:label="Subfield" name="subfield" reporter:datatype="text"/>
			<field reporter:label="Ordinal Position" name="ord" reporter:datatype="int"/>
			<field reporter:label="URL" name="full_url" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Scheme" name="scheme" reporter:datatype="text"/>
			<field reporter:label="Host" name="host" reporter:datatype="text"/>
			<field reporter:label="Domain" name="domain" reporter:datatype="text"/>
			<field reporter:label="TLD" name="tld" reporter:datatype="text"/>
			<field reporter:label="Path" name="path" reporter:datatype="text"/>
			<field reporter:label="Page" name="page" reporter:datatype="text"/>
			<field reporter:label="Query" name="query" reporter:datatype="text"/>
			<field reporter:label="Fragment" name="fragment" reporter:datatype="text"/>
			<field reporter:label="Verifications" name="verifications" reporter:datatype="link" oils_persist:virtual="true"/>
		</fields>

		<links>
			<link field="redirect_from" reltype="has_a" key="id" map="" class="uvu"/>
			<link field="item" reltype="has_a" key="id" map="" class="uvsbrem"/>
			<link field="session" reltype="has_a" key="id" map="" class="uvs"/>
			<link field="url_selector" reltype="has_a" key="id" map="" class="uvus"/>
			<link field="verifications" reltype="has_many" key="url" map="" class="uvuv"/>
		</links>

		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="URL_VERIFY">
					<context link="session" field="owning_lib"/>
				</create>
				<retrieve permission="URL_VERIFY">
					<context link="session" field="owning_lib"/>
				</retrieve>
				<update permission="URL_VERIFY">
					<context link="session" field="owning_lib"/>
				</update>
				<delete permission="URL_VERIFY">
					<context link="session" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>

	</class>

	<!-- What we now call Batches in the UI -->
	<class id="uvva" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="url_verify::verification_attempt" oils_persist:tablename="url_verify.verification_attempt" reporter:label="URL Verification Attempt">
		<fields oils_persist:primary="id" oils_persist:sequence="url_verify.verification_attempt_id_seq">
			<field reporter:label="Batch ID" name="id" reporter:datatype="id"/>
			<field reporter:label="User" name="usr" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Session" name="session" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Start Time" name="start_time" reporter:datatype="timestamp"/>
			<field reporter:label="Finish Time" name="finish_time" reporter:datatype="timestamp"/>
		</fields>

		<links>
			<link field="session" reltype="has_a" key="id" map="" class="uvs"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
		</links>

		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="URL_VERIFY">
					<context link="session" field="owning_lib"/>
				</create>
				<retrieve permission="URL_VERIFY">
					<context link="session" field="owning_lib"/>
				</retrieve>
				<update permission="URL_VERIFY">
					<context link="session" field="owning_lib"/>
				</update>
				<delete permission="URL_VERIFY">
					<context link="session" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>

	</class>

	<!-- what we now call Attempts in the UI -->
	<class id="uvuv" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="url_verify::url_verification" oils_persist:tablename="url_verify.url_verification" reporter:label="URL Verification">
		<fields oils_persist:primary="id" oils_persist:sequence="url_verify.url_verification_id_seq">
			<field reporter:label="Attempt ID" name="id" reporter:datatype="id"/>
			<field reporter:label="URL" name="url" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Batch" name="attempt" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Request Time" name="req_time" reporter:datatype="timestamp"/>
			<field reporter:label="Result Time" name="res_time" reporter:datatype="timestamp"/>
			<field reporter:label="Result Code" name="res_code" reporter:datatype="int"/>
			<field reporter:label="Result Text" name="res_text" reporter:datatype="text"/>
			<field reporter:label="Redirected To" name="redirect_to" reporter:datatype="link"/>
		</fields>

		<links>
			<link field="url" reltype="has_a" key="id" map="" class="uvu"/>
			<link field="attempt" reltype="has_a" key="id" map="" class="uvva"/>
			<link field="redirect_to" reltype="has_a" key="id" map="" class="uvu"/>
		</links>

		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="URL_VERIFY">
					<context link="attempt" jump="session" field="owning_lib"/>
				</create>
				<retrieve permission="URL_VERIFY">
					<context link="attempt" jump="session" field="owning_lib"/>
				</retrieve>
				<update permission="URL_VERIFY">
					<context link="attempt" jump="session" field="owning_lib"/>
				</update>
				<delete permission="URL_VERIFY">
					<context link="attempt" jump="session" field="owning_lib"/>
				</delete>
			</actions>
		</permacrud>

	</class>

	<class id="cfdi" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::filter_dialog_interface" oils_persist:tablename="config.filter_dialog_interface" reporter:label="FilterDialog Interface">
		<fields oils_persist:primary="key" oils_persist:sequence="config.filter_dialog_interface_pkey">
			<field reporter:label="Interface Key" name="key" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Description" name="description" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="filter_sets" reltype="has_many" key="interface" map="" class="cfdfs"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="cfdfs" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::filter_dialog_filter_set" oils_persist:tablename="config.filter_dialog_filter_set" reporter:label="FilterDialog Filter Set">
		<fields oils_persist:primary="id" oils_persist:sequence="config.filter_dialog_filter_set_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Interface" name="interface" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Create Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Filters" name="filters" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="interface" reltype="has_a" key="key" map="" class="cfdi"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="SAVED_FILTER_DIALOG_FILTERS" context_field="owning_lib"/>
				<retrieve permission="SAVED_FILTER_DIALOG_FILTERS" context_field="owning_lib"/>
				<update permission="SAVED_FILTER_DIALOG_FILTERS" context_field="owning_lib"/>
				<delete permission="SAVED_FILTER_DIALOG_FILTERS" context_field="owning_lib"/>
			</actions>
		</permacrud>

	</class>

	<class id="cmrtm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::marc21_rec_type_map" oils_persist:tablename="config.marc21_rec_type_map" reporter:label="MARC21 Record Type Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="code">
			<field reporter:label="Code" name="code" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Type Value" name="type_val" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="BLvl Value" name="blvl_val" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="rlcd" controller="open-ils.cstore open-ils.pcrud open-ils.reporter-store" oils_obj:fieldmapper="reporter::last_copy_deleted" oils_persist:readonly="true" reporter:core="true" reporter:label="Last Item Delete Time">
		<oils_persist:source_definition><![CDATA[

			SELECT  b.id,
					MAX(dcp.edit_date) AS last_delete_date
			 FROM   biblio.record_entry b
					JOIN asset.call_number cn ON (cn.record = b.id)
					JOIN asset.copy dcp ON (cn.id = dcp.call_number)
			 WHERE  NOT b.deleted
			 GROUP BY b.id
			 HAVING SUM( CASE WHEN NOT dcp.deleted THEN 1 ELSE 0 END) = 0 

		]]></oils_persist:source_definition>
		<fields oils_persist:primary="id" oils_persist:sequence="biblio.record_entry">
			<field reporter:label="Record ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Delete Date/Time" name="last_delete_date" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="bre"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="jubstlbl" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::li_state_label" oils_persist:tablename="acq.li_state_label" oils_persist:readonly="true" reporter:label="Line Item State Labels" oils_persist:field_safe="true">
		<fields oils_persist:primary="id">
			<field reporter:label="State ID" reporter:selector="label" name="id" reporter:datatype="text"/>
			<field reporter:label="State Label" name="label" oils_persist:i18n="true" reporter:datatype="text"/>
		</fields>
			<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="acqpostlbl" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::po_state_label" oils_persist:tablename="acq.po_state_label" oils_persist:readonly="true" reporter:label="PO State Labels">
		<fields oils_persist:primary="id">
			<field reporter:label="State ID" reporter:selector="label" name="id" reporter:datatype="text"/>
			<field reporter:label="State Label" name="label" oils_persist:i18n="true" reporter:datatype="text"/>
		</fields>
			<links/>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>


	<class id="rhcrpb" controller="open-ils.cstore open-ils.pcrud open-ils.reporter-store" oils_obj:fieldmapper="reporter::hold_copy_ratio_per_bib" oils_persist:readonly="true" reporter:core="true" reporter:label="Hold/Item Ratio per Bib">
		<oils_persist:source_definition><![CDATA[
				SELECT
					x.id,
					COALESCE( y.copy_count, 0 ) AS copy_count,
					x.hold_count AS hold_count,
					CASE WHEN y.copy_count = 0 THEN 'Infinity'::FLOAT ELSE x.hold_count::FLOAT/y.copy_count::FLOAT END AS hold_copy_ratio
				FROM
					(SELECT bib_record as id, count(DISTINCT ahr.id) AS hold_count
						FROM
							action.hold_request ahr
							JOIN reporter.hold_request_record rhrr USING (id)
						WHERE
							ahr.cancel_time IS NULL
							AND ahr.fulfillment_time IS NULL
						GROUP BY bib_record
					)x
					JOIN
					(SELECT bib_record as id, COALESCE(count(DISTINCT target_copy),0) as copy_count
						FROM
							action.hold_request ahr
							JOIN reporter.hold_request_record rhrr USING (id)
							LEFT JOIN action.hold_copy_map ahcm ON (ahr.id = ahcm.hold)
						WHERE
							ahr.cancel_time IS NULL
							AND ahr.fulfillment_time IS NULL
							AND ahr.capture_time IS NULL
							AND ahr.frozen IS FALSE
							-- Comment out the next line to count copies included from other bibs by metarecord holds
							AND ahr.hold_type != 'M'
						   GROUP BY bib_record
					)y
					USING (id)
		]]></oils_persist:source_definition>
		<fields oils_persist:primary="id" oils_persist:sequence="biblio.record_entry">
			<field reporter:label="Record ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Holdable Item Count" name="copy_count" reporter:datatype="int"/>
			<field reporter:label="Active Holds" name="hold_count" reporter:datatype="int"/>
			<field reporter:label="Hold/Item Ratio" name="hold_copy_ratio" reporter:datatype="float"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="bre"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="rhcrpbap" controller="open-ils.cstore open-ils.pcrud open-ils.reporter-store" oils_obj:fieldmapper="reporter::hold_copy_ratio_per_bib_and_pickup" oils_persist:readonly="true" reporter:label="Hold/Item Ratio per Bib and Pickup Library">
		<oils_persist:source_definition><![CDATA[
			SELECT *,
				CASE WHEN copy_count_at_pickup_library = 0 THEN 'Infinity'::FLOAT ELSE holds_at_pickup_library::FLOAT/copy_count_at_pickup_library END AS pickup_library_ratio,
				CASE WHEN copy_count_everywhere = 0 THEN 'Infinity'::FLOAT ELSE holds_everywhere::FLOAT/copy_count_everywhere END AS everywhere_ratio
			FROM
				(SELECT bib_record as id, pickup_lib, count(DISTINCT ahr.id) AS holds_at_pickup_library
					FROM
						action.hold_request ahr
						JOIN reporter.hold_request_record rhrr USING (id)
						LEFT JOIN action.hold_copy_map ahcm ON (ahr.id = ahcm.hold)
						LEFT JOIN asset.copy ac ON (ahcm.target_copy = ac.id AND ahr.pickup_lib = ac.circ_lib)
					WHERE
						ahr.cancel_time IS NULL
						AND ahr.fulfillment_time IS NULL
					GROUP BY bib_record, pickup_lib
				)x
				JOIN
				(SELECT bib_record as id, pickup_lib, COALESCE(count(DISTINCT ac.id),0) as copy_count_at_pickup_library
					FROM
						action.hold_request ahr
						JOIN reporter.hold_request_record rhrr USING (id)
						LEFT JOIN action.hold_copy_map ahcm ON (ahr.id = ahcm.hold)
						LEFT JOIN asset.copy ac ON (ahcm.target_copy = ac.id AND ahr.pickup_lib = ac.circ_lib)
					WHERE
						ahr.cancel_time IS NULL
						AND ahr.fulfillment_time IS NULL
						AND ahr.capture_time IS NULL
						AND ahr.frozen IS FALSE
						-- Comment out the next line to count copies included from other bibs by metarecord holds
						AND ahr.hold_type != 'M'
					GROUP BY bib_record, pickup_lib
				)y
				USING(id,pickup_lib)
				JOIN
				(SELECT bib_record as id, count(DISTINCT ahr.id) AS holds_everywhere
					FROM
						action.hold_request ahr
						JOIN reporter.hold_request_record rhrr USING (id)
					WHERE
						ahr.cancel_time IS NULL
						AND ahr.fulfillment_time IS NULL
					GROUP BY bib_record
				)z
				USING (id)
				JOIN
				(SELECT bib_record as id, COALESCE(count(DISTINCT target_copy),0) as copy_count_everywhere
					FROM
						action.hold_request ahr
						JOIN reporter.hold_request_record rhrr USING (id)
						LEFT JOIN action.hold_copy_map ahcm ON (ahr.id = ahcm.hold)
					WHERE
						ahr.cancel_time IS NULL
						AND ahr.fulfillment_time IS NULL
						AND ahr.capture_time IS NULL
						AND ahr.frozen IS FALSE
						-- Comment out the next line to count copies included from other bibs by metarecord holds
						AND ahr.hold_type != 'M'
						GROUP BY bib_record
				)u
				USING (id)
		]]></oils_persist:source_definition>
		<fields oils_persist:primary="id" oils_persist:sequence="biblio.record_entry">
			<field reporter:label="Record ID" name="id" reporter:datatype="link"/>
			<field reporter:label="Pickup Library" name="pickup_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Active Holds at Pickup Library" name="holds_at_pickup_library" reporter:datatype="int"/>
			<field reporter:label="Holdable Item Count at Pickup Library" name="copy_count_at_pickup_library" reporter:datatype="int"/>
			<field reporter:label="Active Holds Everywhere" name="holds_everywhere" reporter:datatype="int"/>
			<field reporter:label="Holdable Item Count Everywhere" name="copy_count_everywhere" reporter:datatype="int"/>
			<field reporter:label="Hold/Item Ratio at Pickup Library" name="pickup_library_ratio" reporter:datatype="float"/>
			<field reporter:label="Hold/Item Ratio Everywhere" name="everywhere_ratio" reporter:datatype="float"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="bre"/>
			<link field="pickup_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="rhcrpbah" controller="open-ils.cstore open-ils.pcrud open-ils.reporter-store" oils_obj:fieldmapper="reporter::hold_copy_ratio_per_bib_and_home" oils_persist:readonly="true" reporter:label="Hold/Item Ratio per Bib and Home Library">
		<oils_persist:source_definition><![CDATA[
			SELECT *,
				CASE WHEN copy_count_at_home_library = 0 THEN 'Infinity'::FLOAT ELSE holds_at_home_library::FLOAT/copy_count_at_home_library END AS home_library_ratio,
				CASE WHEN copy_count_everywhere = 0 THEN 'Infinity'::FLOAT ELSE holds_everywhere::FLOAT/copy_count_everywhere END AS everywhere_ratio
			FROM
				(SELECT bib_record as id, home_ou, count(DISTINCT ahr.id) AS holds_at_home_library
					FROM
						action.hold_request ahr
						JOIN actor.usr au ON (ahr.usr = au.id)
						JOIN reporter.hold_request_record rhrr ON (rhrr.id = ahr.id)
						LEFT JOIN action.hold_copy_map ahcm ON (ahr.id = ahcm.hold)
						LEFT JOIN asset.copy ac ON (ahcm.target_copy = ac.id AND au.home_ou = ac.circ_lib)
					WHERE
						ahr.cancel_time IS NULL
						AND ahr.fulfillment_time IS NULL
					GROUP BY bib_record, home_ou
				)x
				JOIN
				(SELECT bib_record as id, home_ou, COALESCE(count(DISTINCT ac.id),0) as copy_count_at_home_library
					FROM
						action.hold_request ahr
						JOIN actor.usr au ON (ahr.usr = au.id)
						JOIN reporter.hold_request_record rhrr ON (rhrr.id = ahr.id)
						LEFT JOIN action.hold_copy_map ahcm ON (ahr.id = ahcm.hold)
						LEFT JOIN asset.copy ac ON (ahcm.target_copy = ac.id AND au.home_ou = ac.circ_lib)
					WHERE
						ahr.cancel_time IS NULL
						AND ahr.fulfillment_time IS NULL
						AND ahr.capture_time IS NULL
						AND ahr.frozen IS FALSE
						-- Comment out the next line to count copies included from other bibs by metarecord holds
						AND ahr.hold_type != 'M'
					GROUP BY bib_record, home_ou
				)y
				USING (id,home_ou)
				JOIN
				(SELECT bib_record as id, count(DISTINCT ahr.id) AS holds_everywhere
					FROM
						action.hold_request ahr
						JOIN reporter.hold_request_record rhrr USING (id)
					WHERE
						ahr.cancel_time IS NULL
						AND ahr.fulfillment_time IS NULL
					GROUP BY bib_record
				)z
				USING (id)
				JOIN
				(SELECT bib_record as id, COALESCE(count(DISTINCT target_copy),0) as copy_count_everywhere
					FROM
						action.hold_request ahr
						JOIN reporter.hold_request_record rhrr USING (id)
						LEFT JOIN action.hold_copy_map ahcm ON (ahr.id = ahcm.hold)
					WHERE
						ahr.cancel_time IS NULL
						AND ahr.fulfillment_time IS NULL
						AND ahr.capture_time IS NULL
						AND ahr.frozen IS FALSE
						-- Comment out the next line to count copies included from other bibs by metarecord holds
						AND ahr.hold_type != 'M'
					GROUP BY bib_record
				)u
				USING (id)
	]]></oils_persist:source_definition>
	<fields oils_persist:primary="id" oils_persist:sequence="biblio.record_entry">
		<field reporter:label="Record ID" name="id" reporter:datatype="link"/>
		<field reporter:label="User Home Library" name="home_ou" reporter:datatype="org_unit"/>
		<field reporter:label="Active Holds at Home Library" name="holds_at_home_library" reporter:datatype="int"/>
		<field reporter:label="Holdable Item Count at Home Library" name="copy_count_at_home_library" reporter:datatype="int"/>
		<field reporter:label="Active Holds Everywhere" name="holds_everywhere" reporter:datatype="int"/>
		<field reporter:label="Holdable Item Count Everywhere" name="copy_count_everywhere" reporter:datatype="int"/>
		<field reporter:label="Hold/Item Ratio at Home Library" name="home_library_ratio" reporter:datatype="float"/>
		<field reporter:label="Hold/Item Ratio Everywhere" name="everywhere_ratio" reporter:datatype="float"/>
	</fields>
	<links>
		<link field="id" reltype="has_a" key="id" map="" class="bre"/>
		<link field="home_ou" reltype="has_a" key="id" map="" class="aou"/>
	</links>
	<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
		<actions>
			<retrieve/>
		</actions>
	</permacrud>
</class>

	<class id="rhcrpbapd" controller="open-ils.cstore open-ils.pcrud open-ils.reporter-store" oils_obj:fieldmapper="reporter::hold_copy_ratio_per_bib_and_pickup_desc" oils_persist:readonly="true" reporter:label="Hold/Item Ratio per Bib and Pickup Library (and Descendants) ">
		<oils_persist:source_definition><![CDATA[
			WITH flat_org_tree AS (
				SELECT  a.id, ARRAY_AGG(d.id) AS descendants
				  FROM  actor.org_unit a,
				        actor.org_unit_descendants(a.id) d
				  GROUP BY 1
			), counts_at_ou AS (
				SELECT a.id, a.pickup_lib_or_desc, a.holds_at_or_below, b.copy_count_at_or_below
				FROM
					(SELECT rhrr.bib_record AS id,
							aou.id AS pickup_lib_or_desc,
							COUNT(DISTINCT ahr.id) AS holds_at_or_below
					   FROM action.hold_request ahr
							JOIN reporter.hold_request_record rhrr USING (id)
							JOIN action.hold_copy_map ahcm ON (ahr.id = ahcm.hold)
							JOIN asset.copy ac ON (ahcm.target_copy = ac.id)
							JOIN flat_org_tree aou ON (array_position(aou.descendants,ac.circ_lib) IS NOT NULL AND array_position(aou.descendants,ahr.pickup_lib) IS NOT NULL)
					  WHERE ahr.cancel_time IS NULL AND ahr.fulfillment_time IS NULL
					  GROUP BY 1, 2
				) a
				JOIN
					(SELECT rhrr.bib_record AS id,
							aou.id AS pickup_lib_or_desc,
							COALESCE(COUNT(DISTINCT ahcm.target_copy),0) AS copy_count_at_or_below
					   FROM action.hold_request ahr
							JOIN reporter.hold_request_record rhrr USING (id)
							JOIN action.hold_copy_map ahcm ON (ahr.id = ahcm.hold)
							JOIN asset.copy ac ON (ahcm.target_copy = ac.id)
							JOIN flat_org_tree aou ON (array_position(aou.descendants,ac.circ_lib) IS NOT NULL AND array_position(aou.descendants,ahr.pickup_lib) IS NOT NULL)
					  WHERE ahr.cancel_time IS NULL AND ahr.fulfillment_time IS NULL AND ahr.capture_time IS NULL AND NOT ahr.frozen
							-- Comment out the next line to count copies included from other bibs by metarecord holds
							AND ahr.hold_type != 'M'
					  GROUP BY 1, 2
				) b
				USING (id,pickup_lib_or_desc)
			)
			SELECT x.id, x.pickup_lib_or_desc, x.holds_at_or_below, x.copy_count_at_or_below,
				   y.holds_everywhere, z.copy_count_everywhere,
				CASE WHEN copy_count_at_or_below = 0 THEN 'Infinity'::FLOAT ELSE x.holds_at_or_below::FLOAT/x.copy_count_at_or_below END AS hold_copy_ratio_at_or_below_ou,
				CASE WHEN copy_count_everywhere = 0 THEN 'Infinity'::FLOAT ELSE y.holds_everywhere::FLOAT/z.copy_count_everywhere END AS everywhere_ratio
			FROM counts_at_ou x
				JOIN
				(SELECT bib_record as id, count(DISTINCT ahr.id) AS holds_everywhere
					FROM
						action.hold_request ahr
						JOIN reporter.hold_request_record rhrr USING (id)
					WHERE
						ahr.cancel_time IS NULL
						AND ahr.fulfillment_time IS NULL
					GROUP BY bib_record
				)y
				USING (id)
				JOIN
				(SELECT bib_record as id, COALESCE(count(DISTINCT target_copy),0) as copy_count_everywhere
					FROM
						action.hold_request ahr
						JOIN reporter.hold_request_record rhrr USING (id)
						LEFT JOIN action.hold_copy_map ahcm ON (ahr.id = ahcm.hold)
					WHERE
						ahr.cancel_time IS NULL
						AND ahr.fulfillment_time IS NULL
						AND ahr.capture_time IS NULL
						AND ahr.frozen IS FALSE
						-- Comment out the next line to count copies included from other bibs by metarecord holds
						AND ahr.hold_type != 'M'
						GROUP BY bib_record
				)z
				USING (id)
		]]></oils_persist:source_definition>
		<fields oils_persist:primary="id" oils_persist:sequence="biblio.record_entry">
			<field reporter:label="Record ID" name="id" reporter:datatype="link"/>
			<field reporter:label="Pickup Library" name="pickup_lib_or_desc" reporter:datatype="org_unit"/>
			<field reporter:label="Active Holds at Pickup Library and its Descendants" name="holds_at_or_below" reporter:datatype="int"/>
			<field reporter:label="Holdable Item Count at Pickup Library and its Descendants" name="copy_count_at_or_below" reporter:datatype="int"/>
			<field reporter:label="Active Holds Everywhere" name="holds_everywhere" reporter:datatype="int"/>
			<field reporter:label="Holdable Item Count Everywhere" name="copy_count_everywhere" reporter:datatype="int"/>
			<field reporter:label="Hold/Item Ratio at Pickup Library and its Descendants" name="hold_copy_ratio_at_or_below_ou" reporter:datatype="float"/>
			<field reporter:label="Hold/Item Ratio Everywhere" name="everywhere_ratio" reporter:datatype="float"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="bre"/>
			<link field="pickup_lib_or_desc" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="rlc" controller="open-ils.cstore open-ils.pcrud open-ils.reporter-store" oils_obj:fieldmapper="reporter::last_circ_date" oils_persist:readonly="true" reporter:label="Last Circulation or Creation Date">
		<oils_persist:source_definition><![CDATA[
			SELECT
				ac.id,
				COALESCE(MAX(actac.xact_start), ac.create_date) AS last_circ_or_create,
				MAX(actac.xact_start) AS last_circ
			FROM asset.copy ac
				 LEFT JOIN action.all_circulation actac ON ac.id = actac.target_copy
			GROUP BY ac.id

			-- Alternate version, say if you have migrated last checkout information in extend_reporter.legacy_circ_timestamp:
			--SELECT
			--	ac.id,
			--	GREATEST(MAX(actac.xact_start), erlct.last_cko_ts, ac.create_date) AS last_circ_or_create,
			--	GREATEST(MAX(actac.xact_start), erlct.last_cko_ts) AS last_circ
			--FROM asset.copy ac
			--	 LEFT JOIN action.all_circulation actac ON ac.id = actac.target_copy
			--	 LEFT JOIN extend_reporter.legacy_circ_timestamp erlct ON ac.id = erlct.id
			--GROUP BY ac.id, ac.create_date, erlct.last_cko_ts
		]]></oils_persist:source_definition>
		<fields oils_persist:primary="id" oils_persist:sequence="biblio.record_entry">
			<field reporter:label="Item ID" name="id" reporter:datatype="link"/>
			<field reporter:label="Last Circulation or Creation Date" name="last_circ_or_create" reporter:datatype="timestamp"/>
			<field reporter:label="Last Circulation Date" name="last_circ" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="acp"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="ctcl" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::ts_config_list" oils_persist:tablename="config.ts_config_list" reporter:label="Text Search Configs">
		<fields oils_persist:primary="id">
			<field reporter:label="Text Search Config" reporter:selector="name" reporter:datatype="text" name="id" oils_obj:required="true"/>
			<field reporter:label="Text Search Config Name" reporter:datatype="text" name="name" oils_obj:required="true"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="cmcts" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::metabib_class_ts_map" oils_persist:tablename="config.metabib_class_ts_map" reporter:label="Metabib Class TS Map">
		<fields oils_persist:primary="id" oils_persist:sequence="config.metabib_class_ts_map_id_seq">
			<field reporter:label="Map ID" reporter:datatype="id" name="id"/>
			<field reporter:label="Metabib Class" reporter:datatype="text" name="field_class" oils_obj:required="true"/>
			<field reporter:label="Text Search Config" reporter:datatype="text" name="ts_config" oils_obj:required="true"/>
			<field reporter:label="Active?" reporter:datatype="bool" name="active"/>
			<field reporter:label="Index Weight" reporter:datatype="text" name="index_weight"/>
			<field reporter:label="Index Language" reporter:datatype="text" name="index_lang"/>
			<field reporter:label="Search Language" reporter:datatype="text" name="search_lang"/>
			<field reporter:label="Always Apply?" reporter:datatype="bool" name="always"/>
		</fields>
		<links>
			<link field="field_class" reltype="has_a" key="name" map="" class="cmc"/>
			<link field="ts_config" reltype="has_a" key="id" map="" class="ctcl"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_INDEX_NORMALIZER" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_INDEX_NORMALIZER" global_required="true"/>
				<delete permission="ADMIN_INDEX_NORMALIZER" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="cmfts" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::metabib_field_ts_map" oils_persist:tablename="config.metabib_field_ts_map" reporter:label="Metabib Field TS Map">
		<fields oils_persist:primary="id" oils_persist:sequence="config.metabib_field_ts_map_id_seq">
			<field reporter:label="Map ID" reporter:datatype="id" name="id"/>
			<field reporter:label="Metabib Field" reporter:datatype="text" name="metabib_field" oils_obj:required="true"/>
			<field reporter:label="Text Search Config" reporter:datatype="text" name="ts_config" oils_obj:required="true"/>
			<field reporter:label="Active?" reporter:datatype="bool" name="active"/>
			<field reporter:label="Index Weight" reporter:datatype="text" name="index_weight"/>
			<field reporter:label="Index Language" reporter:datatype="text" name="index_lang"/>
			<field reporter:label="Search Language" reporter:datatype="text" name="search_lang"/>
		</fields>
		<links>
			<link field="metabib_field" reltype="has_a" key="id" map="" class="cmf"/>
			<link field="ts_config" reltype="has_a" key="id" map="" class="ctcl"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_INDEX_NORMALIZER" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_INDEX_NORMALIZER" global_required="true"/>
				<delete permission="ADMIN_INDEX_NORMALIZER" global_required="true"/>
			</actions>
		</permacrud>
	</class>


	<!-- ********************************************************************************************************************* -->
	<!-- What follows is a set of example extensions that are useful for PINES.  Comment out or remove if you don't want them. -->
	<!-- ********************************************************************************************************************* -->
	<class id="rccc" controller="open-ils.reporter-store" oils_obj:fieldmapper="reporter::classic_current_circ" oils_persist:tablename="reporter.classic_current_circ" reporter:core="true" reporter:label="Classic Circulation View">
		<fields oils_persist:primary="id">
			<field reporter:label="Circulation" name="id" reporter:datatype="id"/>
			<field reporter:label="Library Circulation Location Short (Policy) Name" name="circ_lib" reporter:datatype="text"/>
			<field reporter:label="Library Circulation Location Link" name="circ_lib_id" reporter:datatype="org_unit"/>
			<field reporter:label="Circulation Date/Time" name="xact_start" reporter:datatype="timestamp"/>
			<field reporter:label="Circulation Type" name="circ_type" reporter:datatype="text"/>
			<field reporter:label="Item Link" name="copy_id" reporter:datatype="link"/>
			<field reporter:label="Circ Modifier" name="circ_modifier" reporter:datatype="text"/>
			<field reporter:label="Owning Library Short (Policy) Name" name="owning_lib_name" reporter:datatype="text"/>
			<field reporter:label="Item Language" name="language" reporter:datatype="text"/>
			<field reporter:label="Literary Form" name="lit_form" reporter:datatype="text"/>
			<field reporter:label="MARC Form" name="item_form" reporter:datatype="text"/>
			<field reporter:label="MARC Type" name="item_type" reporter:datatype="text"/>
			<field reporter:label="Shelving Location" name="shelving_location" reporter:datatype="text"/>
			<field reporter:label="Patron Profile Group" name="profile_group" reporter:datatype="text"/>
			<field reporter:label="Patron Age Demographic" name="demographic_general_division" reporter:datatype="text"/>
			<field reporter:label="Call Number Link" name="call_number" reporter:datatype="link"/>
			<field reporter:label="Call Number Label" name="call_number_label" reporter:datatype="text"/>
			<field reporter:label="Call Number Dewey/Prefix" name="dewey" reporter:datatype="text"/>
			<field reporter:label="Patron Link" name="patron_id" reporter:datatype="link"/>
			<field reporter:label="Patron Home Library Link" name="patron_home_lib" reporter:datatype="link"/>
			<field reporter:label="Patron Home Library Short (Policy) Name" name="patron_home_lib_shortname" reporter:datatype="text"/>
			<field reporter:label="Patron County" name="patron_county" reporter:datatype="text"/>
			<field reporter:label="Patron City" name="patron_city" reporter:datatype="text"/>
			<field reporter:label="Patron ZIP Code" name="patron_zip" reporter:datatype="text"/>
			<field reporter:label="Legacy CAT1 Link" name="stat_cat_1" reporter:datatype="link"/>
			<field reporter:label="Legacy CAT2 Link" name="stat_cat_2" reporter:datatype="link"/>
			<field reporter:label="Dewey Range - Tens" name="dewey_range_tens" reporter:datatype="text"/>
			<field reporter:label="Dewey Range - Hundreds" name="dewey_range_hundreds" reporter:datatype="text"/>
			<field reporter:label="Dewey Block - Tens" name="dewey_block_tens" reporter:datatype="text"/>
			<field reporter:label="Dewey Block - Hundreds" name="dewey_block_hundreds" reporter:datatype="text"/>
			<field reporter:label="Legacy CAT1 Value" name="stat_cat_1_value" reporter:datatype="text"/>
			<field reporter:label="Legacy CAT2 Value" name="stat_cat_2_value" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="circ"/>
			<link field="copy_id" reltype="has_a" key="id" map="" class="acp"/>
			<link field="patron_id" reltype="has_a" key="id" map="" class="au"/>
			<link field="circ_lib_id" reltype="has_a" key="id" map="" class="aou"/>
			<link field="call_number" reltype="has_a" key="id" map="" class="acn"/>
			<link field="patron_home_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="stat_cat_1" reltype="has_a" key="id" map="" class="rsce1"/>
			<link field="stat_cat_2" reltype="has_a" key="id" map="" class="rsce2"/>
		</links>
	</class>

	<class id="rsce1" controller="open-ils.reporter-store open-ils.cstore" oils_obj:fieldmapper="reporter::legacy_cat1" oils_persist:tablename="reporter.legacy_cat1" reporter:label="CAT1 Entry">
		<fields oils_persist:primary="id">
			<field reporter:label="Entry ID" name="id" reporter:selector="value" reporter:datatype="id"/>
			<field reporter:label="Entry Owner" name="owner" reporter:datatype="link"/>
			<field reporter:label="Entry Value" name="value" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>

	<class id="rsce2" controller="open-ils.reporter-store open-ils.cstore" oils_obj:fieldmapper="reporter::legacy_cat2" oils_persist:tablename="reporter.legacy_cat2" reporter:label="CAT2 Entry">
		<fields oils_persist:primary="id">
			<field reporter:label="Entry ID" name="id" reporter:selector="value" reporter:datatype="id"/>
			<field reporter:label="Entry Owner" name="owner" reporter:datatype="link"/>
			<field reporter:label="Entry Value" name="value" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>

	<class id="rccbs" controller="open-ils.reporter-store" oils_obj:fieldmapper="reporter::classic_current_billing_summary" oils_persist:tablename="reporter.classic_current_billing_summary" reporter:core="true" reporter:label="Classic Open Transaction Summary">
		<fields oils_persist:primary="id">
			<field reporter:label="Transaction ID" name="id" reporter:datatype="id"/>

			<field reporter:label="Billing Location Short (Policy) Name" name="billing_location_shortname" reporter:datatype="text"/>
			<field reporter:label="Billing Location Name" name="billing_location_name" reporter:datatype="text"/>
			<field reporter:label="Billing Location Link" name="billing_location" reporter:datatype="org_unit"/>

			<field reporter:label="User Home Library Short (Policy) Name" name="usr_home_ou_shortname" reporter:datatype="text"/>
			<field reporter:label="User Home Library Name" name="usr_home_ou_name" reporter:datatype="text"/>
			<field reporter:label="User Home Library Link" name="usr_home_ou" reporter:datatype="org_unit"/>

			<field reporter:label="User Barcode" name="barcode" reporter:datatype="text"/>
			<field reporter:label="User Link" name="usr" reporter:datatype="link"/>

			<field reporter:label="Transaction Start Date/Time" name="xact_start" reporter:datatype="timestamp"/>
			<field reporter:label="Transaction End Date/Time" name="xact_finish" reporter:datatype="timestamp"/>
			<field reporter:label="Transaction Type" name="xact_type" reporter:datatype="text"/>

			<field reporter:label="Total Paid" name="total_paid" reporter:datatype="money"/>
			<field reporter:label="Total Billed" name="total_owed" reporter:datatype="money"/>

			<field reporter:label="Last Payment Date/Time" name="last_payment_ts" reporter:datatype="timestamp"/>
			<field reporter:label="Last Payment Note" name="last_payment_note" reporter:datatype="text"/>
			<field reporter:label="Last Payment Type" name="last_payment_type" reporter:datatype="text"/>

			<field reporter:label="Last Billing Date/Time" name="last_billing_ts" reporter:datatype="timestamp"/>
			<field reporter:label="Last Billing Note" name="last_billing_note" reporter:datatype="text"/>
			<field reporter:label="Last Billing Type" name="last_billing_type" reporter:datatype="text"/>

			<field reporter:label="User Age Demographic" name="demographic_general_division" reporter:datatype="text"/>
			<field reporter:label="User County" name="patron_county" reporter:datatype="text"/>
			<field reporter:label="User City" name="patron_city" reporter:datatype="text"/>
			<field reporter:label="User ZIP Code" name="patron_zip" reporter:datatype="text"/>

			<field reporter:label="Balance Owed" name="balance_owed" reporter:datatype="money"/>
			<field reporter:label="User Profile Group" name="profile_group" reporter:datatype="text"/>

		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="mbt"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="billing_location" reltype="has_a" key="id" map="" class="aou"/>
			<link field="usr_home_ou" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>

	<class id="acrlid" controller="open-ils.cstore" oils_obj:fieldmapper="acq::claim_ready_lineitem_detail" oils_persist:readonly="true" reporter:label="Claim Ready Lineitem Details">
		<oils_persist:source_definition><![CDATA[

			SELECT
				po.ordering_agency AS ordering_agency,
				po.id AS purchase_order,
				li.id AS lineitem,
				lid.id AS lineitem_detail,
				cpa.id AS claim_policy_action
			FROM
				acq.lineitem_detail lid
				JOIN acq.lineitem li ON (li.id = lid.lineitem)
				JOIN acq.purchase_order po ON (po.id = li.purchase_order)
				JOIN acq.claim_policy cp ON (li.claim_policy = cp.id)
				JOIN acq.claim_policy_action cpa ON (
					cpa.claim_policy = cp.id

					-- we only care about claim policy actions whose claim
					-- interval we'd reached or exceeded
					AND (NOW() - cpa.action_interval) > po.order_date

					-- filter out all claim policy actions where claim events
					-- have occurred on or after the action's action_interval
					AND NOT EXISTS (
						SELECT 1
						FROM
							acq.claim_event evt
							JOIN acq.claim claim ON (
								claim.id = evt.claim
								AND claim.lineitem_detail = lid.id
							)
						WHERE
							evt.event_date >= (po.order_date + cpa.action_interval)
					)
				)
			WHERE
				lid.cancel_reason IS NULL
				AND li.cancel_reason IS NULL -- belt/suspenders
				AND po.cancel_reason IS NULL -- belt/suspenders
				AND lid.recv_time IS NULL
				AND po.state = 'on-order'
			ORDER BY 1, 2, 3, 4, 5

		]]></oils_persist:source_definition>
		<fields>
			<field reporter:label="Ordering Agency" name="ordering_agency" reporter:datatype="link"/>
			<field reporter:label="Purchase Order" name="purchase_order" reporter:datatype="link"/>
			<field reporter:label="Lineitem" name="lineitem" reporter:datatype="link"/>
			<field reporter:label="Lineitem Detail" name="lineitem_detail" reporter:datatype="link"/>
			<field reporter:label="Claim Policy Action" name="claim_policy_action" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="ordering_agency" reltype="has_a" key="id" map="" class="aou"/>
			<link field="purchase_order" reltype="has_a" key="id" map="" class="acqpo"/>
			<link field="lineitem" reltype="has_a" key="id" map="" class="jub"/>
			<link field="lineitem_detail" reltype="has_a" key="id" map="" class="acqlid"/>
			<link field="claim_policy_action" reltype="has_a" key="id" map="" class="acqclpa"/>
		</links>
	</class>
	<class id="acqlisum" controller="open-ils.cstore" oils_obj:fieldmapper="acq::lineitem_summary" oils_persist:readonly="true" reporter:label="Lineitem Summary" oils_persist:tablename="acq.lineitem_summary">
		<fields oils_persist:primary="lineitem" oils_persist:sequence="acq.lineitem_id_seq">
			<field reporter:label="Lineitem" name="lineitem" reporter:datatype="link"/>
			<field reporter:label="Item Count" name="item_count" reporter:datatype="int"/>
			<field reporter:label="Receive Count" name="recv_count" reporter:datatype="int"/>
			<field reporter:label="Cancel Count" name="cancel_count" reporter:datatype="int"/>
			<field reporter:label="Delay Count" name="delay_count" reporter:datatype="int"/>
			<field reporter:label="Invoice Count" name="invoice_count" reporter:datatype="int"/>
			<field reporter:label="Claim Count" name="claim_count" reporter:datatype="int"/>
			<field reporter:label="Estimated Amount" name="estimated_amount" reporter:datatype="money"/>
			<field reporter:label="Encumbrance Amount" name="encumbrance_amount" reporter:datatype="money"/>
			<field reporter:label="Paid Amount" name="paid_amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="lineitem" reltype="has_a" key="id" map="" class="jub"/>
		</links>
	</class>
	<class id="acqlisumi" controller="open-ils.cstore" oils_obj:fieldmapper="acq::lineitem_summary_invoiceable" oils_persist:readonly="true" reporter:label="Invoiceable Lineitem Summary">
		<oils_persist:source_definition><![CDATA[
			SELECT * FROM acq.lineitem_summary 
				WHERE item_count > (invoice_count + cancel_count)
		]]></oils_persist:source_definition>
		<fields oils_persist:primary="lineitem" oils_persist:sequence="acq.lineitem_id_seq">
			<field reporter:label="Lineitem" name="lineitem" reporter:datatype="link"/>
			<field reporter:label="Item Count" name="item_count" reporter:datatype="int"/>
			<field reporter:label="Receive Count" name="recv_count" reporter:datatype="int"/>
			<field reporter:label="Cancel Count" name="cancel_count" reporter:datatype="int"/>
			<field reporter:label="Delay Count" name="delay_count" reporter:datatype="int"/>
			<field reporter:label="Invoice Count" name="invoice_count" reporter:datatype="int"/>
			<field reporter:label="Claim Count" name="claim_count" reporter:datatype="int"/>
			<field reporter:label="Estimated Amount" name="estimated_amount" reporter:datatype="money"/>
			<field reporter:label="Encumbrance Amount" name="encumbrance_amount" reporter:datatype="money"/>
			<field reporter:label="Paid Amount" name="paid_amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="lineitem" reltype="has_a" key="id" map="" class="jub"/>
		</links>
	</class>
	<class id="iatc" controller="open-ils.reporter-store" oils_obj:fieldmapper="action::intersystem_transit_copy" oils_persist:readonly="true" reporter:core="true" reporter:label="Inter-system Item Transit">
		<oils_persist:source_definition><![CDATA[

			SELECT	t.*
			  FROM	action.transit_copy t
				JOIN actor.org_unit AS s ON (t.source = s.id)
				JOIN actor.org_unit AS d ON (t.dest = d.id)
			  WHERE	s.parent_ou <> d.parent_ou

		]]></oils_persist:source_definition>
		<fields oils_persist:primary="id" oils_persist:sequence="action.transit_copy_id_seq">
			<field reporter:label="Pretransit Item Status" name="copy_status" reporter:datatype="link"/>
			<field reporter:label="Destination" name="dest" reporter:datatype="link"/>
			<field reporter:label="Receive Date/Time" name="dest_recv_time" reporter:datatype="timestamp"/>
			<field reporter:label="Transit ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Is Persistent? (unused)" name="persistant_transfer" reporter:datatype="bool"/>
			<field reporter:label="Previous Hop (unused)" name="prev_hop" reporter:datatype="link"/>
			<field reporter:label="Source" name="source" reporter:datatype="link"/>
			<field reporter:label="Send Date/Time" name="source_send_time" reporter:datatype="timestamp"/>
			<field reporter:label="Transited Item" name="target_copy" reporter:datatype="link"/>
			<field reporter:label="Hold Transit" name="hold_transit_copy" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Cancel Date/Time" name="cancel_time" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="hold_transit_copy" reltype="might_have" key="id" map="" class="ahtc"/>
			<link field="source" reltype="has_a" key="id" map="" class="aou"/>
			<link field="copy_status" reltype="has_a" key="id" map="" class="ccs"/>
			<link field="dest" reltype="has_a" key="id" map="" class="aou"/>
			<link field="target_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="prev_hop" reltype="has_a" key="id" map="" class="atc"/>
		</links>
	</class>

	<class id="circbyyr" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::circ_counts_by_year" oils_persist:readonly="true">
		<oils_persist:source_definition><![CDATA[

	SELECT copy, SUM(count) AS count, year, is_renewal FROM (
		SELECT
			cp.id as copy,
			COUNT(circ.id),
			EXTRACT(YEAR FROM circ.xact_start) AS year,
			(phone_renewal OR desk_renewal OR opac_renewal OR auto_renewal) as is_renewal
		FROM
			asset.copy cp
				JOIN action.circulation circ ON (cp.id = circ.target_copy)
		GROUP BY 1, 3, 4
		UNION ALL
		SELECT
			cp.id as copy,
			COUNT(circ.id),
			EXTRACT(YEAR FROM circ.xact_start) AS year,
			(phone_renewal OR desk_renewal OR opac_renewal OR auto_renewal) as is_renewal
		FROM
			asset.copy cp
				JOIN action.aged_circulation circ ON (cp.id = circ.target_copy)
		GROUP BY 1, 3, 4
		UNION ALL
		SELECT
			id as copy,
			circ_count,
			-1 AS year,
			false as is_renewal
		FROM
			extend_reporter.legacy_circ_count
	)x GROUP BY 1, 3, 4

		]]></oils_persist:source_definition>
		<fields>
			<field reporter:label="Item ID" name="copy" reporter:datatype="link"/>
			<field reporter:label="Count" name="count" reporter:datatype="int"/>
			<field reporter:label="Year" name="year" reporter:datatype="int"/>
			<field reporter:label="Renewal" name="is_renewal" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="copy" reltype="has_a" key="id" map="" class="acp"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="rodcirc" controller="open-ils.reporter-store" oils_obj:fieldmapper="reporter::overdue_circs" oils_persist:tablename="reporter.overdue_circs" reporter:core="true" reporter:label="Overdue Circulation">
		<fields oils_persist:primary="id" oils_persist:sequence="money.billable_xact_id_seq">
			<field reporter:label="Check In Library" name="checkin_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Check In Staff" name="checkin_staff" reporter:datatype="link"/>
			<field reporter:label="Check In Date/Time" name="checkin_time" reporter:datatype="timestamp"/>
			<field reporter:label="Checkout / Renewal Library" name="circ_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Circulating Staff" name="circ_staff" reporter:datatype="link"/>
			<field reporter:label="Desk Renewal" name="desk_renewal" reporter:datatype="bool"/>
			<field reporter:label="Due Date/Time" name="due_date" reporter:datatype="timestamp"/>
			<field reporter:label="Circulation Duration" name="duration" reporter:datatype="interval"/>
			<field reporter:label="Circ Duration Rule" name="duration_rule" reporter:datatype="link"/>
			<field reporter:label="Fine Interval" name="fine_interval" reporter:datatype="interval"/>
			<field reporter:label="Circ ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Max Fine Amount" name="max_fine" reporter:datatype="money"/>
			<field reporter:label="Max Fine Rule" name="max_fine_rule" reporter:datatype="link"/>
			<field reporter:label="OPAC Renewal" name="opac_renewal" reporter:datatype="bool"/>
			<field reporter:label="Phone Renewal" name="phone_renewal" reporter:datatype="bool"/>
			<field reporter:label="Recurring Fine Amount" name="recurring_fine" reporter:datatype="money"/>
			<field reporter:label="Recurring Fine Rule" name="recurring_fine_rule" reporter:datatype="link"/>
			<field reporter:label="Remaining Renewals" name="renewal_remaining" reporter:datatype="int"/>
			<field reporter:label="Fine Stop Reason" name="stop_fines" reporter:datatype="text"/>
			<field reporter:label="Fine Stop Date/Time" name="stop_fines_time" reporter:datatype="timestamp"/>
			<field reporter:label="Circulating Item" name="target_copy" reporter:datatype="link"/>
			<field reporter:label="Patron" name="usr" reporter:datatype="link"/>
			<field reporter:label="Transaction Finish Date/Time" name="xact_finish" reporter:datatype="timestamp"/>
			<field reporter:label="Checkout Date/Time" name="xact_start" reporter:datatype="timestamp"/>
			<field reporter:label="Transaction Billings" name="billings" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Transaction Payments" name="payments" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Base Transaction" name="billable_transaction" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Circulation Type" name="circ_type" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Billing Totals" name="billing_total" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Payment Totals" name="payment_total" oils_persist:virtual="true" reporter:datatype="link"/>
			<field reporter:label="Auto Renewal" name="auto_renewal" reporter:datatype="bool"/>
			<field reporter:label="Remaining Auto Renewals" name="auto_renewal_remaining" reporter:datatype="int"/>
		</fields>
		<links>
			<link field="billable_transaction" reltype="might_have" key="id" map="" class="mbt"/>
			<link field="circ_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="checkin_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="target_copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="checkin_staff" reltype="has_a" key="id" map="" class="au"/>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="payments" reltype="has_many" key="xact" map="" class="mp"/>
			<link field="billings" reltype="has_many" key="xact" map="" class="mb"/>
			<link field="duration_rule" reltype="has_a" key="name" map="" class="crcd"/>
			<link field="max_fine_rule" reltype="has_a" key="name" map="" class="crmf"/>
			<link field="recurring_fine_rule" reltype="has_a" key="name" map="" class="crrf"/>
			<link field="circ_type" reltype="might_have" key="id" map="" class="rcirct"/>
			<link field="billing_total" reltype="might_have" key="xact" map="" class="rxbt"/>
			<link field="payment_total" reltype="might_have" key="xact" map="" class="rxpt"/>
		</links>
	</class>

	<class id="rocit" controller="open-ils.reporter-store" oils_obj:fieldmapper="reporter::classic_item_list" oils_persist:tablename="reporter.classic_item_list" reporter:core="true" reporter:label="Classic Item List">
		<fields oils_persist:primary="id">
			<field reporter:label="Title" name="title" reporter:datatype="text"/>
			<field reporter:label="Author" name="author" reporter:datatype="text"/>
			<field reporter:label="Pubdate" name="pubdate" reporter:datatype="text"/>
			<field reporter:label="Item ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Price" name="price" reporter:datatype="money"/>
			<field reporter:label="Barcode" name="barcode" reporter:datatype="text"/>
			<field reporter:label="Callnumber Label" name="call_number_label" reporter:datatype="text"/>
			<field reporter:label="Dewy Tens" name="dewey_block_tens" reporter:datatype="text"/>
			<field reporter:label="Dewy Hundreds" name="dewey_block_hundreds" reporter:datatype="text"/>
			<field reporter:label="Use Count" name="use_count" reporter:datatype="int"/>
			<field reporter:label="Circ Modifier" name="circ_modifier" reporter:datatype="text"/>
			<field reporter:label="Shelving Location Name" name="shelving_location" reporter:datatype="text"/>
			<field reporter:label="Legacy Stat Cat 1" name="stat_cat_1" reporter:datatype="link"/>
			<field reporter:label="Legacy Stat Cat 2" name="stat_cat_2" reporter:datatype="link"/>
			<field reporter:label="Legacy Stat Cat 1 Value" name="stat_cat_1_value" reporter:datatype="text"/>
			<field reporter:label="Legacy Stat Cat 2 Value" name="stat_cat_2_value" reporter:datatype="text"/>
			<field reporter:label="Edit Date" name="edit_date" reporter:datatype="timestamp"/>
			<field reporter:label="Create Date" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Owning Lib Name" name="owning_lib_name" reporter:datatype="text"/>
			<field reporter:label="Circ Lib Name" name="circ_lib_name" reporter:datatype="text"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="link"/>
			<field reporter:label="Circ Library" name="circ_lib" reporter:datatype="link"/>
			<field reporter:label="Creator" name="creator" reporter:datatype="link"/>
			<field reporter:label="Age Protection" name="age_protect" reporter:datatype="link"/>
			<field reporter:label="OPAC Visible" name="opac_visible" reporter:datatype="bool"/>
			<field reporter:label="Reference" name="ref" reporter:datatype="bool"/>
			<field reporter:label="Deposit Amount" name="deposit_amount" reporter:datatype="text"/>
			<field reporter:label="Deleted" name="deleted" reporter:datatype="bool"/>
			<field reporter:label="TCN" name="tcn_value" reporter:datatype="text"/>
			<field reporter:label="Status" name="status" reporter:datatype="link"/>
			<field reporter:label="Stop Fines Reason" name="stop_fines" reporter:datatype="text"/>
			<field reporter:label="Due Date" name="due_date" reporter:datatype="timestamp"/>
			<field reporter:label="Patron Barcode" name="patron_barcode" reporter:datatype="text"/>
			<field reporter:label="Patron Name" name="patron_name" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="id" reltype="has_a" key="id" map="" class="acp"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="age_protect" reltype="has_a" key="id" map="" class="crahp"/>
			<link field="status" reltype="has_a" key="id" map="" class="ccs"/>
			<link field="stat_cat_1" reltype="might_have" key="id" map="" class="rsce1"/>
		<link field="stat_cat_2" reltype="might_have" key="id" map="" class="rsce2"/>
		</links>
	</class>

	<class id="rmocbbol" controller="open-ils.reporter-store" oils_obj:fieldmapper="reporter::money::open_circ_balance_by_owning_lib" oils_persist:tablename="money.open_circ_balance_by_owning_lib" reporter:core="true" reporter:label="Open Circulation Billing by Owning Library">
		<fields oils_persist:primary="id">
			<field reporter:label="Circulation ID" name="id" reporter:datatype="link"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Billing Type" name="billing_type" reporter:datatype="text"/>
			<field reporter:label="Total Billed" name="billed" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="circ"/>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>

	<class id="rmobbol" controller="open-ils.reporter-store" oils_obj:fieldmapper="reporter::money::open_balance_by_owning_lib" oils_persist:tablename="money.open_balance_by_owning_lib" reporter:core="true" reporter:label="Open Circulation Balance by Owning Library">
		<fields oils_persist:primary="owning_lib">
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Billing Types" name="billing_types" reporter:datatype="text"/>
			<field reporter:label="Balance" name="balance" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>

	<class id="rmocbbcol" controller="open-ils.reporter-store" oils_obj:fieldmapper="reporter::money::open_circ_balance_by_circ_and_owning_lib" oils_persist:tablename="money.open_circ_balance_by_circ_and_owning_lib" reporter:core="true" reporter:label="Open Circulation Billing by Checkout Library and Owning Library">
		<fields oils_persist:primary="id">
			<field reporter:label="Circulation ID" name="id" reporter:datatype="link"/>
			<field reporter:label="Checkout / Renewal Library" name="circ_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Billing Type" name="billing_type" reporter:datatype="text"/>
			<field reporter:label="Total Billed" name="billed" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="circ"/>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>

	<class id="rmobbcol" controller="open-ils.reporter-store" oils_obj:fieldmapper="reporter::money::open_balance_by_circ_and_owning_lib" oils_persist:tablename="money.open_balance_by_circ_and_owning_lib" reporter:core="true" reporter:label="Open Circulation Balance by Checkout Library and Owning Library">
		<fields oils_persist:primary="circ_lib">
			<field reporter:label="Checkout / Renewal Library" name="circ_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Billing Types" name="billing_types" reporter:datatype="text"/>
			<field reporter:label="Balance" name="balance" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="circ_lib" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>

	<class id="rmocbbhol" controller="open-ils.reporter-store" oils_obj:fieldmapper="reporter::money::open_circ_balance_by_usr_home_and_owning_lib" oils_persist:tablename="money.open_circ_balance_by_usr_home_and_owning_lib" reporter:core="true" reporter:label="Open Circulation Billing by User Home Library and Owning Library">
		<fields oils_persist:primary="id">
			<field reporter:label="Circulation ID" name="id" reporter:datatype="link"/>
			<field reporter:label="User Home Library" name="home_ou" reporter:datatype="org_unit"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Billing Type" name="billing_type" reporter:datatype="text"/>
			<field reporter:label="Total Billed" name="billed" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="circ"/>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="home_ou" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>

	<class id="rmobbhol" controller="open-ils.reporter-store" oils_obj:fieldmapper="reporter::money::open_balance_by_usr_home_and_owning_lib" oils_persist:tablename="money.open_balance_by_usr_home_and_owning_lib" reporter:core="true" reporter:label="Open Circulation Balance by User Home Library and Owning Library">
		<fields oils_persist:primary="home_ou">
			<field reporter:label="User Home Library" name="home_ou" reporter:datatype="org_unit"/>
			<field reporter:label="Owning Library" name="owning_lib" reporter:datatype="org_unit"/>
			<field reporter:label="Billing Types" name="billing_types" reporter:datatype="text"/>
			<field reporter:label="Balance" name="balance" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="owning_lib" reltype="has_a" key="id" map="" class="aou"/>
			<link field="home_ou" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>
	<class id="acqft" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::fund_tag" oils_persist:tablename="acq.fund_tag" reporter:label="Fund Tag">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.fund_tag_id_seq">
			<field reporter:label="Fund Tag ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Fund Tag Owner" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Fund Tag Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Map Entries" name="map_entries" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="map_entries" reltype="has_many" key="fund" map="" class="acqftm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ACQ_FUND_TAG" context_field="owner"/>
				<retrieve permission="ADMIN_ACQ_FUND_TAG ADMIN_ACQ_FUND VIEW_FUND MANAGE_FUND" context_field="owner"/>
				<update permission="ADMIN_ACQ_FUND_TAG" context_field="owner"/>
			<delete permission="ADMIN_ACQ_FUND_TAG" context_field="owner"/>
			</actions>
		</permacrud>
	</class>
	<class id="acqftm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="acq::fund_tag_map" oils_persist:tablename="acq.fund_tag_map" reporter:label="Fund Tag Map">
		<fields oils_persist:primary="id" oils_persist:sequence="acq.fund_tag_map_id_seq">
			<field reporter:label="Map Entry ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Fund ID" name="fund" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Tag ID" name="tag" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
			<link field="tag" reltype="has_a" key="id" map="" class="acqft"/>
			</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_ACQ_FUND_TAG">
					<context link="tag" field="owner"/>
				</create>
				<retrieve permission="ADMIN_ACQ_FUND_TAG ADMIN_ACQ_FUND VIEW_FUND MANAGE_FUND">
					<context link="tag" field="owner"/>
				</retrieve>
				<update permission="ADMIN_ACQ_FUND_TAG">
					<context link="tag" field="owner"/>
				</update>
				<delete permission="ADMIN_ACQ_FUND_TAG">
					<context link="tag" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="acqmapinv" controller="open-ils.cstore" oils_obj:fieldmapper="acq::map_to_invoice" reporter:label="Acq Map to Invoice View" oils_persist:readonly="true">
		<oils_persist:source_definition><![CDATA[
		SELECT
			poi.purchase_order AS purchase_order,
			ii.invoice AS invoice,
			NULL AS lineitem,
			poi.id AS po_item,
			NULL AS picklist
		FROM
			acq.po_item poi
			JOIN acq.invoice_item ii ON (ii.po_item = poi.id)
		UNION SELECT
			jub.purchase_order AS purchase_order,
			ie.invoice AS invoice,
			jub.id AS lineitem,
			NULL AS po_item,
			jub.picklist AS picklist
		FROM
			acq.lineitem jub
			JOIN acq.invoice_entry ie ON (ie.lineitem = jub.id)
		UNION SELECT
			ii.purchase_order AS purchase_order,
			ii.invoice AS invoice,
			NULL AS lineitem,
			NULL AS po_item,
			NULL AS picklist
		FROM
			acq.invoice_item ii
		WHERE ii.po_item IS NULL
		UNION SELECT
			ie.purchase_order AS purchase_order,
			ie.invoice AS invoice,
			NULL AS lineitem,
			NULL AS po_item,
			NULL AS picklist
		FROM
			acq.invoice_entry ie
		WHERE ie.lineitem IS NULL
		UNION SELECT
			NULL AS purchase_order,
			NULL AS invoice,
			jub.id AS lineitem,
			NULL AS po_item,
			jub.picklist AS picklist
		FROM
			acq.lineitem jub
		WHERE jub.purchase_order IS NULL
		]]></oils_persist:source_definition>
		<fields>
			<field reporter:label="Purchase Order ID" name="purchase_order" reporter:datatype="link"/>
			<field reporter:label="Lineitem ID" name="lineitem" reporter:datatype="link"/>
			<field reporter:label="Invoice ID" name="invoice" reporter:datatype="link"/>
			<field reporter:label="Purchase Order Item ID" name="po_item" reporter:datatype="link"/>
			<field reporter:label="Picklist ID" name="picklist" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="purchase_order" reltype="has_a" key="id" map="" class="acqpo"/>
			<link field="lineitem" reltype="has_a" key="id" map="" class="jub"/>
			<link field="invoice" reltype="has_a" key="id" map="" class="acqinv"/>
			<link field="po_item" reltype="has_a" key="id" map="" class="acqpoi"/>
			<link field="picklist" reltype="has_a" key="id" map="" class="acqpl"/>
		</links>
	</class>
	<class id="cbc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::barcode_completion" oils_persist:tablename="config.barcode_completion" reporter:label="Barcode Completions">
		<fields oils_persist:primary="id" oils_persist:sequence="config.barcode_completion_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Active" name="active" reporter:datatype="bool"/>
			<field reporter:label="Owner" name="org_unit" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Prefix" name="prefix" reporter:datatype="text"/>
			<field reporter:label="Suffix" name="suffix" reporter:datatype="text"/>
			<field reporter:label="Length" name="length" reporter:datatype="int"/>
			<field reporter:label="Padding" name="padding" reporter:datatype="text"/>
			<field reporter:label="Padding At End" name="padding_end" reporter:datatype="bool"/>
			<field reporter:label="Applies to Items" name="asset" reporter:datatype="bool"/>
			<field reporter:label="Applies to Users" name="actor" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="UPDATE_ORG_UNIT_SETTING_ALL" context_field="org_unit"/>
				<retrieve/>
				<update permission="UPDATE_ORG_UNIT_SETTING_ALL" context_field="org_unit"/>
				<delete permission="UPDATE_ORG_UNIT_SETTING_ALL" context_field="org_unit"/>
			</actions>
		</permacrud>
	</class>

	<class id="coustl" controller="open-ils.cstore" oils_obj:fieldmapper="config::org_unit_setting_type_log" oils_persist:tablename="config.org_unit_setting_type_log" reporter:label="Organizational Unit Setting Type Log">
		<fields oils_persist:primary="id" oils_persist:sequence="config.org_unit_setting_type_log_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field name="date_applied" reporter:datatype="timestamp"/>
			<field name="org" reporter:datatype="org_unit"/>
			<field name="original_value" reporter:datatype="text"/>
			<field name="new_value" reporter:datatype="text"/>
			<field name="field_name" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="field_name" reltype="has_a" key="name" map="" class="coust"/>
			<link field="org" reltype="has_a" key="id" map="" class="aou"/>
		</links>
	</class>
	<class id="aaactsc" controller="open-ils.reporter-store" oils_obj:fieldmapper="action::archive_actor_stat_cat" oils_persist:tablename="action.archive_actor_stat_cat" reporter:label="Circ-Archived Patron Statistical Category Entries">
		<fields oils_persist:primary="id" oils_persist:sequence="action.archive_actor_stat_cat_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Circ" name="xact" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Statistical Category" name="stat_cat" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Entry Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="xact" reltype="has_a" key="id" map="" class="combcirc"/>
			<link field="stat_cat" reltype="has_a" key="id" map="" class="actsc"/>
		</links>
	</class>
	<class id="aaasc" controller="open-ils.reporter-store" oils_obj:fieldmapper="action::archive_asset_stat_cat" oils_persist:tablename="action.archive_asset_stat_cat" reporter:label="Circ-Archived Item Statistical Category Entries">
		<fields oils_persist:primary="id" oils_persist:sequence="action.archive_actor_stat_cat_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Circ" name="xact" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Statistical Category" name="stat_cat" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Entry Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="xact" reltype="has_a" key="id" map="" class="combcirc"/>
			<link field="stat_cat" reltype="has_a" key="id" map="" class="asc"/>
		</links>
	</class>
	<class id="cfg" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::floating_group" oils_persist:tablename="config.floating_group" reporter:label="Floating Group" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.floating_group_id_seq">
			<field reporter:label="ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Manual" name="manual" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Group Members" name="members" oils_persist:virtual="true" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="members" reltype="has_many" key="floating_group" map="" class="cfgm"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_FLOAT_GROUPS" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_FLOAT_GROUPS" global_required="true"/>
				<delete permission="ADMIN_FLOAT_GROUPS" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="cfgm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::floating_group_member" oils_persist:tablename="config.floating_group_member" reporter:label="Floating Group Members">
		<fields oils_persist:primary="id" oils_persist:sequence="config.floating_group_member_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Floating Group" name="floating_group" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Org Unit" name="org_unit" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Stop Depth" name="stop_depth" reporter:datatype="int" oils_obj:required="true"/>
			<field reporter:label="Max Depth" name="max_depth" reporter:datatype="int"/>
			<field reporter:label="Exclude" name="exclude" reporter:datatype="bool" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="floating_group" reltype="has_a" key="id" map="" class="cfg"/>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_FLOAT_GROUPS" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_FLOAT_GROUPS" global_required="true"/>
				<delete permission="ADMIN_FLOAT_GROUPS" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="cctt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::copy_tag_type" oils_persist:tablename="config.copy_tag_type" reporter:label="Item Tag Types" oils_persist:field_safe="true" oils_persist:cardinality="low">
		<fields oils_persist:primary="code">
			<field reporter:label="Code" name="code" reporter:selector="label" reporter:datatype="id" oils_obj:required="true"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_COPY_TAG_TYPES" context_field="owner"/>
				<retrieve/>
				<update permission="ADMIN_COPY_TAG_TYPES" context_field="owner"/>
				<delete permission="ADMIN_COPY_TAG_TYPES" context_field="owner"/>
			</actions>
		</permacrud>
	</class>
	<class id="acpt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::copy_tag" oils_persist:tablename="asset.copy_tag" reporter:label="Item Tags" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.copy_tag_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Item Tag Type" name="tag_type" reporter:datatype="link"/>
			<field reporter:label="Label" name="label" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Staff Note" name="staff_note" reporter:datatype="text"/>
			<field reporter:label="Is OPAC Visible?" name="pub" reporter:datatype="bool"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="URL" name="url" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="tag_type" reltype="has_a" key="code" map="" class="cctt"/>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_COPY_TAG" context_field="owner"/>
				<retrieve/>
				<update permission="ADMIN_COPY_TAG" context_field="owner"/>
				<delete permission="ADMIN_COPY_TAG" context_field="owner"/>
			</actions>
		</permacrud>
	</class>
	<class id="acptcm" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="asset::copy_tag_copy_map" oils_persist:tablename="asset.copy_tag_copy_map" reporter:label="Item Tag Item Map" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="asset.copy_tag_copy_map_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Item" name="copy" reporter:datatype="link"/>
			<field reporter:label="Tag" name="tag" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="copy" reltype="has_a" key="id" map="" class="acp"/>
			<link field="tag" reltype="has_a" key="id" map="" class="acpt"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="UPDATE_COPY">
					<context link="copy" field="circ_lib"/>
				</create>
				<retrieve/>
				<update permission="UPDATE_COPY">
					<context link="copy" field="circ_lib"/>
				</update>
				<delete permission="UPDATE_COPY">
					<context link="copy" field="circ_lib"/>
				</delete>
			</actions>
		</permacrud>
	</class>
	<class id="hasholdscount" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::has_holds_count" reporter:label="Item Has Holds Count" oils_persist:readonly="true">
		<oils_persist:source_definition><![CDATA[
	SELECT ahcm.target_copy AS id,count(*) AS count
	 FROM
	 action.hold_request ahr,
	 action.hold_copy_map ahcm
	 WHERE
	 ahr.cancel_time IS NULL AND
	 ahr.fulfillment_time IS NULL AND
	 ahr.capture_time IS NULL AND
	 ahr.id = ahcm.hold
	 GROUP BY ahcm.target_copy
		]]></oils_persist:source_definition>
		<fields oils_persist:primary="id">
			<field reporter:label="Item ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Holds Count" name="count" reporter:datatype="text"/>
		</fields>
	<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
			   <retrieve/>
			</actions>
	</permacrud>
		</class>

	<class id="cwst" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::workstation_setting_type" oils_persist:tablename="config.workstation_setting_type" reporter:label="Workstation Setting Type">
		<fields oils_persist:primary="name">
			<field name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field name="label" reporter:datatype="text" oils_persist:i18n="true" oils_obj:required="true"/>
			<field name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field name="datatype" reporter:datatype="text"/>
			<field name="fm_class" reporter:datatype="text"/>
			<field name="grp" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="name" reltype="has_many" key="name" map="" class="aous"/>
			<link field="grp" reltype="has_a" key="name" map="" class="csg"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_WORKSTATION_SETTING_TYPE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_WORKSTATION_SETTING_TYPE" global_required="true"/>
				<delete permission="ADMIN_WORKSTATION_SETTING_TYPE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<!-- no pcrud access is granted for now, because it's assumed these
			 setting values will be applied and retrived via the API. -->
	<class id="awss" controller="open-ils.cstore" oils_obj:fieldmapper="actor::workstation_setting" oils_persist:tablename="actor.workstation_setting" reporter:label="Workstation Setting">
		<fields oils_persist:primary="id" oils_persist:sequence="actor.workstation_setting_id_seq">
			<field reporter:label="Setting ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Name" name="name" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Value" name="value" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Workstation" name="workstation" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="name" reltype="has_a" key="name" map="" class="cwst"/>
			<link field="workstation" reltype="has_a" key="id" map="" class="aws"/>
		</links>
	</class>

	<class id="cht" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::hold_type" oils_persist:tablename="config.hold_type" reporter:label="Hold Type" oils_persist:readonly="true" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.hold_type_id_seq">
			<field name="id" reporter:selector="name" reporter:datatype="id"/>
			<field name="description" reporter:datatype="text" oils_persist:i18n="true"/>
			<field name="hold_type" reporter:datatype="text" oils_persist:i18n="true"/>
		</fields>
	</class>

	<class id="cpt" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::print_template" oils_persist:tablename="config.print_template" reporter:label="Print Templates" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.print_template_id_seq">
			<field name="id" reporter:datatype="id" reporter:selector="label"/>
			<field name="name" reporter:datatype="text" oils_obj:required="true"/>
			<field name="label" reporter:datatype="text" oils_obj:required="true" oils_persist:i18n="true"/>
			<field reporter:label="Owner" name="owner" oils_obj:required="true" reporter:datatype="link"/>
			<field reporter:label="Active" name="active" reporter:datatype="bool"/>
			<field reporter:label="Locale" name="locale" reporter:datatype="link"/>
			<field name="content_type" reporter:datatype="text"/>
			<field name="template" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="locale" reltype="has_a" key="id" map="" class="i18n_l"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_PRINT_TEMPLATE" context_field="owner"/>
				<retrieve permission="STAFF_LOGIN" context_field="owner"/>
				<update permission="ADMIN_PRINT_TEMPLATE" context_field="owner"/>
				<delete permission="ADMIN_PRINT_TEMPLATE" context_field="owner"/>
			</actions>
		</permacrud>
	</class>

	<class id="cct" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::carousel_type" oils_persist:tablename="config.carousel_type" reporter:label="Carousel Types" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.carousel_type_id_seq">
			<field reporter:label="Carousel Type ID" reporter:selector="name" name="id" reporter:datatype="id"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true" oils_persist:i18n="true"/>
			<field reporter:label="Automatically Managed?" name="automatic" reporter:datatype="bool"/>
			<field reporter:label="Filter By Age?" name="filter_by_age" reporter:datatype="bool"/>
			<field reporter:label="Filter By Item Owning Library?" name="filter_by_copy_owning_lib" reporter:datatype="bool"/>
			<field reporter:label="Filter By Shelving Location?" name="filter_by_copy_location" reporter:datatype="bool"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CAROUSEL_TYPE" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_CAROUSEL_TYPE" global_required="true"/>
				<delete permission="ADMIN_CAROUSEL_TYPE" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="cc" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="container::carousel" oils_persist:tablename="container.carousel" reporter:label="Carousels">
		<fields oils_persist:primary="id" oils_persist:sequence="container.carousel_id_seq">
			<field reporter:label="Carousel ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Carousel Type" name="type" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true" oils_persist:i18n="true"/>
			<field reporter:label="Bucket" name="bucket" reporter:datatype="link"/>
			<field reporter:label="Creating User" name="creator" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Editing User" name="editor" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Create Time" name="create_time" reporter:datatype="timestamp"/>
			<field reporter:label="Edit Time" name="edit_time" reporter:datatype="timestamp"/>
			<field reporter:label="Age Limit" name="age_filter" reporter:datatype="interval"/>
			<field reporter:label="Item Libraries" name="owning_lib_filter" reporter:datatype="text"/>	  <!-- Actually an int[], but this is the best we can do in fm_IDL.xml -->
			<field reporter:label="Shelving Locations" name="copy_location_filter" reporter:datatype="text"/> <!-- ditto -->
			<field reporter:label="Last Refresh Time" name="last_refresh_time" reporter:datatype="timestamp"/>
			<field reporter:label="Is Active" name="active" reporter:datatype="bool"/>
			<field reporter:label="Maximum Items" name="max_items" reporter:datatype="int" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="type" reltype="has_a" key="id" map="" class="cct"/>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
			<link field="bucket" reltype="has_a" key="id" map="" class="cbreb"/>
			<link field="creator" reltype="has_a" key="id" map="" class="au"/>
			<link field="editor" reltype="has_a" key="id" map="" class="au"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CAROUSEL" context_field="owner"/>
				<retrieve permission="ADMIN_CAROUSEL" context_field="owner"/>
				<update permission="ADMIN_CAROUSEL" context_field="owner"/>
				<delete permission="ADMIN_CAROUSEL" context_field="owner"/>
			</actions>
		</permacrud>
	</class>

	<class id="ccou" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="container::carousel_org_unit" oils_persist:tablename="container.carousel_org_unit" reporter:label="Carousels Visible at Library">
		<fields oils_persist:primary="id" oils_persist:sequence="container.carousel_org_unit_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id"/>
			<field reporter:label="Carousel" name="carousel" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Override Name" name="override_name" reporter:datatype="text"/>
			<field reporter:label="Library" name="org_unit" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Sequence Number" name="seq" reporter:datatype="int" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="carousel" reltype="has_a" key="id" map="" class="cc"/>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_CAROUSEL">
					<context link="carousel" field="owner"/>
				</create>
				<retrieve permission="ADMIN_CAROUSEL">
					<context link="carousel" field="owner"/>
				</retrieve>
				<update permission="ADMIN_CAROUSEL">
					<context link="carousel" field="owner"/>
				</update>
				<delete permission="ADMIN_CAROUSEL">
					<context link="carousel" field="owner"/>
				</delete>
			</actions>
		</permacrud>
	</class>

	<class id="cra" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::remoteauth_profile" oils_persist:tablename="config.remoteauth_profile" reporter:label="Remote Patron Authentication Configuration Profile" oils_persist:cardinality="low">
		<fields oils_persist:primary="name">
			<field name="name" reporter:datatype="text" reporter:label="Name" oils_obj:required="true"/>
			<field name="description" reporter:datatype="text" reporter:label="Description"/>
			<field name="context_org" reporter:datatype="org_unit" reporter:label="Context Org" oils_obj:required="true"/>
			<field name="enabled" reporter:datatype="bool" reporter:label="Enabled"/>
			<field name="perm" reporter:datatype="link" reporter:label="Permission Required by User" oils_obj:required="true"/>
			<field name="restrict_to_org" reporter:datatype="bool" reporter:label="Restrict by Home Library"/>
			<field name="allow_inactive" reporter:datatype="bool" reporter:label="Allow Inactive Users"/>
			<field name="allow_expired" reporter:datatype="bool" reporter:label="Allow Expired Users"/>
			<field name="block_list" reporter:datatype="text" reporter:label="Block List"/>
			<field name="usr_activity_type" reporter:datatype="link" reporter:label="User Activity Type"/>
		</fields>
		<links>
			<link field="context_org" reltype="has_a" key="id" map="" class="aou"/>
			<link field="perm" reltype="has_a" key="id" map="" class="ppl"/>
			<link field="usr_activity_type" reltype="has_a" key="id" map="" class="cuat"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_REMOTEAUTH" context_field="context_org"/>
				<retrieve permission="STAFF_LOGIN" context_field="context_org"/>
				<update permission="ADMIN_REMOTEAUTH" context_field="context_org"/>
				<delete permission="ADMIN_REMOTEAUTH" context_field="context_org"/>
			</actions>
		</permacrud>
	</class>
	<class id="cgs" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::geolocation_service" oils_persist:tablename="config.geolocation_service" reporter:label="Geographic Location Service" oils_persist:cardinality="low">
		<fields oils_persist:primary="id" oils_persist:sequence="config.geolocation_service_id_seq">
			<field name="id" reporter:selector="name" reporter:datatype="id" reporter:label="ID"/>
			<field reporter:label="Active" name="active" reporter:datatype="bool" oils_obj:required="true"/>
			<field reporter:label="Owner" name="owner" reporter:datatype="link" oils_obj:required="true"/>
			<field name="name" reporter:datatype="text" oils_persist:i18n="true" reporter:label="Name"/>
			<field reporter:label="Service Code" name="service_code" reporter:datatype="text"/>
			<field reporter:label="API Key" name="api_key" reporter:datatype="text"/>
		</fields>
		<links>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_GEOLOCATION_SERVICES" global_required="true"/>
				<retrieve permission="VIEW_GEOLOCATION_SERVICES" global_required="true"/>
				<update permission="ADMIN_GEOLOCATION_SERVICES" global_required="true"/>
				<delete permission="ADMIN_GEOLOCATION_SERVICES" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="cusppet" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::ui_staff_portal_page_entry_type" oils_persist:tablename="config.ui_staff_portal_page_entry_type" reporter:label="Portal Page Entry Type">
		<fields oils_persist:primary="code">
			<field name="code" reporter:label="Entry Type Code" reporter:datatype="text" reporter:selector="label" oils_obj:required="true"/>
			<field name="label" reporter:label="Entry Type Label" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="cusppe" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::ui_staff_portal_page_entry" oils_persist:tablename="config.ui_staff_portal_page_entry" reporter:label="Portal Page Entry">
		<fields oils_persist:primary="id" oils_persist:sequence="config.ui_staff_portal_page_entry_id_seq">
			<field name="id" reporter:label="ID" reporter:datatype="id" reporter:selector="label"/>
			<field name="page_col" reporter:label="Page Column" reporter:datatype="int" oils_obj:required="true"/>
			<field name="col_pos" reporter:label="Column Position" reporter:datatype="int" oils_obj:required="true"/>
			<field name="entry_type" reporter:label="Entry Type" reporter:datatype="link" oils_obj:required="true"/>
			<field name="label" reporter:label="Entry Label" reporter:datatype="text"/>
			<field name="image_url" reporter:label="Entry Image URL" reporter:datatype="text"/>
			<field name="target_url" reporter:label="Entry Target URL" reporter:datatype="text"/>
			<field name="entry_text" reporter:label="Entry Text" reporter:datatype="text"/>
			<field name="owner" reporter:label="Owner" reporter:datatype="link" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="entry_type" reltype="has_a" key="code" map="" class="cusppet"/>
			<link field="owner" reltype="has_a" key="id" map="" class="aou"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_STAFF_PORTAL_PAGE" context_field="owner"/>
				<retrieve permission="STAFF_LOGIN" context_field="owner"/>
				<update permission="ADMIN_STAFF_PORTAL_PAGE" context_field="owner"/>
				<delete permission="ADMIN_STAFF_PORTAL_PAGE" context_field="owner"/>
			</actions>
		</permacrud>
	</class>

	<!-- Simple Reporter classes are currently used only by the SR UI -->
	<class id="srcirc" controller="simple-reporter.ui" oils_persist:virtual="true" reporter:label="Simple Reporter Circulation">
		<oils_persist:source_definition><![CDATA[
			WITH sys_level_orgs AS (
				SELECT aou.id AS id,
				  aous.id AS sys_id,
				  aous.name AS sys_name,
				  aous.shortname as sys_shortname
				FROM actor.org_unit aou
				INNER JOIN actor.org_unit aous ON (COALESCE((actor.org_unit_ancestor_at_depth(aou.id, 1)).id, aou.id) = aous.id)
			)
			SELECT
			  -- Circ id; just for counting
			  combcirc.id AS circ_id,

			  -- User info, currently limiting to what's available from action.all_circulation
			  combcirc.usr_post_code AS usr_post_code,
			  combcirc.usr_birth_year AS usr_bith_year,
			  combcirc.usr_profile AS usr_profile_id,
			  pgtu.name AS usr_profile,
			  combcirc.usr_home_ou AS usr_home_ou_id,
			  aouuh.shortname AS usr_home_ou_shortname,
			  aouuh.name AS usr_home_ou_name,
			  aouus.sys_id AS usr_sys_id,
			  aouus.sys_shortname AS usr_sys_shortname,
			  aouus.sys_name AS usr_sys_name,

			  -- Circ info
			  -- Checkout
			  combcirc.xact_start AS xact_start,
			  CAST(TO_CHAR(combcirc.xact_start, 'YYYY') AS INTEGER) AS xact_start_year,
			  TO_CHAR(combcirc.xact_start, 'YYYY-MM') AS xact_start_year_mon,
			  TO_CHAR(combcirc.xact_start, 'YYYY-MM-DD') AS xact_start_date,
			  combcirc.circ_lib AS circ_lib_id,
			  aouco.shortname AS circ_lib_shortname,
			  aouco.name AS circ_lib_name,
			  aoucos.sys_id AS circ_sys_id,
			  aoucos.sys_shortname AS circ_sys_shortname,
			  aoucos.sys_name AS circ_sys_name,
			  auco.usrname AS circ_staff,
			  awso.name AS checkout_workstation,

			  combcirc.due_date AS due_date,
			  CAST(TO_CHAR(combcirc.due_date, 'YYYY') AS INTEGER) AS due_date_year,
			  TO_CHAR(combcirc.due_date, 'YYYY-MM') AS due_date_year_mon,
			  TO_CHAR(combcirc.due_date, 'YYYY-MM-DD') AS due_date_date,

			  -- Checkin
			  combcirc.xact_finish AS xact_finish,
			  CAST(TO_CHAR(combcirc.xact_finish, 'YYYY') AS INTEGER) AS xact_finish_year,
			  TO_CHAR(combcirc.xact_finish, 'YYYY-MM') AS xact_finish_year_mon,
			  TO_CHAR(combcirc.xact_finish, 'YYYY-MM-DD') AS xact_finish_date,
			  aouci.shortname AS checkin_lib_shortname,
			  aouci.name AS checkin_lib_name,
			  auci.usrname AS checkin_staff,
			  awsi.name AS checkin_workstation,
			  aoucis.sys_shortname AS checkin_sys_shortname,
			  aoucis.sys_name AS checkin_sys_name,

			  combcirc.checkin_time AS checkin_time,

			  -- Misc circ info
			  combcirc.renewal_remaining AS renewal_remaining,
			  combcirc.auto_renewal_remaining AS auto_renewal_remaining,
			  combcirc.grace_period AS grace_period,

			  combcirc.stop_fines AS stop_fines,
			  combcirc.stop_fines_time AS stop_fines_time,

			  combcirc.duration AS duration,
			  combcirc.fine_interval AS fine_interval,
			  combcirc.recurring_fine AS recurring_fine,
			  combcirc.max_fine AS max_fine,
			  combcirc.duration_rule AS duration_rule,
			  combcirc.recurring_fine_rule AS recurring_fine_rule,
			  combcirc.max_fine_rule AS max_fine_rule,
			  CASE WHEN combcirc.parent_circ IS NULL THEN 'circ' ELSE 'renew' END AS circ_renew,
			  CASE WHEN phone_renewal THEN 'phone' WHEN desk_renewal THEN 'desk' WHEN opac_renewal THEN 'opac' WHEN auto_renewal THEN 'auto' ELSE null END AS renewal_type,
			  CASE WHEN COALESCE(combcirc.checkin_time, now()) > combcirc.due_date THEN true ELSE false END AS is_overdue,

			  -- Copy info
			  acp.barcode AS copy_barcode,
			  acp.circ_modifier AS copy_circ_modifier_code,
			  ccm.name AS copy_circ_modifier_name,
			  acp.circ_lib AS copy_circ_lib_id,
			  acp.location AS location_id,
			  acpl.name AS location_name,
			  aoucp.shortname AS copy_circ_lib_shortname,
			  aoucp.name AS copy_circ_lib_name,
			  aoucps.sys_id AS copy_sys_id,
			  aoucps.sys_shortname AS copy_sys_shortname,
			  aoucps.sys_name AS copy_sys_name,
			  combcirc.copy_owning_lib AS copy_owning_lib_id,
			  aoucpo.shortname AS copy_owning_lib_shortname,
			  aoucpo.name AS copy_owning_lib_name,
			  TRIM(BOTH ' ' FROM concat_ws(' ', acnp.label, acn.label, acns.label)) AS copy_call_number_full,
			  acnp.label AS copy_call_number_prefix,
			  acn.label AS copy_call_number_label,
			  acns.label AS copy_call_number_suffix,
			  TRIM(BOTH ' ' FROM concat_ws(' ', acnp.label_sortkey, acn.label_sortkey, acns.label_sortkey)) AS copy_call_number_sortkey_full,
			  acnp.label_sortkey AS copy_call_number_prefix_sortkey,
			  acn.label_sortkey AS copy_call_number_label_sortkey,
			  acns.label_sortkey AS copy_call_number_suffix_sortkey,
			  COALESCE(rmsr.title, acp.dummy_title) AS title,
			  COALESCE(rmsr.author, acp.dummy_author) AS author,
			  rmsr.publisher AS publisher,
			  public.approximate_date(rmsr.pubdate, '0') AS pubdate,
			  array_to_string(rmsr.isbn, ', ') AS isbn,
			  array_to_string(rmsr.issn, ', ') AS issn,
			  part.label AS part_label,
			  part.label_sortkey AS part_label_sortkey,
			  acn.record AS bib_id,
			  rmsr.tcn_value AS tcn_value

			FROM
			  action.all_circulation combcirc

			  -- User
			  INNER JOIN actor.org_unit aouuh ON (combcirc.usr_home_ou = aouuh.id)
			  LEFT JOIN sys_level_orgs aouus ON (combcirc.usr_home_ou = aouus.id)
			  LEFT JOIN permission.grp_tree pgtu ON (combcirc.usr_profile = pgtu.id)

			  -- Circ
			  LEFT JOIN actor.workstation awso ON (combcirc.workstation = awso.id)
			  LEFT JOIN actor.workstation awsi ON (combcirc.checkin_workstation = awsi.id)
			  INNER JOIN actor.org_unit aouco ON (combcirc.circ_lib = aouco.id)
			  LEFT JOIN actor.org_unit aouci ON (combcirc.checkin_lib = aouci.id)
			  LEFT JOIN sys_level_orgs aoucos ON (combcirc.circ_lib = aoucos.id)
			  LEFT JOIN sys_level_orgs aoucis ON (combcirc.checkin_lib = aouci.id)
			  LEFT JOIN actor.usr auco ON (combcirc.circ_staff = auco.id)
			  LEFT JOIN actor.usr auci ON (combcirc.checkin_staff = auci.id)

			  -- Copy / call / title
			  INNER JOIN asset.copy acp ON (combcirc.target_copy = acp.id)
			  INNER JOIN asset.copy_location acpl ON (acp.location = acpl.id)
			  INNER JOIN actor.org_unit aoucp ON (acp.circ_lib = aoucp.id)
			  LEFT JOIN sys_level_orgs aoucps ON (combcirc.copy_circ_lib = aoucps.id)
			  LEFT JOIN actor.org_unit aoucpo ON (combcirc.copy_owning_lib = aoucpo.id)
			  LEFT JOIN sys_level_orgs aoucpos ON (combcirc.copy_owning_lib = aoucpos.id)
			  LEFT JOIN config.circ_modifier ccm ON (acp.circ_modifier = ccm.code)
			  INNER JOIN asset.call_number acn ON (acp.call_number = acn.id)
			  INNER JOIN asset.call_number_prefix acnp ON (acn.prefix = acnp.id)
			  INNER JOIN asset.call_number_suffix acns ON (acn.suffix = acns.id)
			  LEFT JOIN reporter.materialized_simple_record rmsr ON (acn.record = rmsr.id)
			  LEFT JOIN (
				SELECT bmp.record, bmp.label, bmp.label_sortkey, acmp.target_copy
				FROM biblio.monograph_part bmp
				INNER JOIN asset.copy_part_map acmp ON (acmp.part = bmp.id)
				WHERE NOT bmp.deleted
			  ) part ON (part.record = acn.record AND part.target_copy = acp.id)
		]]></oils_persist:source_definition>
		<field_groups>
			<group name="common" reporter:label="Common Fields"/>
			<group name="item" reporter:label="Item Fields"/>
			<group name="user" reporter:label="Patron Fields"/>
			<group name="title" reporter:label="Call Number and Title Fields"/>
			<group name="org" reporter:label="Libraries"/>
		</field_groups>
		<fields oils_persist:primary="circ_id">
			<field reporter:label="Circulation ID" name="circ_id" reporter:datatype="int" sr:suggest_transform="count_distinct" field_groups="common"/>
			<field reporter:label="Patron Post Code" name="usr_post_code" reporter:datatype="text" field_groups="user"/>
			<field reporter:label="Patron Birth Year" name="usr_bith_year" reporter:datatype="int" field_groups="user"/>
			<field reporter:label="Patron Profile Group" name="usr_profile_id" sr:hide_from="display" reporter:datatype="link" field_groups="user,common" sr:suggest_filter="true"/>
			<field reporter:label="Patron Profile Group" name="usr_profile" sr:hide_from="filter" reporter:datatype="text" field_groups="user,common"/>
			<field reporter:label="Patron Home Library" name="usr_home_ou_id" sr:hide_from="display" reporter:datatype="org_unit" field_groups="org,user,common" sr:suggest_filter="true"/>
			<field reporter:label="Patron Home Library Short (Policy) Name" sr:hide_from="filter" name="usr_home_ou_shortname" reporter:datatype="text" field_groups="org,user,common"/>
			<field reporter:label="Patron Home Library Name" name="usr_home_ou_name" sr:hide_from="filter" reporter:datatype="text" field_groups="org,user,common"/>
			<field reporter:label="Patron System Library" name="usr_sys_id" sr:hide_from="display" reporter:datatype="org_unit" field_groups="org,user,common" sr:suggest_filter="true"/>
			<field reporter:label="Patron System Library Short (Policy) Name" name="usr_sys_shortname" sr:hide_from="filter" reporter:datatype="text" field_groups="org,user"/>
			<field reporter:label="Patron System Library Name" name="usr_sys_name" sr:hide_from="filter" reporter:datatype="text" field_groups="org,user"/>
			<field reporter:label="Circulation Start Date/Time" name="xact_start" reporter:datatype="timestamp" sr:suggest_filter="true" field_groups="common"/>
			<field reporter:label="Circulation Start Year" name="xact_start_year" reporter:datatype="int"/>
			<field reporter:label="Circulation Start Year and Month" name="xact_start_year_mon" reporter:datatype="text" field_groups="common"/>
			<field reporter:label="Circulation Start Date" name="xact_start_date" reporter:datatype="timestamp"/>
			<field reporter:label="Checkout Library" name="circ_lib_id" sr:hide_from="display" reporter:datatype="org_unit" field_groups="org,common" sr:suggest_filter="true"/>
			<field reporter:label="Checkout Library Short (Policy) Name" name="circ_lib_shortname" sr:hide_from="filter" reporter:datatype="text" field_groups="org,common"/>
			<field reporter:label="Checkout Library Name" name="circ_lib_name" sr:hide_from="filter" reporter:datatype="text" field_groups="org,common"/>
			<field reporter:label="Checkout System" name="circ_sys_id" sr:hide_from="display" reporter:datatype="org_unit" field_groups="org" sr:suggest_filter="true"/>
			<field reporter:label="Checkout System Short (Policy) Name" name="circ_sys_shortname" sr:hide_from="filter" reporter:datatype="text" field_groups="org"/>
			<field reporter:label="Checkout System Name" name="circ_sys_name" sr:hide_from="filter" reporter:datatype="text" field_groups="org"/>
			<field reporter:label="Checkout Staff" name="circ_staff" reporter:datatype="text"/>
			<field reporter:label="Checkout Workstation" name="checkout_workstation" reporter:datatype="text"/>
			<field reporter:label="Due Date/Time" name="due_date" reporter:datatype="timestamp" field_groups="common" sr:suggest_filter="true"/>
			<field reporter:label="Due Date Year" name="due_date_year" reporter:datatype="int"/>
			<field reporter:label="Due Date Year and Month" name="due_date_year_mon" reporter:datatype="text" field_groups="common"/>
			<field reporter:label="Due Date" name="due_date_date" reporter:datatype="text"/>
			<field reporter:label="Circulation Finish Date/Time" name="xact_finish" reporter:datatype="timestamp"/>
			<field reporter:label="Circulation Finish Year" name="xact_finish_year" reporter:datatype="int"/>
			<field reporter:label="Circulation Finish Year and Month" name="xact_finish_year_mon" reporter:datatype="text"/>
			<field reporter:label="Circulation Finish Date" name="xact_finish_date" reporter:datatype="text"/>
			<field reporter:label="Checkin Library Short (Policy) Name" name="checkin_lib_shortname" sr:hide_from="filter" reporter:datatype="text" field_groups="org"/>
			<field reporter:label="Checkin Library Name" name="checkin_lib_name" sr:hide_from="filter" reporter:datatype="text" field_groups="org"/>
			<field reporter:label="Checkin Staff" name="checkin_staff" reporter:datatype="text"/>
			<field reporter:label="Checkin Workstation" name="checkin_workstation" reporter:datatype="text"/>
			<field reporter:label="Checkin System Short (Policy) Name" name="checkin_sys_shortname" sr:hide_from="filter" reporter:datatype="text" field_groups="org"/>
			<field reporter:label="Checkin System Name" name="checkin_sys_name" sr:hide_from="filter" reporter:datatype="text" field_groups="org"/>
			<field reporter:label="Checkin Date/Time" name="checkin_time" reporter:datatype="timestamp"/>
			<field reporter:label="Remaining Renewals" name="renewal_remaining" reporter:datatype="int" sr:suggest_transform="sum" field_groups="common"/>
			<field reporter:label="Remaining Autorenewals" name="auto_renewal_remaining" reporter:datatype="int" sr:suggest_transform="sum"/>
			<field reporter:label="Grace Period" name="grace_period" reporter:datatype="interval"/>
			<field reporter:label="Stop Fines Reason" name="stop_fines" reporter:datatype="text"/>
			<field reporter:label="Stop Fines Date/Time" name="stop_fines_time" reporter:datatype="timestamp"/>
			<field reporter:label="Circulation Duration" name="duration" reporter:datatype="interval"/>
			<field reporter:label="Fine Interval" name="fine_interval" reporter:datatype="interval"/>
			<field reporter:label="Recurring Fine Amount" name="recurring_fine" reporter:datatype="money"/>
			<field reporter:label="Max Fine Amount" name="max_fine" reporter:datatype="money"/>
			<field reporter:label="Circulation Duration Rule" name="duration_rule" reporter:datatype="text"/>
			<field reporter:label="Recurring Fine Rule" name="recurring_fine_rule" reporter:datatype="text"/>
			<field reporter:label="Max Fine Rule" name="max_fine_rule" reporter:datatype="text"/>
			<field reporter:label="Circulation or Renewal" name="circ_renew" reporter:datatype="text" field_groups="common" sr:suggest_filter="true"/>
			<field reporter:label="Renewal Type" name="renewal_type" reporter:datatype="text" field_groups="common" sr:suggest_filter="true"/>
			<field reporter:label="Overdue?" name="is_overdue" reporter:datatype="bool" field_groups="common" sr:suggest_filter="true"/>
			<field reporter:label="Item Barcode" name="copy_barcode" reporter:datatype="text" field_groups="item"/>
			<field reporter:label="Shelving Location" name="location_id" sr:hide_from="display" reporter:datatype="link" field_groups="item,common" sr:suggest_filter="true"/>
			<field reporter:label="Shelving Location" name="location_name" sr:hide_from="filter" reporter:datatype="text" field_groups="item,common"/>
			<field reporter:label="Item Circulation Modifier Code" name="copy_circ_modifier_code" reporter:datatype="link" field_groups="item,common" sr:suggest_filter="true"/>
			<field reporter:label="Item Circulation Modifier Name" name="copy_circ_modifier_name" reporter:datatype="text" field_groups="item"/>
			<field reporter:label="Item Circulating Library" name="copy_circ_lib_id" sr:hide_from="display" reporter:datatype="org_unit" field_groups="org,item"/>
			<field reporter:label="Item Circulating Library Short (Policy) Name" name="copy_circ_lib_shortname" sr:hide_from="filter" reporter:datatype="text" field_groups="org,item"/>
			<field reporter:label="Item Circulation Library Name" name="copy_circ_lib_name" sr:hide_from="filter" reporter:datatype="text" field_groups="org,item"/>
			<field reporter:label="Item System Library" name="copy_sys_id" sr:hide_from="display" reporter:datatype="org_unit" field_groups="org,item"/>
			<field reporter:label="Item System Short (Policy) Name" name="copy_sys_shortname" sr:hide_from="filter" reporter:datatype="text" field_groups="org,item"/>
			<field reporter:label="Item System Name" name="copy_sys_name" sr:hide_from="filter" reporter:datatype="text" field_groups="org,item"/>
			<field reporter:label="Item Owning Library" name="copy_owning_lib_id" sr:hide_from="display" reporter:datatype="org_unit" field_groups="org,item" sr:suggest_filter="true"/>
			<field reporter:label="Item Owning Library Short (Policy) Name" name="copy_owning_lib_shortname" sr:hide_from="filter" reporter:datatype="text" field_groups="org,item,common"/>
			<field reporter:label="Item Owning Library Name" name="copy_owning_lib_name" sr:hide_from="filter" reporter:datatype="text" field_groups="org,item,common"/>
			<field reporter:label="Full Call Number" name="copy_call_number_full" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="Call Number Prefix" name="copy_call_number_prefix" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="Call Number Label" name="copy_call_number_label" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="Call Number Suffix" name="copy_call_number_suffix" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="Full Call Number Sortkey" name="copy_call_number_sortkey_full" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="Call Number Prefix Sortkey" name="copy_call_number_prefix_sortkey" reporter:datatype="text"/>
			<field reporter:label="Call Number Label Sortkey" name="copy_call_number_label_sortkey" reporter:datatype="text"/>
			<field reporter:label="Call Number Suffix Sortkey" name="copy_call_number_suffix_sortkey" reporter:datatype="text"/>
			<field reporter:label="Call Number Dewey" name="copy_call_number_dewey" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="Call Number Dewey Block Tens" name="copy_call_number_dewey_block_tens" reporter:datatype="text" field_groups="title,common" sr:suggest_filter="true"/>
			<field reporter:label="Call Number Dewey Block Hundreds" name="copy_call_number_dewey_block_hundreds" reporter:datatype="text" field_groups="title,common" sr:suggest_filter="true"/>
			<field reporter:label="Call Number Dewey Range Tens" name="copy_call_number_dewey_range_tens" reporter:datatype="text" field_groups="title,common" sr:suggest_filter="true"/>
			<field reporter:label="Call Number Dewey Range Hundreds" name="copy_call_number_dewey_range_hundreds" reporter:datatype="text" field_groups="title,common" sr:suggest_filter="true"/>
			<field reporter:label="Monographic Part" name="part_label" reporter:datatype="text" field_groups="item,title"/>
			<field reporter:label="Monographic Part Sortkey" name="part_label_sortkey" reporter:datatype="text" field_groups="item,title"/>
			<field reporter:label="Bibliographic Record ID" name="bib_id" reporter:datatype="int" field_groups="title"/>
			<field reporter:label="TCN" name="tcn_value" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="Title" name="title" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="Author" name="author" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="Publisher" name="publisher" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="Publication Date" name="pubdate" reporter:datatype="int" field_groups="title"/>
			<field reporter:label="ISBN" name="isbn" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="ISSN" name="issn" reporter:datatype="text" field_groups="title"/>
		</fields>
		<links>
			<link field="usr_profile_id" reltype="has_a" key="id" map="" class="pgt"/>
			<link sr:org_filter_field="owning_lib" field="location_id" reltype="has_a" key="id" map="" class="acpl"/>
			<link field="copy_circ_modifier_code" reltype="might_have" key="code" map="" class="ccm"/>
		</links>
	</class>

	<class id="srusr" controller="simple-reporter.ui" oils_persist:virtual="true" reporter:label="Simple Reporter Patrons">
		<oils_persist:source_definition><![CDATA[
			WITH sys_level_orgs AS (
				SELECT aou.id AS id,
				  aous.id AS sys_id,
				  aous.name AS sys_name,
				  aous.shortname as sys_shortname
				FROM actor.org_unit aou
				INNER JOIN actor.org_unit aous ON (COALESCE((actor.org_unit_ancestor_at_depth(aou.id, 1)).id, aou.id) = aous.id)
			)
			SELECT
			  au.home_ou AS home_ou_filter,
			  au.id AS user_id,
			  cardp.barcode AS barcode_primary,
			  au.usrname AS usrname,
			  au.email AS email,
			  CONCAT_WS(' ', au.prefix, au.first_given_name, au.second_given_name, au.family_name, au.suffix) AS full_name,
			  au.prefix AS prefix,
			  au.first_given_name AS first_given_name,
			  au.second_given_name AS second_given_name,
			  au.family_name AS family_name,
			  au.suffix AS suffix,
			  CONCAT_WS(' ', COALESCE(au.pref_prefix, au.prefix), COALESCE(au.pref_first_given_name, au.first_given_name),
			  COALESCE(au.pref_second_given_name, au.second_given_name), COALESCE(au.pref_family_name, au.family_name),
			  COALESCE(au.pref_suffix, au.suffix)) AS pref_full_name,
			  COALESCE(au.pref_prefix, au.prefix) AS pref_prefix,
			  COALESCE(au.pref_first_given_name, au.first_given_name) AS pref_first_given_name,
			  COALESCE(au.pref_second_given_name, au.second_given_name) AS pref_second_given_name,
			  COALESCE(au.pref_family_name, au.family_name) AS pref_family_name,
			  COALESCE(au.pref_suffix, au.suffix) AS pref_suffix,
			  au.profile AS profile_id,
			  pgt.name AS profile,
			  au.alias AS alias,
			  CONCAT_WS(', ', au.day_phone, au.evening_phone, au.other_phone) AS all_phone,
			  au.day_phone AS day_phone,
			  au.evening_phone AS evening_phone,
			  au.other_phone AS other_phone,
			  au.dob AS dob,
			  CAST(TO_CHAR(au.dob, 'YYYY') AS INTEGER) AS dob_year,
			  TO_CHAR(au.dob, 'YYYY-MM') AS dob_year_month,
			  EXTRACT('year' FROM DATE_TRUNC('year', AGE(au.dob))) AS dob_age_years,
			  au.active AS active,
			  au.barred AS barred,
			  au.deleted AS deleted,
			  au.juvenile AS juvenile,
			  au.claims_returned_count AS claims_returned_count,
			  au.credit_forward_balance AS credit_forward_balance,
			  au.create_date AS create_date,
			  CAST(TO_CHAR(au.create_date, 'YYYY') AS INTEGER) AS create_date_year,
			  TO_CHAR(au.create_date, 'YYYY-MM') AS create_date_year_mon,
			  TO_CHAR(au.create_date, 'YYYY-MM-DD') AS create_date_date,
			  au.expire_date AS expire_date,
			  CAST(TO_CHAR(au.expire_date, 'YYYY') AS INTEGER) AS expire_date_year,
			  TO_CHAR(au.expire_date, 'YYYY-MM') AS expire_date_year_mon,
			  TO_CHAR(au.expire_date, 'YYYY-MM-DD') AS expire_date_date,
			  au.claims_never_checked_out_count AS claims_never_checked_out_count,
			  au.last_update_time AS last_update_time,
			  au.home_ou AS home_ou_id,
			  aouh.shortname AS home_ou_shortname,
			  aouh.name AS home_ou_name,
			  aous.sys_id AS home_sys_id,
			  aous.sys_shortname AS home_sys_shortname,
			  aous.sys_name AS home_sys_name,
			  auam.valid AS mailing_valid,
			  auam.address_type AS mailing_address_type,
			  auam.street1 AS mailing_street1,
			  auam.street2 AS mailing_street2,
			  auam.city AS mailing_city,
			  auam.state AS mailing_state,
			  auam.country AS mailing_country,
			  auam.post_code AS mailing_post_code,
			  auam.county AS mailing_county,
			  auam.within_city_limits AS mailing_within_city_limits,
			  auam.pending AS mailing_pending,
			  CONCAT_WS(' ', CONCAT_WS(', ', auam.street1, auam.street2), CONCAT_WS(', ', auam.city, auam.state), auam.post_code) AS mailing_full,
			  auap.valid AS physical_valid,
			  auap.address_type AS physical_address_type,
			  auap.street1 AS physical_street1,
			  auap.street2 AS physical_street2,
			  auap.city AS physical_city,
			  auap.state AS physical_state,
			  auap.country AS physical_country,
			  auap.post_code AS physical_post_code,
			  auap.county AS physical_county,
			  auap.within_city_limits AS physical_within_city_limits,
			  auap.pending AS physical_pending,
			  CONCAT_WS(' ', CONCAT_WS(', ', auap.street1, auap.street2), CONCAT_WS(', ', auap.city, auap.state), auap.post_code) AS physical_full,
			  CASE WHEN aus_hold.value ~ 'phone' THEN TRUE ELSE FALSE END AS phone_notify,
			  CASE WHEN aus_hold.value ~ 'sms' THEN TRUE ELSE FALSE END AS sms_notify,
			  CASE WHEN aus_hold.value ~ 'email' THEN TRUE ELSE FALSE END AS email_notify,
			  CASE WHEN aus_coll.value ILIKE 'true' THEN TRUE ELSE FALSE END AS collections_exempt,
			  CASE WHEN aus_noti.value ILIKE 'true' THEN TRUE ELSE FALSE END AS notice_optin,
			  asceum1.stat_cat_entry AS legacy_stat_cat1,
			  asceum2.stat_cat_entry AS legacy_stat_cat2,

			  -- Pile up aggregates at the bottom to make the GROUP BY more manageable.
			  STRING_AGG(DISTINCT carda.barcode, ', ') AS barcode_active,
			  STRING_AGG(DISTINCT cards.barcode, ', ') AS barcode_all,
			  STRING_AGG(DISTINCT pgts.name, ', ') AS secondary_groups,
			  COUNT(DISTINCT CASE WHEN circ.checkin_time IS NULL AND circ.xact_finish IS NULL AND now() > circ.due_date THEN circ.id ELSE NULL END) AS circs_overdue,
			  COUNT(DISTINCT CASE WHEN circ.checkin_time IS NULL AND circ.xact_finish IS NULL THEN circ.id ELSE NULL END) AS circs_open

			FROM
			  actor.usr au
			  INNER JOIN actor.org_unit aouh ON (au.home_ou = aouh.id)
			  INNER JOIN sys_level_orgs aous ON (au.home_ou = aous.id)
			  LEFT JOIN actor.card cardp ON (au.card = cardp.id)
			  LEFT JOIN actor.card carda ON (au.id = carda.usr AND carda.active)
			  LEFT JOIN actor.card cards ON (au.id = cards.usr)
			  INNER JOIN permission.grp_tree pgt ON (au.profile = pgt.id)
			  LEFT JOIN permission.usr_grp_map pugm ON (au.id = pugm.usr)
			  LEFT JOIN permission.grp_tree pgts ON (pugm.grp = pgts.id)
			  LEFT JOIN actor.usr_address auam ON (au.mailing_address = auam.id)
			  LEFT JOIN actor.usr_address auap ON (au.billing_address = auap.id)
			  LEFT JOIN action.circulation circ ON (au.id = circ.usr)
			  LEFT JOIN actor.usr_setting aus_hold ON (au.id = aus_hold.usr AND aus_hold.name = 'opac.hold_notify')
			  LEFT JOIN actor.usr_setting aus_coll ON (au.id = aus_coll.usr AND aus_coll.name = 'circ.collections.exempt')
			  LEFT JOIN actor.usr_setting aus_noti ON (au.id = aus_noti.usr AND aus_noti.name = 'circ.default_overdue_notices_enabled')
			  LEFT JOIN actor.stat_cat_entry_usr_map asceum1 ON (au.id = asceum1.target_usr AND asceum1.stat_cat = 1)
			  LEFT JOIN actor.stat_cat_entry_usr_map asceum2 ON (au.id = asceum2.target_usr AND asceum2.stat_cat = 2)

			GROUP BY 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,
			  16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,
			  31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,
			  46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,
			  61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,
			  76,77,78,79,80,81
		]]></oils_persist:source_definition>
		<field_groups>
			<group name="common" reporter:label="Common Fields"/>
			<group name="name" reporter:label="Name Fields"/>
			<group name="contact" reporter:label="Contact Fields"/>
			<group name="address" reporter:label="Address Related Fields"/>
			<group name="org" reporter:label="Libraries"/>
		</field_groups>
		<fields oils_persist:primary="user_id">
			<field reporter:label="VIEW_USER Permission Verification" name="home_ou_filter" reporter:datatype="int" sr:hide_from="display,filter" sr:force_transform="reporter.intersect_user_perm_ou,SR__USER_ID,VIEW_USER" sr:force_filter="true" sr:force_filtervalues="t"/>
			<field reporter:label="User ID" name="user_id" reporter:datatype="int" sr:suggest_transform="count_distinct" field_groups="common"/>
			<field reporter:label="Primary Barcode" name="barcode_primary" reporter:datatype="text" field_groups="common"/>
			<field reporter:label="OPAC/Staff Client Username" name="usrname" reporter:datatype="text" field_groups="common"/>
			<field reporter:label="Email" name="email" reporter:datatype="text" field_groups="contact,common"/>
			<field reporter:label="Full Name" name="full_name" reporter:datatype="text" field_groups="name,common"/>
			<field reporter:label="Prefix" name="prefix" reporter:datatype="text" field_groups="name"/>
			<field reporter:label="First Name" name="first_given_name" reporter:datatype="text" field_groups="name,common"/>
			<field reporter:label="Middle Name" name="second_given_name" reporter:datatype="text" field_groups="name"/>
			<field reporter:label="Last Name" name="family_name" reporter:datatype="text" field_groups="name,common"/>
			<field reporter:label="Suffix" name="suffix" reporter:datatype="text" field_groups="name"/>
			<field reporter:label="Full Preferred Name" name="pref_full_name" reporter:datatype="text" field_groups="name,common"/>
			<field reporter:label="Preferred Prefix" name="pref_prefix" reporter:datatype="text" field_groups="name"/>
			<field reporter:label="Preferred First Name" name="pref_first_given_name" reporter:datatype="text" field_groups="name,common"/>
			<field reporter:label="Preferred Middle Name" name="pref_second_given_name" reporter:datatype="text" field_groups="name"/>
			<field reporter:label="Preferred Last Name" name="pref_family_name" reporter:datatype="text" field_groups="name,common"/>
			<field reporter:label="Preferred Suffix" name="pref_suffix" reporter:datatype="text" field_groups="name"/>
			<field reporter:label="Main (Profile) Permission Group" name="profile_id" reporter:datatype="link" sr:hide_from="display" sr:suggest_filter="true"/>
			<field reporter:label="Main (Profile) Permission Group" name="profile" reporter:datatype="text" sr:hide_from="filter" field_groups="common"/>
			<field reporter:label="OPAC/Staff Client Holds Alias" name="alias" reporter:datatype="text" field_groups="common,name"/>
			<field reporter:label="All Phone Numbers" name="all_phone" reporter:datatype="text" field_groups="contact"/>
			<field reporter:label="Daytime Phone" name="day_phone" reporter:datatype="text" field_groups="contact,common"/>
			<field reporter:label="Evening Phone" name="evening_phone" reporter:datatype="text" field_groups="contact"/>
			<field reporter:label="Other Phone" name="other_phone" reporter:datatype="text" field_groups="contact"/>
			<field reporter:label="Date of Birth" name="dob" reporter:datatype="timestamp"/>
			<field reporter:label="Birth Year" name="dob_year" reporter:datatype="int"/>
			<field reporter:label="Birth Year and Month" name="dob_year_month" reporter:datatype="text"/>
			<field reporter:label="Age" name="dob_age_years" reporter:datatype="int"/>
			<field reporter:label="Active?" name="active" reporter:datatype="bool" sr:suggest_filter="true" field_groups="common"/>
			<field reporter:label="Barred?" name="barred" reporter:datatype="bool" sr:suggest_filter="true" field_groups="common"/>
			<field reporter:label="Deleted?" name="deleted" reporter:datatype="bool" sr:suggest_filter="true" field_groups="common"/>
			<field reporter:label="Juvenile?" name="juvenile" reporter:datatype="bool" sr:suggest_filter="true" field_groups="common"/>
			<field reporter:label="Claims-returned Count" name="claims_returned_count" reporter:datatype="int" sr:suggest_transform="sum"/>
			<field reporter:label="User Credit Balance" name="credit_forward_balance" reporter:datatype="money"/>
			<field reporter:label="Record Creation Date/Time" name="create_date" reporter:datatype="timestamp"/>
			<field reporter:label="Record Creation Year" name="create_date_year" reporter:datatype="int"/>
			<field reporter:label="Record Creation Year and Month" name="create_date_year_mon" reporter:datatype="text"/>
			<field reporter:label="Record Creation Date" name="create_date_date" reporter:datatype="text"/>
			<field reporter:label="Privilege Expiration Date/Time" name="expire_date" reporter:datatype="timestamp" field_groups="common" sr:suggest_filter="true"/>
			<field reporter:label="Privilege Expiration Year" name="expire_date_year" reporter:datatype="int"/>
			<field reporter:label="Privilege Expiration Year and Month" name="expire_date_year_mon" sr:suggest_filter="true" reporter:datatype="text"/>
			<field reporter:label="Privilege Expiration Date" name="expire_date_date" reporter:datatype="text"/>
			<field reporter:label="Claims Never Checked Out Count" name="claims_never_checked_out_count" reporter:datatype="int" sr:suggest_transform="sum"/>
			<field reporter:label="Record Last Update Time" name="last_update_time" reporter:datatype="timestamp"/>
			<field reporter:label="Home Library" name="home_ou_id" reporter:datatype="org_unit" sr:suggest_filter="true" sr:hide_from="display" field_groups="org,common"/>
			<field reporter:label="Home Library Short (Policy) Name" name="home_ou_shortname" reporter:datatype="text" sr:hide_from="filter" field_groups="org,common"/>
			<field reporter:label="Home Library Name" name="home_ou_name" reporter:datatype="text" sr:hide_from="filter" field_groups="org,common"/>
			<field reporter:label="Home System" name="home_sys_id" reporter:datatype="org_unit" sr:suggest_filter="true" sr:hide_from="display" field_groups="org,common"/>
			<field reporter:label="Home System Short (Policy) Name" name="home_sys_shortname" reporter:datatype="text" sr:hide_from="filter" field_groups="org,common"/>
			<field reporter:label="Home System Name" name="home_sys_name" reporter:datatype="text" sr:hide_from="filter" field_groups="org,common"/>
			<field reporter:label="Mailing Address Valid?" name="mailing_valid" reporter:datatype="bool" field_groups="address"/>
			<field reporter:label="Mailing Address Type" name="mailing_address_type" reporter:datatype="text" field_groups="address"/>
			<field reporter:label="Mailing Address Street1" name="mailing_street1" reporter:datatype="text" field_groups="address"/>
			<field reporter:label="Mailing Address Street2" name="mailing_street2" reporter:datatype="text" field_groups="address"/>
			<field reporter:label="Mailing Address City" name="mailing_city" reporter:datatype="text" field_groups="address"/>
			<field reporter:label="Mailing Address State" name="mailing_state" reporter:datatype="text" field_groups="address"/>
			<field reporter:label="Mailing Address Country" name="mailing_country" reporter:datatype="text" field_groups="address"/>
			<field reporter:label="Mailing Address Postal Code" name="mailing_post_code" reporter:datatype="text" field_groups="address"/>
			<field reporter:label="Mailing Address County" name="mailing_county" reporter:datatype="text" field_groups="address"/>
			<field reporter:label="Mailing Address Within City Limits?" name="mailing_within_city_limits" reporter:datatype="bool" field_groups="address"/>
			<field reporter:label="Mailing Address Pending?" name="mailing_pending" reporter:datatype="bool" field_groups="address"/>
			<field reporter:label="Full Mailing Address" name="mailing_full" reporter:datatype="text" field_groups="address,common"/>
			<field reporter:label="Physical Address Valid?" name="physical_valid" reporter:datatype="bool" field_groups="address"/>
			<field reporter:label="Physical Address Type" name="physical_address_type" reporter:datatype="text" field_groups="address"/>
			<field reporter:label="Physical Address Street1" name="physical_street1" reporter:datatype="text" field_groups="address"/>
			<field reporter:label="Physical Address Street2" name="physical_street2" reporter:datatype="text" field_groups="address"/>
			<field reporter:label="Physical Address City" name="physical_city" reporter:datatype="text" field_groups="address"/>
			<field reporter:label="Physical Address State" name="physical_state" reporter:datatype="text" field_groups="address"/>
			<field reporter:label="Physical Address Country" name="physical_country" reporter:datatype="text" field_groups="address"/>
			<field reporter:label="Physical Address Postal Code" name="physical_post_code" reporter:datatype="text" field_groups="address"/>
			<field reporter:label="Physical Address Country" name="physical_county" reporter:datatype="text" field_groups="address"/>
			<field reporter:label="Physical Address Within City Limits?" name="physical_within_city_limits" reporter:datatype="bool" field_groups="address"/>
			<field reporter:label="Physical Address Pending?" name="physical_pending" reporter:datatype="bool" field_groups="address"/>
			<field reporter:label="Full Physical Address" name="physical_full" reporter:datatype="text" field_groups="address,common"/>
			<field reporter:label="Hold Notifications: Phone?" name="phone_notify" reporter:datatype="bool" field_groups="contact"/>
			<field reporter:label="Hold Notifications: SMS?" name="sms_notify" reporter:datatype="bool" field_groups="contact"/>
			<field reporter:label="Hold Notifications: Email?" name="email_notify" reporter:datatype="bool" field_groups="contact"/>
			<field reporter:label="Collections Exempt?" name="collections_exempt" reporter:datatype="bool"/>
			<field reporter:label="Email Notice Opt-in?" name="notice_optin" reporter:datatype="bool"/>
			<field reporter:label="Legacy Stat Cat 1" name="legacy_stat_cat1" reporter:datatype="text"/>
			<field reporter:label="Legacy Stat Cat 2" name="legacy_stat_cat2" reporter:datatype="text"/>
			<field reporter:label="All Active Barcodes" name="barcode_active" reporter:datatype="text" sr:suggest_operator="contains"/>
			<field reporter:label="All Barcodes" name="barcode_all" reporter:datatype="text" sr:suggest_operator="contains"/>
			<field reporter:label="Secondary Permission Groups" name="secondary_groups" reporter:datatype="text" sr:suggest_operator="contains"/>
			<field reporter:label="Overdue Circulations" name="circs_overdue" reporter:datatype="int" sr:suggest_transform="sum" sr:suggest_filter="true" field_groups="common"/>
			<field reporter:label="Open Circulations" name="circs_open" reporter:datatype="int" sr:suggest_transform="sum" sr:suggest_filter="true" field_groups="common"/>
		</fields>
		<links>
			<link field="profile_id" reltype="has_a" key="id" map="" class="pgt"/>
		</links>
	</class>

	<class id="srcp" controller="simple-reporter.ui" oils_persist:virtual="true" reporter:label="Simple Reporter Collections">
		<oils_persist:source_definition><![CDATA[
			WITH sys_level_orgs AS (
				SELECT aou.id AS id,
				  aous.id AS sys_id,
				  aous.name AS sys_name,
				  aous.shortname as sys_shortname
				FROM actor.org_unit aou
				INNER JOIN actor.org_unit aous ON (COALESCE((actor.org_unit_ancestor_at_depth(aou.id, 1)).id, aou.id) = aous.id)
			)
			SELECT
			  -- ids
			  acp.id AS copy_id,
			  acp.floating AS floating_id,
			  acn.id AS acn_id,
			  acp.circ_lib AS circ_lib_id,
			  acp.status AS status_id,
			  acp.location AS location_id,
			  acp.age_protect AS age_protect_id,
			  aous.sys_id AS circ_sys_id,
			  acn.owning_lib AS owning_lib_id,
			  aouos.sys_id AS owning_sys_id,
			  awsi.id AS inv_workstation_id,

			  -- OUs
			  aou.shortname AS circ_lib_shortname,
			  aou.name AS circ_lib_name,
			  aous.sys_shortname AS circ_sys_shortname,
			  aous.sys_name AS circ_sys_name,
			  aouo.shortname AS owning_lib_shortname,
			  aouo.name AS owning_lib_name,
			  aouos.sys_shortname AS owning_sys_shortname,
			  aouos.sys_name AS owning_sys_name,

			  -- dates
			  acp.create_date AS create_date_time,
			  CAST(TO_CHAR(acp.create_date, 'YYYY') AS INTEGER) AS create_date_year,
			  TO_CHAR(acp.create_date, 'YYYY-MM') AS create_date_year_mon,
			  TO_CHAR(acp.create_date, 'YYYY-MM-DD') AS create_date_date,
			  acp.active_date AS active_date_time,
			  CAST(TO_CHAR(acp.active_date, 'YYYY') AS INTEGER) AS active_date_year,
			  TO_CHAR(acp.active_date, 'YYYY-MM') AS active_date_year_mon,
			  TO_CHAR(acp.active_date, 'YYYY-MM-DD') AS active_date_date,
			  acp.edit_date AS edit_date_time,
			  CAST(TO_CHAR(acp.edit_date, 'YYYY') AS INTEGER) AS edit_date_year,
			  TO_CHAR(acp.edit_date, 'YYYY-MM') AS edit_date_year_mon,
			  TO_CHAR(acp.edit_date, 'YYYY-MM-DD') AS edit_date_date,
			  acp.status_changed_time AS status_changed_time_time,
			  CAST(TO_CHAR(acp.status_changed_time, 'YYYY') AS INTEGER) AS status_changed_year,
			  TO_CHAR(acp.status_changed_time, 'YYYY-MM') AS status_changed_year_mon,
			  TO_CHAR(acp.status_changed_time, 'YYYY-MM-DD') AS status_changed_date,
			  ali.inventory_date AS latest_inv_date,
			  CAST(TO_CHAR(ali.inventory_date, 'YYYY') AS INTEGER) AS latest_inv_date_year,
			  TO_CHAR(ali.inventory_date, 'YYYY-MM') AS latest_inv_date_year_mon,
			  TO_CHAR(ali.inventory_date, 'YYYY-MM-DD') AS latest_inv_date_date,

			  -- acp
			  acp.barcode AS barcode,
			  ccs.name AS status,
			  acpl.name AS location_name,
			  acp.circ_modifier AS copy_circ_modifier_code,
			  ccm.name AS copy_circ_modifier_name,
			  acp.price AS price,
			  acp.cost AS acq_price,
			  acp.deleted AS copy_deleted,
			  acp.ref AS reference,
			  acp.circulate AS copy_circulate,
			  (acp.circulate AND acpl.circulate) AS circulate,
			  acp.holdable AS copy_holdable,
			  acp.deposit AS deposit,
			  acp.deposit_amount AS deposit_amount,
			  acp.alert_message AS alert_message,
			  acp.opac_visible AS copy_opac_visible,
			  (acp.opac_visible AND ccs.opac_visible) AS opac_visible,
			  crahp.name AS age_protect,
			  CASE WHEN acp.age_protect IS NULL THEN FALSE ELSE (now() - crahp.age) < acp.active_date END AS under_age_protection,
			  (acp.holdable AND ccs.holdable AND acpl.holdable) AS holdable,
			  acp.copy_number AS copy_number,
			  acp.circ_as_type AS circ_as_type,
			  acp.loan_duration AS loan_duration_int,
			  CASE acp.loan_duration WHEN 1 THEN 'short' WHEN 2 THEN 'medium' ELSE 'long' END AS loan_duration,
			  acp.fine_level AS fine_level_int,
			  CASE acp.fine_level WHEN 1 THEN 'low' WHEN 2 THEN 'medium' ELSE 'high' END AS fine_level,

			  -- Call Number
			  TRIM(BOTH ' ' FROM CONCAT_WS(' ', acnp.label, acn.label, acns.label)) AS copy_call_number_full,
			  acnp.label AS copy_call_number_prefix,
			  acn.label AS copy_call_number_label,
			  acns.label AS copy_call_number_suffix,
			  TRIM(BOTH ' ' FROM concat_ws(' ', acnp.label_sortkey, acn.label_sortkey, acns.label_sortkey)) AS copy_call_number_sortkey_full,
			  acnp.label_sortkey AS copy_call_number_prefix_sortkey,
			  acn.label_sortkey AS copy_call_number_label_sortkey,
			  acns.label_sortkey AS copy_call_number_suffix_sortkey,
			  racnd.dewey AS call_number_dewey,
			  racnd.dewey_block_tens AS call_number_dewey_block_tens,
			  racnd.dewey_block_hundreds AS call_number_dewey_block_hundreds,
			  racnd.dewey_range_tens AS call_number_dewey_range_tens,
			  racnd.dewey_range_hundreds AS call_number_dewey_range_hundreds,

			  -- Misc
			  COALESCE(rmsr.title, acp.dummy_title) AS title,
			  COALESCE(rmsr.author, acp.dummy_author) AS author,
			  rmsr.publisher AS publisher,
			  public.approximate_date(rmsr.pubdate, '0') AS pubdate,
			  COALESCE(array_to_string(rmsr.isbn, ', '), acp.dummy_isbn) AS isbn,
			  array_to_string(rmsr.issn, ', ') AS issn,
			  part.label AS part_label,
			  part.label_sortkey AS part_label_sortkey,
			  acn.record AS bib_id,
			  rmsr.tcn_value AS tcn_value,
			  acn.deleted AS call_deleted,
			  bre.deleted AS bib_deleted,
			  ccs.holdable AS status_holdable,
			  acpl.holdable AS location_holdable,
			  acp.circulate AS location_circulate,
			  awsi.name AS inventory_workstation,
			  aucr.usrname AS creating_user,
			  aued.usrname AS editing_user,

			  -- Aggregates
			  -- may decide these price games aren't worth it, but estimated collection value is useful and missing prices are not.
			  COALESCE(acp.cost, acp.price, (select first(value::numeric(8,2)) from actor.org_unit_ancestor_setting('cat.default_item_price', acp.circ_lib)), 5.00) AS est_price,
			  COUNT(DISTINCT combcirc.id) AS circ_total,
			  STRING_AGG(mfde_subj.value, ', ') AS bib_subjects

			FROM
			  asset.copy acp
			  LEFT JOIN config.circ_modifier ccm ON (acp.circ_modifier = ccm.code)
			  INNER JOIN asset.call_number acn ON (acp.call_number = acn.id)
			  LEFT JOIN reporter.asset_call_number_dewey racnd ON (acn.id = racnd.call_number)
			  INNER JOIN config.copy_status ccs ON (acp.status = ccs.id)
			  LEFT JOIN config.rule_age_hold_protect crahp ON (acp.age_protect = crahp.id)
			  INNER JOIN asset.copy_location acpl ON (acp.location = acpl.id)
			  INNER JOIN asset.call_number_prefix acnp ON (acn.prefix = acnp.id)
			  INNER JOIN asset.call_number_suffix acns ON (acn.suffix = acns.id)
			  LEFT JOIN asset.latest_inventory ali ON (acp.id = ali.copy)
			  LEFT JOIN actor.workstation awsi ON (ali.inventory_workstation = awsi.id)
			  LEFT JOIN reporter.materialized_simple_record rmsr ON (acn.record = rmsr.id)
			  INNER JOIN actor.org_unit aou ON (acp.circ_lib = aou.id)
			  LEFT JOIN sys_level_orgs aous ON (acp.circ_lib = aous.id)
			  INNER JOIN actor.org_unit aouo ON (acn.owning_lib = aouo.id)
			  LEFT JOIN sys_level_orgs aouos ON (acn.owning_lib = aouos.id)
			  INNER JOIN biblio.record_entry bre ON (acn.record = bre.id)
			  LEFT JOIN metabib.flat_display_entry mfde_subj ON (acn.record = mfde_subj.source AND mfde_subj.name = 'subject')
			  LEFT JOIN action.all_circulation combcirc ON (acp.id = combcirc.target_copy)
			  INNER JOIN actor.usr aucr ON (acp.creator = aucr.id)
			  INNER JOIN actor.usr aued ON (acp.editor = aued.id)
			  LEFT JOIN (
				SELECT bmp.record, bmp.label, bmp.label_sortkey, acmp.target_copy
				FROM biblio.monograph_part bmp
				INNER JOIN asset.copy_part_map acmp ON (acmp.part = bmp.id)
				WHERE NOT bmp.deleted
			  ) part ON (part.record = acn.record AND part.target_copy = acp.id)

			GROUP BY 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,
			  16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,
			  31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,
			  46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,
			  61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,
			  76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,
			  91,92,93,94,95,96

		]]></oils_persist:source_definition>
		<field_groups>
			<group name="common" reporter:label="Common Fields"/>
			<group name="dates" reporter:label="Date Fields"/>
			<group name="title" reporter:label="Call Number and Title Fields"/>
			<group name="org" reporter:label="Libraries"/>
		</field_groups>
		<fields oils_persist:primary="copy_id">
			<field reporter:label="Item ID" name="copy_id" reporter:datatype="int" sr:suggest_transform="count_distinct"/>
			<field reporter:label="Floating Group" name="floating_id" reporter:datatype="link" sr:hide_from="display"/>
			<field reporter:label="Call Number" name="acn_id" reporter:datatype="int" sr:hide_from="display"/>
			<field reporter:label="Circulating Library" name="circ_lib_id" reporter:datatype="org_unit" sr:hide_from="display" field_groups="org" sr:suggest_filter="true"/>
			<field reporter:label="Item Status" name="status_id" reporter:datatype="link" sr:hide_from="display" field_groups="common" sr:suggest_filter="true"/>
			<field reporter:label="Shelving Location" name="location_id" reporter:datatype="link" sr:hide_from="display" field_groups="common" sr:suggest_filter="true"/>
			<field reporter:label="Age Protection" name="age_protect_id" reporter:datatype="link" sr:hide_from="display"/>
			<field reporter:label="Circulating System" name="circ_sys_id" reporter:datatype="org_unit" sr:hide_from="display" field_groups="org"/>
			<field reporter:label="Owning Library" name="owning_lib_id" reporter:datatype="org_unit" sr:hide_from="display" field_groups="org,common" sr:suggest_filter="true"/>
			<field reporter:label="Owning System" name="owning_sys_id" reporter:datatype="org_unit" sr:hide_from="display" field_groups="org,common" sr:suggest_filter="true"/>
			<field reporter:label="Inventory Workstation" name="inv_workstation_id" reporter:datatype="link" sr:hide_from="display"/>
			<field reporter:label="Circulating Library Short (Policy) Name" name="circ_lib_shortname" reporter:datatype="text" sr:hide_from="filter" field_groups="org,common"/>
			<field reporter:label="Circulating Library Name" name="circ_lib_name" reporter:datatype="text" sr:hide_from="filter" field_groups="org,common"/>
			<field reporter:label="Circulating System Short (Policy) Name" name="circ_sys_shortname" reporter:datatype="text" sr:hide_from="filter" field_groups="org"/>
			<field reporter:label="Circulating System Name" name="circ_sys_name" reporter:datatype="text" sr:hide_from="filter" field_groups="org"/>
			<field reporter:label="Owning Library Short (Policy) Name" name="owning_lib_shortname" reporter:datatype="text" sr:hide_from="filter" field_groups="org,common"/>
			<field reporter:label="Owning Library Name" name="owning_lib_name" reporter:datatype="text" sr:hide_from="filter" field_groups="org,common"/>
			<field reporter:label="Owning System Short (Policy) Name" name="owning_sys_shortname" reporter:datatype="text" sr:hide_from="filter" field_groups="org"/>
			<field reporter:label="Owning System Name" name="owning_sys_name" reporter:datatype="text" sr:hide_from="filter" field_groups="org"/>
			<field reporter:label="Item Create Date/Time" name="create_date_time" reporter:datatype="timestamp" field_groups="dates"/>
			<field reporter:label="Item Create Year" name="create_date_year" reporter:datatype="int" field_groups="dates"/>
			<field reporter:label="Item Create Year and Month" name="create_date_year_mon" reporter:datatype="text" field_groups="dates"/>
			<field reporter:label="Item Create Date" name="create_date_date" reporter:datatype="text" field_groups="dates"/>
			<field reporter:label="Item Active Date/Time" name="active_date_time" reporter:datatype="timestamp" field_groups="dates"/>
			<field reporter:label="Item Active Year" name="active_date_year" reporter:datatype="int" field_groups="dates"/>
			<field reporter:label="Item Active Year and Month" name="active_date_year_mon" reporter:datatype="text" field_groups="dates"/>
			<field reporter:label="Item Active Date" name="active_date_date" reporter:datatype="text" field_groups="dates"/>
			<field reporter:label="Item Edit Date/Time" name="edit_date_time" reporter:datatype="timestamp" field_groups="dates"/>
			<field reporter:label="Item Edit Year" name="edit_date_year" reporter:datatype="int" field_groups="dates"/>
			<field reporter:label="Item Edit Year and Month" name="edit_date_year_mon" reporter:datatype="text" field_groups="dates"/>
			<field reporter:label="Item Edit Date" name="edit_date_date" reporter:datatype="text" field_groups="dates"/>
			<field reporter:label="Item Status Changed Date/Time" name="status_changed_time_time" reporter:datatype="timestamp" field_groups="dates"/>
			<field reporter:label="Item Status Changed Year" name="status_changed_year" reporter:datatype="int" field_groups="dates"/>
			<field reporter:label="Item Status Changed Year and Month" name="status_changed_year_mon" reporter:datatype="text" field_groups="dates"/>
			<field reporter:label="Item Status Changed Date" name="status_changed_date" reporter:datatype="text" field_groups="dates"/>
			<field reporter:label="Item Latest Inventory Date/Time" name="latest_inv_date" reporter:datatype="timestamp" field_groups="dates"/>
			<field reporter:label="Item Latest Inventory Year" name="latest_inv_date_year" reporter:datatype="int" field_groups="dates"/>
			<field reporter:label="Item Latest Inventory Year and Month" name="latest_inv_date_year_mon" reporter:datatype="text" field_groups="dates"/>
			<field reporter:label="Item Latest Inventory Date" name="latest_inv_date_date" reporter:datatype="text" field_groups="dates"/>
			<field reporter:label="Barcode" name="barcode" reporter:datatype="text" field_groups="common"/>
			<field reporter:label="Item Status" name="status" reporter:datatype="text" sr:hide_from="filter" field_groups="common"/>
			<field reporter:label="Shelving Location" name="location_name" reporter:datatype="text" sr:hide_from="filter" field_groups="common"/>
			<field reporter:label="Circulation Modifier Code" name="copy_circ_modifier_code" reporter:datatype="link" field_groups="common" sr:suggest_filter="true"/>
			<field reporter:label="Circulation Modifier Name" name="copy_circ_modifier_name" reporter:datatype="text" sr:hide_from="filter" field_groups="common"/>
			<field reporter:label="Price" name="price" reporter:datatype="money" sr:suggest_transform="sum"/>
			<field reporter:label="Acquisition Cost" name="acq_price" reporter:datatype="money" sr:suggest_transform="sum"/>
			<field reporter:label="Item Deleted?" name="copy_deleted" reporter:datatype="bool" sr:suggest_filter="true"/>
			<field reporter:label="Reference?" name="reference" reporter:datatype="bool"/>
			<field reporter:label="Item Circulate?" name="copy_circulate" reporter:datatype="bool"/>
			<field reporter:label="Circulate?" name="circulate" reporter:datatype="bool"/>
			<field reporter:label="Item Holdable?" name="copy_holdable" reporter:datatype="bool"/>
			<field reporter:label="Deposit?" name="deposit" reporter:datatype="bool"/>
			<field reporter:label="Deposit Amount" name="deposit_amount" reporter:datatype="money" sr:suggest_transform="sum"/>
			<field reporter:label="Alert Message" name="alert_message" reporter:datatype="text"/>
			<field reporter:label="Item OPAC Visible?" name="copy_opac_visible" reporter:datatype="bool"/>
			<field reporter:label="OPAC Visible?" name="opac_visible" reporter:datatype="bool"/>
			<field reporter:label="Age Protection" name="age_protect" reporter:datatype="text" sr:hide_from="filter"/>
			<field reporter:label="Currently Age Protected?" name="under_age_protection" reporter:datatype="bool" field_groups="common"/>
			<field reporter:label="Holdable?" name="holdable" reporter:datatype="bool" field_groups="common"/>
			<field reporter:label="Item Number" name="copy_number" reporter:datatype="int"/>
			<field reporter:label="Circ as Type" name="circ_as_type" reporter:datatype="text"/>
			<field reporter:label="Loan Duration Value" name="loan_duration_int" reporter:datatype="int"/>
			<field reporter:label="Loan Duration" name="loan_duration" reporter:datatype="text"/>
			<field reporter:label="Fine Level Value" name="fine_level_int" reporter:datatype="int"/>
			<field reporter:label="Fine Level" name="fine_level" reporter:datatype="text"/>
			<field reporter:label="Creating User" name="creating_user" reporter:datatype="text"/>
			<field reporter:label="Editing User" name="editing_user" reporter:datatype="text"/>
			<field reporter:label="Full Call Number" name="copy_call_number_full" reporter:datatype="text" field_groups="title,common"/>
			<field reporter:label="Call Number Prefix" name="copy_call_number_prefix" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="Call Number Label" name="copy_call_number_label" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="Call Number Suffix" name="copy_call_number_suffix" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="Full Call Number Sortkey" name="copy_call_number_sortkey_full" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="Call Number Prefix Sortkey" name="copy_call_number_prefix_sortkey" reporter:datatype="text"/>
			<field reporter:label="Call Number Label Sortkey" name="copy_call_number_label_sortkey" reporter:datatype="text"/>
			<field reporter:label="Call Number Suffix Sortkey" name="copy_call_number_suffix_sortkey" reporter:datatype="text"/>
			<field reporter:label="Title" name="title" reporter:datatype="text" field_groups="title,common"/>
			<field reporter:label="Author" name="author" reporter:datatype="text" field_groups="title,common"/>
			<field reporter:label="Publisher" name="publisher" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="Publication Year" name="pubdate" reporter:datatype="int" field_groups="title"/>
			<field reporter:label="ISBN" name="isbn" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="ISSN" name="issn" reporter:datatype="text" field_groups="title"/>
			<field reporter:label="Monographic Part" name="part_label" reporter:datatype="text" field_groups="item,title"/>
			<field reporter:label="Monographic Part Sortkey" name="part_label_sortkey" reporter:datatype="text" field_groups="item,title"/>
			<field reporter:label="Bibliographic Record ID" name="bib_id" reporter:datatype="int" field_groups="title,common"/>
			<field reporter:label="TCN" name="tcn_value" reporter:datatype="text" field_groups="title,common"/>
			<field reporter:label="Call Number Deleted?" name="call_deleted" reporter:datatype="bool" sr:suggest_filter="true"/>
			<field reporter:label="Bibliographic Record Deleted?" name="bib_deleted" reporter:datatype="bool" sr:suggest_filter="true"/>
			<field reporter:label="Item Status Holdable?" name="status_holdable" reporter:datatype="bool"/>
			<field reporter:label="Shelving Location Holdable?" name="location_holdable" reporter:datatype="bool"/>
			<field reporter:label="Shelving Location Circulate?" name="location_circulate" reporter:datatype="bool"/>
			<field reporter:label="Latest Inventory Workstation" name="inventory_workstation" reporter:datatype="text"/>
			<field reporter:label="Estimated Price" name="est_price" reporter:datatype="money" sr:suggest_transform="sum"/>
			<field reporter:label="Total Circulations" name="circ_total" reporter:datatype="int" sr:suggest_transform="sum" field_groups="common"/>
			<field reporter:label="All Bibliographic Record Subjects" name="bib_subjects" reporter:datatype="text" sr:suggest_operator="contains"/>
		</fields>
		<links>
			<link field="floating_id" reltype="has_a" key="id" map="" class="cfg"/>
			<link field="status_id" reltype="has_a" key="id" map="" class="ccs"/>
			<link sr:org_filter_field="owning_lib" field="location_id" reltype="has_a" key="id" map="" class="acpl"/>
			<link field="copy_circ_modifier_code" reltype="might_have" key="code" map="" class="ccm"/>
			<link field="age_protect_id" reltype="might_have" key="id" map="" class="crahp"/>
			<link field="inv_workstation_id" reltype="might_have" key="id" map="" class="aws"/>
		</links>
	</class>

	<class id="srwd" controller="simple-reporter.ui" oils_persist:virtual="true" reporter:label="Simple Reporter Weeding">
		<oils_persist:source_definition><![CDATA[
			WITH sys_level_orgs AS (
				SELECT aou.id AS id,
				  aous.id AS sys_id,
				  aous.name AS sys_name,
				  aous.shortname as sys_shortname
				FROM actor.org_unit aou
				INNER JOIN actor.org_unit aous ON (COALESCE((actor.org_unit_ancestor_at_depth(aou.id, 1)).id, aou.id) = aous.id)
			)
			SELECT
			  -- ids
			  acp.id AS copy_id,
			  acn.id AS acn_id,
			  acp.circ_lib AS circ_lib_id,
			  acp.status AS status_id,
			  acp.location AS location_id,
			  acp.age_protect AS age_protect_id,
			  aous.sys_id AS circ_sys_id,
			  acn.owning_lib AS owning_lib_id,
			  aouos.sys_id AS owning_sys_id,
			  awsi.id AS inv_workstation_id,

			  -- OUs
			  aou.shortname AS circ_lib_shortname,
			  aou.name AS circ_lib_name,
			  aous.sys_shortname AS circ_sys_shortname,
			  aous.sys_name AS circ_sys_name,
			  aouo.shortname AS owning_lib_shortname,
			  aouo.name AS owning_lib_name,
			  aouos.sys_shortname AS owning_sys_shortname,
			  aouos.sys_name AS owning_sys_name,

			  -- dates
			  acp.create_date AS create_date_time,
			  (EXTRACT(EPOCH FROM AGE(acp.create_date)) / 86400) AS item_age_days,
			  (EXTRACT(YEAR FROM AGE(acp.create_date)) * 12) + EXTRACT(MONTH FROM AGE(acp.create_date)) AS item_age_months,
			  EXTRACT(YEAR FROM AGE(acp.create_date)) AS item_age_years,
			  CAST(TO_CHAR(acp.create_date, 'YYYY') AS INTEGER) AS create_date_year,
			  TO_CHAR(acp.create_date, 'YYYY-MM') AS create_date_year_mon,
			  TO_CHAR(acp.create_date, 'YYYY-MM-DD') AS create_date_date,
			  acp.active_date AS active_date_time,
			  (EXTRACT(EPOCH FROM AGE(acp.active_date)) / 86400) AS item_active_days,
			  EXTRACT(YEAR FROM AGE(acp.active_date)) * 12 + EXTRACT(MONTH FROM AGE(acp.active_date)) AS item_active_months,
			  EXTRACT(YEAR FROM AGE(acp.active_date)) AS item_active_years,
			  CAST(TO_CHAR(acp.active_date, 'YYYY') AS INTEGER) AS active_date_year,
			  TO_CHAR(acp.active_date, 'YYYY-MM') AS active_date_year_mon,
			  TO_CHAR(acp.active_date, 'YYYY-MM-DD') AS active_date_date,
			  acp.edit_date AS edit_date_time,
			  (EXTRACT(EPOCH FROM AGE(acp.edit_date)) / 86400) AS item_edit_age_days,
			  (EXTRACT(YEAR FROM AGE(acp.edit_date)) * 12) + EXTRACT(MONTH FROM AGE(acp.edit_date)) AS item_edit_age_months,
			  EXTRACT(YEAR FROM AGE(acp.edit_date)) AS item_edit_age_years,
			  CAST(TO_CHAR(acp.edit_date, 'YYYY') AS INTEGER) AS edit_date_year,
			  TO_CHAR(acp.edit_date, 'YYYY-MM') AS edit_date_year_mon,
			  TO_CHAR(acp.edit_date, 'YYYY-MM-DD') AS edit_date_date,
			  acp.status_changed_time AS status_changed_time_time,
			  CAST(TO_CHAR(acp.status_changed_time, 'YYYY') AS INTEGER) AS status_changed_year,
			  TO_CHAR(acp.status_changed_time, 'YYYY-MM') AS status_changed_year_mon,
			  TO_CHAR(acp.status_changed_time, 'YYYY-MM-DD') AS status_changed_date,
			  ali.inventory_date AS latest_inv_date,
			  (EXTRACT(EPOCH FROM AGE(ali.inventory_date)) / 86400) AS inventory_age_days,
			  EXTRACT(YEAR FROM AGE(ali.inventory_date)) * 12 + EXTRACT(MONTH FROM AGE(ali.inventory_date)) AS inventory_age_months,
			  EXTRACT(YEAR FROM AGE(ali.inventory_date)) AS inventory_age_years,
			  CAST(TO_CHAR(ali.inventory_date, 'YYYY') AS INTEGER) AS inv_date_year,
			  TO_CHAR(ali.inventory_date, 'YYYY-MM') AS inv_date_year_mon,
			  TO_CHAR(ali.inventory_date, 'YYYY-MM-DD') AS inv_date_date,

			  -- acp
			  acp.barcode AS barcode,
			  ccs.name AS status,
			  acpl.name AS location_name,
			  acp.circ_modifier AS circ_modifier_code,
			  ccm.name AS circ_modifier_name,
			  acp.price AS price,
			  acp.cost AS acq_price,
			  acp.deleted AS copy_deleted,
			  acp.ref AS reference,
			  acp.circulate AS copy_circulate,
			  (acp.circulate AND acpl.circulate) AS circulate,
			  acp.holdable AS copy_holdable,
			  acp.deposit AS deposit,
			  acp.deposit_amount AS deposit_amount,
			  acp.alert_message AS alert_message,
			  acp.opac_visible AS copy_opac_visible,
			  (acp.opac_visible AND ccs.opac_visible) AS opac_visible,
			  crahp.name AS age_protect,
			  CASE WHEN acp.age_protect IS NULL THEN FALSE ELSE (now() - crahp.age) < acp.active_date END AS under_age_protection,
			  (acp.holdable AND ccs.holdable AND acpl.holdable) AS holdable,
			  acp.copy_number AS copy_number,
			  acp.circ_as_type AS circ_as_type,
			  acp.loan_duration AS loan_duration_int,
			  CASE acp.loan_duration WHEN 1 THEN 'short' WHEN 2 THEN 'medium' ELSE 'long' END AS loan_duration,
			  acp.fine_level AS fine_level_int,
			  CASE acp.fine_level WHEN 1 THEN 'low' WHEN 2 THEN 'medium' ELSE 'high' END AS fine_level,

			  -- Call Number
			  TRIM(BOTH ' ' FROM CONCAT_WS(' ', acnp.label, acn.label, acns.label)) AS copy_call_number_full,
			  acnp.label AS copy_call_number_prefix,
			  acn.label AS copy_call_number_label,
			  acns.label AS copy_call_number_suffix,
			  TRIM(BOTH ' ' FROM concat_ws(' ', acnp.label_sortkey, acn.label_sortkey, acns.label_sortkey)) AS copy_call_number_sortkey_full,
			  acnp.label_sortkey AS copy_call_number_prefix_sortkey,
			  acn.label_sortkey AS copy_call_number_label_sortkey,
			  acns.label_sortkey AS copy_call_number_suffix_sortkey,
			  racnd.dewey AS call_number_dewey,
			  racnd.dewey_block_tens AS call_number_dewey_block_tens,
			  racnd.dewey_block_hundreds AS call_number_dewey_block_hundreds,
			  racnd.dewey_range_tens AS call_number_dewey_range_tens,
			  racnd.dewey_range_hundreds AS call_number_dewey_range_hundreds,

			  -- Misc
			  COALESCE(rmsr.title, acp.dummy_title) AS title,
			  COALESCE(rmsr.author, acp.dummy_author) AS author,
			  rmsr.publisher AS publisher,
			  public.approximate_date(rmsr.pubdate, '0') AS pubdate,
			  COALESCE(array_to_string(rmsr.isbn, ', '), acp.dummy_isbn) AS isbn,
			  array_to_string(rmsr.issn, ', ') AS issn,
			  part.label AS part_label,
			  part.label_sortkey AS part_label_sortkey,
			  acn.record AS bib_id,
			  rmsr.tcn_value AS tcn_value,
			  acn.deleted AS call_deleted,
			  bre.deleted AS bib_deleted,
			  ccs.holdable AS status_holdable,
			  acpl.holdable AS location_holdable,
			  acp.circulate AS location_circulate,
			  awsi.name AS inventory_workstation,

			  -- Aggregates
			  -- may decide these price games aren't worth it, but estimated collection value is useful
			  COALESCE(acp.cost, acp.price, (select first(value::numeric(8,2)) from actor.org_unit_ancestor_setting('cat.default_item_price', acp.circ_lib)), 5.00) AS est_price,
			  STRING_AGG(mfde_subj.value, ', ') AS bib_subjects,
			  MAX(combcirc.xact_start) AS last_circ_datetime,
			  (EXTRACT(EPOCH FROM AGE(MAX(combcirc.xact_start))) / 86400) AS last_circ_age_days,
			  (EXTRACT(YEAR FROM AGE(MAX(combcirc.xact_start))) * 12) + EXTRACT(MONTH FROM AGE(MAX(combcirc.xact_start))) AS last_circ_age_months,
			  EXTRACT(YEAR FROM AGE(MAX(combcirc.xact_start))) AS last_circ_age_years,
			  CAST(TO_CHAR(MAX(combcirc.xact_start), 'YYYY') AS INTEGER) AS last_circ_year,
			  TO_CHAR(MAX(combcirc.xact_start), 'YYYY-MM') AS last_circ_year_mon,
			  TO_CHAR(MAX(combcirc.xact_start), 'YYYY-MM-DD') AS last_circ_date,
			  COALESCE(MAX(combcirc.xact_start), acp.create_date) AS last_circ_create_datetime,
			  (EXTRACT(EPOCH FROM AGE(COALESCE(MAX(combcirc.xact_start), acp.create_date))) / 86400) AS last_circ_create_age_days,
			  (EXTRACT(YEAR FROM AGE(COALESCE(MAX(combcirc.xact_start), acp.create_date))) * 12) + EXTRACT(MONTH FROM AGE(COALESCE(MAX(combcirc.xact_start), acp.create_date))) AS last_circ_create_age_months,
			  EXTRACT(YEAR FROM AGE(COALESCE(MAX(combcirc.xact_start), acp.create_date))) AS last_circ_create_age_years,
			  CAST(TO_CHAR(COALESCE(MAX(combcirc.xact_start), acp.create_date), 'YYYY') AS INTEGER) AS last_circ_create_year,
			  TO_CHAR(COALESCE(MAX(combcirc.xact_start), acp.create_date), 'YYYY-MM') AS last_circ_create_year_mon,
			  TO_CHAR(COALESCE(MAX(combcirc.xact_start), acp.create_date), 'YYYY-MM-DD') AS last_circ_create_date,
			  COUNT(DISTINCT combcirc.id) AS circ_total, -- good for finding low performers to lose or ragged copies to replace
			  COUNT(DISTINCT CASE WHEN date_part('year', now()) = date_part('year', combcirc.xact_start) THEN combcirc.id ELSE NULL END) AS circ_ytd,
			  COUNT(DISTINCT CASE WHEN date_part('year', now() - '1 year'::interval) = date_part('year', combcirc.xact_start) THEN combcirc.id ELSE NULL END) AS circ_last_year,
			  COUNT(DISTINCT CASE WHEN date_part('year', now() - '2 year'::interval) = date_part('year', combcirc.xact_start) THEN combcirc.id ELSE NULL END) AS circ_two_years_ago,
			  COUNT(DISTINCT CASE WHEN date_part('year', now() - '3 year'::interval) = date_part('year', combcirc.xact_start) THEN combcirc.id ELSE NULL END) AS circ_three_years_ago,
			  COUNT(DISTINCT CASE WHEN date_part('year', now() - '5 year'::interval) <= date_part('year', combcirc.xact_start) THEN combcirc.id ELSE NULL END) AS circ_last_five_years

			FROM
			  asset.copy acp
			  LEFT JOIN config.circ_modifier ccm ON (acp.circ_modifier = ccm.code)
			  INNER JOIN asset.call_number acn ON (acp.call_number = acn.id)
			  LEFT JOIN reporter.asset_call_number_dewey racnd ON (acn.id = racnd.call_number)
			  INNER JOIN config.copy_status ccs ON (acp.status = ccs.id)
			  LEFT JOIN config.rule_age_hold_protect crahp ON (acp.age_protect = crahp.id)
			  INNER JOIN asset.copy_location acpl ON (acp.location = acpl.id)
			  INNER JOIN asset.call_number_prefix acnp ON (acn.prefix = acnp.id)
			  INNER JOIN asset.call_number_suffix acns ON (acn.suffix = acns.id)
			  LEFT JOIN asset.latest_inventory ali ON (acp.id = ali.copy)
			  LEFT JOIN actor.workstation awsi ON (ali.inventory_workstation = awsi.id)
			  LEFT JOIN reporter.materialized_simple_record rmsr ON (acn.record = rmsr.id)
			  INNER JOIN actor.org_unit aou ON (acp.circ_lib = aou.id)
			  LEFT JOIN sys_level_orgs aous ON (acp.circ_lib = aous.id)
			  INNER JOIN actor.org_unit aouo ON (acn.owning_lib = aouo.id)
			  LEFT JOIN sys_level_orgs aouos ON (acn.owning_lib = aouos.id)
			  INNER JOIN biblio.record_entry bre ON (acn.record = bre.id)
			  LEFT JOIN metabib.flat_display_entry mfde_subj ON (acn.record = mfde_subj.source AND mfde_subj.name = 'subject')
			  LEFT JOIN action.all_circulation combcirc ON (acp.id = combcirc.target_copy)
			  LEFT JOIN (
				SELECT bmp.record, bmp.label, bmp.label_sortkey, acmp.target_copy
				FROM biblio.monograph_part bmp
				INNER JOIN asset.copy_part_map acmp ON (acmp.part = bmp.id)
				WHERE NOT bmp.deleted
			  ) part ON (part.record = acn.record AND part.target_copy = acp.id)

			GROUP BY 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,
			  16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,
			  31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,
			  46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,
			  61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,
			  76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,
			  91,92,93,94,95,96,97,98,99,100,101,102,103,104,105

		]]></oils_persist:source_definition>
		<field_groups>
			<group name="common" reporter:label="Common Fields"/>
			<group name="dates" reporter:label="Date Fields"/>
			<group name="inv" reporter:label="Inventory Fields"/>
			<group name="title" reporter:label="Call Number and Title Fields"/>
			<group name="org" reporter:label="Libraries"/>
		</field_groups>
		<fields oils_persist:primary="copy_id">
			 <field reporter:label="Item ID" name="copy_id" reporter:datatype="int" sr:suggest_transform="count_distinct" field_groups="common"/>
			 <field reporter:label="Call Number ID" name="acn_id" reporter:datatype="int" sr:hide_from="display"/>
			 <field reporter:label="Circulating Library" name="circ_lib_id" reporter:datatype="org_unit" sr:hide_from="display" field_groups="org,common" sr:suggest_filter="true"/>
			 <field reporter:label="Item Status" name="status_id" reporter:datatype="link" sr:hide_from="display" sr:suggest_filter="true"/>
			 <field reporter:label="Shelving Location" name="location_id" reporter:datatype="link" sr:hide_from="display" field_groups="common" sr:suggest_filter="true"/>
			 <field reporter:label="Age Protection" name="age_protect_id" reporter:datatype="link" sr:hide_from="display"/>
			 <field reporter:label="Circulating System" name="circ_sys_id" reporter:datatype="org_unit" sr:hide_from="display" field_groups="org,common"/>
			 <field reporter:label="Owning Library" name="owning_lib_id" reporter:datatype="org_unit" sr:hide_from="display" field_groups="org,common" sr:suggest_filter="true"/>
			 <field reporter:label="Owning System" name="owning_sys_id" reporter:datatype="org_unit" sr:hide_from="display" field_groups="org,common"/>
			 <field reporter:label="Last Inventory Workstation" name="inv_workstation_id" reporter:datatype="link" sr:hide_from="display" field_groups="inv"/>
			 <field reporter:label="Circulating Library Short (Policy) Name" name="circ_lib_shortname" reporter:datatype="text" sr:hide_from="filter" field_groups="org,common"/>
			 <field reporter:label="Circulating Library Name" name="circ_lib_name" reporter:datatype="text" sr:hide_from="filter" field_groups="org"/>
			 <field reporter:label="Circulating System Short (Policy) Name" name="circ_sys_shortname" reporter:datatype="text" sr:hide_from="filter" field_groups="org,common"/>
			 <field reporter:label="Circulating System Name" name="circ_sys_name" reporter:datatype="text" sr:hide_from="filter" field_groups="org"/>
			 <field reporter:label="Owning Library Short (Policy) Name" name="owning_lib_shortname" reporter:datatype="text" sr:hide_from="filter" field_groups="org,common"/>
			 <field reporter:label="Owning Library Name" name="owning_lib_name" reporter:datatype="text" sr:hide_from="filter" field_groups="org,common"/>
			 <field reporter:label="Owning System Short (Policy) Name" name="owning_sys_shortname" reporter:datatype="text" sr:hide_from="filter" field_groups="org"/>
			 <field reporter:label="Owning System Name" name="owning_sys_name" reporter:datatype="text" sr:hide_from="filter" field_groups="org"/>
			 <field reporter:label="Last Circulated Date / Time" name="last_circ_datetime" reporter:datatype="timestamp" field_groups="dates,common" sr:suggest_filter="true"/>
			 <field reporter:label="Last Circulated Days Ago" name="last_circ_age_days" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Last Circluated Months Ago" name="last_circ_age_months" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Last Circulated Years Ago" name="last_circ_age_years" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Last Circulated Year" name="last_circ_year" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Last Circulated Year and Month" name="last_circ_year_mon" reporter:datatype="text" field_groups="dates"/>
			 <field reporter:label="Last Circulated Date" name="last_circ_date" reporter:datatype="text" field_groups="dates"/>
			 <field reporter:label="Last Circulated or Item Created Date / Time" name="last_circ_create_datetime" reporter:datatype="timestamp" field_groups="dates,common" sr:suggest_filter="true"/>
			 <field reporter:label="Last Circulated or Item Created Days Ago" name="last_circ_create_age_days" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Last Circulated or Item Created Months Ago" name="last_circ_create_age_months" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Last Circulated or Item Created Years Ago" name="last_circ_create_age_years" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Last Circulated or Item Created Year" name="last_circ_create_year" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Last Circulated or Item Created Year and Month" name="last_circ_create_year_mon" reporter:datatype="text" field_groups="dates"/>
			 <field reporter:label="Last Circulated or Item Created Date" name="last_circ_create_date" reporter:datatype="text" field_groups="dates"/>
			 <field reporter:label="Create Date / Time" name="create_date_time" reporter:datatype="timestamp" field_groups="dates"/>
			 <field reporter:label="Item Age (Days)" name="item_age_days" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Item Age (Months)" name="item_age_months" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Item Age (Years)" name="item_age_years" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Create Date Year" name="create_date_year" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Create Date Year and Month" name="create_date_year_mon" reporter:datatype="text" field_groups="dates"/>
			 <field reporter:label="Create Date" name="create_date_date" reporter:datatype="text" field_groups="dates"/>
			 <field reporter:label="Active Date / Time" name="active_date_time" reporter:datatype="timestamp" field_groups="dates"/>
			 <field reporter:label="Active For (Days)" name="item_active_days" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Active For (Months)" name="item_active_months" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Active For (Years)" name="item_active_years" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Active Date Year" name="active_date_year" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Active Date Year and Month" name="active_date_year_mon" reporter:datatype="text" field_groups="dates"/>
			 <field reporter:label="Active Date" name="active_date_date" reporter:datatype="text" field_groups="dates"/>
			 <field reporter:label="Last Edit Date / Time" name="edit_date_time" reporter:datatype="timestamp" field_groups="dates"/>
			 <field reporter:label="Last Edited Days Ago" name="item_edit_age_days" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Last Edited Months Ago" name="item_edit_age_months" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Last Edited Years Ago" name="item_edit_age_years" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Last Edit Date Year" name="edit_date_year" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Last Edit Date Year and Month" name="edit_date_year_mon" reporter:datatype="text" field_groups="dates"/>
			 <field reporter:label="Last Edit Date" name="edit_date_date" reporter:datatype="text" field_groups="dates"/>
			 <field reporter:label="Item Status Changed Date / Time" name="status_changed_time_time" reporter:datatype="timestamp" field_groups="dates"/>
			 <field reporter:label="Item Status Changed Year" name="status_changed_year" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Item Status Changed Year and Month" name="status_changed_year_mon" reporter:datatype="text" field_groups="dates"/>
			 <field reporter:label="Item Status Changed Date" name="status_changed_date" reporter:datatype="text" field_groups="dates"/>
			 <field reporter:label="Last Inventoried Date / Time" name="latest_inv_date" reporter:datatype="timestamp" field_groups="inv,dates"/>
			 <field reporter:label="Last Inventoried Days Ago" name="inventory_age_days" reporter:datatype="int" field_groups="inv,dates"/>
			 <field reporter:label="Last Inventoried Months Ago" name="inventory_age_months" reporter:datatype="int" field_groups="inv,dates"/>
			 <field reporter:label="Last Inventoried Years Ago" name="inventory_age_years" reporter:datatype="int" field_groups="inv,dates"/>
			 <field reporter:label="Last Inventoried Year" name="inv_date_year" reporter:datatype="int" field_groups="inv,dates"/>
			 <field reporter:label="Last Inventoried Year and Month" name="inv_date_year_mon" reporter:datatype="text" field_groups="inv,dates"/>
			 <field reporter:label="Last Inventoried Date" name="inv_date_date" reporter:datatype="text" field_groups="inv,dates"/>
			 <field reporter:label="Barcode" name="barcode" reporter:datatype="text" field_groups="common"/>
			 <field reporter:label="Item Status" name="status" reporter:datatype="text" field_groups="common"/>
			 <field reporter:label="Shelving Location" name="location_name" reporter:datatype="text" field_groups="common"/>
			 <field reporter:label="Circulation Modifier Code" name="circ_modifier_code" reporter:datatype="text" field_groups="common" sr:suggest_filter="true"/>
			 <field reporter:label="Circulation Modifier Name" name="circ_modifier_name" reporter:datatype="text" sr:hide_from="filter" field_groups="common"/>
			 <field reporter:label="Price" name="price" reporter:datatype="money" sr:suggest_transform="sum"/>
			 <field reporter:label="Acquisition Cost" name="acq_price" reporter:datatype="money" sr:suggest_transform="sum"/>
			 <field reporter:label="Item Deleted?" name="copy_deleted" reporter:datatype="bool" sr:suggest_filter="true"/>
			 <field reporter:label="Reference?" name="reference" reporter:datatype="bool"/>
			 <field reporter:label="Item Circulate?" name="copy_circulate" reporter:datatype="bool"/>
			 <field reporter:label="Circulate?" name="circulate" reporter:datatype="bool"/>
			 <field reporter:label="Item Holdable?" name="copy_holdable" reporter:datatype="bool"/>
			 <field reporter:label="Deposit?" name="deposit" reporter:datatype="bool"/>
			 <field reporter:label="Deposit Amount" name="deposit_amount" reporter:datatype="money" sr:suggest_transform="sum"/>
			 <field reporter:label="Alert Messge" name="alert_message" reporter:datatype="text"/>
			 <field reporter:label="Item OPAC Visible?" name="copy_opac_visible" reporter:datatype="bool"/>
			 <field reporter:label="OPAC Visible?" name="opac_visible" reporter:datatype="bool"/>
			 <field reporter:label="Age Protection Rule" name="age_protect" reporter:datatype="text" sr:hide_from="filter"/>
			 <field reporter:label="Under Age Protection?" name="under_age_protection" reporter:datatype="bool"/>
			 <field reporter:label="Holdable?" name="holdable" reporter:datatype="bool"/>
			 <field reporter:label="Item Number" name="copy_number" reporter:datatype="int"/>
			 <field reporter:label="Item Circ As Type" name="circ_as_type" reporter:datatype="text"/>
			 <field reporter:label="Loan Duration (Int)" name="loan_duration_int" reporter:datatype="int"/>
			 <field reporter:label="Loan Duration" name="loan_duration" reporter:datatype="text"/>
			 <field reporter:label="Fine Level (Int)" name="fine_level_int" reporter:datatype="int"/>
			 <field reporter:label="Fine Level" name="fine_level" reporter:datatype="text"/>
			 <field reporter:label="Full Call Number" name="copy_call_number_full" reporter:datatype="text" field_groups="title,common"/>
			 <field reporter:label="Call Number Prefix" name="copy_call_number_prefix" reporter:datatype="text" field_groups="title"/>
			 <field reporter:label="Call Number Label" name="copy_call_number_label" reporter:datatype="text" field_groups="title,common"/>
			 <field reporter:label="Call Number Suffix" name="copy_call_number_suffix" reporter:datatype="text" field_groups="title"/>
			 <field reporter:label="Call Number Dewey" name="call_number_dewey" reporter:datatype="text" field_groups="title"/>
			 <field reporter:label="Full Call Number Sortkey" name="copy_call_number_sortkey_full" reporter:datatype="text" field_groups="title"/>
			 <field reporter:label="Call Number Prefix Sortkey" name="copy_call_number_prefix_sortkey" reporter:datatype="text"/>
			 <field reporter:label="Call Number Label Sortkey" name="copy_call_number_label_sortkey" reporter:datatype="text"/>
			 <field reporter:label="Call Number Suffix Sortkey" name="copy_call_number_suffix_sortkey" reporter:datatype="text"/>
			 <field reporter:label="Call Number Dewey Block Tens" name="call_number_dewey_block_tens" reporter:datatype="text" field_groups="title,common"/>
			 <field reporter:label="Call Number Dewey Block Hundreds" name="call_number_dewey_block_hundreds" reporter:datatype="text" field_groups="title,common"/>
			 <field reporter:label="Call Number Dewey Range Tens" name="call_number_dewey_range_tens" reporter:datatype="text" field_groups="title"/>
			 <field reporter:label="Call Number Dewey Range Hundreds" name="call_number_dewey_range_hundreds" reporter:datatype="text" field_groups="title"/>
			 <field reporter:label="Title" name="title" reporter:datatype="text" field_groups="title,common"/>
			 <field reporter:label="Author" name="author" reporter:datatype="text" field_groups="title,common"/>
			 <field reporter:label="Publisher" name="publisher" reporter:datatype="text" field_groups="title"/>
			 <field reporter:label="Publication Year" name="pubdate" reporter:datatype="int" field_groups="title"/>
			 <field reporter:label="ISBN" name="isbn" reporter:datatype="text" field_groups="title"/>
			 <field reporter:label="ISSN" name="issn" reporter:datatype="text" field_groups="title"/>
			 <field reporter:label="Monographic Part" name="part_label" reporter:datatype="text" field_groups="item,title"/>
			 <field reporter:label="Monographic Part Sortkey" name="part_label_sortkey" reporter:datatype="text" field_groups="item,title"/>
			 <field reporter:label="Bibliographic Record ID" name="bib_id" reporter:datatype="int" field_groups="title,common"/>
			 <field reporter:label="TCN" name="tcn_value" reporter:datatype="text" field_groups="title,common"/>
			 <field reporter:label="Call Number Deleted?" name="call_deleted" reporter:datatype="bool"/>
			 <field reporter:label="Bibliographic Record Deleted?" name="bib_deleted" reporter:datatype="bool"/>
			 <field reporter:label="Item Status Holdable?" name="status_holdable" reporter:datatype="bool"/>
			 <field reporter:label="Shelving Location Holdable?" name="location_holdable" reporter:datatype="bool"/>
			 <field reporter:label="Shelving Location Circulate?" name="location_circulate" reporter:datatype="bool"/>
			 <field reporter:label="Latest Inventory Workstation" name="inventory_workstation" reporter:datatype="text" field_groups="inv"/>
			 <field reporter:label="Estimated Price" name="est_price" reporter:datatype="money" sr:suggest_transform="sum"/>
			 <field reporter:label="All Subjects" name="bib_subjects" reporter:datatype="text" sr:suggest_operator="contains"/>
			 <field reporter:label="Circulation Total" name="circ_total" reporter:datatype="int" sr:suggest_transform="sum" sr:suggest_filter="true" field_groups="common"/>
			 <field reporter:label="Circulation Year To Date" name="circ_ytd" reporter:datatype="int" sr:suggest_transform="sum" sr:suggest_filter="true" field_groups="common"/>
			 <field reporter:label="Circulation Last Year" name="circ_last_year" reporter:datatype="int" sr:suggest_transform="sum" sr:suggest_filter="true" field_groups="common"/>
			 <field reporter:label="Circulation Two Years Ago" name="circ_two_years_ago" reporter:datatype="int" sr:suggest_transform="sum" sr:suggest_filter="true" field_groups="common"/>
			 <field reporter:label="Circulation Three Years Ago" name="circ_three_years_ago" reporter:datatype="int" sr:suggest_transform="sum" sr:suggest_filter="true" field_groups="common"/>
			 <field reporter:label="Circulation Total Last Five Years" name="circ_last_five_years" reporter:datatype="int" sr:suggest_transform="sum" sr:suggest_filter="true" field_groups="common"/>
		</fields>
		<links>
			<link field="status_id" reltype="has_a" key="id" map="" class="ccs"/>
			<link sr:org_filter_field="owning_lib" field="location_id" reltype="has_a" key="id" map="" class="acpl"/>
			<link field="circ_modifier_code" reltype="has_a" key="code" map="" class="ccm"/>
			<link field="age_protect_id" reltype="has_a" key="id" map="" class="crahp"/>
			<link field="inv_workstation_id" reltype="has_a" key="id" map="" class="aws"/>
		</links>
	</class>

	<class id="srbps" controller="simple-reporter.ui" oils_persist:virtual="true" reporter:label="Simple Reporter Billing and Payments Transaction Summary">
		<oils_persist:source_definition><![CDATA[
			WITH sys_level_orgs AS (
				SELECT aou.id AS id,
				  aous.id AS sys_id,
				  aous.name AS sys_name,
				  aous.shortname as sys_shortname
				FROM actor.org_unit aou
				INNER JOIN actor.org_unit aous ON (COALESCE((actor.org_unit_ancestor_at_depth(aou.id, 1)).id, aou.id) = aous.id)
			)
			SELECT
			  -- ids
			  xact.id AS xact_id,
			  COALESCE(circ.circ_lib, mg.billing_location) AS billing_lib_id,
			  COALESCE(aoubs.sys_id, aougbs.sys_id) AS billing_sys_id,

			  -- OUs
			  COALESCE(aoub.shortname, aougb.shortname) AS billing_lib_shortname,
			  COALESCE(aoub.name, aougb.shortname) AS billing_lib_name,
			  COALESCE(aoubs.sys_shortname, aougbs.sys_shortname) AS billing_sys_shortname,
			  COALESCE(aoubs.sys_name, aougbs.sys_name) AS billing_sys_name,

			  -- billings
			  billings.total_amount AS billing_grand_total,
			  billings.total_unvoided_amount AS billing_total,

			  billings.voided_billing_count AS billing_voided_count,
			  billings.all_billing_types AS all_billing_types,
			  billings.billing_types AS billing_types,

			  billings.total_voided_amount AS billing_total_voided,
			  billings.total_overdue_amount AS billing_overdue_amount,
			  billings.total_lost_amount AS billing_lost_amount,
			  billings.total_long_od_amount AS billing_long_od_amount,
			  billings.total_damaged_amount AS billing_damaged_amount,
			  billings.total_deposit_amount AS billing_deposit_amount,
			  billings.total_rental_amount AS billing_rental_amount,

			  -- payments
			  payments.total_amount AS payment_grand_total,
			  payments.total_unvoided_amount AS payment_total,

			  payments.voided_payment_count AS payment_voided_count,
			  payments.all_payment_types AS all_payment_types,
			  payments.payment_types AS payment_types,

			  payments.total_voided_amount AS payment_total_voided,
			  payments.total_account_adjustment AS payment_account_adjustment_amount,
			  payments.total_cash_payment AS payment_cash_amount,
			  payments.total_check_payment AS payment_check_amount,
			  payments.total_credit_card_payment AS payment_credit_card_amount,
			  payments.total_debit_card_payment AS payment_debit_card_amount,
			  payments.total_credit_payment AS payment_credit_amount,
			  payments.total_forgive_payment AS payment_forgive_amount,
			  payments.total_work_payment AS payment_work_amount,
			  payments.total_goods_payment AS payment_goods_amount,
			  payments.total_currency_payment AS payment_currency_amount,
			  payments.total_non_currency_payment AS payment_non_currency_amount,

			  -- dates
			  xact.xact_start AS xact_start,
			  CAST(TO_CHAR(xact.xact_start, 'YYYY') AS INTEGER) AS xact_start_year,
			  TO_CHAR(xact.xact_start, 'YYYY-MM') AS xact_start_year_mon,
			  TO_CHAR(xact.xact_start, 'YYYY-MM-DD') AS xact_start_date,
			  xact.xact_finish AS xact_finish,
			  CAST(TO_CHAR(xact.xact_finish, 'YYYY') AS INTEGER) AS xact_finish_year,
			  TO_CHAR(xact.xact_finish, 'YYYY-MM') AS xact_finish_year_mon,
			  TO_CHAR(xact.xact_finish, 'YYYY-MM-DD') AS xact_finish_date,
			  billings.earliest_billing_ts AS earliest_billing_ts,
			  CAST(TO_CHAR(billings.earliest_billing_ts, 'YYYY') AS INTEGER) AS earliest_billing_year,
			  TO_CHAR(billings.earliest_billing_ts, 'YYYY-MM') AS earliest_billing_year_mon,
			  TO_CHAR(billings.earliest_billing_ts, 'YYYY-MM-DD') AS earliest_billing_date,
			  billings.latest_billing_ts AS latest_billing_ts,
			  CAST(TO_CHAR(billings.latest_billing_ts, 'YYYY') AS INTEGER) AS latest_billing_year,
			  TO_CHAR(billings.latest_billing_ts, 'YYYY-MM') AS latest_billing_year_mon,
			  TO_CHAR(billings.latest_billing_ts, 'YYYY-MM-DD') AS latest_billing_date,
			  payments.earliest_payment_ts AS earliest_payment_ts,
			  CAST(TO_CHAR(payments.earliest_payment_ts, 'YYYY') AS INTEGER) AS earliest_payment_year,
			  TO_CHAR(payments.earliest_payment_ts, 'YYYY-MM') AS earliest_payment_year_mon,
			  TO_CHAR(payments.earliest_payment_ts, 'YYYY-MM-DD') AS earliest_payment_date,
			  payments.latest_payment_ts AS latest_payment_ts,
			  CAST(TO_CHAR(payments.latest_payment_ts, 'YYYY') AS INTEGER) AS latest_payment_year,
			  TO_CHAR(payments.latest_payment_ts, 'YYYY-MM') AS latest_payment_year_mon,
			  TO_CHAR(payments.latest_payment_ts, 'YYYY-MM-DD') AS latest_payment_date,

			  -- Misc
			  CASE WHEN circ.id IS NOT NULL THEN 'circulation' WHEN mg.id IS NOT NULL THEN 'grocery' ELSE 'aged' END AS xact_type,
			  (xact.xact_finish IS NOT NULL) AS xact_closed

			FROM
			  money.billable_xact xact
			  LEFT JOIN action.circulation circ ON (xact.id = circ.id)
			  LEFT JOIN money.grocery mg ON (xact.id = mg.id)
			  LEFT JOIN actor.org_unit aoub ON (circ.circ_lib = aoub.id)
			  LEFT JOIN actor.org_unit aougb ON (mg.billing_location = aougb.id)
			  LEFT JOIN sys_level_orgs aoubs ON (circ.circ_lib = aoubs.id)
			  LEFT JOIN sys_level_orgs aougbs ON (mg.billing_location = aougbs.id)

			  -- oohh nooo.... If not done this way you encounter situations
			  -- like multiplying billing totals x number of payments and
			  -- payment totals x number of billings and other fabulous fiduciary fantasies.
			  LEFT JOIN (
				SELECT
				  xact,
				  MIN(billing_ts) AS earliest_billing_ts,
				  MAX(billing_ts) AS latest_billing_ts,

				  STRING_AGG(DISTINCT billing_type, ', ') AS all_billing_types,
				  STRING_AGG(DISTINCT CASE WHEN NOT voided THEN billing_type ELSE NULL END, ', ') AS billing_types,
				  COUNT(DISTINCT CASE WHEN voided THEN id ELSE NULL END) AS voided_billing_count,

				  SUM(amount) AS total_amount,
				  SUM(CASE WHEN NOT voided THEN amount ELSE NULL END) AS total_unvoided_amount,
				  SUM(CASE WHEN voided THEN amount ELSE NULL END) AS total_voided_amount,
				  SUM(CASE WHEN NOT voided AND btype = 1 THEN amount ELSE NULL END) AS total_overdue_amount,
				  SUM(CASE WHEN NOT voided AND btype IN (3,4) THEN amount ELSE NULL END) AS total_lost_amount,
				  SUM(CASE WHEN NOT voided AND btype IN (10,11) THEN amount ELSE NULL END) AS total_long_od_amount,
				  SUM(CASE WHEN NOT voided AND btype IN (7,8) THEN amount ELSE NULL END) AS total_damaged_amount, -- Likely incomplete because damaged billing interface is whack.
				  SUM(CASE WHEN NOT voided AND btype = 5 THEN amount ELSE NULL END) AS total_deposit_amount,
				  SUM(CASE WHEN NOT voided AND btype = 6 THEN amount ELSE NULL END) AS total_rental_amount

				FROM
				  money.all_billings
				GROUP BY 1
			  ) billings ON (xact.id = billings.xact)
			  -- Can't include accepting user or cash_drawer because that will "duplicate"
			  -- rows if multiple staff accept payments on a single xact...
			  LEFT JOIN (
				SELECT
				  xact,
				  MIN(payment_ts) AS earliest_payment_ts,
				  MAX(payment_ts) AS latest_payment_ts,

				  STRING_AGG(DISTINCT payment_type, ', ') AS all_payment_types,
				  STRING_AGG(DISTINCT CASE WHEN NOT voided THEN payment_type ELSE NULL END, ', ') AS payment_types,
				  COUNT(DISTINCT CASE WHEN voided THEN id ELSE NULL END) AS voided_payment_count,

				  SUM(amount) AS total_amount,
				  SUM(CASE WHEN NOT voided THEN amount ELSE NULL END) AS total_unvoided_amount,
				  SUM(CASE WHEN voided THEN amount ELSE NULL END) AS total_voided_amount, -- almost certainly 0 in every database, but...
				  SUM(CASE WHEN NOT voided AND payment_type = 'account_adjustment' THEN amount ELSE NULL END) AS total_account_adjustment,
				  SUM(CASE WHEN NOT voided AND payment_type = 'cash_payment' THEN amount ELSE NULL END) AS total_cash_payment,
				  SUM(CASE WHEN NOT voided AND payment_type = 'check_payment' THEN amount ELSE NULL END) AS total_check_payment,
				  SUM(CASE WHEN NOT voided AND payment_type = 'credit_card_payment' THEN amount ELSE NULL END) AS total_credit_card_payment,
				  SUM(CASE WHEN NOT voided AND payment_type = 'debit_card_payment' THEN amount ELSE NULL END) AS total_debit_card_payment,
				  SUM(CASE WHEN NOT voided AND payment_type = 'credit_payment_payment' THEN amount ELSE NULL END) AS total_credit_payment,
				  SUM(CASE WHEN NOT voided AND payment_type = 'forgive_payment' THEN amount ELSE NULL END) AS total_forgive_payment,
				  SUM(CASE WHEN NOT voided AND payment_type = 'work_payment' THEN amount ELSE NULL END) AS total_work_payment,
				  SUM(CASE WHEN NOT voided AND payment_type = 'goods_payment' THEN amount ELSE NULL END) AS total_goods_payment,
				  SUM(CASE WHEN NOT voided AND payment_type IN ('cash_payment', 'check_payment', 'credit_card_payment', 'debit_card_payment', 'credit_payment') THEN amount ELSE NULL END) AS total_currency_payment,
				  SUM(CASE WHEN NOT voided AND payment_type NOT IN ('cash_payment', 'check_payment', 'credit_card_payment', 'debit_card_payment', 'credit_payment') THEN amount ELSE NULL END) AS total_non_currency_payment

				FROM
				  money.all_payments
				GROUP BY 1
			  ) payments ON (xact.id = payments.xact)

		]]></oils_persist:source_definition>
		<field_groups>
			<group name="common" reporter:label="Common Fields"/>
			<group name="bill" reporter:label="Billing Fields"/>
			<group name="pay" reporter:label="Payment Fields"/>
			<group name="dates" reporter:label="Date Fields"/>
			<group name="org" reporter:label="Libraries"/>
		</field_groups>
		<fields oils_persist:primary="xact_id">
			 <field reporter:label="Transaction ID" name="xact_id" reporter:datatype="text" sr:suggest_transform="count_distinct" field_groups="common"/>
			 <field reporter:label="Billing Library" name="billing_lib_id" reporter:datatype="org_unit" sr:hide_from="display" sr:suggest_filter="true" field_groups="org,common"/>
			 <field reporter:label="Billing System" name="billing_sys_id" reporter:datatype="org_unit" sr:hide_from="display" sr:suggest_filter="true" field_groups="org,common"/>
			 <field reporter:label="Billing Library Short (Policy) Name" name="billing_lib_shortname" reporter:datatype="text" sr:hide_from="filter" field_groups="org,common"/>
			 <field reporter:label="Billing Library Name" name="billing_lib_name" reporter:datatype="text" sr:hide_from="filter" field_groups="org,common"/>
			 <field reporter:label="Billing System Short (Policy) Name" name="billing_sys_shortname" reporter:datatype="text" sr:hide_from="filter" field_groups="org,common"/>
			 <field reporter:label="Billing System Name" name="billing_sys_name" reporter:datatype="text" sr:hide_from="filter" field_groups="org"/>
			 <field reporter:label="Billing Grand Total (Includes Voids)" name="billing_grand_total" reporter:datatype="money" field_groups="bill" sr:suggest_transform="sum"/>
			 <field reporter:label="Billing Total" name="billing_total" reporter:datatype="money" sr:suggest_filter="true" field_groups="bill,common" sr:suggest_transform="sum"/>
			 <field reporter:label="Voided Billings" name="billing_voided_count" reporter:datatype="text" field_groups="bill,common"/>
			 <field reporter:label="Billing Types (Include Voids)" name="all_billing_types" reporter:datatype="text" field_groups="bill" sr:suggest_operator="contains"/>
			 <field reporter:label="Billing Types" name="billing_types" reporter:datatype="text" field_groups="bill,common" sr:suggest_operator="contains"/>
			 <field reporter:label="Billing Amount Voided" name="billing_total_voided" reporter:datatype="money" field_groups="bill" sr:suggest_transform="sum"/>
			 <field reporter:label="Billing Total (Overdue)" name="billing_overdue_amount" reporter:datatype="money" field_groups="bill" sr:suggest_transform="sum"/>
			 <field reporter:label="Billing Total (Lost)" name="billing_lost_amount" reporter:datatype="money" field_groups="bill" sr:suggest_transform="sum"/>
			 <field reporter:label="Billing Total (Long Overdue)" name="billing_long_od_amount" reporter:datatype="money" field_groups="bill" sr:suggest_transform="sum"/>
			 <field reporter:label="Billing Total (Damaged)" name="billing_damaged_amount" reporter:datatype="money" field_groups="bill" sr:suggest_transform="sum"/>
			 <field reporter:label="Billing Total (Deposit)" name="billing_deposit_amount" reporter:datatype="money" field_groups="bill" sr:suggest_transform="sum"/>
			 <field reporter:label="Billing Total (Rental)" name="billing_rental_amount" reporter:datatype="money" field_groups="bill" sr:suggest_transform="sum"/>
			 <field reporter:label="Payment Grand Total (Includes Voids)" name="payment_grand_total" reporter:datatype="money" field_groups="pay" sr:suggest_transform="sum"/>
			 <field reporter:label="Payment Total" name="payment_total" reporter:datatype="money" field_groups="pay,common" sr:suggest_transform="sum"/>
			 <field reporter:label="Voided Payments" name="payment_voided_count" reporter:datatype="text" field_groups="pay,common"/>
			 <field reporter:label="All Payment Types (Includes Voids)" name="all_payment_types" reporter:datatype="text" field_groups="pay" sr:suggest_operator="contains"/>
			 <field reporter:label="Payment Types" name="payment_types" reporter:datatype="text" field_groups="pay,common" sr:suggest_operator="contains"/>
			 <field reporter:label="Payment Amount Voided" name="payment_total_voided" reporter:datatype="money" field_groups="pay" sr:suggest_transform="sum"/>
			 <field reporter:label="Payment Total (Account Adjustment)" name="payment_account_adjustment_amount" reporter:datatype="money" field_groups="pay" sr:suggest_transform="sum"/>
			 <field reporter:label="Payment Total (Cash)" name="payment_cash_amount" reporter:datatype="money" field_groups="pay" sr:suggest_transform="sum"/>
			 <field reporter:label="Payment Total (Check)" name="payment_check_amount" reporter:datatype="money" field_groups="pay" sr:suggest_transform="sum"/>
			 <field reporter:label="Payment Total (Credit Card)" name="payment_credit_card_amount" reporter:datatype="money" field_groups="pay" sr:suggest_transform="sum"/>
			 <field reporter:label="Payment Total (Debit Card)" name="payment_debit_card_amount" reporter:datatype="money" field_groups="pay" sr:suggest_transform="sum"/>
			 <field reporter:label="Payment Total (Patron Credit)" name="payment_credit_amount" reporter:datatype="money" field_groups="pay" sr:suggest_transform="sum"/>
			 <field reporter:label="Payment Total (Forgiven)" name="payment_forgive_amount" reporter:datatype="money" field_groups="pay" sr:suggest_transform="sum"/>
			 <field reporter:label="Payment Total (Work)" name="payment_work_amount" reporter:datatype="money" field_groups="pay" sr:suggest_transform="sum"/>
			 <field reporter:label="Payment Total (Goods)" name="payment_goods_amount" reporter:datatype="money" field_groups="pay" sr:suggest_transform="sum"/>
			 <field reporter:label="Payment Total (Currency)" name="payment_currency_amount" reporter:datatype="money" field_groups="pay" sr:suggest_transform="sum"/>
			 <field reporter:label="Paymnt Total (Non-Currency)" name="payment_non_currency_amount" reporter:datatype="money" field_groups="pay" sr:suggest_transform="sum"/>
			 <field reporter:label="Transaction Start Date / Time" name="xact_start" reporter:datatype="timestamp" sr:suggest_filter="true" field_groups="dates,common"/>
			 <field reporter:label="Transaction Start Year" name="xact_start_year" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Transaction Start Year and Month" name="xact_start_year_mon" reporter:datatype="text" field_groups="dates,common"/>
			 <field reporter:label="Transaction Start Date" name="xact_start_date" reporter:datatype="text" field_groups="dates"/>
			 <field reporter:label="Transaction Finish Date / Time" name="xact_finish" reporter:datatype="timestamp" field_groups="dates"/>
			 <field reporter:label="Transaction Finish Year" name="xact_finish_year" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="Transaction Finish Year and Month" name="xact_finish_year_mon" reporter:datatype="text" field_groups="dates"/>
			 <field reporter:label="Transaction Finish Date" name="xact_finish_date" reporter:datatype="text" field_groups="dates"/>
			 <field reporter:label="First Billing Date / Time" name="earliest_billing_ts" reporter:datatype="timestamp" sr:suggest_filter="true" field_groups="bill,dates,common"/>
			 <field reporter:label="First Billing Year" name="earliest_billing_year" reporter:datatype="int" field_groups="bill,dates"/>
			 <field reporter:label="First Billing Year and Month" name="earliest_billing_year_mon" reporter:datatype="text" field_groups="bill,dates"/>
			 <field reporter:label="First Billing Date" name="earliest_billing_date" reporter:datatype="text" field_groups="bill,dates"/>
			 <field reporter:label="Last Billing Date / Time" name="latest_billing_ts" reporter:datatype="timestamp" field_groups="bill,dates,common"/>
			 <field reporter:label="Last Billing Year" name="latest_billing_year" reporter:datatype="int" field_groups="bill,dates"/>
			 <field reporter:label="Last Billing Year and Month" name="latest_billing_year_mon" reporter:datatype="text" field_groups="bill,dates"/>
			 <field reporter:label="Last Billing Date" name="latest_billing_date" reporter:datatype="text" field_groups="bill,dates"/>
			 <field reporter:label="First Payment Date / Time" name="earliest_payment_ts" reporter:datatype="timestamp" sr:suggest_filter="true" field_groups="pay,dates,common"/>
			 <field reporter:label="First Payment Year" name="earliest_payment_year" reporter:datatype="int" field_groups="dates"/>
			 <field reporter:label="First Payment Year and Month" name="earliest_payment_year_mon" reporter:datatype="text" field_groups="pay,dates,common"/>
			 <field reporter:label="First Payment Date" name="earliest_payment_date" reporter:datatype="text" field_groups="pay,dates"/>
			 <field reporter:label="Last Payment Date / Time" name="latest_payment_ts" reporter:datatype="timestamp" field_groups="pay,dates,common"/>
			 <field reporter:label="Last Payment Year" name="latest_payment_year" reporter:datatype="int" field_groups="pay,dates"/>
			 <field reporter:label="Last Payment Year and Month" name="latest_payment_year_mon" reporter:datatype="text" field_groups="pay,dates,common"/>
			 <field reporter:label="Last Payment Date" name="latest_payment_date" reporter:datatype="text" field_groups="pay,dates"/>
			 <field reporter:label="Transaction Type" name="xact_type" reporter:datatype="text" sr:suggest_filter="true" field_groups="common"/>
			 <field reporter:label="Transaction Closed?" name="xact_closed" sr:suggest_filter="true" reporter:datatype="bool"/>
		</fields>
	</class>
	<class id="sipsetg" controller="open-ils.cstore open-ils.pcrud"
		oils_obj:fieldmapper="sip::setting_group" 
		oils_persist:tablename="sip.setting_group" 
		reporter:label="SIP Settings Group">
		<fields oils_persist:primary="id" oils_persist:sequence="sip.setting_group_id_seq">
			<field name="id" reporter:datatype="id" reporter:label="ID" reporter:selector="label"/>
			<field name="label" reporter:datatype="text" reporter:label="Label" oils_obj:required="true"/>
			<field name="institution" reporter:datatype="text" reporter:label="SIP Institution" oils_obj:required="true"/>
			<field name="settings" reporter:datatype="link" reporter:label="Settings" oils_persist:virtual="true"/>
			<field name="filters" reporter:datatype="link" reporter:label="Filters" oils_persist:virtual="true"/>
		</fields>
		<links>
			<link field="settings" reltype="has_many" key="setting_group" map="" class="sipset"/>
			<link field="filters" reltype="has_many" key="setting_group" map="" class="sipfilter"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="SIP_ADMIN" global_required="true"/>
				<retrieve permission="SIP_ADMIN" global_required="true"/>
				<update permission="SIP_ADMIN" global_required="true"/>
				<delete permission="SIP_ADMIN" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="sipset" controller="open-ils.cstore open-ils.pcrud"
		oils_obj:fieldmapper="sip::setting" 
		oils_persist:tablename="sip.setting" 
		reporter:label="SIP Settings">
		<fields oils_persist:primary="id" oils_persist:sequence="sip.setting_id_seq">
			<field name="id" reporter:datatype="id" reporter:label="ID" reporter:selector="name"/>
			<field name="setting_group" reporter:datatype="link" reporter:label="Settings Group" oils_obj:required="true" config_field="true"/>
			<field name="name" reporter:datatype="text" reporter:label="Name" oils_obj:required="true"/>
			<field name="description" reporter:datatype="text" reporter:label="Description" oils_obj:required="true"/>
			<field name="value" reporter:datatype="text" reporter:label="Value" oils_obj:required="true"/>
		</fields>
		<links>
			<link field="setting_group" reltype="has_a" key="id" map="" class="sipsetg"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="SIP_ADMIN" global_required="true"/>
				<retrieve permission="SIP_ADMIN" global_required="true"/>
				<update permission="SIP_ADMIN" global_required="true"/>
				<delete permission="SIP_ADMIN" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="sipacc" controller="open-ils.cstore open-ils.pcrud"
		oils_obj:fieldmapper="sip::account" 
		oils_persist:tablename="sip.account" 
		reporter:label="SIP Account">
		<fields oils_persist:primary="id" oils_persist:sequence="sip.account_id_seq">
			<field name="id" reporter:datatype="id" reporter:label="ID" reporter:selector="sip_username"/>
			<field name="enabled" reporter:datatype="bool" reporter:label="Enabled"/>
			<field name="setting_group" reporter:datatype="link" reporter:label="Settings Group" oils_obj:required="true"/>
			<field name="sip_username" reporter:datatype="text" reporter:label="SIP Username" oils_obj:required="true"/>
			<field name="usr" reporter:datatype="link" reporter:label="ILS User" oils_obj:required="true"/>
			<field name="workstation" reporter:datatype="link" reporter:label="Workstation"/>
			<field name="transient" reporter:datatype="bool" reporter:label="Transient"/>
			<field name="activity_who" reporter:datatype="text" reporter:label="Activity Who"/>
			<field name="sip_password" reporter:datatype="id" reporter:label="SIP Password" oils_persist:virtual="true"/>
		</fields>
		<links>
			<link field="usr" reltype="has_a" key="id" map="" class="au"/>
			<link field="workstation" reltype="has_a" key="id" map="" class="aws"/>
			<link field="setting_group" reltype="has_a" key="id" map="" class="sipsetg"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="SIP_ADMIN" global_required="true"/>
				<retrieve permission="SIP_ADMIN" global_required="true"/>
				<update permission="SIP_ADMIN" global_required="true"/>
				<delete permission="SIP_ADMIN" global_required="true"/>
			</actions>
		</permacrud>
	</class>
	<class id="sipses" controller="open-ils.cstore"
		oils_obj:fieldmapper="sip::session" 
		oils_persist:tablename="sip.session" 
		reporter:label="SIP Session">
		<fields oils_persist:primary="key">
			<field name="key" reporter:datatype="text" reporter:label="SIP Session Key"/>
			<field name="ils_token" reporter:datatype="text" reporter:label="ILS Auth Token"/>
			<field name="account" reporter:datatype="link" reporter:label="SIP Account"/>
			<field name="create_time" reporter:label="Create Time" reporter:datatype="timestamp"/>
		</fields>
		<links>
			<link field="account" reltype="has_a" key="id" map="" class="sipacc"/>
		</links>
	</class>
	<class id="sipsm" controller="open-ils.cstore open-ils.pcrud"
		oils_obj:fieldmapper="sip::screen_message" 
		oils_persist:tablename="sip.screen_message" 
		reporter:label="SIP Screen Message">
		<fields oils_persist:primary="key">
			<field name="key" reporter:datatype="text" reporter:label="Message Key"/>
			<field name="message" reporter:datatype="text" reporter:label="Message" oils_persist:i18n="true"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="SIP_ADMIN" global_required="true"/>
				<retrieve />
				<update permission="SIP_ADMIN" global_required="true"/>
				<delete permission="SIP_ADMIN" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="ahrrr" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::hold_request_reset_reason" oils_persist:tablename="action.hold_request_reset_reason" reporter:label="Hold Request Reset Reason" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="action.hold_request_reset_reason_id_seq">
			<field name="id" reporter:selector="name" reporter:datatype="id" reporter:label="ID"/>
			<field name="name"  reporter:datatype="text" oils_persist:i18n="true" reporter:label="Name"/>
			<field name="manual" reporter:datatype="bool" reporter:label="Manual"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="ahrrre" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="action::hold_request_reset_reason_entry" oils_persist:tablename="action.hold_request_reset_reason_entry" reporter:label="Hold Request Reset Reason Entry" oils_persist:field_safe="true">
		<fields oils_persist:primary="id" oils_persist:sequence="action.hold_request_reset_reason_entry_id_seq">
			<field name="id" reporter:datatype="id" reporter:label="ID"/>
			<field name="hold" reporter:label="ID" reporter:datatype="link"/>
			<field name="reset_reason" reporter:label="ID" reporter:datatype="link"/>
			<field name="reset_time" reporter:datatype="timestamp" reporter:label="Reset Date/Time"/>
			<field name="note" reporter:datatype="text" oils_persist:i18n="true" reporter:label="Note"/>
			<field name="requestor" reporter:label="Resetting User" reporter:datatype="link"/>
			<field name="requestor_workstation" reporter:label="Resetting User Workstation" reporter:datatype="link"/>
			<field name="previous_copy" reporter:label="Previous Copy" reporter:datatype="link"/>
		</fields>
		<links>
			<link field="hold" reltype="has_a" key="id" map="" class="ahr"/>
			<link field="reset_reason" reltype="has_a" key="id" map="" class="ahrrr"/>
			<link field="requestor" reltype="has_a" key="id" map="" class="au"/>
			<link field="requestor_workstation" reltype="has_a" key="id" map="" class="aws"/>
			<link field="previous_copy" reltype="has_a" key="id" map="" class="acp"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve permission="VIEW_HOLD">
					<context link="hold" field="pickup_lib"/>
				</retrieve>
			</actions>
		</permacrud>
	</class>


	<class id="coauf" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::openathens_uid_field" oils_persist:tablename="config.openathens_uid_field" reporter:label="OpenAthens unique identifiers">
		<fields oils_persist:primary="id" oils_persist:sequence="config.openathens_uid_field_id_seq">
			<field reporter:label="ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="coanf" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::openathens_name_field" oils_persist:tablename="config.openathens_name_field" reporter:label="OpenAthens name fields">
		<fields oils_persist:primary="id" oils_persist:sequence="config.openathens_name_field_id_seq">
			<field reporter:label="ID" name="id" reporter:selector="name" reporter:datatype="id"/>
			<field reporter:label="Name" name="name" reporter:datatype="text" oils_obj:required="true"/>
		</fields>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<retrieve/>
			</actions>
		</permacrud>
	</class>

	<class id="coai" controller="open-ils.cstore open-ils.pcrud" oils_obj:fieldmapper="config::openathens_identity" oils_persist:tablename="config.openathens_identity" reporter:label="Sign-on to OpenAthens">
		<fields oils_persist:primary="id" oils_persist:sequence="config.openathens_identity_id_seq">
			<field reporter:label="ID" name="id" reporter:datatype="id" reporter:selector="name"/>
			<field reporter:label="Owner" name="org_unit" reporter:datatype="org_unit" oils_obj:required="true"/>
			<field reporter:label="Active" name="active" reporter:datatype="bool"/>
			<field reporter:label="API key" name="api_key" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Connection ID" name="connection_id" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Connection URI" name="connection_uri" reporter:datatype="text" oils_obj:required="true"/>
			<field reporter:label="Auto sign-on" name="auto_signon_enabled" reporter:datatype="bool"/>
			<field reporter:label="Auto sign-out" name="auto_signout_enabled" reporter:datatype="bool"/>
			<field reporter:label="Unique identifier field" name="unique_identifier" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Display name field" name="display_name" reporter:datatype="link" oils_obj:required="true"/>
			<field reporter:label="Release prefix" name="release_prefix" reporter:datatype="bool"/>
			<field reporter:label="Release first name" name="release_first_given_name" reporter:datatype="bool"/>
			<field reporter:label="Release middle name" name="release_second_given_name" reporter:datatype="bool"/>
			<field reporter:label="Release surname" name="release_family_name" reporter:datatype="bool"/>
			<field reporter:label="Release suffix" name="release_suffix" reporter:datatype="bool"/>
			<field reporter:label="Release email" name="release_email" reporter:datatype="bool"/>
			<field reporter:label="Release home library" name="release_home_ou" reporter:datatype="bool"/>
			<field reporter:label="Release barcode" name="release_barcode" reporter:datatype="bool"/>
		</fields>
		<links>
			<link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
			<link field="unique_identifier" reltype="has_a" key="id" map="" class="coauf"/>
			<link field="display_name" reltype="has_a" key="id" map="" class="coanf"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="ADMIN_OPENATHENS" global_required="true"/>
				<retrieve/>
				<update permission="ADMIN_OPENATHENS" global_required="true"/>
				<delete permission="ADMIN_OPENATHENS" global_required="true"/>
			</actions>
		</permacrud>
	</class>

	<class id="acqr_inv_totals" controller="open-ils.reporter" oils_persist:readonly="true" reporter:label="Invoice Totals">
		<oils_persist:source_definition><![CDATA[
			WITH invoice_entry_totals AS (
				SELECT acqinv.id,
					SUM(COALESCE(acqie.cost_billed, 0.00)) AS total_invoice_entry_cost_billed,
					SUM(COALESCE(acqie.amount_paid, 0.00)) AS total_invoice_entry_amount_paid
				FROM acq.invoice acqinv
				LEFT JOIN acq.invoice_entry acqie ON (acqinv.id = acqie.invoice)
				GROUP BY 1
			), invoice_item_totals AS (
				SELECT acqinv.id,
					SUM(COALESCE(acqii.cost_billed, 0.00)) AS total_invoice_item_cost_billed,
					SUM(COALESCE(acqii.amount_paid, 0.00)) AS total_invoice_item_amount_paid
				FROM acq.invoice acqinv
				LEFT JOIN acq.invoice_item  acqii ON (acqinv.id = acqii.invoice)
				GROUP BY 1
			)
			SELECT id,
				total_invoice_entry_cost_billed, total_invoice_entry_amount_paid,
				total_invoice_item_cost_billed, total_invoice_item_amount_paid,
				total_invoice_entry_cost_billed + total_invoice_item_cost_billed AS total_cost_billed,
				total_invoice_entry_amount_paid + total_invoice_item_amount_paid AS total_amount_paid
			FROM invoice_entry_totals
			JOIN invoice_item_totals USING (id)
		]]></oils_persist:source_definition>
		<fields oils_persist:primary="id">
			<field reporter:label="Invoice" name="id" reporter:datatype="link"/>
			<field reporter:label="Total Billed for Line Items" name="total_invoice_entry_cost_billed" reporter:datatype="money"/>
			<field reporter:label="Total Paid for Line Items" name="total_invoice_entry_amount_paid" reporter:datatype="money"/>
			<field reporter:label="Total Billed for Direct Charges" name="total_invoice_item_cost_billed" reporter:datatype="money"/>
			<field reporter:label="Total Paid for Direct Charges" name="total_invoice_item_amount_paid" reporter:datatype="money"/>
			<field reporter:label="Total Billed" name="total_cost_billed" reporter:datatype="money"/>
			<field reporter:label="Total Paid" name="total_amount_paid" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="id" reltype="has_a" key="id" map="" class="acqinv"/>
		</links>
	</class>

	<class id="acqr_debit_by_fund" controller="open-ils.reporter" oils_persist:readonly="true" reporter:label="Invoice Debits by Fund">
		<oils_persist:source_definition><![CDATA[
			WITH invoice_funds AS (
				SELECT invoice, fund, COALESCE(amount, 0.00)::NUMERIC(8,2) AS amount, encumbrance
				FROM acq.invoice_entry acqie
				JOIN acq.fund_debit acqfdeb ON (acqfdeb.invoice_entry = acqie.id)
				UNION ALL
				SELECT invoice, acqfdeb.fund, COALESCE(amount, 0.00)::NUMERIC(8,2) AS amount, encumbrance
				FROM acq.invoice_item acqii
				JOIN acq.fund_debit acqfdeb ON (acqfdeb.id = acqii.fund_debit)
			)
			SELECT invoice, fund, encumbrance, SUM (amount) AS total_amount
			FROM invoice_funds
			GROUP BY 1, 2, 3
		]]></oils_persist:source_definition>
		<fields>
			<field reporter:label="Invoice" name="invoice" reporter:datatype="link"/>
			<field reporter:label="Fund" name="fund" reporter:datatype="link"/>
			<field reporter:label="Encumbrance?" name="encumbrance" reporter:datatype="bool"/>
			<field reporter:label="Total Amount" name="total_amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="invoice" reltype="has_a" key="id" map="" class="acqinv"/>
			<link field="fund" reltype="has_a" key="id" map="" class="acqf"/>
		</links>
	</class>

	<class id="acqr_debit_by_fund_tag" controller="open-ils.reporter" oils_persist:readonly="true" reporter:label="Invoice Debits by Fund Tag">
		<oils_persist:source_definition><![CDATA[
			WITH invoice_funds AS (
				SELECT invoice, fund, COALESCE(amount, 0.00)::NUMERIC(8,2) AS amount, encumbrance
				FROM acq.invoice_entry acqie
				JOIN acq.fund_debit acqfdeb ON (acqfdeb.invoice_entry = acqie.id)
				UNION ALL
				SELECT invoice, acqfdeb.fund, COALESCE(amount, 0.00)::NUMERIC(8,2) AS amount, encumbrance
				FROM acq.invoice_item acqii
				JOIN acq.fund_debit acqfdeb ON (acqfdeb.id = acqii.fund_debit)
			)
			SELECT invoice, tag, encumbrance, SUM(amount) AS total_amount
			FROM invoice_funds
			LEFT JOIN acq.fund_tag_map acqftm ON (invoice_funds.fund = acqftm.fund)
			GROUP BY 1, 2, 3
		]]></oils_persist:source_definition>
		<fields>
			<field reporter:label="Invoice" name="invoice" reporter:datatype="link"/>
			<field reporter:label="Fund Tag" name="tag" reporter:datatype="link"/>
			<field reporter:label="Encumbrance?" name="encumbrance" reporter:datatype="bool"/>
			<field reporter:label="Total Amount" name="total_amount" reporter:datatype="money"/>
		</fields>
		<links>
			<link field="invoice" reltype="has_a" key="id" map="" class="acqinv"/>
			<link field="tag" reltype="has_a" key="id" map="" class="acqft"/>
		</links>
	</class>
	<class id="sipfilter" controller="open-ils.cstore open-ils.pcrud"
		oils_obj:fieldmapper="sip::filter" 
		oils_persist:tablename="sip.filter" 
		reporter:label="SIP Filter">
		<fields oils_persist:primary="id" oils_persist:sequence="sip.filter_id_seq">
			<field name="id" reporter:datatype="id" reporter:label="ID" reporter:selector="name"/>
			<field name="enabled" reporter:datatype="bool" reporter:label="Enabled"/>
			<field name="setting_group" reporter:datatype="link" reporter:label="Settings Group" oils_obj:required="true" config_field="true"/>
			<field name="identifier" reporter:datatype="text" reporter:label="Field Identifier" oils_obj:required="true"/>
			<field name="strip" reporter:datatype="bool" reporter:label="Strip Field" />
			<field name="replace_with" reporter:datatype="text" reporter:label="Replacement Field Value" />
		</fields>
		<links>
			<link field="setting_group" reltype="has_a" key="id" map="" class="sipsetg"/>
		</links>
		<permacrud xmlns="http://open-ils.org/spec/opensrf/IDL/permacrud/v1">
			<actions>
				<create permission="SIP_ADMIN" global_required="true"/>
				<retrieve permission="SIP_ADMIN" global_required="true"/>
				<update permission="SIP_ADMIN" global_required="true"/>
				<delete permission="SIP_ADMIN" global_required="true"/>
			</actions>
		</permacrud>
	</class>

    <class id="cplhm" controller="open-ils.cstore" oils_obj:fieldmapper="config::patron_loader_header_map" oils_persist:tablename="config.patron_loader_header_map"  reporter:label="Patron Loader Header Mappings">
        <fields oils_persist:primary="id" oils_persist:sequence="config.patron_loader_header_map_id_seq">
                <field reporter:label="Entry ID" name="id" reporter:datatype="id" />
                <field reporter:label="Org Unit" name="org_unit" reporter:datatype="link"/>
                <field reporter:label="Import Header" name="import_header" reporter:datatype="text"/>
                <field reporter:label="Default Header" name="default_header" reporter:datatype="text"/>
        </fields>
        <links>
                <link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
        </links>
    </class>
    <class id="cplvm" controller="open-ils.cstore" oils_obj:fieldmapper="config::patron_loader_value_map" oils_persist:tablename="config.patron_loader_value_map"  reporter:label="Patron Loader Value Mappings">
        <fields oils_persist:primary="id" oils_persist:sequence="config.patron_loader_header_map_id_seq">
                <field reporter:label="Entry ID" name="id" reporter:datatype="id" />
                <field reporter:label="Org Unit" name="org_unit" reporter:datatype="link"/>
                <field reporter:label="Type of Mapped Value" name="mapping_type" reporter:datatype="text"/>
                <field reporter:label="Imported Value" name="import_value" reporter:datatype="text"/>
                <field reporter:label="Native Value" name="native_value" reporter:datatype="text"/>
        </fields>
        <links>
                <link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
        </links>
    </class>
    <class id="apll" controller="open-ils.cstore" oils_obj:fieldmapper="actor::patron_loader_log" oils_persist:tablename="actor.patron_loader_log"  reporter:label="Patron Loader Log">
        <fields oils_persist:primary="id" oils_persist:sequence="actor.patron_loader_log">
        <field reporter:label="Entry ID" name="id" reporter:datatype="id" />
                <field reporter:label="Org Unit" name="org_unit" reporter:datatype="link"/>
                <field reporter:label="Batch" name="session" reporter:datatype="number"/>
                <field reporter:label="Event" name="event" reporter:datatype="text"/>
                <field reporter:label="Event Record Count" name="record_count" reporter:datatype="number"/>
                <field reporter:label="Event Timestamp" name="logtime" reporter:datatype="timestamp"/>
        </fields>
        <links>
                <link field="org_unit" reltype="has_a" key="id" map="" class="aou"/>
        </links>
    </class>


	<!-- ********************************************************************************************************************* -->
</IDL>
<!-- Local Variables: -->
<!-- indent-tabs-mode: t -->
<!-- tab-width: 4 -->
<!-- nxml-child-indent: 4 -->
<!-- End: -->
<!--
	vim:noet:ts=4:sw=4:
-->
