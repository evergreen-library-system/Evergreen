<!-- how should we do i18n with eg-staff-banner? -->
<div class="staff-banner">
  <h1 id="staff-banner" tabindex="-1">
    <span i18n>{session_names, plural, =0 {URLs for All Sessions} =1 {URLs for Session: {{session_names.join(', ')}}} other {URLs for Sessions: {{session_names.join(', ')}}}}</span>
  </h1>
</div>

<ng-template #bibIdTemplate let-r="row">
  <ng-container *ngIf="r?.item?.target_biblio_record_entry()?.id()">
    <a routerLink="/staff/catalog/record/{{r.item.target_biblio_record_entry().id()}}">{{r.item.target_biblio_record_entry().id()}}</a>
  </ng-container>
</ng-template>

<ng-template #titleTemplate let-r="row">
  <ng-container *ngIf="r?.item?.target_biblio_record_entry()?.id()">
    <a routerLink="/staff/catalog/record/{{r.item.target_biblio_record_entry().id()}}">{{r.item.target_biblio_record_entry().simple_record().title()}}</a>
  </ng-container>
</ng-template>

<eg-title i18n-prefix prefix="Session URLs">
</eg-title>

<div>
  <pre>{{alertMessage}}</pre>
</div>

<eg-back-button></eg-back-button>

<eg-grid #grid idlClass="uvu"
    persistKey="catalog.link_checker.url"
    [dataSource]="dataSource"
    autoGeneratedColumnOrder="id,session,tag,subfield,url,redirect_from"
    hideFields="item,ord,scheme,host,domain,tld,path,page,query,fragment"
    (rowSelectionChange)="gridSelectionChange($event)"
    [sortable]="true" [filterable]="true" [allowNamedFilterSets]="true"
    [migrateLegacyFilterSets]="'url_verify'">

    <eg-grid-toolbar-button
        label="Verify Selected URLs" i18n-label
        [disabled]="noSelectedRows" 
        (onClick)="verifySelectedUrls()">
        </eg-grid-toolbar-button>
    <eg-grid-toolbar-button
        label="Verify All URLs" i18n-label
        adjacentSubsequentLabel="These Verify actions will create a new Batch for the Session."
        i18n-adjacentSubsequentLabel
        (onClick)="verifyAllUrls()">
        </eg-grid-toolbar-button>
    <eg-grid-column path="id" [index]="true" [required]="true"></eg-grid-column>
    <eg-grid-column [required]="true" path="item.target_biblio_record_entry.id" [cellTemplate]="bibIdTemplate">
        </eg-grid-column>
    <eg-grid-column [required]="true" path="item.target_biblio_record_entry.simple_record.title" [cellTemplate]="titleTemplate">
        </eg-grid-column>
    <eg-grid-column [required]="true" path="item.target_biblio_record_entry.simple_record.author">
        </eg-grid-column>
        <eg-grid-column [required]="true" path="redirect_from"></eg-grid-column>
        <eg-grid-column [required]="true" path="item"></eg-grid-column>
        <eg-grid-column [required]="true" path="session"></eg-grid-column>
        <eg-grid-column [required]="true" path="url_selector"></eg-grid-column>
        <eg-grid-column [required]="true" path="tag"></eg-grid-column>
        <eg-grid-column [required]="true" path="subfield"></eg-grid-column>
        <eg-grid-column [required]="true" path="ord"></eg-grid-column>
        <eg-grid-column [required]="true" path="full_url"></eg-grid-column>
        <eg-grid-column [required]="true" path="scheme"></eg-grid-column>
        <eg-grid-column [required]="true" path="host"></eg-grid-column>
        <eg-grid-column [required]="true" path="domain"></eg-grid-column>
        <eg-grid-column [required]="true" path="tld"></eg-grid-column>
        <eg-grid-column [required]="true" path="path"></eg-grid-column>
        <eg-grid-column [required]="true" path="page"></eg-grid-column>
        <eg-grid-column [required]="true" path="query"></eg-grid-column>
        <eg-grid-column [required]="true" path="fragment"></eg-grid-column>
</eg-grid>

<eg-progress-dialog dialogTitle="{{progressText}}" #progress></eg-progress-dialog>
