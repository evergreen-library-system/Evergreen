
<eg-staff-banner bannerText="Link Checker" i18n-bannerText>
</eg-staff-banner>
<eg-title i18n-prefix prefix="Link Checker">
</eg-title>

<ng-container>
    <div class="row">
        <div class="col-lg-6">
            <ng-container>
                <eg-org-family-select
                    ariaLabel="Org Unit" i18n-ariaLabel
                    [limitPerms]="viewPerms" 
                    [selectedOrgId]="contextOrg.id()"
                    [(ngModel)]="searchOrgs"
                    (ngModelChange)="grid.reload()">
                </eg-org-family-select>
            </ng-container>
        </div>
    </div>
    <hr/>
</ng-container>

<eg-grid #grid idlClass="uvsa"
    persistKey="catalog.link_checker"
    [dataSource]="dataSource"
    (rowSelectionChange)="gridSelectionChange($event)"
    autoGeneratedColumnOrder="session_id,name,batch_id,search,start_time,finish_time"
    hideFields="create_time,creator,usr,container,id,owning_lib"
    [sortable]="true" [filterable]="true"
    [allowNamedFilterSets]="true"
    [migrateLegacyFilterSets]="'url_verify'">
    <eg-grid-toolbar-button
        label="New Session" i18n-label
        [disabled]="!canCreateSession" 
        (onClick)="newSessionWrapper()">
    </eg-grid-toolbar-button>

    <eg-grid-toolbar-button
        label="View Session URLs" i18n-label
        [disabled]="noSelectedRows" 
        (onClick)="viewSessionUrls()">
    </eg-grid-toolbar-button>

    <eg-grid-toolbar-button
        label="View Session Attempts" i18n-label
        [disabled]="!onlyBatchesSelected"
        (onClick)="viewSessionAttempts()">
    </eg-grid-toolbar-button>

    <eg-grid-toolbar-button
        label="View Batch Attempts" i18n-label
        [disabled]="!onlyBatchesSelected"
        (onClick)="viewBatchAttempts()">
    </eg-grid-toolbar-button>

    <eg-grid-toolbar-action
        label="Clone Selected Session" i18n-label
        [disabled]="!oneSelectedRow" 
        (onClick)="cloneSelectedSession()">
    </eg-grid-toolbar-action>

    <eg-grid-toolbar-action isSeparator="true"></eg-grid-toolbar-action>

    <eg-grid-toolbar-action
        label="Delete Selected Sessions" i18n-label
        [disabled]="noSelectedRows" 
        (onClick)="deleteSelectedSessions()">
    </eg-grid-toolbar-action>

    <eg-grid-column path="id" [index]="true" [required]="true"></eg-grid-column>
    <eg-grid-column path="owning_lib" [required]="true" label="Owning Library" i18n-label></eg-grid-column>
    <eg-grid-column [required]="true" path="session_id"></eg-grid-column>
    <eg-grid-column [required]="true" path="name"></eg-grid-column>
    <eg-grid-column [required]="true" path="creator"></eg-grid-column>
    <eg-grid-column [required]="true" path="container"></eg-grid-column>
    <eg-grid-column [required]="true" path="create_time"></eg-grid-column>
    <eg-grid-column [required]="true" path="search"></eg-grid-column>
    <eg-grid-column [required]="true" path="selectors"></eg-grid-column>
    <eg-grid-column [required]="true" path="batch_id"></eg-grid-column>
    <eg-grid-column [required]="true" path="usr"></eg-grid-column>
    <eg-grid-column [required]="true" path="start_time"></eg-grid-column>
    <eg-grid-column [required]="true" path="finish_time"></eg-grid-column>

</eg-grid>

<eg-new-session-dialog #newSessionDialog>
</eg-new-session-dialog>

<eg-string #createSuccessString text="New session created." i18n-text></eg-string>
<eg-string #createFailedString text="Session creation failed." i18n-text></eg-string>

<eg-confirm-dialog #deleteSessionConfirmDialog
  i18n-dialogTitle i18n-dialogBody
  dialogTitle="Session Deletion"
  dialogBody="Delete selected session(s) and associated URLs, batches, and batch attempts?">
</eg-confirm-dialog>

