<div class="container">
  <div class="col-lg-6 offset-lg-3">
    <form (ngSubmit)="handleSubmit()" #loginForm="ngForm" class="form-validated">
      <fieldset>
        <legend class="mb-0" i18n><h1>Log in</h1></legend>
        <hr class="mt-1"/>
        <div *ngIf="loginFailed" id="form-error-summary" class="row">
          <div class="col">
            <p class="alert alert-danger label-with-material-icon w-100">
              <span class="material-icons" aria-hidden="true"
                title="Error" i18n-title>report</span>
              <span class="ms-1" i18n>Login Failed</span>
            </p>
          </div>
        </div>

        <div class="row row-cols-auto" [hidden]="allowSSO && !allowNative">
          <label class="form-label col-form-label fw-bold col-4 text-end" for="username" i18n>Username</label>
          <div class="col-8">
            <input
              type="text"
              class="form-control"
              id="username"
              name="username"
              required
              aria-describedby="form-error-summary"
              autocomplete="username"
              i18n-placeholder
              placeholder="Username"
              [(ngModel)]="args.username"/>
          </div>
        </div>

        <div class="row row-cols-auto mt-3" [hidden]="allowSSO && !allowNative">
          <label class="form-label col-form-label col-4 text-end fw-bold" for="password" i18n>Password</label>
          <div class="col-8">
            <eg-credential-input domId="password" name="password" [(ngModel)]="args.password" [ariaErrorMessage]="'form-error-summary'"></eg-credential-input>
          </div>
        </div>
       
        <div class="row row-cols-auto mt-3" *ngIf="workstations && workstations.length">
          <label class="form-label col-form-label col-4 text-end fw-bold" for="workstation" i18n>Workstation</label>
          <div class="col-8">
            <select
              class="form-control"
              id="workstation"
              name="workstation"
              aria-describedby="form-error-summary"
              required
              (change)="checkSSO($event.target.value)"
              [(ngModel)]="args.workstation">
              <option *ngFor="let ws of workstations" [value]="ws.name">
                {{ws.name}}
              </option>
            </select>
          </div>
        </div>

        <div class="row row-cols-auto mt-3" [hidden]="allowSSO">
          <div class="col-8 offset-4">
            <button type="submit" class="btn btn-primary" i18n>Log in</button>
          </div>
        </div>

        <div class="row row-cols-auto mt-3" [hidden]="!allowSSO || !allowNative">
          <div class="col-8 offset-4">
            <button type="submit" class="btn btn-primary" i18n>Log in with Evergreen</button>
          </div>
        </div>

        <div class="row row-cols-auto mt-3" [hidden]="!allowSSO">
          <div class="col-8 offset-4">
            <button type="button" (click)="redirectToSSO()" class="btn" i18n
              [ngClass]="{'btn-primary': !allowNative, 'btn-normal': allowNative}">Log in with Single Sign On</button>
          </div>
        </div>

        <div class="row" *ngIf="pendingXactsDate">
          <div class="col-lg-8 offset-lg-4 alert alert-warning mt-2" i18n>
            Unprocessed offline transactions waiting for upload.
            Last transaction added at {{pendingXactsDate | date:'short'}}.
          </div>
        </div>
      </fieldset>
    </form>
  </div>
</div>
