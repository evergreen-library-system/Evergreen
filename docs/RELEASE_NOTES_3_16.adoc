= Evergreen 3.16-beta Release Notes =
:toc:
:numbered:
:toclevels: 3

== Upgrade notes ==

== New Features ==

:leveloffset: +2


= Administration =


== Permissions for Hard Due Dates ==

Hard due date and hard due date values now have their own permission sets. You
will need to add these new permissions to any of your users/permission groups
for continuity of user permission on the Hard Due date interface.

The new permissions are:

* CREATE_HARD_DUE_DATE
* UPDATE_HARD_DUE_DATE
* DELETE_HARD_DUE_DATE
* CREATE_HARD_DUE_DATE_VALUE
* UPDATE_HARD_DUE_DATE_VALUE
* DELETE_HARD_DUE_DATE_VALUE



== Quipu eCard Integration ==

The eCARD integration builds on previous work, and adds a generic method of integrating with Quipu’s eCARD service. This feature creates a location for a new Quipu-provided registration form that can be configured to send information to Quipu for address verification, as well as several new library settings related to the integration.

This bypasses the regular Pending Patrons workflow.

Due to the nature of how Quipu configures eCARD on their end, it is strongly recommended that libraries work directly with Quipu to test before implementation.

This work includes methods and other code intended to support future related work for Quipu's eRENEW service.

=== Changes to database, procedures, and library settings === 

* Adds IDL entry for "ILS User Change History".
* Adds `guardian_email` column to `actor.usr` table.
* Adds `evergreen.json_delta` stored procedure.
* Adds `actor.generate_barcode` stored procedure.
* Adds `actor.usr_delta_history` table.
* Adds `actor.record_usr_delta` stored procedure.
* Adds `record_usr_delta trigger` to actor.usr table. 
** This monitors updates to the user table and records the change in configured columns to the `actor.usr_delta_history`, which is labeled "ILS User Change History" in the reporter. By default, it only records changes in the `last_update_time column`, and the trigger itself is disabled by default. This can be reconfigured by the Database Administrator.
* Adds `erenew` column to `permission.grp_tree`.
* Adds a "PATRON_TEMP_RENEWAL" penalty to `config.standing_penalty`.
* Adds an `ecard_vendor` password type. This type of password can only be set by the Database Administrator.
* Adds various library settings for Ecards in general, and for Quipu integration specifically.
* Adds library settings for configuring Guardian Email for patron registration.
* Adds an A/T hook for `au.create.ecard`, and an A/T template and environment variables for sending email for Ecard verification.
* Upgrades library settings for early adopters.

=== Note for Early Adopters ===

Evergreen sites that were early adopters for Quipu integration (i.e., already using a Quipu integration prior to this work) may review `Open-ILS/src/sql/Pg/LP1902937-convert-quipu-early-adopt.sql` after building Evergreen.

However, this SQL does not completely isolate changes made to support the new integration. Libraries are strongly advised to coordinate with Quipu before actually upgrading to or past this update to Evergreen. 


== Staff-only and Public Catalog Library Groups ==

Before this release, library groups were visible in both the public catalog and
the staff catalog.  In this release, administrators can choose to display any
library group in the Public Catalog or not using the "OPAC Visible?" checkbox in
the Library Group administrative screen.  If it is checked, the library group
will display in both the staff catalog and the public catalog.  If it is
unchecked, it will only display in the staff catalog.

Any pre-existing library groups will automatically continue to be visible in the
public catalog until an administrator configures them otherwise.



= Cataloging =


== Item status displays title information in the order presented in the MARC record ==

In previous versions of Evergreen, the subfields $n and $p appeared at the end of
the title in the Item Status screen, regardless of the order they appeared in the
MARC record's 245 field.

These subfields now appear in the order they were specified in the 245 field.

Note that if you have customized the mods32 XML transform, you will need to make
the relevant adjustments yourself: in the titleNonfiling section, the list of
subfields should include include 'n' and 'p', and this section should not call
the "part" template.


== Control visibility of Org Units and Shelving Location Groups in the Angular Staff Catalog ==

Adds functionality both to hide Org Units and include Shelving Location Groups in the Angular Staff Catalog Org Unit Selector

A staff_catalog_visible boolean field is added to actor.org_unit to optionally hide the Org Unit from the selector. The new field is assigned the value from the existing opac_visible field.

A staff.search.shelving_location_groups_with_orgs Global Flag is added to include Shelving Location Groups in the Org Unit Selector



= Circulation =


== Added Shelving Location to Hold Policies ==

A new Shelving Location field has been added to hold policies
and hold policy weights.  This allows libraries to configure
hold placement options based on which location the item belongs to.


== Nonrefundable Payment Flags == 

This adds a set of Global Flags that define which payment types are refundable.  Refundability is checked when the transaction summary (`mbts`) is updated by a payment of billing being added to the transaction. If the new raw (total billed - total paid) balance is negative, the negative balance is adjusted toward zero by, at most, the sum of all non-refundable, non-voided payments.

While it is expected that refundability settings will not change over time, transactions modified after changes to the refundability flags are recalculated based on the new settings. This allows batch changes to be triggered for all transactions, including historical ones, if desired.

Because Evergreen uses the balance_owed column of `money.materialized_billable_xact_summary` (`mbts`) as the authoritative transaction balance, rather than recalculating the balance on the fly, this is almost entirely free of money-related code changes outside of the balance-maintaining database functions. The exception to this is the addition of UI elements to indicate refundability of specific payments, and a new addition to the "statement" interface to show the total non-refundable payments made to transactions involved in the summary view.


= Client =


== Org Unit Staff Catalog Visibility ==

You can now set org units as visible or not visible in the
staff catalog.  By default, all org units are visible in the
staff catalog.

To change the visibility:

. Go to Administration -> System Administration -> Organizational Units.
. Choose the org unit you'd like to change.
. Check or uncheck the Staff Catalog Visible checkbox as needed.
. Save your changes.
. Run the autogen.sh script to allow your changes to take effect.

Org units that are not staff catalog visible will not appear in
the following locations:

* The library selector on the staff catalog search form.
* In search results in the staff catalog.
* In item counts in the staff catalog search results and Record Staff View tabs.

All org units will continue to be visible in the Holdings View, other
admin screens, and reports.

These visibility settings meet a few use cases:

* De-cluttering an org selector with single-branch libraries, for which searching
  at the system level is exactly the same as searching at the branch level.  This
  can be achieved by marking the system as not visible, and the branch as visible.
* Hiding org units that are no longer used.
* Hiding org units that are used for resource sharing, but which do not need to
  be searched.
* Evergreen installations that want the library selector in the staff catalog
  to match the one in the public catalog.  This can be achieved by making sure
  that all orgs have matching OPAC visible and Staff Catalog visible settings.

== Shelving Location Groups in Staff Catalog Library Selector ==

Shelving Location Groups are now included in the Library Selector of
the Staff Catalog search form.  This gives staff a similar experience
to that of patrons.

To remove shelving location groups from the staff catalog library selector:

. Go to Administration -> Server Administration -> Global Flags.
. Set the `staff.search.shelving_location_groups_with_orgs` global flag to False.
. Press your browser's Refresh button.

This does not remove shelving location groups from their current home in the library groups
selector by default.  However, you can remove them from the library groups selector if desired:

. Go to Administration -> Server Administration -> Global Flags.
. Set the `staff.search.shelving_location_groups_with_lassos` global flag to False.
. Press your browser's Refresh button.

By combining these global flags, your Evergreen installation can include shelving location groups
in either selector, both, or neither, according to your needs.



= OPAC =


== KPAC Redesign in Bootstrap ==

The Bootstrap version of the Kids' Catalog is fully accessible, mobile-friendly, and translateable. In addition,
the new version eliminates the older version's XML configuration file with a new staff client interface to improve
the ease of updating highlighted home page topics and links.

This work also fixes several outstanding KPAC bugs including issues with the login template and redirect.

=== Configuration ===

  * The Bootstrap KPAC will be used when the Bootstrap OPAC is used. This is controlled by the eg_vhost.conf file.
  * New permission group: KPAC_ADMIN - Allows access to the KPAC Topic Configuration interface.
  * New library setting: Show KPAC Link (opac.show_kpac_link) - Shows the KPAC link in the OPAC. Default is false.
  * New library setting: KPAC Audience Filter (opac.kpac_audn_filter) - Controls which items to display
based on MARC Target Audience (Audn) field. Juvenile options are: a,b,c,d,j. Default is: a,b,c,j. Please note
that the underlying Perl code has been changed to use this library setting instead of the older XML configuration
file, so libraries using the older KPAC should update this setting if they are using anything other than a,b,c,j.

=== KPAC Topic Configuration ===

The new topic administration interface is reached by going to Administration > Server Administration > KPAC Topic
Configuration.

Topic graphics should be a minimum size of 168 x 107 pixels and need to be uploaded into the /images/kpac2/uploads
folder. Only the file name needs to be entered into the Image File Name field (for example, kpac-dinosaur.png). 

The Parent Category field should be left blank unless it is a sub-topic of another category, in which case it
should reference the parent topic's name.

The Content Type field determines what type of link a topic will be: Category, Search String, URL, or Book List.

  * Category: Category topics will open to a new page with sub-topics.
  * Search String: Fill in the Search String field. This functions as a pre-made search query and accepts
    URL-friendly search strings. Examples:
    ** alphabet
    ** su:seasons
    ** ti:tractor
    ** nutrition after(2020)
    ** "telling time"
  * URL: Fill in the URL field. Either full URLs (https://example.com) or relative URLs (/eg/kpac/dewey) may be used.
  * Book List: Fill in the Book List ID field. Create a book list in the OPAC and make it shareable. Click "View in
    Catalog" and then copy the bookbag ID from the URL.

=== Additional Customization ===

By default, the KPAC will use the round Evergreen logo. To replace it with a custom logo, replace the file at
/images/kpac2/logo-header.png.

The KPAC utilizes its own CSS files: 

  * /templates-bootstrap/kpac/css/style.css.tt2
  * /templates-bootstrap/kpac/css/colors.tt2
  * /templates-bootstrap/kpac/css/fonts.tt2
  
  




= Miscellaneous =

* In the staff client, the circulation menu's "Pull List for Hold Requests" has been
  renamed to "Holds Pull List" for consistency.
* The SlimPAC, which was an early version of the Evergreen catalog without Javascript,
  has been removed from Evergreen's code.

==== Miscellaneous Release Notes (auto-generated) ====

* Fixes a bug where re-applying a shelving location group filter to the pull list fails. (https://bugs.launchpad.net/evergreen/+bug/2098011[Bug 2098011])
* Sets focus on the first interactive element in dialog body (https://bugs.launchpad.net/evergreen/+bug/1947868[Bug 1947868])
* Updates MARC Import/Export tab styles to match other tabs (https://bugs.launchpad.net/evergreen/+bug/2102735[Bug 2102735])
* Allows multiple toast messages to appear at once. (https://bugs.launchpad.net/evergreen/+bug/2103619[Bug 2103619])
* Allow right-click anywhere in grid cells in Chrome (https://bugs.launchpad.net/evergreen/+bug/2080373[Bug 2080373])
* Right-click menu support for grid utility columns (https://bugs.launchpad.net/evergreen/+bug/2080373[Bug 2080373])
* Improved layout of staff catalog shelf browse. (https://bugs.launchpad.net/evergreen/+bug/2067649[Bug 2067649])
* Sorts bib record parts by label_sortkey rather than label so that labels such as Vol. 1, Vol. 2, Vol. 3 are sorted as expected. (https://bugs.launchpad.net/evergreen/+bug/2088000[Bug 2088000])
* Fixes an issue where menu icons appear on printouts. (https://bugs.launchpad.net/evergreen/+bug/2092226[Bug 2092226])
* Reduce remote connections in EDI file retrieval by connecting only once per account. (https://bugs.launchpad.net/evergreen/+bug/1836908[Bug 1836908])
* Show template documentation URLs in reports template grids (https://bugs.launchpad.net/evergreen/+bug/2090873[Bug 2090873])
* Fixes erroneous overdue indication for hourly checkouts. (https://bugs.launchpad.net/evergreen/+bug/1951024[Bug 1951024])
* Add a default value for max_backlog_queue to opensrf.xml (https://bugs.launchpad.net/evergreen/+bug/2097140[Bug 2097140])
* Do not show open_in_new icon on links containing images (https://bugs.launchpad.net/evergreen/+bug/2106057[Bug 2106057])
* Form labels and keyboard support for patron survey answers (https://bugs.launchpad.net/evergreen/+bug/2040183[Bug 2040183])
* Scroll focused combobox option into view on arrow up/down (https://bugs.launchpad.net/evergreen/+bug/2085844[Bug 2085844])
* Replicate combobox keyboard, focus features in org-select (https://bugs.launchpad.net/evergreen/+bug/2085844[Bug 2085844])
* Adds form labels and ARIA status roles to forms in dialogs (https://bugs.launchpad.net/evergreen/+bug/2103567[Bug 2103567])
* Add an automated accessibility check for Evergreen's documentation. (https://bugs.launchpad.net/evergreen/+bug/2076555[Bug 2076555])
* Add 'Overlay' to Z39.50 search results grid actions menu (https://bugs.launchpad.net/evergreen/+bug/2094843[Bug 2094843])
* Fixes a regression where the count of receivable items on acq invoices was always zero. (https://bugs.launchpad.net/evergreen/+bug/2094859[Bug 2094859])
* Avoid freetext error when reimporting MARC import queue (https://bugs.launchpad.net/evergreen/+bug/1940867[Bug 1940867])
* Right arrow in MARC subfield data no longer moves focus (https://bugs.launchpad.net/evergreen/+bug/2101886[Bug 2101886])
* Edit MARC subfield value in focused group with right or left arrow; do not focus on current group when tabbing into or out of subfield inputs (https://bugs.launchpad.net/evergreen/+bug/2101884[Bug 2101884])
* Prevents duplicate new MARC rows using Control + Arrow key (https://bugs.launchpad.net/evergreen/+bug/2095532[Bug 2095532])
* Opens the lead record after merging records from a bucket (https://bugs.launchpad.net/evergreen/+bug/2098712[Bug 2098712])
* Fixes an issue where freetext null displays in comboboxes. (https://bugs.launchpad.net/evergreen/+bug/2093840[Bug 2093840])
* Restores dropped line of code in OPAC alert banner. (https://bugs.launchpad.net/evergreen/+bug/2106414[Bug 2106414])
* Restores acquisitions provider codes in select boxes. (https://bugs.launchpad.net/evergreen/+bug/2091178[Bug 2091178])
* Fix handling of diacritics in marc_export items export. (https://bugs.launchpad.net/evergreen/+bug/2103714[Bug 2103714])
* Add an automated check that the staff client can build successfully. (https://bugs.launchpad.net/evergreen/+bug/2069646[Bug 2069646])
* Added `tt2` syntax highlighting to appropriate code blocks across multiple files. (https://bugs.launchpad.net/evergreen/+bug/2106488[Bug 2106488])
* Fixes light and dark mode support for Chrome on Windows 7. (https://bugs.launchpad.net/evergreen/+bug/2106666[Bug 2106666])
* Fixes screenshot location for Emergency Closing Handler (https://bugs.launchpad.net/evergreen/+bug/2063846[Bug 2063846])
* Delete docs/modules/local_admin/assets/images/emergency_closing_handler directory
* Fixes broken author links when additional subfields exist in the MARC record. (https://bugs.launchpad.net/evergreen/+bug/2107209[Bug 2107209])
* Fix report table alias calculation for joins (https://bugs.launchpad.net/evergreen/+bug/2092695[Bug 2092695])
* Restores ability to dismiss toasts by clicking 'X' button (https://bugs.launchpad.net/evergreen/+bug/2107116[Bug 2107116])
* Disables the Pay Selected Charges button when none are selected. (https://bugs.launchpad.net/evergreen/+bug/2080899[Bug 2080899])
* Corrects the circ billing grid background color for selected rows with overdue and lost items. (https://bugs.launchpad.net/evergreen/+bug/2092293[Bug 2092293])
* Fixes display and accessibility bugs in Retrieve Bib by ID/TCN form (https://bugs.launchpad.net/evergreen/+bug/2037689[Bug 2037689])
* Adds checkbox to in-house use to allow inventory updates. (https://bugs.launchpad.net/evergreen/+bug/2095128[Bug 2095128])
* Fixes the H2 green color for staff screens in light mode (https://bugs.launchpad.net/evergreen/+bug/2109745[Bug 2109745])
* Makes patron self-registration aware of org unit tree. (https://bugs.launchpad.net/evergreen/+bug/1890629[Bug 1890629])
* Adds a missing button type attribute to satisfy lint rules (https://bugs.launchpad.net/evergreen/+bug/2111283[Bug 2111283])
* Aligns OPAC course search layout with advanced search form (https://bugs.launchpad.net/evergreen/+bug/2096790[Bug 2096790])
* Fixes the Browse Courses form layout (https://bugs.launchpad.net/evergreen/+bug/2096790[Bug 2096790])
* Adds label to "Allow others to use my account" name input (https://bugs.launchpad.net/evergreen/+bug/2078713[Bug 2078713])
* Filters out unholdable parts from part hold list. (https://bugs.launchpad.net/evergreen/+bug/1911063[Bug 1911063])
* Respect browser default font size for self checkout (https://bugs.launchpad.net/evergreen/+bug/2109643[Bug 2109643])
* Fixes color of Holdings View rows when selected. (https://bugs.launchpad.net/evergreen/+bug/2098718[Bug 2098718])
* Changes holdings view sort order to push sublibrary nodes below call number nodes. (https://bugs.launchpad.net/evergreen/+bug/2102217[Bug 2102217])
* Offsets the focus outline on primary buttons in AngularJS (https://bugs.launchpad.net/evergreen/+bug/1819068[Bug 1819068])
* Fixes checkbox border contrast and missing check marks (https://bugs.launchpad.net/evergreen/+bug/2099938[Bug 2099938])
* Adjusts self-check links to accommodate use by remotely managed ChromeOS kiosks. (https://bugs.launchpad.net/evergreen/+bug/2104272[Bug 2104272])
* Run Perl Unit Tests automatically. (https://bugs.launchpad.net/evergreen/+bug/2089184[Bug 2089184])
* Add a renewal link to the circ object in order to retrieve renewals more efficiently. (https://bugs.launchpad.net/evergreen/+bug/2110251[Bug 2110251])
* Hard due date and hard due date values now have their own permission sets. (https://bugs.launchpad.net/evergreen/+bug/1289651[Bug 1289651])
* Permission list documentation more in line with current permissions in Evergreen's database. (https://bugs.launchpad.net/evergreen/+bug/2111611[Bug 2111611])
* Fixes a typo in the Bootstrap OPAC credit card payment confirmation screen. (https://bugs.launchpad.net/evergreen/+bug/2090940[Bug 2090940])
* Fix typo in experimental circulation interface. (https://bugs.launchpad.net/evergreen/+bug/2088295[Bug 2088295])
* Fixes broken print button below the patron holds grid. (https://bugs.launchpad.net/evergreen/+bug/2110746[Bug 2110746])
* Make oils_xpath_string more flexible WRT XPath functions. (https://bugs.launchpad.net/evergreen/+bug/2112412[Bug 2112412])
* Fixes 'Save Grid Settings' on MARC Coded Value Maps grid. (https://bugs.launchpad.net/evergreen/+bug/1927510[Bug 1927510])
* Allow administrators to edit and delete statistical category entries. (https://bugs.launchpad.net/evergreen/+bug/1752367[Bug 1752367])
* Fixes bug where MARC import with items might never finish when "Use Org Unit Matching in Copy to Determine Best Match" is in effect (https://bugs.launchpad.net/evergreen/+bug/1848375[Bug 1848375])
* fix inability to add items to Record Bucket from Item Status Detail View. (https://bugs.launchpad.net/evergreen/+bug/1952388[Bug 1952388])
* Fix a bug in which the "Require Monographic Parts when Present" library setting failed to apply when editing existing items. (https://bugs.launchpad.net/evergreen/+bug/2096916[Bug 2096916])
* Remove an obsolete option from the build tools' make_release script. (https://bugs.launchpad.net/evergreen/+bug/2092338[Bug 2092338])
* OPAC "Show more copies" link now leads directly to the URL fragment of the first additional copy (https://bugs.launchpad.net/evergreen/+bug/2107576[Bug 2107576])
* Fixes wrapping and alignment for tooltip text (https://bugs.launchpad.net/evergreen/+bug/2092899[Bug 2092899])
* Fixes record match set display for acquisitions in Vandelay interface by restoring 'bib-acq' type handling. (https://bugs.launchpad.net/evergreen/+bug/1901615[Bug 1901615])
* Display match set types with appropriate labels in MARC Batch Import/Export. (https://bugs.launchpad.net/evergreen/+bug/1973754[Bug 1973754])
* Fixes 'Save Grid Settings' for Standing Penalties. (https://bugs.launchpad.net/evergreen/+bug/2069222[Bug 2069222])
* Resolves an issue deleting items without parts. (https://bugs.launchpad.net/evergreen/+bug/2115902[Bug 2115902])
* Corrects form label associations for tag and subfield inputs in new Link Checker session dialog (https://bugs.launchpad.net/evergreen/+bug/2116042[Bug 2116042])
* Small cleanup of unused code. (https://bugs.launchpad.net/evergreen/+bug/2093030[Bug 2093030])
* Adds a separate navigation landmark for OPAC basket (https://bugs.launchpad.net/evergreen/+bug/2115535[Bug 2115535])
* Fixes AngularJS modal close button contrast in light mode. (https://bugs.launchpad.net/evergreen/+bug/2112613[Bug 2112613])
* Adds missing form labels, revises heading for metarecord holds formats and languages options (https://bugs.launchpad.net/evergreen/+bug/2115824[Bug 2115824])
* Allow angular unit tests to run without OpenSRF installed. (https://bugs.launchpad.net/evergreen/+bug/2111731[Bug 2111731])
* Removes search preferences from Workstation splash page. (https://bugs.launchpad.net/evergreen/+bug/2074111[Bug 2074111])
* Removes "Add/Manage" from item alerts, notes, and tags contextual menu items for consistency with other menus. (https://bugs.launchpad.net/evergreen/+bug/2004026[Bug 2004026])
* Displays multivalue fixed fields (Ills, Cont, etc) as separate single-character inputs with combobox suggestions. (https://bugs.launchpad.net/evergreen/+bug/2083026[Bug 2083026])
* Corrects the order of the OPAC checkout history table's cover and checkbox columns (https://bugs.launchpad.net/evergreen/+bug/2104204[Bug 2104204])
* Makes report template description field more visible and browser-friendly. (https://bugs.launchpad.net/evergreen/+bug/2115261[Bug 2115261])
* Fixes focused buttons' text color in self-checkout (https://bugs.launchpad.net/evergreen/+bug/2110163[Bug 2110163])
* Changes "Stay logged in?" to "Remember language setting" in the OPAC login form (https://bugs.launchpad.net/evergreen/+bug/2114929[Bug 2114929])
* Fills in user email for MARC Import/Export background imports (https://bugs.launchpad.net/evergreen/+bug/2091648[Bug 2091648])
* Corrects OPAC advanced filters applied count; refactors filter show/hide link as details/summary (https://bugs.launchpad.net/evergreen/+bug/1785697[Bug 1785697])
* Focuses on subfield code input rather than value when the code is empty (as when adding a new subfield). (https://bugs.launchpad.net/evergreen/+bug/2111948[Bug 2111948])
* Adds individual suspend, activate, and cancel buttons to OPAC holds table rows (https://bugs.launchpad.net/evergreen/+bug/2115662[Bug 2115662])
* Fixes side-by-side form layout in three staff dialogs (https://bugs.launchpad.net/evergreen/+bug/2116753[Bug 2116753])
* Adds string for 'Fulfilled' hold status for AngularJS interfaces. (https://bugs.launchpad.net/evergreen/+bug/1753795[Bug 1753795])
* Clear Form now resets \"Home Library\" to consortium and retains the sticky setting for \"Include Inactive.\" (https://bugs.launchpad.net/evergreen/+bug/1721131[Bug 1721131])
* Allow text in a holdings editor dialog to be translated. (https://bugs.launchpad.net/evergreen/+bug/2115267[Bug 2115267])
* Bring back SHARE_REPORT_FOLDER permission check. (https://bugs.launchpad.net/evergreen/+bug/2102221[Bug 2102221])
* Remove @Input() decorator for combobox isEditable property (https://bugs.launchpad.net/evergreen/+bug/2106034[Bug 2106034])
* Allow staff to clear the default catalog search pane preference (https://bugs.launchpad.net/evergreen/+bug/2106034[Bug 2106034])
* Adds grid settings for EDI Attribute Sets administration. (https://bugs.launchpad.net/evergreen/+bug/1958076[Bug 1958076])
* Changes "Pull List for Hold Requests" to "Holds Pull List" in the staff navigation menus. (https://bugs.launchpad.net/evergreen/+bug/2071383[Bug 2071383])
* Clears patron's name from page title after checkout (https://bugs.launchpad.net/evergreen/+bug/1773464[Bug 1773464])
* Remove SlimPAC (https://bugs.launchpad.net/evergreen/+bug/2051382[Bug 2051382])
* Fixes authority propagation in fields with multiple $0s where the first one is NOT the special EG-linking content. (https://bugs.launchpad.net/evergreen/+bug/2117419[Bug 2117419])
* Replace ban icon with circle-xmark for OPAC Cancel buttons (https://bugs.launchpad.net/evergreen/+bug/2115369[Bug 2115369])
* Adds grid settings for Search Filter Group Configuration (https://bugs.launchpad.net/evergreen/+bug/2069220[Bug 2069220])
* Adds grid settings for Survey Configuration. (https://bugs.launchpad.net/evergreen/+bug/1908764[Bug 1908764])
* Customizes state, event, and next status fields in Angular Item Alert Types Administration screen (https://bugs.launchpad.net/evergreen/+bug/2013792[Bug 2013792])
* Staff catalog results side bar is now visible by default. (https://bugs.launchpad.net/evergreen/+bug/2116982[Bug 2116982])
* Allow opac.hold_notify to be an empty string in Angular hold interface. (https://bugs.launchpad.net/evergreen/+bug/2111291[Bug 2111291])
* Mark three grid columns for translation, and add an automated check to guard against untranslatable grid columns in the future. (https://bugs.launchpad.net/evergreen/+bug/2120490[Bug 2120490])
* Resolve an error when running Angular unit tests. (https://bugs.launchpad.net/evergreen/+bug/2116978[Bug 2116978])
* Adds grid settings for MARC Import/Export record matches (https://bugs.launchpad.net/evergreen/+bug/1927538[Bug 1927538])
* Fixes numerous small visual regressions due to Bootstrap 4 vs. 5 class changes in recent updates. (https://bugs.launchpad.net/evergreen/+bug/2106421[Bug 2106421])
* Adds a custom eslint rule to replace Bootstrap 4 classes not supported in Bootstrap 5 that often cause visual regressions. (https://bugs.launchpad.net/evergreen/+bug/2106421[Bug 2106421])
* Removes submit_on_change behavior from OPAC results sort dropdown and adds a separate button to update results (https://bugs.launchpad.net/evergreen/+bug/2048671[Bug 2048671])
* Move fieldmapper editor's Unset link to end; use X icon; hide Unset for readonly fields. (https://bugs.launchpad.net/evergreen/+bug/2105680[Bug 2105680])
* Corrects the background color of odd-numbered results in the z39.50 View MARC modal dialog. (https://bugs.launchpad.net/evergreen/+bug/2097385[Bug 2097385])
* Correct dark mode colors in several components, primarily the MARC rich editor (https://bugs.launchpad.net/evergreen/+bug/2107141[Bug 2107141])
* Fixes the background color of the header rows in Acquisitions worksheet tables. (https://bugs.launchpad.net/evergreen/+bug/2093225[Bug 2093225])
* Show users, not org units, as MARC Import/Export queue owners. (https://bugs.launchpad.net/evergreen/+bug/1856711[Bug 1856711])
* Displays MARC import queue owner as username, not ID (https://bugs.launchpad.net/evergreen/+bug/1856711[Bug 1856711])
* Fix Archive Course and Unarchive Course button colors (https://bugs.launchpad.net/evergreen/+bug/2063375[Bug 2063375])
* Use preferred name when available for Copy Mailing Address feature on patron record. (https://bugs.launchpad.net/evergreen/+bug/2118587[Bug 2118587])
* Force Simple Reports folders to be used by the Simple Reports interfaces. (https://bugs.launchpad.net/evergreen/+bug/2096672[Bug 2096672])
* Sets the default owning library to the workstation in New Shelving Location dialog. (https://bugs.launchpad.net/evergreen/+bug/1922390[Bug 1922390])
* Makes the owning library field required in the New Shelving Location dialog. (https://bugs.launchpad.net/evergreen/+bug/2003274[Bug 2003274])
* Fixes staff cat search filter visual cues when using multiple filters (https://bugs.launchpad.net/evergreen/+bug/2088199[Bug 2088199])
* Ensures that holdings templates' tags are applied to items. (https://bugs.launchpad.net/evergreen/+bug/2120500[Bug 2120500])
* Fixes fund details dialog layout for metadata and tags (https://bugs.launchpad.net/evergreen/+bug/1984130[Bug 1984130])
* New OPAC session timeout dialog with countdown, activity recognition, ARIA alerts, and improved keyboard navigation support (https://bugs.launchpad.net/evergreen/+bug/2114920[Bug 2114920])
* Sets user's preferred name as AngularJS patron page title (https://bugs.launchpad.net/evergreen/+bug/1945366[Bug 1945366])
* Resolves an issue with some SFTP errors not being reported properly in acquisitions EDI processing. (https://bugs.launchpad.net/evergreen/+bug/2125232[Bug 2125232])
* Adding IDL conneciton Item->In House Use (https://bugs.launchpad.net/evergreen/+bug/2095540[Bug 2095540])
* Adds spacing around My Lists buttons (https://bugs.launchpad.net/evergreen/+bug/2107206[Bug 2107206])
* Fix SIP2 hold cancellation to return success message properly (https://bugs.launchpad.net/evergreen/+bug/2121886[Bug 2121886])
* Speed up all Simple Reports created *after* this fix is applied. (https://bugs.launchpad.net/evergreen/+bug/2103717[Bug 2103717])
* Fixes "missing" holds where the requestor's card has been set to NULL or holds a value not represented in the card table. (https://bugs.launchpad.net/evergreen/+bug/2123871[Bug 2123871])
* Implement RIGHT JOINs in the Angular Reporter. (https://bugs.launchpad.net/evergreen/+bug/2109382[Bug 2109382])
* Corrects OPAC advanced search form row layout (https://bugs.launchpad.net/evergreen/+bug/2114839[Bug 2114839])
* Fixes an issue with hold retargeting of serial items. (https://bugs.launchpad.net/evergreen/+bug/2107581[Bug 2107581])
* Improves shift-click range selection on eg-tree and eg-tree-multiselect components. (https://bugs.launchpad.net/evergreen/+bug/2107891[Bug 2107891])
* Moves the OPAC login form username and password hints from tooltips to persistent text below the inputs (https://bugs.launchpad.net/evergreen/+bug/2115372[Bug 2115372])
* Make on-device MFA authentication app registration simpler by wrapping the QR code in a link. (https://bugs.launchpad.net/evergreen/+bug/2125510[Bug 2125510])
* Provide manual fallback for apps that don't follow standard practices to register an otpauth scheme handler. (https://bugs.launchpad.net/evergreen/+bug/2125510[Bug 2125510])
* Add validation styles to required date fields in FM Editor (https://bugs.launchpad.net/evergreen/+bug/2023794[Bug 2023794])
* Adds Library setting to hide Clear These Holds. (https://bugs.launchpad.net/evergreen/+bug/1961534[Bug 1961534])
* Patron name display now prioritizes preferred names in angular note dialog component. (https://bugs.launchpad.net/evergreen/+bug/2116126[Bug 2116126])
* Fix heading order, title line height in OPAC Edit Holds (https://bugs.launchpad.net/evergreen/+bug/2104206[Bug 2104206])
* Staff patron banner no longer displays the string “null” when a patron’s name part is missing; name parts are trimmed and omitted when empty. (https://bugs.launchpad.net/evergreen/+bug/2127006[Bug 2127006])
* Remove incorrect words from permissions administration screen. (https://bugs.launchpad.net/evergreen/+bug/2075372[Bug 2075372])
* Item status title column now uses the same order as the original MARC 245 field. (https://bugs.launchpad.net/evergreen/+bug/1860337[Bug 1860337])
* Shows AngularJS grid cell checkboxes even when multiselect is disabled (https://bugs.launchpad.net/evergreen/+bug/1838316[Bug 1838316])
* Adds number of available copies per part to the hold placement screen. (https://bugs.launchpad.net/evergreen/+bug/1868097[Bug 1868097])
* Adds grid actions menu for Hold Groups (https://bugs.launchpad.net/evergreen/+bug/2058263[Bug 2058263])
* Corrects the docs description of the deprecated FIFO library setting. (https://bugs.launchpad.net/evergreen/+bug/2122128[Bug 2122128])
* Adds Queued Ingest documentation.
* Clarifies volcopy editor docs to state that call number affixes are now available in the item attributes editor. (https://bugs.launchpad.net/evergreen/+bug/2115445[Bug 2115445])
* Add row selection count as ARIA description for grid action buttons that affect selected rows (https://bugs.launchpad.net/evergreen/+bug/2102049[Bug 2102049])
* Corrects the page title for the OPAC basket. (https://bugs.launchpad.net/evergreen/+bug/2117292[Bug 2117292])
* Shows the holds transit source and destination org units' shortnames rather than IDs. (https://bugs.launchpad.net/evergreen/+bug/2087870[Bug 2087870])
* Angular patron notes dialog now includes staff initials field, requires a title, and allows notes with title and no text. (https://bugs.launchpad.net/evergreen/+bug/2116206[Bug 2116206])
* Adds "Add to Basket" to the basket and Other Actions menus on the individual catalog record page. (https://bugs.launchpad.net/evergreen/+bug/1949222[Bug 1949222])
* Add configurable non-refundable payment types. (https://bugs.launchpad.net/evergreen/+bug/2002166[Bug 2002166])
* Fixes an issue where merging bibliographic records can lose parts. (https://bugs.launchpad.net/evergreen/+bug/2120713[Bug 2120713])
* Updates screenshot & verbiage in the Shelving Location Admin docs.
* Adding information to the OPAC MyAccount docs about SmartPay.
* Adds page-{ctx.page} or page-myopac-{myopac_page} to OPAC <body> tag for use in custom CSS (https://bugs.launchpad.net/evergreen/+bug/2115739[Bug 2115739])
* Add SSO support to the Staff Client. (https://bugs.launchpad.net/evergreen/+bug/2043040[Bug 2043040])
* Fixes borders of staff login form button, password toggle (https://bugs.launchpad.net/evergreen/+bug/2089597[Bug 2089597])
* Fixed input labels, IDs in Merge Monograph Parts dialog. (https://bugs.launchpad.net/evergreen/+bug/2063455[Bug 2063455])
* Ensures all grid table captions have unique IDs (https://bugs.launchpad.net/evergreen/+bug/2102046[Bug 2102046])
* Fixes ARIA labels for OPAC advanced search query type input and boolean operator select (https://bugs.launchpad.net/evergreen/+bug/2115685[Bug 2115685])
* Resolve an error with Github Actions continuous integration (automated testing) builds. (https://bugs.launchpad.net/evergreen/+bug/2129807[Bug 2129807])
* Adds Hold Groups support to the Angular Staff Catalog. (https://bugs.launchpad.net/evergreen/+bug/1918183[Bug 1918183])
* Prevents unAPI data elements from being announced by screen readers. (https://bugs.launchpad.net/evergreen/+bug/2069451[Bug 2069451])
* Adds Parent/Guardian Email Address field to "ILS User" IDL entry. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds IDL entry for "ILS User Change History". (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds E-renew? field to "Permission Group" IDL entry. For future work. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds guardian_email column to actor.usr table. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds evergreen.json_delta stored procedure. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds actor.generate_barcode stored procedure. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds actor.usr_delta_history table. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds actor.record_usr_delta stored procedure. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds record_usr_delta trigger to actor.usr table. This monitors updates to the user table and records the change in configured columns to the actor.usr_delta_history, which is labeled "ILS User Change History" in the reporter. By default, it only records changes in the last_update_time column, and the trigger itself is disabled by default. This can be reconfigured by the Database Adminstrator. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds erenew column to permission.grp_tree. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds a "PATRON_TEMP_RENEWAL" penalty to config.standing_penalty. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds an "ecard_vendor" password type. This type of password can only be set by the Database Adminstator. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds various library settings for Ecards in general, and for Quipu integration specifically. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds library settings for configuring Guardian Email for patron registration. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds an A/T hook for au.create.ecard, and an A/T template and environment variables for sending email for Ecard verification. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Upgrades library settings for early adopters. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds a local admin interface for User Change History. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds erenewal to server admin interface for Permission Groups. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds Guardian Email to patron editor, registration, search and summary interfaces. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds open-ils.actor.user.opac.renewal OpenSRF method for future work. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds utility subroutine for generating barcodes. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds opac/ecard/[form|submit|renew] end-points for Ecard vendors. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Test script for Concerto data. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Request Electronic Card link in footer (based on library setting, off by default) (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Registration page wrapper for Quipu form. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Verification page for E-registration (based on library setting, off by default) (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Adds Guardian Email to patron editor, registration, search and summary interfaces. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* changed description for the PATRON_TEMP_RENEWAL penalty to be more generic (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Added a library setting for "Enable eCard request renewal feature in the OPAC" (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* adds a User Expiration Temporary Interval field to the Permission Group Tree (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Removes some hard-coded logic from E-Renewals and adds an E-RENEW option for penalty block lists. Existing Quipu sites will want to look at this. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* adds a library setting for "Number of days before account expiration in which to offer an e-renewal" (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* For e-renewals, moves some hard-coded logic with policy assumptions out of the Perl and into Template Toolkit, which is easier to customize per org unit (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* fixes renewal offer window comparison with expire date and some styling tweaks (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* better fixes renewal offer window comparison and other fixes (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* removes GLS/Homebound logic from temporary renewal. Uses temporary_perm_interval on permission groups instead. (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* default of 30 days for temp renewal if not overriden by group Releaes-Note: library setting for "Quipu eCard/eRenew Fully Qualified Domain Name" (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* security fix for open-ils.actor.user.opac.renewal (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* tweaks to field handling for eRenew (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* adds more test coverage for eRenewal, as well as proper support for user settings and stat cats (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* security fix for memcached usage with eRenewals (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* more hardening/defensive programming, and test coverage for eRenewals (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* fixes bug introduced when adding Guardian Email to the patron search form (https://bugs.launchpad.net/evergreen/+bug/1902937[Bug 1902937])
* Improve performance of handling browse entries during ingest (https://bugs.launchpad.net/evergreen/+bug/2091748[Bug 2091748])
* Add a count, aria-describedby to OPAC result row buttons (https://bugs.launchpad.net/evergreen/+bug/2115533[Bug 2115533])
* Changes OpAC show all / show only available holds links to a checkbox (https://bugs.launchpad.net/evergreen/+bug/2115661[Bug 2115661])

:leveloffset: 0


== Acknowledgments ==
The Evergreen project would like to acknowledge the following
organizations that commissioned developments in this release of
Evergreen:

* BC Libraries Cooperative
* Carteret Community College for NCCCE and NCCardinal
* NOBLE
* PaILS

We would also like to thank the following individuals who contributed
code, translations, documentation patches and tests to this release of
Evergreen:

* Andrea Buntz Neiman
* Bill Erickson
* Blake Graham-Henderson
* Brian Kennedy
* Carol Witt
* Chris Amorosi
* Chris Sharp
* Christine Burns
* Christine Morgan
* Dan Briem
* Dan Guarracino
* Elizabeth Davis
* Eva Cerniňáková
* Galen Charlton
* Garry Collum
* Gina Monti
* Ian Skelskey
* Jane Sandberg
* Jason Boyer
* Jason Etheridge
* Jason Stephenson
* Jeff Davis
* Jeff Godin
* Jennifer Pringle
* Jessica Woolford
* John Amundson
* Josh Stompro
* Katie Greenleaf Martin
* Lindsay Stratton
* Llewellyn Marshall
* Martha Driscoll
* Mary Llewellyn
* Michele Morgan
* Mike Rylander
* Robin Fitch
* Ruth Frasur Davis
* Sarah Cruz
* Scott Angel
* Shula Link
* Stephanie Leary
* Steven Callender
* Steven Mayo
* Susan Morrison
* Susan Morrisoy
* Tara Kunesh
* Terran McCanna
* Tiffany Little


We also thank the following organizations whose employees contributed
patches:

* Bibliomation
* British Columbia Libraries Cooperative
* C/W MARS
* Equinox Open Library Initiative
* Evergreen Collaborative Development Initiative (ECDI)
* Georgia Public Library Service (GPLS)
* Greater Clarks Hill Regional Library
* Kenton County Public Library
* King County Library System
* Lake Agassiz Regional Library
* MOBIUS
* North of Boston Library Exchange (NOBLE)
* PaILS
* Princeton University
* Traverse Area District Library (TADL)
* Westchester Library System

We regret any omissions.  If a contributor has been inadvertently
missed, please open a bug at http://bugs.launchpad.net/evergreen/
with a correction.
