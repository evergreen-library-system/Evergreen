Borrowing items: who, what, for how long
========================================

Circulation policies pull together user, library, and item data to determine how
library materials circulate, such as: which patrons, from what libraries can
borrow what types of materials, for how long, and with what overdue fines. 

Individual elements of the circulation policies are configured using specific
interfaces, and should be configured prior to setting up the circulation 
policies.  

Data elements that affect your circulation policies
---------------------------------------------------

There are a few data elements which must be considered when setting up your
circulation policies. 

Copy data
~~~~~~~~~

Several fields set via the copy editor are commonly used to affect the
circulation of an item.

* *Circulation modifier* - Circulation modifiers are fields used to control
circulation policies on specific groups of items. They can be added to copies
during the cataloging process. New circulation modifiers can be created in the
staff client by navigating to *Admin > Server Administration > Circulation
Modifiers*.
* *Circulate?* flag - The circulate? flag in the copy editor can be set to False
to disallow an item from circulating.
* *Reference?* flag - The reference? flag in the copy editor can also be used as
a data element in circulation policies.

Copy Locations
~~~~~~~~~~~~~~

* To get to the Copy Locations Editor, navigate to *Admin > Local Administration
  > Copy Locations Editor*. 
* When setting up copy locations for your library you can set an entire copy
location to allow or disallow circulation.

image::media/copy_locations_circulate.png[]

* Copy locations can also be used as a data element in circulation policies. 

User Permission Group
~~~~~~~~~~~~~~~~~~~~~

* The user permission group is also commonly used as a data element in
circulation policies. 
* Other user data that can be used for circulation policies include the
*juvenile* flag in the user record.

Circulation Rules
-----------------

*Loan duration* describes the length of time for a checkout. You can also
identify the maximum renewals that can be placed on an item.

You can find Circulation Duration Rules by navigating to *Admin > Server
Administration > Circulation Duration Rules*. 

image::media/circ_duration_rules.jpg[]

*Recurring fine* describes the amount assessed for daily and hourly fines as
well as fines set for other regular intervals. You can also identify any grace
periods that should be applied before the fine starts accruing.

You can find Recurring Fine Rules by navigating to *Admin > Server
Administration > Circulation Recurring Fine Rules*.

image::media/circ_recurring_fine_rules.jpg[]

*Max fine* describes the maximum amount of fines that will be assessed for a
specific circulation. Set the *Use Percent* field to True if the maximum fine
should be a percentage of the item's price.

You can find Circ Max Fine Rules by navigating to *Admin > Server
Administration > Circulation Max Fine Rules*.

image::media/circ_max_fine_rules.jpg[]

These rules generally cause the most variation between organizational units.

Loan duration and recurring fine rate are designed with 3 levels: short, normal,
and extended loan duration, and low, normal, and high recurring fine rate. These
values are applied to specific items, when copy records are created. 

When naming these rules, give them a name that clearly identifies what the rule
does. This will make it easier to select the correct rule when creating your
circ policies.

Circulation Limit Sets
~~~~~~~~~~~~~~~~~~~~~~

Circulation Limit Sets allow you to limit the maximum number of copies for
different types of materials that a patron can check out at one time. Evergreen
supports creating these limits based on circulation modifiers, copy locations,
or circ limit groups, which allow you to create limits based on MARC data.
The below instructions will allow you to create limits based on circulation
modifiers.

* Configure the circulation limit sets by selecting *Admin > Local
Administration > Circulation Limit Sets*.
* *Items Out* -  the maximum number of items circulated to a patron at the same
time.
* *Depth* - Enter the Min Depth, or the minimum depth, in the org tree that
Evergreen will consider as valid circulation libraries for counting items out.
The min depth is based on org unit type depths. For example, if you want the
items in all of the circulating libraries in your consortium to be eligible for
restriction by this limit set when it is applied to a circulation policy, then
enter a zero (0) in this field. 
* *Global* - Check the box adjacent to Global Flag if you want all of the org
units in your consortium to be restricted by this limit set when it is applied
to a circulation policy. Otherwise, Evergreen will only apply the limit to the
direct ancestors and descendants of the owning library.
* *Linked Limit Groups* - add any circulation modifiers, copy locations, or circ
limit groups that should be part of this limit set.

*Example*
Your library (BR1) allows patrons to check out up to 5 videos at one time. This
checkout limit should apply when your library's videos are checked out at any
library in the consortium. Items with DVD, BLURAY, and VHS circ modifiers should
be included in this maximum checkout count. 

To create this limit set, you would add 5 to the *Items Out* field, 0 to the
*Depth* field and select the *Global Flag*. Add the DVD, BLURAY and VHS circ
modifiers to the limit set.

Creating Circulation Policies
-----------------------------

Once you have identified your data elements that will drive circulation policies
and have created your circulation rules, you are ready to begin creating your
circulation policies. 

If you are managing a small number of rules, you can create and manage
circulation policies in the staff client via *Admin > Local Administration >
Circulation Policies*. However, if you are managing a large number of policies,
it is easier to create and locate rules directly in the database by updating
*config.circ_matrix_matchpoint*.

The *config.circ_matrix_matchpoint* table is central to the configuration of
circulation parameters. It collects the main set of data used to determine what
rules apply to any given circulation. It is useful for us to think of their
columns in terms of 'match' columns, those that are used to match the
particulars of a given circulation transaction, and 'result' columns, those that
return the various parameters that are applied to the matching transaction.

* Circulation policies by checkout library or owning library?
   - If your policies should follow the rules of the library that checks out the
item, select the checkout library as the *Org Unit(org_unit)*.
   - If your policies should follow the rules of the library that owns the item,
select the consortium as the *Org Unit (org_unit)* and select the owning library
as the *Copy Circ Lib (copy_circ_lib)*.
* Renewal policies can be created by setting *Renewals? (is_renewal)* to True.
* You can apply the duration rules, recurring fine rules, maximum fine rules,
and circulation sets created in the above sets when creating the circulation
policy.

Best practices for creating policies
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

* Start by replacing the default consortium-level circ policy with one that
contains a majority of your libraries' duration, recurring fine, and max fine
rules. This first rule will serve as a default for all materials and permission
groups. 
* If many libraries in your consortium have rules that differ from the default
for particular materials or people, set a consortium-wide policy for that circ
modifier or that permission group.
* After setting these consortium defaults, if a library has a circulation rule
that differs from the default, you can then create a rule for that library. You
only need to change the parameters that are different from the default
parameters. The rule will inherit the values for the other parameters from that
default consortium rule.
* Try to avoid unnecessary repetition.
* Try to get as much agreement as possible among the libraries in your
consortium.

*Example 1*

image::media/circ_example1.png[]
 
In this example, the consortium has decided on a 21_day_2_renew loan rule for
general materials, i.e. books, etc. Most members do not charge overdue fines.
System 1 charges 25 cents per day to a maximum of $3.00, but otherwise uses the
default circulation duration. 

*Example 2*

image::media/circ_example2.png[]

This example includes a basic set of fields and creates a situation where items
with a circ modifier of "book" or "music" can be checked out, but "dvd" items
will not circulate. The associated rules would apply during checkouts. 

*Example 3*

image::media/circ_example3.png[]

This example builds on the earlier example and adds some more complicated
options.

It is still true that "book" and "music" items can be checked out, while "dvd"
is not circulated. However, now we have added new rules that state that "Adult"
patrons of "SYS1" can circulate "dvd" items.

Settings Relevant to Circulation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following circulation settings, available via *Admin > Local Administration
> Library Settings Editor*, can also affect your circulation duration, renewals
and fine policy.

* *Auto-Extend Grace Periods* - When enabled, grace periods will auto-extend.
By default this will be only when they are a full day or more and end on a
closed date, though other options can alter this. 
* *Auto-Extending Grace Periods extend for all closed dates* - If enabled and
Grace Periods auto-extending is turned on, grace periods will extend past all
closed dates they intersect, within hard-coded limits. 
* *Auto-Extending Grace Periods include trailing closed dates* - If enabled and
Grace Periods auto-extending is turned on, grace periods will include closed
dates that directly follow the last day of the grace period.
* *Checkout auto renew age* - When an item has been checked out for at least
this amount of time, an attempt to check out the item to the patron that it is
already checked out to will simply renew the circulation. 
* *Cap Max Fine at Item Price* - This prevents the system from charging more
than the item price in overdue fines.
* *Charge fines on overdue circulations when closed* - Normally, fines are not
charged when a library is closed. When set to True, fines will be charged during
scheduled closings and normal weekly closed days. 
