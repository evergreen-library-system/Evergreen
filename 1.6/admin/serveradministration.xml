<?xml version='1.0' encoding='UTF-8'?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude"
xmlns:xl="http://www.w3.org/1999/xlink" version="5.0" xml:id="serveradministration">
	<info>
		<title>Server Administration</title>
		<abstract>
			<para>Administration of <application>Evergreen</application> involves configuration done from both the Staff Client as well a 
			the command line. The goal of this chapter is to provide you with the procedures to help 
			you optimize your <application>Evergreen</application> system.</para>
		</abstract>
	</info>
	<section xml:id="orgunitsandtypes">
		<title>Organizational Unit Types and Organizational Units</title>
		<simplesect xml:id="orgtypes">
			<title>Organizational Unit Types</title>
			<indexterm><primary>organizational unit types</primary></indexterm>
			<para>Organizational Unit Types are the terms used to refer to levels in the hierarchy of your 
			library system(s). Examples could include>All-Encompassing Consortium, Consortium Within a 
			Consortium, Library System, Branch, Bookmobile, Sub-Branch, Twig, etc.</para>
			<para>You can add or remove organizational unit types, and rename them as needed to match the 
			organizational hierarchy that exists in reality for the libraries using your installation of 
			Evergreen. Evergreen can support organizations as simple as a single library with one or more 
			branches or as complex as a consortium composed of many independently governed library 
			systems. Organizational unit types should never have proper names since they are only generic types .</para>
			<tip><para>It is a good idea to set up all of your organizational types and units before loading other data. In many cases, editing or deleting organizational units and types 
			may be difficult once you have loaded records or users. </para></tip>
			<para>The fields in the organizational unit type record include:</para>
			<itemizedlist>
				<listitem><guilabel>Type Name</guilabel> - The name of the organization unit type.</listitem>
				<listitem><guilabel>Opac Label</guilabel> - This is the label displayed in the OPAC to describe the search 
				range and the copy count columns for results. They are <emphasis>range 
				relative</emphasis> labels.</listitem>
				
				<listitem><guilabel>Parent Type</guilabel> - The parent organizational unit type of this type.</listitem>
				<listitem><guilabel>Can Have Volumes</guilabel> - Flag that allows an organizational unit of this type to contain 
				Volumes/Call Numbers and thus Copies.</listitem>
			 	<listitem><guilabel>Can Have Users</guilabel> - Flag that allows an Organizational unit of this type to be home to 
				Users.</listitem>
			</itemizedlist>
			<para>An organizational unit type can be added, edited, or removed using  the staff client.</para>
			<para>To navigate to the <emphasis>Organization Unit Types</emphasis> from the staff client select  
					<menuchoice>
				       		<guimenu>Admin</guimenu>  
				       		<guisubmenu>Server Administration</guisubmenu>
				                  <guisubmenu>Organization Types</guisubmenu>
					</menuchoice>
			</para>
			<procedure>
				<title>Adding Organization Types<indexterm><primary>organizational unit types</primary><secondary>adding</secondary></indexterm></title>
				<step><para>Select an organization type from the organization type tree on the left and 
				click <guibutton>New Child</guibutton>.</para></step>
				<step><para>Make sure your new type is selected and edit the <guilabel>Type Name</guilabel>, 
				<guilabel>OPAC Label</guilabel> and <guilabel>Parent Type</guilabel>.</para></step>
				<step><para>Change the <guilabel>Parent Type</guilabel> if necessary.</para></step>
				<step><para>Check the <guilabel>Can Have Volumes and Copies</guilabel> check box if the 
				organization units of this type will have volumes and copies assigned to it.</para></step>
				<step><para>Check the <guilabel>Can Have Users</guilabel> check box if you will allow users 
				to be have the organization units of this type as their home unit.</para></step>
				<step><para>Click <guibutton>Save</guibutton> to save your new organization type.
				</para></step>	
				<step><para>From the server command line, run autogen to apply the changes to the database and scripts. Run the following command as the opensrf user:</para>
<screen>
<userinput>/openils/bin/autogen.sh -c /openils/conf/opensrf_core.xml -u</userinput>
</screen> 
				</step>	
				<step>
					<para>As root, restart the Apache server:</para>
<screen>
<userinput>/etc/init.d/apache2 restart</userinput>
				</screen> 
			</step>	
				<step><para>The staff client will need to be restarted for changes to appear.</para>
				</step>	
			</procedure>
			<procedure>
				<title>Deleting Organization Types</title>
				<indexterm><primary>organizational unit types</primary><secondary>deleting</secondary></indexterm>
				<step><para>Select the <guilabel>organization type</guilabel> from the <guilabel>Organization Type</guilabel> 
				tree.</para></step>
				<step><para>Click <guibutton>Delete</guibutton>.</para></step>
				<step><para>Click <guibutton>OK</guibutton> on the warning alert box.</para></step>
				<step><para>From the server command line, run autogen to apply the changes to the database and scripts. Run the following command as the opensrf user:</para>
<screen>
<userinput>/openils/bin/autogen.sh -c /openils/conf/opensrf_core.xml -u</userinput>
</screen> 
				</step>	
				<step>
					<para>As root, restart the Apache server:</para>
<screen>
<userinput>/etc/init.d/apache2 restart</userinput>
</screen> 
				</step>	
				<step><para>The staff client will need to be restarted for changes to appear.</para>
				</step>					
				<note>
					<para>You will not be able to delete organization types if organization units are 
					assigned to that type. Before you can delete the organization 
					Type, you must change the organization type of the units associated with the type 
					or delete the units.</para>
				</note>

			</procedure>
			<procedure>
				<title>Editing Organization Types<indexterm><primary>organizational unit types</primary><secondary>editing</secondary></indexterm></title>
				<step><para>Select the <guilabel>organization type</guilabel> you wish to edit from the 
				organization type tree.</para></step>
				<step><para>Make the changes in the right pane.</para></step>
				<step><para>Click <guibutton>Save</guibutton> to save your changes.</para></step>
				<step><para>From the server command line, run autogen to apply the changes to the database and scripts. Run the following command as the opensrf user:</para>
<screen>
<userinput>/openils/bin/autogen.sh -c /openils/conf/opensrf_core.xml -u</userinput>
</screen> 
				</step>	
				<step>
				<para>As root, restart the Apache server:</para>
<screen>
<userinput>/etc/init.d/apache2 restart</userinput>
</screen> 
				</step>	
				<step><para>The staff client will need to be restarted for changes to appear.</para>
				</step>					
			</procedure>
		</simplesect>
	
		<simplesect xml:id="orgunits">
		<title>Organizational Units</title>
		<indexterm><primary>organizational units</primary></indexterm>
		<abstract>
		<para>Organizational Units are the specific instances of the organization unit types that 
		make up your library's hierarchy. These can include  consortia, systems, branches, 
		etc. The organizational units should have distinctive proper names such as 
		<emphasis>Main Street Branch</emphasis> or <emphasis>Townsville Campus</emphasis>.</para>
		</abstract>
		<para>To navigate to the organizational units administration page in the staff client select  
			<menuchoice>
				<guimenu>Admin</guimenu>  
				<guisubmenu>Server Administration</guisubmenu>
				<guisubmenu>Organizational Units</guisubmenu>
			</menuchoice>
		</para>
		<procedure>
			<title>Adding Organizational Units</title>
			<indexterm><primary>organization units</primary><secondary>adding</secondary></indexterm>
			<step><para>Select an <guilabel>Organizational Unit</guilabel> from the organizational unit tree on the left and click 
			<guibutton>New Child</guibutton>.</para></step>
			<step><para>Make sure your new unit is selected and edit the <guilabel>Organizational Unit 
			Name</guilabel>, <guilabel>Organizational Unit Policy Code</guilabel>, 
			<guilabel>Main Email Address</guilabel> and <guilabel>Main Phone Number</guilabel>.</para>
			<note>
				<para>The <emphasis>Organizational Unit Name</emphasis> is the name that will appear in the 
				OPAC. The <emphasis>Policy Code</emphasis> is used by the system to associate policies and 
				copies with the unit.</para>
			</note>
			</step>
			<step><para>Select the <guilabel>Organization Unit Type</guilabel> and 
			<guilabel>Parent Organization Unit</guilabel>.</para></step>
			<step><para>Check the <guilabel>Can Have Volumes and Copies</guilabel> check box if the 
			organization units of this type will have volumes and copies assigned to it.<indexterm><primary>organization units</primary><secondary>volumes 
			and copies</secondary></indexterm></para></step>
			<step><para>Check the <guilabel>OPAC Visible</guilabel> check box if you want this location to be 
			visible in the OPAC for searching.<indexterm><primary>Organization Units</primary><secondary>opac visible</secondary></indexterm></para></step>
			<step><para>Click <guibutton>Save</guibutton> to save your new organizational unit.</para></step>
			<step><para>From the server command line, run autogen to apply the changes to the database and scripts. Run the following command as the opensrf user:</para>
<screen>
<userinput>/openils/bin/autogen.sh -c /openils/conf/opensrf_core.xml -u</userinput>
</screen> 
				</step>	
				<step>
				<para>As root, restart the Apache server:</para>
<screen>
<userinput>/etc/init.d/apache2 restart</userinput>
</screen> 
				</step>	
				<step>
					<para>As root, restart the Apache server:</para>
<screen>
<userinput>/etc/init.d/apache2 restart</userinput>
</screen> 
				</step>	
				<step><para>The staff client will need to be restarted for changes to appear.</para>
				</step>		
		</procedure>
		<procedure>
			<title>Deleting Organizational Units</title>
			 <indexterm><primary>organization units</primary><secondary>deleting</secondary></indexterm>
			<step><para>Select the <emphasis>organizational unit</emphasis> you wish to delete from the organizational unit tree in the left pane.</para></step>
			<step><para>Click<guibutton>Delete</guibutton>.</para></step>
			<step><para>Click <guibutton>OK</guibutton> on the warning alert box.</para></step>
			<step>
				<para>From the server command line, run autogen to apply the changes to the database and scripts. Run the following command as the opensrf user:</para>
<screen>
<userinput>/openils/bin/autogen.sh -c /openils/conf/opensrf_core.xml -u</userinput>
</screen> 
				</step>	
				<step>
					<para>As root, restart the Apache server:</para>
<screen>
<userinput>/etc/init.d/apache2 restart</userinput>
</screen> 
				</step>	
				<step><para>The staff client will need to be restarted for changes to appear.</para>
				</step>	
			<note>
				<para>You will not be able to delete organizational units if you have 
				users, workstations or copies assigned to the unit. Before you can delete the 
				organizational unit, you must move its users, workstations, copies and other associated resources to other 
				organizational units.</para>
			</note>
		</procedure>
		<procedure>
			<title>Changing the Default Organizational Units and Types Using SQL</title>
			<para>Evergreen comes with several default organizational units set up out-of-the-box. Most libraries will want to customize the Org units with their own Organizational Units and 
			types. The quickest way to do this is with SQL.</para> 
			<note><para>The following procedure should only be done before you have migrated users and items into your system.</para></note>
			<step>
				<para>Delete all but the core organizational unit:</para>
<programlisting language="sql">
BEGIN;
DELETE FROM actor.org_unit WHERE id > 1;
DELETE FROM actor.org_address WHERE id > 1;
DELETE FROM actor.workstation WHERE owning_lib > 1;
COMMIT;
</programlisting>
			</step>
			<step>
				<para>Clean up our org unit types, in preparation for creating the organizational units hierarchy:</para>
<programlisting language="sql">
BEGIN;
DELETE FROM actor.org_unit_type WHERE id > 2;
UPDATE actor.org_unit_type SET name = 'System', can_have_users = TRUE
WHERE id = 1;
UPDATE actor.org_unit_type SET name = 'Branch', can_have_users = TRUE,
can_have_vols = TRUE WHERE id = 2;
COMMIT;
</programlisting>
</step>
			<step>
				<para>Create a branch that hangs off the only remaining parent branch setting the addresses to the system address temporarily:</para>
<programlisting language="sql">
INSERT INTO actor.org_unit (parent_ou, ou_type, ill_address,
holds_address, mailing_address, billing_address, shortname, name)
  VALUES (1, 2, 1, 1, 1, 1, 'MYBRANCH', 'My Branch');
</programlisting>
			</step>
					<step>
				<para>Find out what ID was assigned to the new branch:</para>
<programlisting language="sql">
SELECT id FROM actor.org_unit WHERE shortname = 'MYBRANCH';
</programlisting>
			</step>
			<step>
				<para>Create our required org address and update <database class="table">actor.org_unit</database> to point ot correct <database class="table">actor.org_address</database> <database class="field">id</database> (assuming output of last step was <quote>101</quote>, adjust accordingly.):</para>
<programlisting language="sql">
BEGIN;
INSERT INTO actor.org_address (id, org_unit, street1, city, state,
country, post_code)
  VALUES (2, 101, 'Fake Street', 'Fake', 'Fake', 'Fake', 'FOO BAR');
UPDATE actor.org_unit SET ill_address= 2, holds_address = 2, mailing_address = 2, billing_address = 2 WHERE id = 101;
COMMIT; 
</programlisting>
			</step>
<step>
				<para>Run autogen.sh for your changes to be updated.</para>
<screen>
<userinput>./autogen.sh -c /openils/conf/opensrf_core.xml -u</userinput>
</screen>
			</step>
			<step>
				<para>As root, restart the Apache server:</para>
<screen>
<userinput>/etc/init.d/apache2 restart</userinput>
</screen> 
			</step>	
		</procedure>
		<procedure>
			<title>Editing Organizational Units<indexterm><primary>organization units</primary><secondary>editing</secondary></indexterm></title>
			<step><para>Select the organizational unit you wish to edit from the 
			organizational unit tree in the left pane.</para></step>
			<step><para>Edit the fields in the right pane.</para></step>
			<step><para>Click <guibutton>Save</guibutton> to save your changes.</para></step>
			<step><para>From the server command line, run autogen to apply the changes to the database and scripts. Run the following command as the opensrf user:</para>
<screen>
<userinput>/openils/bin/autogen.sh -c /openils/conf/opensrf_core.xml -u</userinput>
</screen> 
			</step>	
			<step>
				<para>As root, restart the Apache server:</para>
<screen>
<userinput>/etc/init.d/apache2 restart</userinput>
</screen> 
			</step>	

			<step><para>The staff client will need to be restarted for changes to appear.</para>
			</step>	
		</procedure>
		
		</simplesect>
		<simplesect xml:id="server-hours">
		      <info>
			 <title>Library Hours of Operation<indexterm><primary>hours of operation</primary><secondary>setting</secondary></indexterm></title>
		      </info>

		      <para>Local System Administrators can use the <guilabel>Organizational Units</guilabel> interface to set the library's hours of operation. These are regular weekly hours;
			 holiday and other closures are recorded in the <link linkend="lsa-closed">Closed Dates
			    Editor</link>.</para>

		      <para>Hours of operation and closed dates affect due dates and overdue fines.</para>

		      <itemizedlist>
			 <listitem>
			    <formalpara>
			       <title>Due dates<indexterm><primary>hours of operation</primary><secondary>due dates policy</secondary></indexterm></title>
			       <para>Due dates that would fall on closed days are automatically pushed forward to
				  the next open day. Likewise, if an item is checked out at 8pm, for example, and
				  would normally be due on a day when the library closes before 8pm, Evergreen
				  pushes the due date forward to the next open day.</para>
			    </formalpara>
			 </listitem>
			 <listitem>
			    <formalpara>
			       <title>Overdue fines <indexterm><primary>hours of operation</primary><secondary>overdue fines policy</secondary></indexterm></title>
			       <para>Overdue fines are not charged on days when the library is closed.</para>
			    </formalpara>
			 </listitem>
		      </itemizedlist>
			<para>To review or edit your library's hours of operation,</para>
	      <procedure>
		 <step>
		    <para>Open the <guilabel>Organizational Units</guilabel> interface.</para>
		 </step>
		 <step>
		    <informalfigure>
		       <para>Click the <guilabel>Hours of
		             Operation</guilabel> tab.</para>
		       <para>
		          <mediaobject>
		             <alt>organizational units, main settings</alt>
		             <imageobject>
		                <imagedata scalefit="0" fileref="../media/server-4.png"/>
		             </imageobject>
		          </mediaobject>
		       </para>
		    </informalfigure>
		 </step>

		 <step>
		    <informalfigure>
		       <para>Review your library's weekly hours, editing as necessary. To set a closed day
		          click the corresponding <guibutton>Closed</guibutton> button. Closed days (Monday
		          and Sunday in the example below) have open and close times of 12:00
		          AM.</para>
		       <para>
		          <mediaobject>
		             <alt>hours of operation interface</alt>
		             <imageobject>
		                <imagedata scalefit="0" fileref="../media/server-5.png"/>
		             </imageobject>
		          </mediaobject>
		       </para>
		    </informalfigure>
		 </step>

		 <step>
		    <para>Click <guibutton>Save</guibutton> to record any changes</para>
		 </step>


	      </procedure>

  	 </simplesect>


	   <simplesect xml:id="server-addresses">
	      <info>
		 <title>Library Addresses <indexterm><primary>library addresses </primary><secondary>setting</secondary></indexterm></title>
	      </info>

	      <para>Addresses set in <menuchoice>
		    <guimenu>Admin (-)</guimenu>
		    <guisubmenu>Server Administrations</guisubmenu>
		    <guimenuitem>Organizational Units</guimenuitem>
		 </menuchoice> appear in patron email notifications, hold slips, and transit slips. Local
		 System Administrators should ensure that the <guilabel>Physical</guilabel>,
		    <guilabel>Holds</guilabel>, and <guilabel>Mailing</guilabel> addresses are set
		 correctly.</para>

	      <procedure>

		 <step>
		    <para>Open the <guilabel>Organizational Units</guilabel> interface as described in the <link
		          linkend="orgunits">previous section</link>.</para>
		 </step>
		 <step>
		    <informalfigure>
		       <para>Click the
		             <guilabel>Addresses</guilabel> tab.</para>
		       <para>
		          <mediaobject>
		             <alt>organizational units, main settings</alt>
		             <imageobject>
		                <imagedata scalefit="0" fileref="../media/server-6.png"/>
		             </imageobject>
		          </mediaobject>
		       </para>
		    </informalfigure>
		 </step>

		 <step>
		   
		       <para>There are four address tabs: <guilabel>Physical</guilabel>,
		             <guilabel>Holds</guilabel>, <guilabel>Mailing</guilabel>, and
		             <guilabel>ILL</guilabel>. The <guilabel>Holds Address</guilabel> appears on transit slips when items are sent to fulfill holds at another branch.</para>
		      
		   
		 </step>

		 <step>
		    <para>Click <guibutton>Save</guibutton> to record changes for each tab.</para>
		 </step>

	      </procedure>

	      <note>
		 <para>The <guilabel>Valid</guilabel> check box is an optional setting that does not affect current Evergreen functions.</para>
	      </note>

	   </simplesect>

	</section>
	
	<section xml:id="permissions">
			<title>User and Group Permissions <indexterm><primary>permissions</primary><secondary>group</secondary></indexterm></title>
			<abstract>
			<para>It is essential to understand how user and group permissions can be used to allow staff 
			to fulfill their roles while ensuring that they only have access to the appropriate level.</para> 
			<para>Permissions in <application>Evergreen</application> are applied to a specific location and system depth based on the home 
			library of the user. The user will only have that permission within the scope provided by the 
			<emphasis>Depth</emphasis> field in relation to his/her working locations.</para> 
			<para>Evergreen provides group application permissions in order to restrict which staff members 
			have the ability to assign elevated permissions to a user, and which staff members have the ability 
			to edit users in particular groups.</para>
		</abstract>
		<simplesect>
			<title>User Permissions</title>
			<tip><para>The User permissions editor allows an administrator to set up permission for an individual user. However, In most cases, permissions can be controlled more 
			efficiently at the group level with individuals being assigned to specific groups based on their roles in the library.</para></tip> 
			<para>To open the user permission editor, select <menuchoice><guimenu>Admin</guimenu>  
			<guisubmenu>User Permission Editor</guisubmenu></menuchoice>. Type the user's barcode when prompted.</para>   
			<simplesect>
				<title>Working Locations</title>
				<para>You may select more than one working location for a user. This will effect 
				the availability of certain permissions which are dependent on the user having the working location.</para> 	
			</simplesect>
			<simplesect>
				<title>User Permission Settings<indexterm><primary>permissions</primary><secondary>user</secondary></indexterm></title>
				<para>Below the working locations is the long list of all the permissions available on your 
				system. For each permission you can apply it by checking the 
				<emphasis>Applied</emphasis> check box. You can also select a depth to which the 
				permission is applied and also make the permission <emphasis>grantable</emphasis>, allowing 
				the user the ability to grant the permission to others.</para>
			</simplesect>	
		</simplesect>
		<simplesect>
			<title>Group Permissions <indexterm><primary>permissions</primary><secondary>group</secondary></indexterm></title>
			<para>Most permissions should be assigned at the group level. Here you can create new 
			groups based on the roles and responsibilities of the users in your system. Staff will be able to 
			assign users to these groups when they register patrons.</para> 
			<tip><para>It is a good idea to create your groups soon after creating your organizational units.
			It is also important to give careful consideration to the hierarchy of your groups to make 
			permission assignment as efficient as possible.</para></tip> 
			<para>To enter the <emphasis>Group Permission</emphasis> module from the staff client menu, select 
			<menuchoice><guimenu>Admin</guimenu>  <guisubmenu>Server Administration</guisubmenu> 
				<guisubmenu>Permission Groups</guisubmenu></menuchoice></para>
			<procedure>
				<title>Adding Groups</title>
				<step><para>Select the <guibutton>Group Configuration</guibutton> tab if not 
				already selected in the right pane</para></step>
				<step><para>Click <guibutton>New Child</guibutton></para></step>
				<step><para>Enter a unique <guilabel>Group Name</guilabel></para></step>
				<step><para>Enter a <guilabel>Description</guilabel></para></step>
				<step><para>Select a <guilabel>Permission Interval</guilabel>. This will determine the 
				default expiry date of user account when you register patrons and select 
				their groups</para></step>
				<step><para>Selecting an <guilabel>Editing Permission</guilabel> will determine the group level the user will have for editing other users.</para></step>
				<step><para>Select the <guilabel>Parent Group</guilabel> for the group.</para>
				<note><para>The group will inherit its parent group's permissions so it is unnecessary to assign permissions already inherited from its parent.</para></note></step>
				<step><para>Click the <guibutton>Save</guibutton> button.</para></step> 
			</procedure>
			<procedure>
				<title>Deleting Groups</title>
				<step><para>Select the group you wish to delete from the group tree on 
				left pane.</para></step>
				<step><para>Click the <guibutton>Delete</guibutton> button.</para></step>
				<step><para>Click on <guibutton>OK</guibutton>to verify.</para></step>
			</procedure>
			<procedure>
				<title>Editing Groups</title>
				<step><para>Select the group you wish to edit from the group tree on left pane.</para></step>
				<step><para>Edit the fields you wish to change in the right pane.</para></step>
				<step><para>Click on <guibutton>Save</guibutton> to save changes.</para></step> 
			</procedure>
			<procedure>
				<title>Adding Group Permissions</title>
				<step><para>Select the <guibutton>Group Permissions</guibutton> tab on the right 
				pane</para></step>
	       			<step><para>Click on <guibutton>New Mapping</guibutton>.</para></step>
				<step><para>Select the permission you would like to add from the 
				<guibutton>Permission</guibutton> Select box.</para></step>
				<step><para>Select the <guibutton>Depth</guibutton> you wish to set the 
				permission. This will determine if the group has the permission at a local level or across a
				system, or consortium, or other organizational unit type.</para></step>
				<step><para>check the <guibutton>Grantable</guibutton> check box to allow the user to 
				grant the permission to others.</para></step>
				<step><para>Click <guibutton>Add Mapping</guibutton> to add the permission to the 
				group</para></step>
			</procedure>
			<procedure>
				<title>Deleting Group Permissions</title>
				<step><para>Select the group permission you wish to delete.</para></step>
				<step><para>Click the <guibutton>Delete Selected</guibutton> button.</para></step>
				<step><para>Click on <guibutton>OK</guibutton> to verify</para></step>
			</procedure>
			<procedure>
				<title>Editing Group Permissions</title>
				<step><para>Click on the <guilabel>Depth</guilabel> or <guilabel>Grantable</guilabel> 
				field for the permission setting you wish to change.</para></step>
				<step><para>Make changes to other permissions in the same way.</para></step>
				<step><para>Click <guibutton>Save Changes</guibutton> when you are finished all 
				the changes.</para></step>
			</procedure>
		</simplesect>
		<simplesect>
			<title>Permissions</title>
			
			<table xml:id="permissiondescriptions">
				<title>Permissions Table</title>
				<tgroup cols="2">
					<colspec colnum="1" colname="col1" colwidth="1.0*"/>
					<colspec colnum="2" colname="col2" colwidth="1.0*"/>
					<thead>
						<row>
							<entry>Permission Name</entry>
							<entry>Permission Description</entry>
						</row>
					</thead>
					<tbody>
						<row>
							<entry>ABORT_REMOTE_TRANSIT</entry>
							<entry>Allows user to abort a copy transit if the user is not at 
							the transit source or destination</entry>
						</row>
						<row>
							<entry>ABORT_TRANSIT</entry>
							<entry>Allows user to abort a copy transit if the user is at the 
							transit destination or source</entry>
						</row>
						<row>
							<entry>ASSIGN_WORK_ORG_UNIT</entry>
							<entry>Allows user to define where another staff member's 
							permissions apply via the Permissions Editor interface.</entry>
						</row>
						<row>
							<entry>BAR_PATRON</entry>
							<entry>Allows user to bar a patron</entry>
						</row>
						<row>
							<entry>CANCEL_HOLDS</entry>
							<entry>Allows user to cancel holds</entry>
						</row>
						<row>
							<entry>CIRC_CLAIMS_RETURNED override</entry>
							<entry>Allows user to check in/out an item that is claims 
							returned</entry>
						</row>
						<row>
							<entry>CIRC_EXCEEDS_COPY_RANGE override</entry>
							<entry>Allows user to override the copy exceeds range event</entry>
						</row>
						<row>
							<entry>CIRC_OVERRIDE_DUE_DATE</entry>
							<entry>Allows user to change due date</entry>
						</row>
						<row>
							<entry>CIRC_PERMIT_OVERRIDE</entry>
							<entry>Allows user to bypass the circ permit call for i
							checkout</entry>
						</row>
						<row>
							<entry>COPY_ALERT_MESSAGE override</entry>
							<entry>Allows user to check in/out an item that has an alert 
								message</entry>
						</row>
						<row>
							<entry>COPY_BAD_STATUS override</entry>
							<entry>Allows user to check out an item in a non-circulating
							status</entry>
						</row>
						<row>
							<entry>COPY_CHECKIN</entry>
							<entry>Allows user to check in a copy</entry>
						</row>
						<row>
							<entry>COPY_CHECKOUT</entry>
							<entry>Allows user to check out a copy</entry>
						</row>
						<row>
							<entry>COPY_CIRC_NOT_ALLOWED override</entry>
							<entry>Allows user to checkout an item that is marked as 
							non-circ</entry>
						</row>
						<row>
							<entry>COPY_HOLDS</entry>
							<entry>Allows user to place a hold on a specific copy</entry>
						</row>
						<row>
							<entry>COPY_IS_REFERENCE override</entry>
							<entry>Allows user to override the copy_is_reference event</entry>
						</row>
					
						<row>
							<entry>COPY_NOT_AVAILABLE override</entry>
							<entry>Allows user to force checkout of Missing/Lost type 
							items</entry>
						</row>
						<row>
							<entry>COPY_STATUS_LOST override</entry>
							<entry>Allows user to remove the lost status from a copy</entry>
						</row>
						<row>
							<entry>COPY_STATUS_MISSING override</entry>
							<entry>Allows user to change the missing status on a copy</entry>
						</row>
						<row>
							<entry>COPY_TRANSIT_RECEIVE</entry>
							<entry>Allows user to close out a transit on a copy</entry>
						</row>
						<row>
							<entry>CREATE_BILL</entry>
							<entry>Allows user to create a new bill on a transaction</entry>
						</row>
						<row>
							<entry>CREATE_CONTAINER</entry>
							<entry>Allows user to create containers owned by other users 
							(containers are Item Buckets, Volume Buckets, and Book Bags)</entry>
						</row>
						<row>
							<entry>CREATE_CONTAINER_ITEM</entry>
							<entry>Allows user to place an item in a container (even if the 
							container is owned by other users).</entry>
						</row>
						<row>
							<entry>CREATE_COPY</entry>
							<entry>Allows user to create a new copy object</entry>
						</row>
						<row>
							<entry>CREATE_COPY_LOCATION</entry>
							<entry>Allows user to create a new copy location</entry>
						</row>
						<row>
							<entry>CREATE_COPY_NOTE</entry>
							<entry>Allows user to create a new copy note</entry>
						</row>
						<row>
							<entry>CREATE_COPY_STAT_CAT</entry>
							<entry>Allows user to create a statistical category for 
							copies</entry>
						</row>
						<row>
							<entry>CREATE_COPY_STAT_CAT _ENTRY</entry>
							<entry>Allows user to create a new entry for a copy statistical 
							category</entry>
						</row>
						<row>
							<entry>CREATE_COPY_STAT_CAT _ENTRY_MAP</entry>
							<entry>Allows user to link a copy to a statistical category 
							(i.e., allows user to specify the appropriate entry for a copy and 
							given statistical category)</entry>
						</row>
						<row>
							<entry>CREATE_COPY_TRANSIT</entry>
							<entry>Allows user to create a transit</entry>
						</row>
						<row>
							<entry>CREATE_DUPLICATE_HOLDS</entry>
							<entry>Allows user to create duplicate holds (e.g. two holds on the 
							same title)</entry>
						</row>
						<row>
							<entry>CREATE_HOLD_NOTIFICATION</entry>
							<entry>Allows user to create new hold notifications</entry>
						</row>
						<row>
							<entry>CREATE_IN_HOUSE_USE</entry>
							<entry>Allows user to create a new in-house-use</entry>
						</row>
						<row>
							<entry>CREATE_MARC</entry>
							<entry>Allows user to create new MARC records</entry>
						</row>
						<row>
							<entry>CREATE_MY_CONTAINER</entry>
							<entry>Allows user to create containers for self (containers are 
							Item Buckets, Volume Buckets, and Book Bags).</entry>
						</row>
						<row>
							<entry>CREATE_NON_CAT_TYPE</entry>
							<entry>Allows user to create a new non-cataloged item type</entry>
						</row>
						<row>
							<entry>CREATE_PATRON_STAT _CAT</entry>
							<entry>Allows user to create a new patron statistical 
							category</entry>
						</row>
						<row>
							<entry>CREATE_PATRON_STAT _CAT_ENTRY</entry>
							<entry>Allows user to create a new possible entry for patron 
							statistical categories</entry>
						</row>
						<row>
							<entry>CREATE_PATRON_STAT _CAT_ENTRY_MAP</entry>
							<entry>Allows user to link another user to a stat cat entry (i.e., 
							specify the patron's entry for a given statistical category)</entry>
						</row>
						<row>
							<entry>CREATE_PAYMENT</entry>
							<entry>Allows user to record payments in the Billing 
							Interface</entry>
						</row>
						<row>
							<entry>CREATE_TITLE_NOTE</entry>
							<entry>Allows user to create a new title note</entry>
						</row>
						<row>
							<entry>CREATE_TRANSACTION</entry>
							<entry>Allows user to create new billable transactions (these 
							include checkouts and transactions created via the Bill Patron 
							operation)</entry>
						</row>
						<row>
							<entry>CREATE_TRANSIT</entry>
							<entry>Allows user to place item in transit</entry>
						</row>
						<row>
							<entry>CREATE_USER</entry>
							<entry>Allows user to create another user</entry>
						</row>
						<row>
							<entry>CREATE_USER_GROUP _LINK</entry>
							<entry>Allows user to add other users to permission groups</entry>
						</row>
						<row>
							<entry>CREATE_VOLUME</entry>
							<entry>Allows user to create a volume</entry>
						</row>
						<row>
							<entry>CREATE_VOLUME_NOTE</entry>
							<entry>Allows user to create a new volume note</entry>
						</row>
						<row>
							<entry>DELETE_CONTAINER</entry>
							<entry>Allows user to delete containers (containers are Item Buckets, 
							Volume Buckets, and Book Bags).</entry>
						</row>
						<row>
							<entry>DELETE_CONTAINER _ITEM</entry>
							<entry>Allows user to remove items from buckets and bookbags</entry>
						</row>
						<row>
							<entry>DELETE_COPY</entry>
							<entry>Allows user to delete a copy</entry>
						</row>
						<row>
							<entry>DELETE_COPY _LOCATION</entry>
							<entry>Allows user to delete a copy location</entry>
						</row>
						<row>
							<entry>DELETE_COPY_NOTE</entry>
							<entry>Allows user to delete copy notes</entry>
						</row>
						<row>
							<entry>DELETE_COPY_STAT _CAT</entry>
							<entry>Allows user to delete a copy statistical category</entry>
						</row>
						<row>
							<entry>DELETE_COPY_STAT _CAT_ENTRY</entry>
							<entry>Allows user to delete an entry for a copy statistical 
							category</entry>
						</row>
						<row>
							<entry>DELETE_COPY_STAT _CAT_ENTRY_MAP</entry>
							<entry>Allows user to delete a copy stat cat entry map</entry>
						</row>
						<row>
							<entry>DELETE_NON_CAT_TYPE</entry>
							<entry>Allows user to delete a non cataloged type (the user still 
							cannot deleted a non-cat type if any items of that type have 
							circulated).</entry>
						</row>
						<row>
							<entry>DELETE_PATRON_STAT _CAT</entry>
							<entry>Allows user to delete a patron statistical category</entry>
						</row>
						<row>
							<entry>DELETE_PATRON_STAT _CAT_ENTRY</entry>
							<entry>Allows user to delete an entry for patron statistical 
							categories</entry>
						</row>
						<row>
							<entry>DELETE_PATRON_STAT _CAT_ENTRY_MAP</entry>
							<entry>Allows user to remove a patron's entry for a given 
							statistical category</entry>
						</row>
						<row>
							<entry>DELETE_RECORD</entry>
							<entry>Allows user to delete a bib record</entry>
						</row>
						<row>
							<entry>DELETE_TITLE_NOTE</entry>
							<entry>Allows user to delete title notes</entry>
						</row>
						<row>
							<entry>DELETE_USER</entry>
							<entry>Allows user to mark a user as deleted</entry>
						</row>
						<row>
							<entry>DELETE_VOLUME</entry>
							<entry>Allows user to delete a volume</entry>
						</row>
						<row>
							<entry>DELETE_VOLUME_NOTE</entry>
							<entry>Allows user to delete volume notes</entry>
						</row>
						<row>
							<entry>DELETE_WORKSTATION</entry>
							<entry>Allows user to remove an existing workstation so a new one 
							can replace it</entry>
						</row>
						<row>
							<entry>EVERYTHING</entry>
							<entry>	Every permission is granted (for sysadmins and developers 
							only!)</entry>
						</row>
						<row>
							<entry>HOLD_EXISTS.override</entry>
							<entry>Allows users to place multiple holds on a single 
							copy/volume/title/metarecord (depending on hold type)</entry>
						</row>
						<row>
							<entry>IMPORT_MARC</entry>
							<entry>Allows user to import a MARC record via the z39.50 
							interface</entry>
						</row>
						<row>
							<entry>ITEM_AGE_PROTECTED override</entry>
							<entry>Allows user to place a hold on an age-protected item</entry>
						</row>						<row>
							<entry>ITEM_ON_HOLDS_SHELF override</entry>
							<entry>Allows user to check out an item that is on holds shelf for a 
							different patron</entry>
						</row>
						<row>
							<entry>MAX_RENEWALS_REACHED override</entry>
							<entry>Allows user to renew an item past the maximum renewal 
							count</entry>
						</row>
						<row>
							<entry>MERGE_BIB_RECORDS</entry>
							<entry>Allows user to merge bib records and their associated data 
							regardless of their bib/volume/copy level perms (in theory - as of 
							1.2.2, users still must have VOLUME_UPDATE and UPDATE_VOLUME in 
							order to merge records.</entry>
						</row>
						<row>
							<entry>MR_HOLDS</entry>
							<entry>Allows user to create a metarecord holds</entry>
						</row>
						<row>
							<entry>OFFLINE_EXECUTE</entry>
							<entry>Allows user to process an offline/standalone script 
							batch</entry>
						</row>
						<row>
							<entry>OFFLINE_UPLOAD</entry>
							<entry>Allows user to upload an offline/standalone script</entry>
						</row>
						<row>
							<entry>OFFLINE_VIEW</entry>
							<entry>Allows user to view uploaded offline script information</entry>
						</row>
						<row>
							<entry>OPAC_LOGIN</entry>
							<entry>Allows user to login to the OPAC</entry>
						</row>
						<row>
							<entry>patron_exceeds_checkout _count.override</entry>
							<entry>Allow user to override checkout count failure</entry>
						</row>
						<row>
							<entry>patron_exceeds_fines override</entry>
							<entry>Allow user to override fine amount checkout failure</entry>
						</row>
						<row>
							<entry>patron_exceeds_overdue _count.override</entry>
							<entry>Allow user to override overdue count failure</entry>
						</row>
						<row>
							<entry>REGISTER_WORKSTATION</entry>
							<entry>Allows user to register a new workstation</entry>
						</row>
						<row>
							<entry>REMOTE_Z3950_QUERY</entry>
							<entry>Allows user to perform z3950 queries against remote 
							servers</entry>
						</row>
						<row>
							<entry>REMOVE_USER_GROUP_LINK</entry>
							<entry>Allows user to remove other users from permission 
							groups</entry>
						</row>
						<row>
							<entry>RENEW_CIRC</entry>
							<entry>Allows user to renew items</entry>
						</row>
						<row>
							<entry>RENEW_HOLD_OVERRIDE</entry>
							<entry>Allows user to continue to renew an item even if it is 
							required for a hold.</entry>
						</row>
						<row>
							<entry>REQUEST_HOLDS</entry>
							<entry>Allows user to create holds for another user (if true, we 
							still check to make sure they have permission to make the type of 
							hold they are requesting, e.g. COPY_HOLDS)</entry>
						</row>
						<row>
							<entry>RUN_REPORTS</entry>
							<entry>Allows user to view the Reports Interface, create templates, 
							and run reports</entry>
						</row>
						<row>
							<entry>SET_CIRC_CLAIMS _RETURNED</entry>
							<entry>Allows user to mark an item as claimed returned</entry>
						</row>
						<row>
							<entry>SET_CIRC_LOST</entry>
							<entry>Allows user to mark an item as lost</entry>
						</row>
						<row>
							<entry>SET_CIRC_MISSING</entry>
							<entry>Allows user to mark an item as missing</entry>
						</row>
						<row>
							<entry>SHARE_REPORT_FOLDER</entry>
							<entry>Allows user to share Template/Report/Output folders via the 
							Reporting Interface</entry>
						</row>
						<row>
							<entry>STAFF_LOGIN</entry>
							<entry>Allows user to login to the staff client</entry>
						</row>
						<row>
							<entry>TITLE_HOLDS</entry>
							<entry>	Allows user to place a hold at the title level</entry>
						</row>
						<row>
							<entry>UNBAR_PATRON</entry>
							<entry>	Allows user to un-bar a patron</entry>
						</row>
						<row>
							<entry>UPDATE_BATCH_COPY</entry>
							<entry>Allows user to edit copies in batch</entry>
						</row>
						<row>
							<entry>UPDATE_CONTAINER</entry>
							<entry>Allows user to update another users Buckets or Book 
							Bags</entry>
						</row>
						<row>
							<entry>UPDATE_COPY</entry>
							<entry>Allows user to edit a copy</entry>
						</row>
						<row>
							<entry>UPDATE_COPY_LOCATION</entry>
							<entry>Allows user to edit a copy location</entry>
						</row>
						<row>
							<entry>UPDATE_COPY_STAT_CAT</entry>
							<entry>Allows user to change a copy statistical category</entry>
						</row>
						<row>
							<entry>UPDATE_COPY_STAT _CAT_ENTRY</entry>
							<entry>Allows user to change a copy statistical category entry</entry>
						</row>
						<row>
							<entry>UPDATE_HOLD</entry>
							<entry>Allows user to edit holds (such as change notification phone 
							number or pickup library, as well as re-target the hold and capture 
							an item for hold or pickup)</entry>
						</row>
						<row>
							<entry>UPDATE_MARC</entry>
							<entry>Allows user to edit a marc record</entry>
						</row>
						<row>
							<entry>UPDATE_NON_CAT _TYPE</entry>
							<entry>Allows user to update a non cataloged type</entry>
						</row>
						<row>
							<entry>UPDATE_ORG_SETTING</entry>
							<entry>Allows user to update an org unit setting</entry>
						</row>
						<row>
							<entry>UPDATE_ORG_UNIT</entry>
							<entry>Allows user to change org unit settings</entry>
						</row>
						<row>
							<entry>UPDATE_PATRON_STAT _CAT</entry>
							<entry>Allows user to change a patron statistical category (such as 
							renaming the category)</entry>
						</row>
						<row>
							<entry>UPDATE_PATRON_STAT _CAT_ENTRY</entry>
							<entry>Allows user to change a patron stat cat entry(such as 
							renaming the entry)</entry>
						</row>
						<row>
							<entry>UPDATE_RECORD</entry>
							<entry>Allows user to undelete a MARC record</entry>
						</row>
						<row>
							<entry>UPDATE_USER</entry>
							<entry>Allows user to edit a user's record</entry>
						</row>
						<row>
							<entry>UPDATE_VOLUME</entry>
							<entry>Allows user to edit volumes - needed for merging records. 
							This is a duplicate of VOLUME_UPDATE; user must have both 
							permissions at appropriate level to merge records.</entry>
						</row>
						<row>
							<entry>VIEW_CIRCULATIONS</entry>
							<entry>Allows user to see what another user has checked out</entry>
						</row>
						<row>
							<entry>VIEW_CONTAINER</entry>
							<entry>Allows user to view buckets and bookbags</entry>
						</row>
						<row>
							<entry>VIEW_COPY_CHECKOUT _HISTORY</entry>
							<entry>Allows user to view which users have checked out a given 
							copy</entry>
						</row>
						<row>
							<entry>VIEW_COPY_NOTES</entry>
							<entry>Allows user to view notes attached to a copy</entry>
						</row>
						<row>
							<entry>VIEW_HOLD</entry>
							<entry>Allows user to view another user's holds</entry>
						</row>
						<row>
							<entry>VIEW_HOLD_NOTIFICATION</entry>
							<entry>Allows user to view notifications attached to a hold</entry>
						</row>
						<row>
							<entry>VIEW_HOLD_PERMIT</entry>
							<entry>Allows user to see if another user has permission to place a 
							hold on a given copy</entry>
						</row>
						<row>
							<entry>VIEW_PERM_GROUPS</entry>
							<entry>Allows user to view permission groups.</entry>
						</row>
						<row>
							<entry>VIEW_PERMISSION</entry>
							<entry>Allows user to view user permissions within the user 
							permissions editor</entry>
						</row>
						<row>
							<entry>VIEW_PERMIT_CHECKOUT</entry>
							<entry>Allows user to see if another user can check out an item 
							(should be true for all staff)</entry>
						</row>
						<row>
							<entry>VIEW_REPORT_OUTPUT</entry>
							<entry>Allows user to view report output</entry>
						</row>
						<row>
							<entry>VIEW_TITLE_NOTES</entry>
							<entry>Allows user to view all notes attached to a title</entry>
						</row>
						<row>
							<entry>VIEW_TRANSACTION</entry>
							<entry>Allows user to see another users grocery/circ transactions 
							in the Bills Interface</entry>
						</row>
						<row>
							<entry>VIEW_USER</entry>
							<entry>Allows user to view another user's Patron Record</entry>
						</row>
						<row>
							<entry>VIEW_USER_FINES _SUMMARY</entry>
							<entry>Allows user to view bill details</entry>
						</row>
						<row>
							<entry>VIEW_USER_TRANSACTIONS</entry>
							<entry>*same as VIEW_TRANSACTION (duplicate perm)</entry>
						</row>
						<row>
							<entry>VIEW_VOLUME_NOTES</entry>
							<entry>Allows user to view all notes attached to a volume</entry>
						</row>
						<row>
							<entry>VIEW_ZIP_DATA</entry>
							<entry>Allows user to query the zip code data method</entry>
						</row>
						<row>
							<entry>VOID_BILLING</entry>
							<entry>Allows user to void a bill</entry>
						</row>
						<row>
							<entry>VOLUME_HOLDS</entry>
							<entry>	Allows user to place a volume level hold</entry>
						</row>
				
						<row>
							<entry>actor.org_unit.closed _date.create</entry>
							<entry>Allows user to create a new closed date for a location</entry>
						</row>
						<row>
							<entry>actor.org_unit.closed _date.delete</entry>
							<entry>Allows user to remove a closed date interval for a given 
							location</entry>
						</row>
						<row>
							<entry>actor.org_unit.closed _date.update</entry>
							<entry>Allows user to update a closed date interval for a given 
							location</entry>
						</row>
						<row>
							<entry>group_application.user</entry>
							<entry>Allows user to add/remove users to/from the User group</entry>
						</row>
						<row>
							<entry>group_application.user .patron</entry>
							<entry>Allows user to add/remove users to/from the Patron 
							group</entry>
						</row>
						<row>
							<entry>group_application.user. sip_client</entry>
							<entry>Allows user to add/remove users to/from the SIP-Client 
							group</entry>
						</row>
						<row>
							<entry>group_application.user. staff</entry>
							<entry>Allows user to add/remove users to/from the Staff 
							group</entry>
						</row>
						<row>
							<entry>group_application.user.staff. admin.global_admin</entry>
							<entry>Allows user to add/remove users to/from the GlobalAdmin 
							group</entry>
						</row>
						<row>
							<entry>group_application.user.staff. admin.lib_manager</entry>
							<entry>Allows user to add/remove users to/from the LibraryManager 
							group</entry>
						</row>
						<row>
							<entry>group_application.user.staff. admin.local_admin</entry>
							<entry>Allows user to add/remove users to/from the LocalAdmin 
							group</entry>
						</row>
						<row>
						<entry>group_application.user.staff.cat</entry>
						<entry>Allows user to add/remove users to/from the Cataloger group</entry>
						</row>
						<row>
							<entry>group_application.user. staff.cat.cat1</entry>
							<entry>Allows user to add/remove users to/from the Cat1 group</entry>
						</row>
						<row>
							<entry>group_application.user. staff.circ</entry>
							<entry>Allows user to add/remove users to/from the Circulator 
							group</entry>
						</row>
						<row>
							<entry>group_application.user. staff.supercat</entry>
							<entry>Allows user to add/remove users to/from the Supercat 
							group</entry>
						</row>
						<row>
							<entry>group_application.user. vendor</entry>
							<entry>Allows user to add/remove users to/from the Vendor 
							group</entry>
						</row>
						<row>
							<entry>money.collections_tracker. create</entry>
							<entry>Allows user to put someone into collections</entry>
						</row>
						<row>
							<entry>money.collections_tracker. delete</entry>
							<entry>Allows user to take someone out of collections</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
	
		</simplesect>
	</section>
	<section xml:id="admin-staff_accounts">
	<info>
        <title>Staff Accounts</title>
    </info>

    
        <para> New staff accounts are created in much the same way as patron accounts, using <menuchoice>
                <guimenu>Circulation</guimenu>
                <guimenuitem>Register Patron</guimenuitem>
            </menuchoice> or <keycombo>
                <keycap>Shift</keycap>
                <keycap>F1</keycap>
            </keycombo>. Select one of the staff profiles from the <guilabel>Profile
                Group</guilabel> drop-down menu. <indexterm><primary>staff accounts</primary></indexterm></para>

    <para xml:id="profiles-working">Each new staff account must be assigned a <guilabel>Working
            Location</guilabel><indexterm><primary>staff accounts</primary><secondary>working location</secondary></indexterm> which determines its access level in staff client interfaces.
        Accounts migrated from legacy systems or created before the upgrade to Evergreen 1.6 already
        have working locations assigned.</para>


    <procedure>
        <step>
            <para>To assign a working location open the newly created staff account using
                    <keycap>F1</keycap> (retrieve patron) or <keycap>F4</keycap> (patron search).
            </para>
        </step>

        <step>
                <para>Select <menuchoice>
                        <guimenu>Other</guimenu>
                        <guimenuitem>User Permission Editor</guimenuitem>
                    </menuchoice></para>
                        </step>
        <step>
            <para>Place a check in the box next to the desired working location, then scroll to the
                bottom of the display and click <guibutton>Save</guibutton>.</para>


        </step>

    </procedure>

    <note>
        <para>In multi-branch libraries it is possible to assign more than one working
            location</para>
    </note>


    <simplesect xml:id="staff_account_permissions">
        <info>
            <title>Staff Account Permissions <indexterm><primary>staff accounts</primary><secondary>permissions</secondary></indexterm> </title>
        </info>
        <para> To view a detailed list
            of permissions for a particular Evergreen account go to <menuchoice>
                <guimenu>Admin (-)</guimenu>
                <guimenuitem>User permission editor</guimenuitem>
            </menuchoice> in the staff client.</para>

       <!-- <informaltable>

            <tgroup cols="7" align="center" colsep="1" rowsep="1">

		<colspec colnum="1" colname="col1" align="left" colwidth="2.0*"/>
		<colspec colnum="2" colname="col2" colwidth="1.0*"/>
		<colspec colnum="3" colname="col3" colwidth="1.0*"/>
		<colspec colnum="4" colname="col4" colwidth="1.0*"/>
		<colspec colnum="5" colname="col5" colwidth="1.0*"/>
		<colspec colnum="6" colname="col6" colwidth="1.0*"/>
		<colspec colnum="7" colname="col7" colwidth="1.0*"/>
                <thead>
                    <row>
                        <entry>Action</entry>
                        <entry>General Staff</entry>
                        <entry>Circulators</entry>
                        <entry>Circ + Copy Edit</entry>
                        <entry>Circ + Full Cat</entry>
                        <entry>Catalogers</entry>
                        <entry>Local System Admin.</entry>
                    </row>
                </thead>

                <tbody>
                    <row>
                        <entry>Basic circulation functions</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                    </row>


                    <row>
                        <entry>CheckIn bad status overrides</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                    </row>

                    <row>
                        <entry>CheckIn Missing/Lost/ ClaimedReturned overrides</entry>
                        <entry/>
                        <entry/>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry/>
                        <entry>*</entry>
                    </row>
                    <row>
                        <entry>CheckOut overrides</entry>
                        <entry/>
                        <entry/>
                        <entry/>
                        <entry>*</entry>
                        <entry/>
                        <entry>*</entry>
                    </row>

                    <row>
                        <entry>MaxRenewal Reached override</entry>
                        <entry/>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                    </row>



                    <row>
                        <entry>Basic patron record</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                    </row>


                    <row>
                        <entry>Bar patrons</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry/>
                        <entry>*</entry>
                    </row>
                    <row>
                        <entry>Unbar patrons</entry>
                        <entry/>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry/>
                        <entry>*</entry>
                    </row>

                    <row>
                        <entry>Merge/delete patrons</entry>
                        <entry/>
                        <entry/>
                        <entry/>
                        <entry/>
                        <entry/>
                        <entry>*</entry>
                    </row>

                    <row>
                        <entry>Patron restriction overrides</entry>
                        <entry/>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry/>
                        <entry>*</entry>
                    </row>

                    <row>
                        <entry>Bills and payments</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry/>
                        <entry>*</entry>
                    </row>


                    <row>
                        <entry>Holds</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                    </row>
                    <row>
                        <entry>Copy/volume records</entry>
                        <entry/>
                        <entry/>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                    </row>

                    <row>
                        <entry>Bib records</entry>
                        <entry/>
                        <entry/>
                        <entry/>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                    </row>
                    <row>
                        <entry>Buckets</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                    </row>



                    <row>
                        <entry>View report output</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                    </row>

                    <row>
                        <entry>Create/run reports</entry>
                        <entry/>
                        <entry/>
                        <entry/>
                        <entry/>
                        <entry/>
                        <entry>*</entry>
                    </row>

                    <row>
                        <entry>Create/upload offline transactions</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                    </row>

                    <row>
                        <entry>Process offline transactions</entry>
                        <entry/>
                        <entry/>
                        <entry/>
                        <entry/>
                        <entry/>
                        <entry>*</entry>
                    </row>
                    <row>
                        <entry>Transit</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                    </row>
                    <row>
                        <entry>Abort remote transit</entry>
                        <entry/>
                        <entry/>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                        <entry>*</entry>
                    </row>

                </tbody>
            </tgroup>
        </informaltable>-->
    </simplesect>

    <simplesect xml:id="profiles-grant-permissions">
        <title>Granting Additional Permissions</title>
        <para>A Local System Administrator (LSA) may selectively grant LSA permissions to other staff
            accounts. In the example below a <emphasis>Circ +Full
                Cat</emphasis> account is granted permission to process offline transactions, a function which otherwise requires an LSA login.</para>

        <procedure>
            <step>
                <para>Log in as a Local System Administrator.</para>
            </step>

           <step><stepalternatives> <step>
               
                    <para>Select <menuchoice>
                            <guimenu>Admin (-)</guimenu>
                            <guimenuitem>User Permission Editor</guimenuitem>
                        </menuchoice> and enter the staff account barcode when prompted</para>
               
               <para><emphasis role="bold">OR</emphasis></para>
           </step>
               <step>
                  
                       <para>Retrieve the staff account first, then select <menuchoice>
                           <guimenu>Other</guimenu>
                           <guimenuitem>User Permission Editor</guimenuitem>
                       </menuchoice></para>
                       
               </step></stepalternatives></step>

            <step>
                <informalfigure>
                    <para>The <guilabel>User Permission Editor</guilabel> will load (this may take a
                        few seconds). Greyed-out permissions cannot be edited because they are
                        either a) already granted to the account, or b) not
                        available to any staff account, including LSAs.</para>
                    <para>
                        <mediaobject>
                            <alt>User permissions screen shot</alt>
                            <imageobject>
                                <imagedata scalefit="0" fileref="../media/profile-5.png"/>
                            </imageobject>

                        </mediaobject>
                    </para>

                    <para>
                        <inlinemediaobject>
                            <imageobject>
                                <imagedata scalefit="0" fileref="../media/1.png"/>
                            </imageobject>
                        </inlinemediaobject> List of permission names.</para>

                    <para>
                        <inlinemediaobject>
                            <imageobject>
                                <imagedata scalefit="0" fileref="../media/2.png"/>
                            </imageobject>
                        </inlinemediaobject>
                        If checked the permission is granted to this account.</para>

                    <para>
                        <inlinemediaobject>
                            <imageobject>
                                <imagedata scalefit="0" fileref="../media/3.png"/>
                            </imageobject>
                        </inlinemediaobject> <guilabel>Depth</guilabel> limits application to the staff member's library and should be left at the default.</para>

                    <para>
                        <inlinemediaobject>
                            <imageobject>
                                <imagedata scalefit="0" fileref="../media/4.png"/>
                            </imageobject>
                        </inlinemediaobject>
                        If checked this staff account will be able to grant the new privilege to other accounts (not recommended).
                        </para>

                </informalfigure>
            </step>
            
            <step>
                <informalfigure>
                    <para>To allow processing of offline transactions check the <emphasis>Applied</emphasis> column next to OFFLINE_EXECUTE.</para>
                    <para>
                        <mediaobject>
                            <alt>User permissions screen shot</alt>
                            <imageobject>
                                <imagedata scalefit="0" fileref="../media/profile-6.png"/>
                            </imageobject>
                            
                        </mediaobject>
                    </para>
                    
                </informalfigure>
            </step>
            
            <step>
                <informalfigure>
                    <para>Scroll down and click <guibutton>Save</guibutton> to apply the changes.</para>
                    <para>
                        <mediaobject>
                            <alt>User permissions screen shot</alt>
                            <imageobject>
                                <imagedata scalefit="0" fileref="../media/profile-7.png"/>
                            </imageobject>
                            
                        </mediaobject>
                    </para>
                    
                </informalfigure>
            </step>     
        		</procedure>
       
    		</simplesect>
	</section>
	<section xml:id="copystatus">
		<title>Copy Status</title>
		 <indexterm><primary>copy status</primary></indexterm>
		<para>To navigate to the copy status editor from the staff client menu, select 
			<menuchoice><guimenu>Admin</guimenu>  <guisubmenu>Server Administration</guisubmenu> 
				<guisubmenu>Copy Statuses </guisubmenu></menuchoice></para>
		<para>The Copy Status Editor is used to Add, edit and delete statuses of copies in your system.</para>
		<para>Evergreen comes pre-loaded with a number of copy statuses.</para> 
			<table xml:id="copystatusestable">
				<title>Copy Status Table</title>
				<tgroup cols="4">
					<colspec colnum="1" colname="col1" colwidth="0.5*"/>
					<colspec colnum="2" colname="col2" colwidth="1.0*"/>
					<colspec colnum="3" colname="col3" colwidth="1.0*"/>
					<colspec colnum="4" colname="col4" colwidth="1.0*"/>
					<thead>
						<row>
							<entry>ID</entry>
							<entry>Name</entry>
							<entry>Holdable - default setting</entry>
							<entry>OPAC Visible - default setting</entry>
						</row>
					</thead>
					<tbody>
						<row>
							<entry>0</entry>
							<entry>Available</entry>
							<entry>true</entry>
							<entry>true</entry>
						</row>
						<row>
							<entry>1</entry>
							<entry>Checked out</entry>
							<entry>true</entry>
							<entry>true</entry>
						</row>
						<row>
							<entry>2</entry>
							<entry>Bindery</entry>
							<entry>false</entry>
							<entry>false</entry>
						</row>
						<row>
							<entry>3</entry>
							<entry>Lost</entry>
							<entry>false</entry>
							<entry>false</entry>
						</row>
						<row>
							<entry>4</entry>
							<entry>Missing</entry>
							<entry>false</entry>
							<entry>false</entry>
						</row>
						<row>
							<entry>5</entry>
							<entry>In process</entry>
							<entry>false</entry>
							<entry>true</entry>
						</row>
						<row>
							<entry>6</entry>
							<entry>In transit</entry>
							<entry>true</entry>
							<entry>true</entry>
						</row>
						<row>
							<entry>7</entry>
							<entry>Reshelving</entry>
							<entry>true</entry>
							<entry>true</entry>
						</row>
						<row>
							<entry>8</entry>
							<entry>On holds shelf</entry>
							<entry>true</entry>
							<entry>true</entry>
						</row>
						<row>
							<entry>9</entry>
							<entry>On order</entry>
							<entry>true</entry>
							<entry>true</entry>
						</row>
						<row>
							<entry>10</entry>
							<entry>ILL</entry>
							<entry>true</entry>
							<entry>false</entry>
						</row>
						<row>
							<entry>11</entry>
							<entry>Cataloging</entry>
							<entry>true</entry>
							<entry>false</entry>
						</row>
						<row>
							<entry>12</entry>
							<entry>Reserves</entry>
							<entry>false</entry>
							<entry>true</entry>
						</row>
						<row>
							<entry>13</entry>
							<entry>Discard/Weed</entry>
							<entry>false</entry>
							<entry>false</entry>
						</row>
						<row>
							<entry>14</entry>
							<entry>Damaged</entry>
							<entry>false</entry>
							<entry>false</entry>
						</row>
						<row>
							<entry>15</entry>
							<entry>On reservation shelf</entry>
							<entry>true</entry>
							<entry>false</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
			<para>It is possible to add, delete and edit copy statuses.</para>
			<procedure>
				<title>Adding Copy Statuses</title>
				<step><para>In the <guilabel>New Status</guilabel> field, enter the name of the  
				new status you wish to add.</para></step>
				<step><para>Click <guibutton>Add</guibutton>.</para></step>
				<step><para>Locate you new status and check the <emphasis>Holdable</emphasis> check box 
				if you wish to all users to place holds on items in this status. Check 
				<guilabel>OPAC Visible</guilabel> if you wish for this status to appear in the public 
				OPAC.</para></step>
				<step><para>Click <guibutton>Save Changes</guibutton> at the bottom of the screen to 
				save changes to the new status.</para></step>
			</procedure>
			<procedure>
				<title>Deleting Copy Statuses</title>
				<step><para>Highlight the statuses you wish to delete. Hold the 
				<keycap>Shift</keycap> to select more than one status.</para></step>
				<step><para>Click <guibutton>Delete Selected</guibutton>.</para></step>
				<step><para>Click OK to verify.</para>
					<note><para>You will not be able to delete statuses if copies currently 
					exist with that status.</para></note>
				</step>
			</procedure>
			<procedure>
				<title>Editing Copy Statuses</title>
				<step><para>Double click on a status name to change its name and enter the new 
				name.</para> <para>To change whether a status is visible in the OPAC, check or uncheck 
				the <guilabel>OPAC Visible</guilabel> check box.</para><para>To allow patrons the ability to 
				hold items in that status, check the <emphasis>Holdable</emphasis> check box. To prevent 
				users from holding items in that status, uncheck the <emphasis>Holdable</emphasis> 
				check box. </para></step>
				<step><para>Once you have finished editing the statuses, remember to click 
				<guibutton>Save Changes</guibutton>.</para></step>   	
			</procedure>
	</section>
	<section xml:id="billingtypes">
		<title>Billing Types</title>
		<indexterm><primary>billing types</primary></indexterm>
		<para>The billing types editor is used for creating, editing and deleting billing types.</para>    
		<para>To navigate to the billing types editor from the staff client menu, select 
			<menuchoice><guimenu>Admin</guimenu>  <guisubmenu>Server Administration</guisubmenu> 
				<guisubmenu>Billing Types</guisubmenu></menuchoice></para>
			<procedure>
				<title>Adding Billing Types</title>
				<indexterm><primary>billing types</primary><secondary>adding</secondary></indexterm>
				<step><para>Click <guibutton>New Billing Type</guibutton>.</para></step>
				<step><para>Enter the name of the billing type.</para></step>
				<step><para>Select the <guilabel>Org Unit</guilabel> to use this billing type.</para></step>
				<step><para>Enter the <guilabel>Default Price</guilabel>. This is only the default since 
				the actual price of a specific billing can be adjusted when staff create 
				a billing</para></step>
				<step><para>Click <guibutton>Save</guibutton> to save the new billing type.</para></step>
			</procedure>
			<procedure>
				<title>Deleting Billing Types</title>
				<indexterm><primary>billing types</primary><secondary>deleting</secondary></indexterm>
				<step><para>Check the check box of the billing type(s) you wish to delete.</para></step>
				<step><para>Click <guibutton>Delete Selected</guibutton>.
					<caution><para>The selected billing types will be deleted without a 
					verification alert.</para></caution>
				</para></step>
			</procedure>
			<procedure>
				<title>Editing Billing Types</title>
				<indexterm><primary>billing types</primary><secondary>editing</secondary></indexterm>
				<step><para>Double click on a billing types to open the editing window.</para></step> 
				<step><para>Make desired changes to the <guilabel>name</guilabel>, 
				<guilabel>Org Unit</guilabel> and <guilabel>Default Price</guilabel>.</para></step>
				<step><para>Once you have finished editing, click 
				<guibutton>Save</guibutton>.</para></step>   	
			</procedure>
		
	</section>
	<section xml:id="circmodifiers">
		<title>Circulation Modifiers</title>
		<indexterm><primary>circulation modifiers</primary></indexterm>
		<para>The circulation modifier editor is used to create, edit and delete modifier categories to control 
		circulation policies on specific groups of items.</para> 
		<para>To navigate to the circulation modifiers editor from the staff client menu, select 
			<menuchoice>
				<guimenu>Admin</guimenu>  <guisubmenu>Server Administration</guisubmenu> 
				<guisubmenu>Circulation Modifiers</guisubmenu></menuchoice>.
		</para>
			<procedure>
				<title>Adding Circulation Modifiers</title>
				<indexterm><primary>circulation modifiers</primary><secondary>adding</secondary></indexterm>
				<step><para>Click <guibutton>New Circ Modifier</guibutton>.</para></step>
				<step><para>Enter a <guilabel>Code</guilabel>, <guilabel>Name</guilabel> and  
				<guilabel>Description</guilabel>.</para></step>
				<step><para>Select the <guilabel>SIP 2 Media Type</guilabel>.</para></step>
				<step><para>Check the <guibutton>Magnetic Media</guibutton> check box if the item is magnetic media such as a cassette 
				tape.</para></step>
				<step><para>Click <guibutton>Save</guibutton> to save the new circulation 
				modifier.</para></step>
			</procedure>
			<procedure>
				<title>Deleting Circulation Modifiers</title>
				<indexterm><primary>circulation modifiers</primary><secondary>deleting</secondary></indexterm>
				<step><para>Check the check box(es) next to the circulation modifiers(s) you wish to 
				delete.</para></step>
				<step><para>Click <guibutton>Delete Selected</guibutton> near the top of the page.
				<caution><para>The selected circulation modifiers will be deleted without a 
				verification alert.</para></caution>
				</para></step>
			</procedure>
			<procedure>
				<title>Editing Circulation Modifiers</title>
				<indexterm><primary>circulation modifiers</primary><secondary>editing</secondary></indexterm>
				<step><para>Double click on the row of the circulation modifier you wish to 
				edit.</para></step> 
				<step><para>Make desired changes.</para></step>
				<step><para>Once you have finished editing, click 
				<guibutton>Save</guibutton>.</para></step>   	
			</procedure>
	</section>
	<section xml:id="catalogingtemplates">
		<title>Cataloging Templates</title>
		<indexterm><primary>cataloging</primary><secondary>templates</secondary></indexterm>
		<para>Cataloging templates are essential for making the cataloging process more efficient. Templates are used that that the basic structure of specific types of cataloging records can 			loaded when the cataloger adds a new record</para>
		<procedure>
			<title>Adding Cataloging Templates</title>
			<step>
				<para>				
				Create a marc template in  the directory <filename class="directory">/openils/var/templates/marc/</filename>. It should be in xml format.
				Here is an example file <filename>k_book.xml</filename>: 
				</para>
<programlisting language="xml">
<![CDATA[
<record>
  <leader>00620cam a2200205Ka 4500</leader>
  <controlfield tag="008">070101s                            eng d</controlfield>
  <datafield tag="010" ind1="" ind2="">
    <subfield code="a"></subfield>
  </datafield>
  <datafield tag="020" ind1="" ind2="">
    <subfield code="a"></subfield>
  </datafield>
  <datafield tag="082" ind1="0" ind2="4">
    <subfield code="a"></subfield>
  </datafield>
  <datafield tag="092" ind1="" ind2="">
    <subfield code="a"></subfield>
  </datafield>
  <datafield tag="100" ind1="" ind2="">
    <subfield code="a"></subfield>
  </datafield>
  <datafield tag="245" ind1="" ind2="">
    <subfield code="a"></subfield>
    <subfield code="b"></subfield>
    <subfield code="c"></subfield>
  </datafield>
  <datafield tag="260" ind1="" ind2="">
    <subfield code="a"></subfield>
    <subfield code="b"></subfield>
    <subfield code="c"></subfield>
  </datafield>
  <datafield tag="300" ind1="" ind2="">
    <subfield code="a"></subfield>
    <subfield code="b"></subfield>
    <subfield code="c"></subfield>
  </datafield>
  <datafield tag="500" ind1="" ind2="">
    <subfield code="a"></subfield>
  </datafield>
  <datafield tag="650" ind1="" ind2="">
    <subfield code="a"></subfield>
    <subfield code="v"></subfield>
  </datafield>
  <datafield tag="650" ind1="" ind2="">
    <subfield code="a"></subfield>
  </datafield>
</record>
]]>
</programlisting>
    	
			</step>
			<step>
			<para>Add the template to the to the <emphasis>marctemplates</emphasis> list in the open-ils.cat section of the Evergreen configuration file 
			<filename>opensrf.xml</filename><indexterm><primary>configuration files</primary><secondary>opensrf.xml</secondary></indexterm></para>
			</step>
			<step>
				<para>Restart <systemitem class="service">Perl</systemitem><indexterm><primary>Perl</primary></indexterm> services for changes to take effect.</para>
				<screen><userinput>/openils/bin/osrf_ctl.sh -l -a restart_perl</userinput></screen>
			</step>
		</procedure>
	</section>
	<section xml:id="relevancyrankings">
		<title>Adjusting Search Relevancy Rankings</title>
		<indexterm><primary>search relevancy</primary></indexterm>
		<info>
			<abstract>
				<para>This section describes indexed field weighting and matchpoint weighting, which
				control relevance ranking in Evergreen catalog search results. Adjusting relevancy can only be completed through access to the Evergreen database as of version 1.6.</para>
				<tip>
					<para>In tuning search relevance, it is good practice to make incremental
					adjustments, capture search logs, and assess results before making further
					adjustments. </para>
				</tip>
			</abstract>
		</info>
		<simplesect>
			<title>Indexed-field Weighting<indexterm><primary>search relevancy</primary><secondary>indexed-field weighting</secondary></indexterm> </title>
			<para>Indexed-field weighting is configured in the Evergreen database in the weight column
			of the <link linkend="config.table.metabib-field">config.metabib_field</link> table, which follows the other four columns in this table:
			field_class, name, xpath, and format.</para>
			<para>The following is one representative line from the <link linkend="config.table.metabib-field">config.metabib_field</link> table:</para>
<screen>
author | conference | //mods32:mods/mods32:name[@type='conference']/mods32:
namePart[../mods32:role/mods32:roleTerm[text()='creator']] | mods32 | 1 ) 
</screen>
			<para>The default value for index-field weights in config.metabib_field is 1. Adjust the
			weighting of indexed fields to boost or lower the relevance score for matches on that
			indexed field. The weight value may be increased or decreased by whole integers. </para>
			<para>For example, by increasing the weight of the title-proper field from 1 to 2, a search
			for <emphasis role="bold">jaguar</emphasis> would double the relevance  for the book titled
			<emphasis role="italic">Aimee and Jaguar</emphasis> than for a record with the term
			<emphasis role="bold">jaguar</emphasis> in another indexed field. </para>
		</simplesect>
		<simplesect>
			<title>Match point Weighting</title>
			<indexterm><primary>search relevancy</primary><secondary>match point weighting</secondary></indexterm>
			<para> Match point weighting provides another way to fine-tune Evergreen relevance ranking,
			and is configured through floating-point multipliers in the multiplier column of the
			search.relevance_adjustment table.</para>
			<para> Weighting can be adjusted for one, more, or all multiplier fields in
			<link linkend="search.relevance">search.relevance_adjustment</link>.</para>
			<para>You can adjust the following three matchpoints:</para> 
			<itemizedlist>
			<listitem>
				<para>first_wordboosts relevance if the query is 
				one term long and matches the first term in the indexed field (search for <emphasis 
				role="bold">twain</emphasis>, get a bonus for <emphasis role="bold">twain, mark</emphasis> 
				but not <emphasis role="bold">mark twain</emphasis>)</para>
			</listitem>
			<listitem>
				<para>word_order increases relevance for words 
				matching the order of search terms, so that the results for the search <emphasis 
				role="bold">legend suicide</emphasis> would match higher for the book <emphasis 
				role="italic">Legend of a Suicide</emphasis> than for the book, 
				<emphasis role="italic">Suicide Legend</emphasis></para>
			</listitem>
			<listitem>
				<para>full_match boosts relevance when the full 
				query exactly matches the entire indexed field (after space, case, and diacritics are 
				normalized). So a title search for <emphasis role="italic">The Future of Ice</emphasis> 
				would get a relevance boost above <emphasis role="italic">Ice>Ages of the 
				Future</emphasis>.</para>
			</listitem>
			</itemizedlist>
			<para> Here are the default settings of the search.relevance_adjustment table: </para>
			<table xml:id="search.relevance">
			<title>search.relevance_adjustment table</title>
			<tgroup cols="4">
					<colspec colnum="1" colname="col1" colwidth="1.0*"/>
					<colspec colnum="2" colname="col2" colwidth="1.0*"/>
					<colspec colnum="3" colname="col3" colwidth="1.0*"/>
					<colspec colnum="4" colname="col4" colwidth="1.0*"/>
				<thead>
					<row>
						<entry>field_class</entry>
						<entry>name</entry>
						<entry>bump_type</entry>
						<entry>multiplier</entry>
					</row>
				</thead>
				<tbody>
					<row>
						<entry>author</entry>
						<entry>conference</entry>
						<entry>first_word</entry>
						<entry>1.5</entry>
					</row>
					<row>
						<entry>author</entry>
						<entry>corporate</entry>
						<entry>first_word</entry>
						<entry>1.5</entry>
					</row>
					<row>
						<entry>author </entry>
						<entry>other </entry>
						<entry>first_word</entry>
						<entry>1.5</entry>
					</row>
					<row>
						<entry>author</entry>
						<entry>personal</entry>
						<entry>first_word</entry>
						<entry>1.5</entry>
					</row>
					<row>
						<entry>keyword</entry>
						<entry>keyword</entry>
						<entry>word_order</entry>
						<entry>10</entry>
					</row>
					<row>
						<entry>series</entry>
						<entry>seriestitle</entry>
						<entry>first_word</entry>
						<entry>1.5</entry>
					</row>
					<row>
						<entry>series</entry>
						<entry>seriestitle</entry>
						<entry>full_match</entry>
						<entry>20</entry>
					</row>
					<row>
						<entry>title</entry>
						<entry>abbreviated</entry>
						<entry>first_word</entry>
						<entry>1.5</entry>
					</row>
					<row>
						<entry>title</entry>
						<entry>abbreviated</entry>
						<entry>full_match</entry>
						<entry>20</entry>
					</row>
					<row>
						<entry>title</entry>
						<entry>abbreviated</entry>
						<entry>word_order</entry>
						<entry>10</entry>
					</row>
					<row>
						<entry>title</entry>
						<entry>alternative</entry>
						<entry>first_word</entry>
						<entry>1.5</entry>
					</row>
					<row>
						<entry>title</entry>
						<entry>alternative</entry>
						<entry>full_match</entry>
						<entry>20</entry>
					</row>
					<row>
						<entry>title</entry>
						<entry>alternative</entry>
						<entry>word_order</entry>
						<entry>10</entry>
					</row>
					<row>
						<entry>title</entry>
						<entry>proper</entry>
						<entry>first_word</entry>
						<entry>1.5</entry>
					</row>
					<row>
						<entry>title</entry>
						<entry>proper</entry>
						<entry>full_match</entry>
						<entry>20</entry>
					</row>
					<row>
						<entry>title</entry>
						<entry>proper</entry>
						<entry>word_order</entry>
						<entry>10</entry>
					</row>
					<row>
						<entry>title</entry>
						<entry>translated</entry>
						<entry>first_word</entry>
						<entry>1.5</entry>
					</row>
					<row>
						<entry>title</entry>
						<entry>translated</entry>
						<entry>full_match</entry>
						<entry>20</entry>
					</row>
					<row>
						<entry>title</entry>
						<entry>translated</entry>
						<entry>word_order</entry>
						<entry>10</entry>
					</row>
					<row>
						<entry>title</entry>
						<entry>uniform</entry>
						<entry>first_word</entry>
						<entry>1.5</entry>
					</row>
					<row>
						<entry>title</entry>
						<entry>uniform</entry>
						<entry>full_match</entry>
						<entry>20</entry>
					</row>
					<row>
						<entry>title</entry>
						<entry>uniform</entry>
						<entry>word_order</entry>
						<entry>10</entry>
					</row>
				</tbody>
			</tgroup>
			</table>
		</simplesect>
		<simplesect>
			<title>Combining Index Weighting and Match point Weighting</title>
			<indexterm><primary>search relevancy</primary><secondary>combining index weighting and match point weighting</secondary></indexterm>
			
			<para>Index weighting and matchpoint weighting may be combined. The relevance boost of the combined 
			weighting is equal to the product of the two multiplied values. </para>
			<para>If the relevance setting in the config.metabib_field were increased to 2, and the multiplier 
			set to 1.2 in the search.relevance_adjustment table, the resulting matchpoint increase would be 
			240%. </para>
			<note>
				<para>In practice, these weights are applied serially -- first the index weight, then all 
				the matchpoint weights that apply -- because they are evaluated at different stages of the 
				search process.</para>
			</note>
		</simplesect>
		<simplesect>
			<title>Adjusting Relevancy for Keyword Searches</title>
			<indexterm><primary>search relevancy</primary><secondary>keyword search adjusting</secondary></indexterm>
			<para> Searching the out of the box <emphasis>keyword</emphasis> does not boost the ranking for terms appearing in, the title or subject fields since  there is just one 
			keyword index which does not distinguish terms that appear in the title field from those in the notes field for example. In comparison, the title index is actually composed of 
			a number of separate indexes: title|proper, title|uniform, title|alternative, title|translated, etc, that collectively form the title index. You can see this in the 
			<link linkend="config.table.metabib-field">config.metabib_field</link> table. The following procedure will add a keyword|title index so that terms found in the title field of an 
			item are given more weight than terms in other fields. </para>
			<procedure>
				<step>
					<para>From the command line, access the PostgreSQL command line interface</para>
					<screen><userinput>psql -U evergreen</userinput></screen>
				</step> 
				<step>
					<para>Clone the title|proper index to create a keyword|title index</para>
					<para>6 = the title|proper index</para>
<programlisting>
INSERT INTO config.metabib_field 
	(field_class, name, xpath, weight, format, search_field, facet_field)
	SELECT 'keyword', 'title', xpath, weight, format, search_field, facet_field
	FROM config.metabib_field
	WHERE id = 6;
</programlisting>
				</step>
				<step>
					<para>Populate the keyword|title index with a set of index entries cloned from the metabib.title_field_entry table;</para>
					<para>6 = the title|proper index</para>
<programlisting>
INSERT INTO metabib.keyword_field_entry 
	(source, field, value)
	SELECT source, 17, value (the field value, 17, field be different in your database 
	so you may need to check the <link linkend="config.table.metabib-field">config.metabib_field</link> 
	for the id of your new index).
	FROM metabib.title_field_entry
	WHERE field = 6;
</programlisting>
				</step>
				<step> 
					<para>Bump the relevance when the first search term appears first in the title in a keyword search.</para>
					<para>17 = our new keyword|title index (This may be different in your database so you may need to check the 
					<link linkend="config.table.metabib-field">config.metabib_field</link> for the id 
					of your new index).</para>
<programlisting>
INSERT INTO search.relevance_adjustment 
	(active, field, bump_type, multiplier)
VALUES (true, 17, 'first_word', 5); 
</programlisting>
				</step>
				<step>
					<para>Boost the relevance for search terms appearing in the title in general</para>
					<para>17 = our new keyword|title index (This may be different in your database so you may need to check the 
					<link linkend="config.table.metabib-field">config.metabib_field</link> for the id 
					of your new index).</para>
<programlisting>
UPDATE config.metabib_field
SET weight = 10
WHERE id = 17;
</programlisting>
				</step>
			</procedure>  
		</simplesect> 
	</section>
	<section xml:id="notifications">
		<title>Notifications</title>
		<para>Notifications can be set up for Holds, Overdue items and Predue items. There are two ways to configure notifications for each of these type of notifications.</para>
		<section xml:id="Holdnotifications">
			<title>Hold Notifications</title>
			<indexterm><primary>notifications</primary><secondary>hold</secondary></indexterm>
			<para>Hold notifications can be used that that library users are sent an email when their items are available for pickup. This notification is triggered when the item being held 
			is <emphasis>captured</emphasis> by a library staff member and the item is in the <emphasis>on holds shelf</emphasis> status. </para>
			<simplesect>			
				<title>Hold Notifications using the Action Trigger</title> 
				<para>The easiest way to set up hold notifications is to use the <link linkend="actiontriggers">Action Trigger</link> mechanism introduced in Evergreen 1.6.</para> 			
				<procedure>
				<step>
				<para>From the staff client menu, Click on
					<menuchoice>
						<guimenu>Admin</guimenu>  
						<guisubmenu>Local Administration</guisubmenu>
  						<guisubmenu>Notifications / Action triggers</guisubmenu>
					</menuchoice>
				</para>
				</step>

				<step>
					<para>Locate the Action Trigger Definition with the <guilabel>Name</guilabel> <guilabel>Hold Ready for Pickup Email Notification</guilabel>.</para>
				</step>
				<step>
					<para>Double click on the item row to open the editing page, but <emphasis role="bold">not</emphasis> on the hyperlinked <guilabel>Name</guilabel></para>
				</step>
				<step>
					<para>Check the <guilabel>Enabled</guilabel> check box to enable it.</para>
				</step>
				<step>
					<para>Edit the <guilabel>Template</guilabel> text box to customize the body of the email as needed. Note that text between <quote>[% %]</quote> are variables to be 
					generated by the system. For example, <varname>[% user.family_name %]</varname> with be replaced by the family name of the user receiving a notice.</para>
				</step>
				<step>
					<para>Click <guibutton>Save</guibutton> to save your changes.</para>
				</step>
				<step>
					<para>Hold notices are now activated and will be processed the next time action triggers are processed. See <xref linkend="ProcessingActionTriggers" /> for 
					more details on processing action triggers.</para>
				</step>
				</procedure>
			</simplesect>	
			<simplesect>			
				<title>Hold Notifications using the Evergreen Configuration File</title> 
				<para>An older method for Setting up hold notifications is through the Configuration file <filename>/openils/conf/opensrf.xml</filename>. </para> 			
				<procedure>
					<step>
						<para>Open the file <filename>/openils/conf/opensrf.xml</filename> with your favorite text editor</para>
						<para>Locate this section of the configuration file:</para>

<programlisting><![CDATA[
<notify_hold>
<email>true</email> <!-- set to true for hold notice emails -->
</notify_hold>
]]>
</programlisting>		
		

						<para>Ensure that &lt;email&gt; is set to <emphasis role="bold">true</emphasis>.</para>
					</step>
					<step>
						<para>Locate the following section of the configuration file:</para>
<programlisting> <![CDATA[
...
<email_notify> 
            <!-- global email notification settings -->
            <template>/openils/var/data/hold_notification_template.example</template>
...
]]>
</programlisting>
						<para>Point the &lt;template&gt; variable to the hold notification template you will be using for hold notifications.</para>
					</step>
					<step>
						<para>Locate the template and edit as desired. Use the example template provided as a guide.</para>
					</step>
				</procedure>
			</simplesect>	
		</section> 
		<section xml:id="overedueandpreduenotifications">
			<title>Overdue and Predue Notifications</title> 
			<para>Overdue and Predue email notifications can be used to inform users that they have materials which are overdue or to warn them that materials are almost overdue.</para>  
			<simplesect>			
				<title>Activating the Existing Overdue Action Triggers</title> 
				<indexterm><primary>notifications</primary><secondary>overdue</secondary><tertiary>activating action triggers</tertiary></indexterm>
				<para>The easiest way to set up overdue notifications is to use the <link linkend="actiontriggers">Action Trigger</link> mechanism introduced in Evergreen 1.6.</para> 			
				<procedure>
				<step>
				<para>From the staff client menu, Click on
					<menuchoice>
						<guimenu>Admin</guimenu>  
						<guisubmenu>Local Administration</guisubmenu>
  						<guisubmenu>Notifications / Action triggers</guisubmenu>
					</menuchoice>
				</para>
				</step>

				<step>
					<para>Locate the Action Trigger Definition you wish to activate. There are several overdue notices preloaded wit Evergreen 1.6.</para>
				</step>
				<step>
					<para>Double click on the item row to open the editing page, but <emphasis role="bold">not</emphasis> on the hyperlinked <guilabel>Name</guilabel></para>
				</step>
				<step>
					<para>Check the <guilabel>Enabled</guilabel> check box to enable it.</para>
				</step>
				<step>
					<para>Edit the <guilabel>Template</guilabel> text box to customize the body of the email as needed. Note that text between <quote>[% %]</quote> are variables to be 
					generated by the system. For example, <varname>[% user.family_name %]</varname> with be replaced by the family name of the user receiving a notice.</para>
				</step>
				<step>
					<para>Click <guibutton>Save</guibutton> to save your changes.</para>
				</step>
				<step>
					<para>Overdue notices are now activated and will be processed the next time action triggers are processed. See <xref linkend="ProcessingActionTriggers" /> for 
					more details on processing action triggers.</para>
				</step>
				</procedure>
			</simplesect>	
			<simplesect>			
				<title>Creating Overdue and Predue Notifications by Cloning Existing Action Triggers</title> 
				<indexterm><primary>notifications</primary><secondary>overdue</secondary><tertiary>creating using action triggers</tertiary></indexterm>
				<indexterm><primary>notifications</primary><secondary>predue</secondary><tertiary>creating using action triggers</tertiary></indexterm>
				<para>If you wish to add overdue notices for different periods of time or wish to create a predue notice simply clone an existing overdue note, give it a 
				unique <guilabel>Name</guilabel>, customize as needed. and save.</para>
 				<para>There are no pre-existing predue notices so they will need to be created by cloning an existing overdue notice. 
				To make them predue notices, use a negative value in the <guilabel>Processing Delay Context Field</guilabel>. For example, to create a predue notice the day before the 
				due date, use the value <emphasis>-1 days</emphasis>.</para> 			
			</simplesect>
			<simplesect>			
				<title>Creating Overdue and Predue Notices using the Evergreen Configuration File</title>
				<indexterm><primary>notifications</primary><secondary>overdue</secondary><tertiary>creating using the configuration file</tertiary></indexterm>
				<indexterm><primary>notifications</primary><secondary>predue</secondary><tertiary>creating using the configuration file</tertiary></indexterm> 
				<para>It is also possible to create overdue and predue notices using the Evergreen configuration file <filename>/openils/conf/opensrf.xml</filename></para> 	
				<procedure>
				<step>
					<para>Open <filename>/openils/conf/opensrf.xml</filename> with your favorite text editor.</para>
					<para>Locate this section of the configuration file:</para>

<programlisting><![CDATA[
<overdue>
...
            <notice>
                <!-- Notify at 7 days overdue -->
                <notify_interval>7 days</notify_interval>
                <!-- Options include always, noemail, and never.  'noemail' means a notice
                     will be appended to the notice file only if the patron has no 
		     valid email address.  -->
                <file_append>noemail</file_append>
                <!-- do we attempt email notification? -->
                <email_notify>true</email_notify>
                <!-- notice template file -->
                <email_template>
			/openils/var/data/templates/overdue_7day.example
		</email_template>
            </notice>
        </overdue>
<!-- Courtesy notices -->
        <predue>
            <notice>
                <!-- All circulations that circulate between 5 and 13 days -->
                <circ_duration_range>
                    <from>3 days</from>
                    <to>13 days</to>
                </circ_duration_range>
                <!-- notify at 1 day before the due date -->
                <notify_interval>1 day</notify_interval>
                <file_append>false</file_append>
                <email_notify>true</email_notify>
                <email_template>
			/openils/var/data/templates/predue_1day.example
		</email_template>
            </notice>
        </predue>
...
]]>
</programlisting>				
					</step>
					<step>
						<para>From this section of the configuration file, you may:</para>
						<itemizedlist>
							<listitem>Point to the template file for the specific notice: &lt;email_template&gt;</listitem>
							<listitem>Set the interval time for the specific notice: &lt;notify_interval&gt;</listitem>
							<listitem>Indicate whether to attempt email notification for the notice: &lt;email_notify&gt;</listitem>
							<listitem>For predue notices, you may also specify on which circulation ranges to activate the courtesy notice: 
							&lt;circ_duration_range&gt;</listitem>
						</itemizedlist>
					</step>
					<step>
						<para>Locate the templates and edit as desired. Use the example templates provided as guides.</para>
					</step>
					<step>
						<para>From the configuration file you may also set the default email sender address. However, this is just the default and the email sender 
						address for specific organizational units can be specified in the <link linkend="lsa-library-settings">library settings editor</link> 
						from the staff client.</para>
					</step>
				</procedure>
				<note><para>You also need to set the email server from the configuration file. By default, it uses the <systemitem class="domainname">localhost</systemitem>.</para></note> 
			</simplesect>
		</section>
	</section>
</chapter>
